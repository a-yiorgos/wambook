%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: main.dvi
%%Pages: 144
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Roman Courier Times-Italic Helvetica
%%EndComments
%DVIPSCommandLine: dvips -o main.ps main
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1999.02.18:1332
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginFont: Times-Bold
% @psencodingfile{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "14 April 1995",
%   filename = "8r.enc",
%   email = "kb@cs.umb.edu",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "xx",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% }
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 (main.dvi)
@start /Fa 2 44 df<150CA3151EA3153FA24B7EA24B7E15F302017F15E102037F9138
07C0F8A291380F807C4A487EA2023E7F4A6D7E4A6D7E49486D7E010381010781010F8101
3F15FF017F82D801FDEDEFE0D803F9EDE7F0D80FF1EDE3FCD83FC1EDE0FFD87F81EE7F80
D8FF01EE3FC000FC170F00F017030040EF008000001800B3B3B001005DA23A5C7EC73F>
42 D<02F0EB03C0A2010181B3B3B00040188000F0EF03C000FC170F00FF173FD87F81EE
7F80D83FC1EEFF00D80FF1EDE3FCD803F9EDE7F0D801FDEDEFE0D8007FEDFF80013F93C7
FC010F15FC01075D01035D01015D6D6C495A027C495A6E49C8FC021E131E021F133E6E6C
5A6E6C5AA2913803E1F002015B15F302005B15FF6F5AA26FC9FCA2151EA3150CA33A5C7E
C73F>I E /Fb 5 105 df<14021406140CA21418A21430A21460A214C0A2EB0180A2EB03
00A21306A25BA25BA25BA25BA25BA2485AA248C7FCA21206A25AA25AA25AA25AA25A1240
172C81AA15>1 D<EE01E0167F92381FFE00913807FF80902601FFE0C7FCD97FF8C8FCD8
1FFEC9FCEAFF8000E0CAFC2B0980872A>40 D<7E12F012FCB4FC13E013FEA213E0130012
FC12F012800F0C67852A>45 D<7E7E12607E7E7E7E7E6C7E6C7E13607F7F7F7F7F6D7E6D
7E146080808080806E7E6E7E156081818181816F7E6F7E16608282828282EE0180EE00C0
176017202B2C80AA2A>64 D<12E0B47EEA1FFE38007FF8903801FFE090390007FF809138
001FFE9238007FE016012B0980872A>104 D E /Fc 139[14 1[18
1[23 21 23 35 12 2[12 23 2[18 1[18 1[21 12[28 84[{
TeXBase1Encoding ReEncodeFont}13 41.666668 /Times-Bold
rf /Fd 18 120 df<EA07FCEA1FFF383F0F80EB07C0EB03E0A2120C1200137FEA07FBEA
1F03123C127C12F8A3EAFC05EA7E0D383FF8FE380FE07E17147F9319>97
D<B4FCA2121FAAEB1FC0EB7FF0EBE0F8EB807CEB007E143EA2143FA6143EA2147C138038
1EC1F8381C7FE038181F8018207E9F1D>I<EA01FE3807FF80381F0FC0123EA2127CEB03
0000FCC7FCA6127C127E003E1360003F13C0EA1F813807FF00EA01FC13147E9317>I<EB
07F8A21300AAEA01F8EA0FFEEA1F83EA3E01EA7E00127CA212FCA6127CA2127EEA3E01EA
1F07380FFEFFEA03F818207E9F1D>I<EA01FE3807FF80380F83C0381E01E0383E00F05A
14F812FCB5FCA200FCC7FCA3127CA26C1318121E380F80703807FFE0C6138015147F9318
>I<EB1F80EBFFC03801F3E0EA03E713C71207EBC3C0EBC000A5EAFFFCA2EA07C0B0EA3F
FCA213207F9F10>I<3801FC3C3807FFFE380F079E381E03DE003E13E0A5001E13C0380F
0780EBFF00EA09FC0018C7FCA2121C381FFF806C13F06C13F8001F13FC383C007C007013
3E00F0131EA30078133CA2383F01F8380FFFE000011300171E7F931A>I<B4FCA2121FAA
EB0FC0EB3FE0EB61F0EBC0F813801300AD38FFE3FFA218207D9F1D>I<121C123E127FA3
123E121CC7FCA6B4FCA2121FB0EAFFE0A20B217EA00E>I<B4FCA2121FB3AAEAFFE0A20B
207E9F0E>108 D<38FE0FC0EB3FE0381E61F0EBC0F81380EA1F00AD38FFE3FFA218147D
931D>110 D<48B4FC000713C0381F83F0383E00F8A248137CA200FC137EA6007C137CA2
6C13F8A2381F83F03807FFC00001130017147F931A>I<38FF1FC0EB7FF0381FE1F8EB80
FCEB007EA2143E143FA6143E147E147CEB80FCEBC1F8EB7FE0EB1F8090C7FCA7EAFFE0A2
181D7E931D>I<EAFE3EEB7F80381ECFC0138FA2121FEB030090C7FCABEAFFF0A212147E
9316>114 D<EA0FE6EA3FFEEA701EEA600EEAE006A2EAF800EAFFC0EA7FF8EA3FFCEA1F
FE1203EA001FEAC007A212E0EAF006EAF81EEAFFFCEAC7F010147E9315>I<EA0180A312
03A31207120F123FEAFFFCA2EA0F80AA1386A5EA07CCEA03F8EA01F00F1D7F9C14>I<38
FF07F8A2EA1F00AD1301A2EA0F063807FCFF6C5A18147D931D>I<3AFFE7FE1FE0A23A1F
00F0030014F8D80F801306A23907C1BC0CA214BE3903E31E18A23901F60F30A215B03900
FC07E0A290387803C0A3903830018023147F9326>119 D E /Fe
25 123 df<EC3FE0ECE01090380180380103137814004913301500A3130EA390B512E0EB
0E0090381C01C0A4EC03801338A3EC0700A213701510EC0E20A313E0EC0640EC038091C7
FC5B1201A2EA3180127948C8FC1262123C1D29829F1A>12 D<EBF180380389C038070780
EA0E03121C123C383807001278A3EAF00EA31420EB1C40A2EA703C135C38308C80380F07
0013147C9317>97 D<EA0780123FEA0700A4120EA45AA213F0EA1D0CEA3A0E123CEA380F
A21270A4EAE01EA3131C133C1338EA607013E0EA31C0EA1F0010207B9F15>I<137EEA01
C138030080EA0E07121E001C1300EA3C0248C7FCA35AA5EA70011302EA3004EA1838EA07
C011147C9315>I<1478EB03F8EB0070A414E0A4EB01C0A213F1EA038938070780EA0E03
121C123C383807001278A3EAF00EA31420EB1C40A2EA703C135C38308C80380F07001520
7C9F17>I<137CEA01C2EA0701120E121C123CEA3802EA780CEA7BF0EA7C0012F0A41270
13011302EA3804EA1838EA07C010147C9315>I<1478EB019CEB033CA2EB07181400A213
0EA53801FFE038001C00A45BA55BA65BA45B1201A25B1231007BC7FC12F31266123C1629
829F0E>I<EB3C60EBE2703801C1E0EA0380EA07005A380E01C0121EA3383C0380A4EB07
00A2EA1C0F1317EA0C2EEA03CEEA000EA25BA21230EA7838485AEA60E0EA3F80141D7E93
15>I<EA01E0120FEA01C0A4485AA448C7FCA2131E1363380E8180380F01C0120EA2381C
0380A438380700A3EB0E1000701320130C131CEB0C4000E013C03860070014207D9F17>
I<13C0EA01E0A213C0C7FCA7120E12331223EA4380130012471287120EA35AA3EA384013
8012301270EA31001233121C0B1F7C9E0E>I<EA01E0120FEA01C0A4485AA448C7FCA2EB
03C0EB0420380E08E013111321EB40C0381C8000001DC7FC121EEA1FC0EA38E01370A2EB
384038707080A3EB310012E0EA601E13207D9F15>107 D<EA03C0121FEA0380A4EA0700
A4120EA45AA45AA45AA3127112E2A4126412380A207C9F0C>I<391C0F80F0392630C318
394740640C903880680EEB0070A2008E495A120EA34848485AA3ED70803A380380710015
6115E115623970070066D83003133821147C9325>I<381C0F80382630C0384740601380
EB0070A2008E13E0120EA3381C01C0A3EB03840038138814081307EB0310007013303830
01C016147C931A>I<137CEA01C338030180000E13C0121E001C13E0123C1278A338F003
C0A3EB07801400EA700F130EEA3018EA1870EA07C013147C9317>I<3801C1E038026218
3804741C1378EB701EA2EA08E01200A33801C03CA3143838038078147014E0EBC1C03807
2380EB1E0090C7FCA2120EA45AA2EAFFC0171D809317>I<EA1C1EEA2661384783801387
1307EB0300008EC7FC120EA35AA45AA45A123011147C9313>114
D<13FCEA0302EA0601EA0C03130713061300EA0F8013F0EA07F8EA03FCEA003E130E1270
EAF00CA2EAE008EA4010EA2060EA1F8010147D9313>I<EA018013C0EA0380A4EA0700A2
EAFFF0EA0700120EA45AA45AA31320EA7040A21380A2EA3100121E0C1C7C9B0F>I<000E
13C0003313E0382301C0EA43811301124738870380120EA3381C0700A31410EB0E201218
A2EA1C1E380C26403807C38014147C9318>I<380E0380EA3307002313C0EA43831301EA
470000871380120EA3381C0100A31302A25BA25BEA0E30EA03C012147C9315>I<000EEB
C1C0003313E3392301C3E0384381C1EB01C0004714603987038040120EA3391C070080A3
EC0100A2EB0602130F000C5B380E13083803E1F01B147C931E>I<38038380380CC44038
1068E013711220EB70C03840E0001200A3485AA314403863808012F3EB810012E5EA84C6
EA787813147D9315>I<000E13C0003313E0382301C0EA43811301124738870380120EA3
381C0700A4130E1218A2EA1C1EEA0C3CEA07DCEA001CA25B12F05BEAE060485AEA438000
3EC7FC131D7C9316>I<3801C0403803E080EA07F1380C1F00EA0802C65A5B5B5B5B5B48
C7FC1202485AEA08021210EA3E0CEA63FCEA41F8EA80E012147D9313>I
E /Ff 134[23 23 1[23 25 13 23 15 1[25 25 25 38 10 2[10
25 25 13 25 25 23 1[25 11[33 1[30 33 1[30 6[13 1[35 1[30
1[33 1[30 6[13 58[{TeXBase1Encoding ReEncodeFont}30 45.624989
/Helvetica rf /Fg 2 115 df<EA01E0EA0718EA0C0C12181238EA300E1270A2EAE01C
A31318133813301360EA60C0EA3180EA1E000F127B9115>111 D<EA3C3CEA26C2EA4687
EA4707EA8E061300120EA25AA45AA45A123010127C9112>114 D
E /Fh 6 111 df<1318137813F0EA01E0EA03C0EA0780EA0F005A121E123E123C127CA2
127812F8B3A50D25707E25>56 D<12F8B3A51278127CA2123C123E121E121F7EEA0780EA
03C0EA01E0EA00F0137813180D25708025>58 D<137CB3A613F8A313F0120113E0120313
C0EA07801300120E5A5A12F012C012F012387E7E7E1380EA03C013E0120113F0120013F8
A3137CB3A60E4D798025>60 D<12F8AE050E708025>62 D<00E0141CB3AD00701438A26C
1470A26C14E0001E1301390F8007C03907E01F803901FFFE0038007FF8EB1FE01E2A7E7F
23>83 D<14E01303EB0F80EB1E005B1370A25BB3A5485AA2485A48C7FC120E123C12F0A2
123C120E7E6C7E6C7EA26C7EB3A51370A2133C7FEB0F80EB03E01300134A7C811C>110
D E /Fi 1 51 df<121FEA60C01360EAF07013301260EA0070A2136013C012011380EA02
005AEA08101210EA2020EA7FE012FF0C137E9211>50 D E /Fj 139[43
43 13[43 101[{TeXBase1Encoding ReEncodeFont}3 72.000000
/Courier rf /Fk 3 49 df<B512F0A214027D881B>0 D<12C012F01238120E6C7EEA01
E0EA0078131C1307EB03C0EB00F0A2EB01C0EB0700131E1378EA01E0EA0380000EC7FC12
3C127012C0C8FCA6387FFFE0B512F0141E7D951B>21 D<1206120FA2120E121EA2121C12
3C1238A212301270A2126012E012C0124008117F910A>48 D E /Fl
9 94 df<EA03C0EA0C30EA1818EA300CA2EA700EEA6006A2EAE007ADEA6006A2EA700EEA
300CA2EA1818EA0C30EA07E0101D7E9B15>48 D<12035A123F12C71207B3A4EA0F80EAFF
F80D1C7C9B15>I<EA07C0EA1830EA201CEA400C130EEAF00F12F81307A21270EA000F13
0EA2131CA213381370136013C0EA0180EA0300EA0601120C1218EA1002EA3FFE127F12FF
101C7E9B15>I<EA07E0EA1830EA201CA2EA781E130E131E1238EA001CA2131813301360
EA07E0EA0030131CA2130E130FA2127012F8A3EAF00EEA401C1220EA1830EA07E0101D7E
9B15>I<130CA2131C133CA2135C13DC139CEA011C120312021204120C12081210123012
20124012C0B512C038001C00A73801FFC0121C7F9B15>I<13F0EA030CEA0604EA0C0EEA
181E1230130CEA7000A21260EAE3E0EAE430EAE818EAF00C130EEAE0061307A51260A2EA
7006EA300E130CEA1818EA0C30EA03E0101D7E9B15>54 D<007FB512C0B612E0C9FCA8B6
12E06C14C01B0C7E8F20>61 D<12FEA212C0B3B312FEA207297C9E0C>91
D<12FEA21206B3B312FEA20729809E0C>93 D E /Fm 7 111 df<126012F0A212600404
7C830C>58 D<126012F0A212701210A41220A212401280040C7C830C>I<130113031306
A3130CA31318A31330A31360A213C0A3EA0180A3EA0300A31206A25AA35AA35AA35AA35A
A210297E9E15>61 D<3A01FFC0FF803A001E003C001530010E1320010F5B6D5B4AC7FC14
82EB038414C8EB01D014F06D5AA280EB01701302497E1308EB103CEB201CEB401EEB800E
12013803000F00067F001E497E39FF803FF0211C7F9B22>88 D<39FFE007F8390F0001E0
15806C140014026D5A00035B6D5A0001133014206D5A00005B01F1C7FC13721376137C13
38A25BA45BA4485AEA1FFC1D1C7F9B18>I<EA01C01203A2EA0180C7FCA6121C12271247
A21287A2120EA25AA35A1380A21270EA71001232121C0A1C7E9B0E>105
D<EA381F384E6180384681C0EA4701128F128E120EA2381C0380A3EB070000381310A213
0E1420387006403830038014127E9119>110 D E /Fn 134[25 2[25
25 25 25 25 1[25 1[25 25 25 2[25 2[25 25 2[25 25 3[25
1[25 1[25 25 3[25 25 25 1[25 25 3[25 2[25 2[25 25 25
25 25 65[{TeXBase1Encoding ReEncodeFont}31 41.666668
/Courier rf /Fo 14 123 df<EBF8C0EA0185EA0705380E0380A2121C123C3838070012
78A3EAF00EA31410EB1C201270133C38305C40138C380F078014157B9419>97
D<EA03C0EA3F801203A3EA0700A4120EA45A13F8EA1D0CEA1E0EEA3C06EA3807A2130F12
70A4EAE01EA3133C1338A2EA607013E0EA31C0EA1F0010237BA216>I<137EEA01C13803
0180EA0703EA0E07121C003CC7FC12381278A35AA45B12701302EA300CEA1830EA0FC011
157B9416>I<13F8EA0384EA0E02121C123C1238EA7804EAF018EAFFE0EAF000A25AA413
02A2EA6004EA7018EA3060EA0F800F157A9416>101 D<13C0EA01E013C0A2C7FCA8121C
12231243A25AA3120EA25AA35AA21340EA7080A3EA71001232121C0B217BA00F>105
D<13F0EA0FE01200A3485AA4485AA448C7FCEB01E0EB0210EB0C70380E10F0A2EB2060EB
4000EA1D80001EC7FCEA1FC0EA1C70487EA27F142038703840A3EB188012E038600F0014
237DA216>107 D<EA01E0EA1FC01201A3EA0380A4EA0700A4120EA45AA45AA45AA31271
12E2A4126412380B237CA20C>I<EA1C0F382631C0EA4740388780E0A21300A2380E01C0
A4381C0380A3EB070400381308130E1410130600701320383003C016157B941B>110
D<137EEA01C338038180380701C0120E001C13E0123C12381278A338F003C0A214801307
00701300130E130CEA3018EA1870EA07C013157B9419>I<EA1C1F38262080384741C0EA
87831303EB018090C7FC120EA45AA45AA45A123012157B9415>114
D<13FCEA018338020080EA0401EA0C03140090C7FC120F13F0EA07FC6C7EEA003E130F7F
1270EAF006A2EAE004EA4008EA2030EA1FC011157D9414>I<13C01201A4EA0380A4EA07
00EAFFF8EA0700A2120EA45AA45AA31310EA7020A213401380EA3100121E0D1F7C9E10>
I<001E1360002313E0EA4380EB81C01283EA8701A238070380120EA3381C0700A31408EB
0E101218121CEB1E20EA0C263807C3C015157B941A>I<3801E0203803F0603807F8C038
041F80380801001302C65A5B5B5B5B5B48C7FC120248138038080100485AEA3F06EA61FC
EA40F8EA807013157D9414>122 D E /Fp 15 107 df<B612C0A21A027C8B23>0
D<127012F8A3127005057C8D0D>I<B612F07EC9FCA7B612F0A2C9FCA7007FB512F0B6FC
1C147D9423>17 D<5A1202A25A5A5A5AB712F8A20020C9FC7E7E7E7EA27E25107C922D>
32 D<140CA21418A21430A21460A214C0A2EB0180A3EB0300A21306A25BA25BA25BA25B
A25BA2485AA248C7FCA21206A35AA25AA25AA25AA25A1240162C7AA000>54
D<B512FEA2C71206AA170C7D8F1E>58 D<EC1F80147FEC87C0EB0307EB0603130E011C13
80150049C7FCA213781370A213F05BA21201A25BA212035BA2120790C8FCA2000E146015
E0391FF001C001FE13803930FFC30038601FFC38C003F81B217F9F1F>76
D<143002F01401170317070101150F6E140E171E0278143E177E010215FEEE01DE027C14
9CEE031CD9043CEB063C160C023E131C01081438021E137016600110ECC03891381F0180
9238030078496C5A158E159C90384007F85D496C5A00015C3961000180007F90C8127C00
7E167F48163C007C160030227F9F37>I<13101338A2136CA313C6A2EA0183A338030180
A2380600C0A3481360A2481330A3481318A248130CA34813061402171C7D9A1E>94
D<00C0130214060060130CA36C1318A26C1330A36C1360A26C13C0A338030180A2380183
00A3EA00C6A2136CA31338A21310171C7D9A1E>I<130F1338136013E0EA01C0AFEA0380
EA0700121E12F8121E1207EA0380EA01C0AFEA00E013601338130F102D7DA117>102
D<12F8121E1207EA0380EA01C0AFEA00E013601338130F1338136013E0EA01C0AFEA0380
EA0700121E12F8102D7DA117>I<134013C0EA0180A3EA0300A31206A35AA25AA35AA35A
A35AA21260A37EA37EA37EA27EA37EA3EA0180A3EA00C013400A2E7CA112>I<12C0A212
60A37EA37EA37EA27EA37EA3EA0180A3EA00C0A2EA0180A3EA0300A31206A35AA25AA35A
A35AA35AA20A2E7DA112>I<12C0B3B3A9022D7BA10D>I E /Fq 135[23
33 1[25 15 18 20 1[25 23 25 1[13 2[13 25 23 15 20 25
20 25 23 27[30 11[23 23 23 23 23 23 23 23 23 2[11 46[{
TeXBase1Encoding ReEncodeFont}30 45.624989 /Times-Bold
rf /Fr 2 111 df<1204120C1200A5127012581298A21230A212601264A2126812300612
7E910B>105 D<EA71F0EA9A18129C12981218EA3030A213321362EA606413380F0B7E8A
13>110 D E /Fs 1 50 df<120C123C12CC120CACEAFF8009107E8F0F>49
D E /Ft 1 77 df<ED03FCED0FFEED3FFF92B5FCEC03C1DA0780138091380F007F141E02
3E14004A7F163E4A13381660494890C7FCA2495AA213075C130FA3495AA391C9FC5BA313
7EA45BA25BA212015B0003166049EC01E0EE03C048481407D9FFC0130F4801FC14804890
39FF801F00EDF81ED83C1FEBFFF8D878015C26F0003F13C000C0010390C7FC2B337DB131
>76 D E /Fu 35 119 df<127012F8A3127005057C840D>58 D<127012F812FCA2127412
04A31208A21210A212201240060E7C840D>I<EC01C0EC0780EC1E001478EB01E0EB0780
010EC7FC133813F0EA03C0000FC8FC123C12F0A2123C120FEA03C0EA00F01338130E6D7E
EB01E0EB0078141EEC0780EC01C01A1A7C9723>I<13011303A21306A3130CA31318A313
30A31360A313C0A3EA0180A3EA0300A31206A35AA35AA35AA35AA35AA3102D7DA117>I<
12E01278121EEA0780EA01E0EA0078131C1307EB03C0EB00F0143C140FEC03C0A2EC0F00
143C14F0EB03C049C7FC131C1378EA01E0EA0780001EC8FC127812E01A1A7C9723>I<EC
FE02903807818690381C004C49133C136049131C00011418485A48C7FC5A001E1410A248
1400A25AA45AA415801270A2EC01007E140200185B6C13186C1320380381C0D800FEC7FC
1F217E9F21>67 D<90B6FC90380F000E15061502A2131EA4491304EC0400A3495A1418EB
7FF8EB7818EBF010A44848C7FCA4485AA41207EAFFFE201F7E9E1D>70
D<9039FFF9FFF090390F801F00EC001EA3011E5BA4495BA4495BEB7FFFEB7800A249485A
A44848485AA44848485AA40007130F39FFF8FFF8241F7E9E26>72
D<EBFFFCEB0F8091C7FCA3131EA45BA45BA45BA3154048481380A21401150048485AA214
06140E3807803CB512FC1A1F7E9E1F>76 D<9039FF803FF0010FEB0780ED0200EB0BC0A2
01135BEB11E0A3903820F008A214F8147801405B143CA3496C5AA3140FD801005BA2EC07
C0A200025C1403A21206000F6DC7FCEAFFE0241F7E9E25>78 D<90B512C090380F007015
38151C151E131EA449133CA2157815704913E0EC038090387FFE000178C7FC5BA4485AA4
485AA41207EAFFFC1F1F7E9E1D>80 D<90B5128090380F01E0EC00701538153C131EA449
1378A215F0EC01E09038780380EC0F00EB7FF8EB781C497E140F8015803901E00F00A438
03C01E1502A215040007130E39FFFC0718C7EA03E01F207E9E23>82
D<903807E080EB18119038300B00EB600713C000017FEB80021203A391C7FCA27F13F8EB
FF806C7F6C7FEB3FF0130313001470A31220A21460006013E05C130100705BD8E803C7FC
EAC60EEA81F819217D9F1C>I<000FB512FC391E03C03800181418001014081220EB0780
12601240A239800F001000001400A3131EA45BA45BA45BA41201387FFFC01E1F7F9E1B>
I<397FFC1FF83907C003C09038800100A3380F0002A4001E5BA4485BA4485BA4485BA35C
A200705B49C7FCEA3002EA3804EA0C18EA07E01D207C9E1F>I<39FFF801FF390F800078
90C7126015407F00071480A2EC01001402A25C5C13C000035BA25C5CA25C13C191C7FC13
E2120113E413E8A213F0A25B5B12005B20207E9E1B>I<3BFFF03FFC1FF83B0F8007C003
C00100903880018017001602A2020F5B14175E02271318EDC01002435B138002835BEA07
8102035B138203C1C7FC018413C2A2018813C4A2019013C813A015D001C013F05D496C5A
A201005B7E000291C8FC2D207E9E2B>I<9039FFF83FF890390FC00F8091388006000107
13046E5A01035B5D6E5A01015B02F1C7FCEB00F314F614FC1478147CA314BEEB011E1302
EB061F497E01087FEB1007132001407FEB8003D801007F5A000F130739FFE01FFE251F7F
9E26>I<39FFF801FF390F8000781560000714406D1380140100031400EBE0025C00015B
EBF018000013105C6D5AEB7880017DC7FCA27F133CA213381378A3137013F0A4485AEA3F
FF201F7F9E1A>I<90387FFFF89038FC00F09038E001E09038C003C03901800780130048
EB0F000002131E5C485BC712F85C495A495A495A49C7FCA2131E5B4913805B0001EB0100
13E048485A38078002380F0006001E1304003E130C003C133C4813F8B5FC1D1F7D9E1F>
I<EBF180380389C038070780EA0E03121C123C383807001278A3EAF00EA31410EB1C20A2
EA703CEB5C40EA308C380F078014147E9318>97 D<EA0780123FEA0700A4120EA45AA213
F0EA1D0CEA3A0E123CEA380FA21270A4EAE01EA3131C133C1338EA607013E0EA31C0EA1F
0010207E9F14>I<137CEA01C2EA0701EA0E0F121EEA1C0EEA3C04EA7800A35AA5EA7001
1302EA3004EA1838EA0FC010147E9314>I<1478EB03F8EB0070A414E0A4EB01C0A213F1
EA038938070780EA0E03121C123C383807001278A3EAF00EA31410EB1C20A2EA703CEB5C
40EA308C380F078015207E9F18>I<147C14CEEB019E1303140CEB0700A4130EA3EBFFF0
EB0E00A25BA55BA55BA55BA45B1201EA3180127948C7FC1262123C17297E9F16>102
D<EB1E30EB7138EBE0F03801C070EA03801207EB00E05AA3381E01C0A4EB0380A2EA0E07
130B38061700EA01E7EA0007A2130EA21230EA781C485AEA6070EA3FC0151D809316>I<
EA01E0120FEA01C0A4485AA448C7FCA2131FEB6180380E80C0EA0F00000E13E0A2381C01
C0A438380380A3EB070400701308130E1410130600E01320386003C016207E9F1A>I<13
E01201A2EA00C01300A7120E1213EA23801243A3EA87001207A2120EA25AA21320EA3840
A31380EA1900120E0B1F7E9E10>I<381E0780382318C0EBA0603843C0701380A2388700
E01207A3380E01C0A3EB0382001C1384EB07041408130300381310381801E017147E931B
>110 D<3803C1E038046218EB741CEA0878EB701EA2EA10E01200A33801C03CA3143838
038078147014E0EBC1C038072380EB1E0090C7FCA2120EA45AA2EAFFC0171D819317>
112 D<EBF040380388C038070580EA0E03121C123C383807001278A3EAF00EA45BA2EA70
3C135CEA30B8EA0F381200A25BA45BA2EA0FFE121D7E9314>I<EA1E1EEA2321EBC380EA
43C71387EB830048C7FC1207A3120EA45AA45A121811147E9315>I<137CEA0182EA0301
EA060313071306EA0E00EA078013F8EA03FCEA01FEEA001F13071270EAF006A2EAE004EA
4008EA2030EA1FC010147E9315>I<13C013E0EA01C0A4EA0380A2EAFFF8EA0380EA0700
A4120EA45AA31310EA3820A31340EA1880EA0F000D1C7F9B10>I<380F0180381183C000
2113E013C1EA41C03843806000831340EA0700A3000E1380A3EB0100A2EA0C02EA0E04A2
EA0618EA01E013147E9316>118 D E /Fv 12 85 df<EBF8E0EA03FEEA07FFEA0F07EA1E
03EA3C01EA38005AA214005AA8127014E0A27E123C381E01C0EA0F073807FF803803FE00
EA00F8131C7E9B18>67 D<EA7FF8EAFFFE6C7E381C0F80EB03C0A2EB01E01300A214F014
70A814F014E0A2130114C01303EB0F80387FFF00485AEA7FF8141C7F9B18>I<B512F0A3
381C0070A41400A2130EA3EA1FFEA3EA1C0EA390C7FCA21438A5B512F8A3151C7F9B18>
I<B512E0A3EA1C00A41400A2131CA3EA1FFCA3EA1C1CA390C7FCA7EAFFC0A3131C7E9B18
>I<EA7FFFB512806C1300EA01C0B3A4EA7FFFB512806C1300111C7D9B18>73
D<EA7FE012FF127F000EC7FCB11470A5387FFFF0B5FC7E141C7F9B18>76
D<387E07F038FF0FF8387F07F0381D81C0A313C1121CA213E1A313611371A213311339A3
1319A2131D130DA3EA7F07EAFF87EA7F03151C7F9B18>78 D<EA0FF8EA3FFE487EEA780F
EA700700F01380EAE003B0EAF00700701300EA780FEA7FFF6C5AEA0FF8111C7D9B18>I<
EAFFFEEBFF8014C0EA1C03EB01E013001470A514E01301EB03C0EA1FFF1480EBFE00001C
C7FCA8B47EA3141C7F9B18>I<EA7FF8EAFFFE6C7E381C0F80130314C01301A313031480
130F381FFF005BA2EA1C0F7FEB0380A5149CA3387F01F8EAFF81387F00F0161C7F9B18>
82 D<3803F380EA1FFF5AEA7C0FEA7007EAE003A390C7FC12701278123FEA1FF0EA07FE
C67EEB0F80EB03C01301EB00E0A2126012E0130100F013C038F80780B5FCEBFE00EAE7F8
131C7E9B18>I<387FFFF8B5FCA238E07038A400001300B2EA07FFA3151C7F9B18>I
E /Fw 19 94 df<132013401380EA0100120212065AA25AA25AA312701260A312E0AC12
60A312701230A37EA27EA27E12027EEA0080134013200B2E7DA112>40
D<7E12407E7E7E120C7EA27EA2EA0180A313C01200A313E0AC13C0A312011380A3EA0300
A21206A25A12085A5A5A5A0B2E7DA112>I<1306AFB612F0A2D80006C7FCAF1C207D9A23>
43 D<EA03F0EA0E1C487EEA1806EA380738700380A400F013C0AD00701380A3EA780700
381300EA1806EA1C0E6C5AEA03F0121F7E9D17>48 D<EA01801203120F12F31203B3A6EA
07C0EAFFFE0F1E7C9D17>I<EA03F0EA0C1CEA100E487E00401380128000F013C0EAF803
A3EA200712001480A2EB0F00130E5B5B5B13605B485A48C7FC000613405A5A00101380EA
3FFF5AB5FC121E7E9D17>I<EA03F0EA0C1CEA100EEA200F007813801307A2EA380F1200
1400A2130E5B5BEA03F0EA003C130E130FEB0780A214C0122012F8A300F013801240EB0F
00EA200EEA1C3CEA03F0121F7E9D17>I<1306A2130EA2131E132EA2134E138EA2EA010E
1202A212041208A212101220A2124012C0B512F038000E00A7EBFFE0141E7F9D17>I<EA
1803EA1FFE5B5B13E00010C7FCA6EA11F0EA161CEA180EEA10071480EA0003A214C0A312
7012F0A200E013801240EB0700EA2006EA100EEA0C38EA03E0121F7E9D17>I<137CEA01
82EA0701380E0380EA0C07121C3838030090C7FC12781270A2EAF1F0EAF21CEAF406EAF8
07EB0380A200F013C0A51270A214801238EB07001218EA0C0E6C5AEA01F0121F7E9D17>
I<1240387FFFC01480A238400100EA8002A25B485AA25B5BA25BA213C0A212015B1203A4
1207A76CC7FC121F7D9D17>I<EA03F0EA0C0CEA1006EA3003382001801260A312703878
0300123EEA3F06EA1FC8EA0FF0EA03F8487EEA0C7EEA103F38300F80EA6003384001C012
C01300A31480EA600100201300EA1002EA0C0CEA03F0121F7E9D17>I<EA03F0EA0E1848
7E487E13071270EB038012F0A214C0A5EA7007A21238EA180BEA0E13EA03E338000380A3
EB07001230EA7806130EEA700CEA2018EA1070EA0FC0121F7E9D17>I<127012F8A31270
1200AA127012F8A3127005147C930D>I<127012F8A312701200AA127012F012F8A21278
1208A31210A31220A21240051D7C930D>I<007FB512E0B612F0C9FCA8B612F06C14E01C
0C7D9023>61 D<EB1F80EBE070380100080006130600081301A239100F0080392030C040
EB60403940C020200041131CA2D8818013101283A61281EA41C0A20040EB3C203820605C
903830CC4039100F07806CC8FCA2000614700001EB01C03900E01F00EB1FF01C207D9F23
>64 D<12FEA212C0B3B3A512FEA2072D7CA10D>91 D<12FEA21206B3B3A512FEA2072D7F
A10D>93 D E /Fx 5 85 df<B512F8A3381C0038A41400A3130EA3EA1FFEA3EA1C0EA390
C7FCA3141CA5B512FCA3161E7E9D1A>69 D<387FFFFCB5FC7E380E001CA41400A3EB0380
A3EA0FFFA3EA0E03A390C7FCA8EA7FE012FF127F161E7F9D1A>I<EAFFFC13FF1480381C
07C0EB01E0EB00F01470A414F0EB01E0EB07C0381FFF8014001480381C07C01301EB00E0
A514E214E7A338FF807EA21438181E7F9D1A>82 D<3803F1C0EA0FFDEA3FFFEA7C0FEA70
0312E01301A390C7FC12701278123FEA1FF0EA07FEC67EEB0F80EB03C01301EB00E0A212
6012E0A2EB01C012F038FC0780B5FC38EFFE00EAE3F8131E7D9D1A>I<387FFFFEB5FCA2
38E0380EA400001300B3A23803FF80A3171E7F9D1A>I E /Fy 13
111 df<3907F007F80000EB00C001B81380A2139C39011C0100131E130EA238020702A2
EB0382A2380401C4A2EB00E4A2481378A21438A20018131012FE1D177F961C>78
D<3903FE1FE039007807001406EB380C5CEB3C10EB1C20EB1E40EB0E80010FC7FC7FA249
7E1313EB23C0136113C1EB81E0EA010000027F481370121C38FF03FE1B177F961D>88
D<38FF807F381C001C001E1310000E13201440000F1380EA0701EB03001382EA03841388
13D0EA01E05BA4485AA448C7FCEA3FE018177F9614>I<EA0710EA18F0EA307012601360
12C0A3EA80C013C4A212C1EA46C8EA38700E0E7E8D13>97 D<127C1218A45AA4EA6780EA
68C0EA7040EA606012C0A4EA80C0A2EA8180EAC1001246123C0B177E960F>I<EA07C0EA
0C20EA10701220EA60005AA35AA2EAC0101320EA60C0EA3F000C0E7E8D0F>I<133E130C
A41318A4EA0730EA18F0EA30701260136012C0A3EA80C013C4A212C1EA46C8EA38700F17
7E9612>I<EA07C0EA1C20EA301012601320EAFFC0EAC000A41310EA4020EA60C0EA1F00
0C0E7E8D10>I<120313801300C7FCA6121C12241246A25A120C5AA31231A21232A2121C
09177F960C>105 D<1318133813101300A6EA01C0EA0220EA0430A2EA08601200A313C0
A4EA0180A4EA630012E312C612780D1D80960E>I<121F1206A45AA4EA181C1366138EEA
190CEA3200123C123FEA3180EA60C013C4A213C812C013700F177E9612>I<38383C1E38
44C6633847028138460301388E0703EA0C06A21406EA180C1520140C154038301804EC07
801B0E7F8D1F>109 D<EA383CEA44C6EA47021246EA8E06120CA25B1218144013181480
EA3008EB0F00120E7F8D15>I E /Fz 198[15 15 15 15 15 15
15 15 15 15 48[{TeXBase1Encoding ReEncodeFont}10 29.166668
/Times-Roman rf /FA 133[32 36 36 1[36 40 24 28 32 40
40 36 40 60 20 40 1[20 40 36 24 32 40 32 40 36 9[72 52
52 48 40 52 1[44 2[68 48 2[28 56 56 44 48 1[52 48 52
6[24 36 36 36 36 36 36 36 36 36 36 1[18 1[18 4[24 36[40
2[{TeXBase1Encoding ReEncodeFont}56 72.000000 /Times-Bold
rf /FB 87[17 17[25 27[19 22 22 33 22 25 14 19 19 25 25
25 25 36 14 22 1[14 25 25 14 22 25 22 25 25 17 8[41 30
36 28 25 30 1[30 36 33 41 28 33 22 17 36 36 30 30 36
33 30 30 1[25 3[17 17 25 1[25 5[25 25 14 12 17 12 2[17
17 17 5[17 2[17 12[14 13[25 25 2[{TeXBase1Encoding ReEncodeFont}69
50.000000 /Times-Italic rf /FC 20 94 df<B612E038780007007C1300003C14607E
001F14206C14306D13106C7E12037F000114006C7E7F1378137C7F131E131C13085B5B49
13105BA248C7FC000214305A4814605A15E0481307007FB5FCB6FC1C227DA123>6
D<127012F8A71270AC1220A61200A5127012F8A3127005247CA30E>33
D<132013401380EA01005A12061204120CA25AA25AA312701260A312E0AE1260A3127012
30A37EA27EA2120412067E7EEA0080134013200B327CA413>40 D<7E12407E7E12187E12
041206A27EA2EA0180A313C01200A313E0AE13C0A312011380A3EA0300A21206A2120412
0C5A12105A5A5A0B327DA413>I<497EB0B612FEA23900018000B01F227D9C26>43
D<EA01F0EA071CEA0C06487E00381380A2387001C0A400F013E0AE007013C0A3EA780300
381380A2381C0700EA0C06EA071CEA01F013227EA018>48 D<13801203120F12F31203B3
A9EA07C0EAFFFE0F217CA018>I<EA03F0EA0C1CEA100700201380384003C0A2008013E0
12F0EAF801A3EA2003120014C0A2EB07801400130E5B13185B5B5B485A90C7FC00021320
5A5A00181360481340383FFFC05AB5FC13217EA018>I<EA03F8EA0C1EEA100700201380
004013C0127813031307123800001380A214005B130E1338EA03F0EA001C130FEB0780A2
EB03C0A214E01220127012F8A200F013C01240EB0780122038100F00EA0C1CEA03F01322
7EA018>I<13021306130EA2131EA2132E134EA2138EA2EA010E1202A21204A212081210
A21220A212401280B512F838000E00A7131F3801FFF015217FA018>I<00101380381E07
00EA1FFF5B13F8EA13E00010C7FCA613F8EA130EEA1407381803801210380001C0A214E0
A4127012F0A200E013C01280EA4003148038200700EA1006EA0C1CEA03F013227EA018>
I<137EEA01C138030080380601C0EA0E03121C381801800038C7FCA212781270A2EAF0F8
EAF30CEAF4067F00F81380EB01C012F014E0A51270A3003813C0A238180380001C1300EA
0C06EA070CEA01F013227EA018>I<12401260387FFFE014C0A23840008038C001001280
1302A2485A5BA25B133013201360A313E05BA21201A41203A86C5A13237DA118>I<EA01
F8EA060EEA0803381001801220EB00C01260A3127038780180003E1300EA3F02EA1FC4EA
0FF812037FEA067F38083F80EA100F383007C0EA6001EB00E05A1460A40060134014C06C
138038180300EA0E0EEA03F013227EA018>I<127012F8A312701200AB127012F8A31270
05157C940E>58 D<127012F8A312701200AB127012F8A312781208A41210A312201240A2
051F7C940E>I<B612FEA2C9FCA8B612FEA21F0C7D9126>61 D<EB0FE0EB701CEB800239
030001800004EB0040481420A2391007C0103920183008EB300839406004049038C00784
0041130300811482EA8380A7EA81C0124100401307016013843820300B90381831883910
07C0F06CC8FCA27E0003140EC66C137890387007C090380FFC001F237DA226>64
D<12FEA212C0B3B3A912FEA207317BA40E>91 D<12FEA21206B3B3A912FEA207317FA40E
>93 D E /FD 44 127 df<130FEB3180EB60C013E03801C0E013801203EA0700A25A120E
121EA2EA1C01123CA3387FFFC0EA7803A33870078012F014005B130EA2485A12605BEA70
305BEA30C0EA1180000FC7FC13237EA217>18 D<EB0F80EB18E0EB707013E0EBC038EA01
8000031378A2EA0700A3000E13F0A3EB01E0001C13C0A2381E0380EB0700EA390CEA38F0
90C7FCA25AA45AA45A15207E9419>26 D<90387FFF8048B5FC5A390783C000EA0E01486C
7E5AA25AA348485AA3495A91C7FCEA6007130EEA3018EA1870EA07C019157E941C>I<12
7012F8A3127005057C840E>58 D<127012F812FCA212741204A41208A21210A212201240
060F7C840E>I<15181578EC01E0EC0780EC1E001478EB03E0EB0F80013CC7FC13F0EA03
C0000FC8FC123C12F0A2123C120FEA03C0EA00F0133CEB0F80EB03E0EB0078141EEC0780
EC01E0EC007815181D1C7C9926>I<14801301A2EB0300A31306A35BA35BA35BA35BA35B
A3485AA448C7FCA31206A35AA35AA35AA35AA35AA311317DA418>I<12C012F0123C120F
EA03C0EA00F0133EEB0F80EB01E0EB0078141EEC0780EC01E0EC0078A2EC01E0EC0780EC
1E001478EB01E0EB0F80013EC7FC13F0EA03C0000FC8FC123C12F012C01D1C7C9926>I<
027F138090390380810090380E00630138132749131F49130E485A485A48C7FC48140412
0E121E5A5D4891C7FCA35AA55A1520A25DA26C5C12704AC7FC6C130200185B001C5B0006
1330380381C0D800FEC8FC21247DA223>67 D<017FB512C090380780031500A249C7FCA2
1680A2131EA2158016004948C7FCA25C5CEB7FFEEB7806A3EBF004A25DEC0002485AA25D
150C4848130815185D15700007EB03F0B65A22227EA124>69 D<017FB512C09038078003
1500A249C7FCA21680A2131EA2158016004948C7FCA25C5CEB7FFEEB7806A3EBF004A391
C8FC485AA4485AA41207EAFFFE22227EA120>I<90397FFC1FFF9039078001E0A390390F
0003C0A4011EEB0780A449EB0F00A490387FFFFE903878001EA3495BA448485BA448485B
A40007130139FFFC3FFF28227EA128>72 D<EB7FFEEB07C05CA249C7FCA4131EA45BA45B
A45BA21510A248481320A21540A2484813C01580140114070007EB1F00B6FC1C227EA121
>76 D<90397FC003FF0107EB00781660D905E0132001091440A2EB08F0A2496C13801478
A2800120EB0100143E141EA29038400F02A3EC07820180138415C41403A239010001E8A2
15F8140000025C1570A21206000F1420EAFFE028227EA127>78 D<90387FFFF090380780
1C150F8190390F000380A4011E1307A3ED0F005B151E5D157049485AD97FFFC7FC0178C8
FCA25BA4485AA4485AA41207EAFFFC21227EA11F>80 D<90387FFFE0903807803C150E81
D90F001380150316C0A2011EEB0780A3ED0F0049131E5D1570EC01C0D97FFEC7FC903878
0780EC01C081496C7EA44848485AA44848485A1640A20201138012073AFFFC00E300C812
3C22237EA125>82 D<903803F01090380E0C20903818026090382001E0EB400001C013C0
5B1201A200031480A21500A27FEA01F013FE3800FFE06D7EEB1FF8EB01FCEB003C141C80
A30020130CA3140800601318141000705B5C00C85BD8C603C7FCEA81FC1C247DA21E>I<
001FB512FE391E01E00E001814061230382003C0A200401404A2EB07801280A200001400
49C7FCA4131EA45BA45BA45BA41201B512C01F227EA11D>I<3A3FFE01FF803A03C0003C
001530151048485BA448C75AA4001E5CA44849C7FCA4481302A400705B12F05C12705C5C
6C5B5C6C48C8FCEA0606EA01F821237DA121>I<D8FFF8EB7FC0D80F80EB0F0090C7120C
15085D7F00075C156015405DA24AC7FC140213C000035B140C14085CA25C6D5AA200015B
13E191C8FC13E2A213E413F812005B5BA25BA222237DA11C>I<3BFFF03FFC03FF3B1F80
07E000786C486C481360A217401780A20207EB0100A2020B1302A202135B02235BA20243
5B018013E0000701815BA2D981015B018314C001825C018401E1C7FCA2018813E2A20190
13E4A201A013E801C013F0A201805B120390C75AA200025C30237DA12E>I<90397FFC03
FF903907E000F84A13E0010314809138E0010001011302ECF0065D01005BECF810EC7820
EC7C405D023DC7FC143E141E141FA2142FEC6F8014C790380187C01403130201047FEB08
0101107FEB2000497F5B0001147848C7127CD80F8013FC3AFFE007FFC028227FA128>I<
D8FFF8EB3FE0D80F80EB0F00150C150800075C6D5B5D00035CEBE001000149C7FC14026D
5A00005B5C6D5AEB7840EB7CC05C013DC8FC133E133CA45BA45BA41201EA3FFF23227EA1
1C>I<90387FFFFE90387E001E0170133C4913784913F090388001E000011303010013C0
EC07800002EB0F00141EC75A147C14785C495A495A495A130F91C7FC131E4913205B4913
4012015B48481380485A380F0001001EEB03005C485B48137EB512FE1F227DA121>I<EB
78603801C4E0EA0302380601C0120E121C123C383803801278A338F00700A31408EB0E10
1270131E38302620EA18C6380F01C015157E941A>97 D<EA03C0EA3F801203A348C7FCA4
120EA45A1378EA1D8EEA1E07123C38380380A213071270A438E00F00A3131E131C12605B
6C5A13C0000FC7FC11237DA215>I<133FEBE080380380C0EA0701EA0E03121C003CC7FC
A25AA35AA400701340A23830018038380200EA1C1CEA07E012157E9415>I<141EEB01FC
EB001CA31438A41470A414E01378EA01C4EA0302380601C0120E121C123C383803801278
A338F00700A31408EB0E101270131E38302620EA18C6380F01C017237EA219>I<137CEA
0382EA0701120E121C1238EA7802EA7004EAFFF800F0C7FCA25AA41480A238700300EA30
04EA1838EA0FC011157D9417>I<141EEC638014C71301ECC30014801303A449C7FCA4EB
FFF8010EC7FCA65BA55BA55BA4136013E0A35B1270EAF18090C8FC1262123C192D7EA218
>I<EB0F0CEB389CEB605CEBC0381201EA03801207EB00705AA3001E13E0A4EB01C0120E
1303EA060538031B80EA01E3EA0003A2EB0700A3EA700EEAF00C5BEA6070EA3FC0161F80
9417>I<13F0EA0FE01200A3485AA4485AA448C7FC131FEB2180EBC0C0380F00E0A2120E
A2381C01C0A438380380A2EB0700140400701308130EA2EB061000E01320386003C01623
7DA21C>I<13E0A21201EA00C01300A9121E1223EA4380A21283A2EA87001207120EA35A
A25A132013401270A2EA3080EA3100121E0B227EA111>I<13F0EA0FE01200A3485AA448
5AA448C7FC14F0EB0308EB0438380E08781310EB2030EB4000485A001FC7FC13C0EA1C70
487EA27F141038703820A3EB184038E00C803860070015237DA219>107
D<EA01E0EA1FC01201A3EA0380A4EA0700A4120EA45AA45AA45AA3127112E2A312621264
121C0B237DA20F>I<393C07E01F3A46183061803A47201880C03A87401D00E0EB801E14
1C1300000E90383801C0A4489038700380A2ED070016044801E01308150EA2ED06102670
01C01320D83000EB03C026157E942B>I<383C07C0384618603847203038874038138013
00A2000E1370A44813E0A2EB01C014C1003813C2EB0382A2EB018400701388383000F018
157E941D>I<3803C0F03804631CEB740EEA0878EB7007A2140FEA00E0A43801C01EA314
3C38038038A2EBC07014E038072180EB1E0090C7FCA2120EA45AA3EAFFC0181F819418>
112 D<EB78203801C460380302E0380601C0120E121C123C383803801278A338F00700A4
130E1270131EEA302EEA18DCEA0F1C1200A25BA45BA3EA07FF131F7E9416>I<EA3C0F38
4630C0EA4741EA8783A2EB018090C7FC120EA45AA45AA45A123012157E9416>I<137E13
8138030080EA0201EA0603140090C7FC120713F8EA03FE6C7EEA003FEB07801303127000
F01300A2EAE002EA4004EA3018EA0FE011157E9417>I<136013E0A4EA01C0A4EA0380EA
FFFCEA0380A2EA0700A4120EA45AA31308EA3810A21320121813C0EA07000E1F7F9E12>
I<001E131800231338EA438014701283A2EA8700000713E0120EA3381C01C0A314C2EB03
84A21307380C0988EA0E113803E07017157E941C>I<14C0A31460B512F0A2C712E0EB01
80EB03001302140A77A318>126 D E /FE 8 62 df<1330ABB512FCA238003000AB1618
7E931B>43 D<EA07C0EA1830EA3018EA701CEA600CA2EAE00EA9EA600CA2EA701CEA3018
EA1C70EA07C00F157F9412>48 D<12035AB4FC1207B1EA7FF00C157E9412>I<EA0F80EA
30E0EA4070EA8030EAC03812E0124012001370A2136013C0EA0180EA03001206EA0C0812
08EA1018EA3FF0127F12FF0D157E9412>I<EA0FE0EA3030EA6018EA701CA21200131813
381360EA07E0EA00301318130C130EA212E0A2EAC00CEA4018EA3030EA0FE00F157F9412
>I<1330A2137013F012011370120212041208121812101220124012C0EAFFFEEA0070A5
EA03FE0F157F9412>I<EA2030EA3FE013C0EA24001220A4EA2F80EA30E0EA2070EA0030
1338A2124012E0A2EA8030EA4060EA20C0EA1F000D157E9412>I<B512FCA2C8FCA6B512
FCA2160A7E8C1B>61 D E /FF 104[50 28[22 3[25 28 17 19
22 1[28 25 28 41 14 2[14 28 25 17 22 28 22 28 25 9[50
36 36 33 28 36 1[30 39 36 47 3[19 2[30 33 36 36 33 36
7[25 25 25 25 25 25 25 25 25 9[17 36[28 2[{
TeXBase1Encoding ReEncodeFont}49 50.000000 /Times-Bold
rf /FG 104[103 28[46 52 52 75 1[57 34 40 46 1[57 52 57
86 29 57 1[29 57 52 34 46 57 46 57 52 9[103 1[75 69 57
75 1[63 80 75 97 69 2[40 2[63 1[75 75 69 75 10[52 52
52 52 52 52 46[57 2[{TeXBase1Encoding ReEncodeFont}47
103.666679 /Times-Bold rf /FH 134[18 18 28 18 21 12 16
16 1[21 21 21 30 12 18 1[12 1[21 12 18 21 18 21 21 7[23
5[21 3[30 1[35 2[18 3[25 2[28 20[10 1[10 4[14 39[{
TeXBase1Encoding ReEncodeFont}32 41.666668 /Times-Italic
rf /FI 133[18 20 20 30 20 23 13 18 18 23 23 23 23 33
13 20 1[13 23 23 13 20 23 20 23 23 15 23[33 2[28 2[28
7[15 10[13 11 1[11 4[15 39[{TeXBase1Encoding ReEncodeFont}34
45.624989 /Times-Italic rf /FJ 166[26 3[26 22 20 24 2[26
26 32 22 2[12 3[22 26 1[24 26 65[{TeXBase1Encoding ReEncodeFont}14
36.499977 /Times-Roman rf /FK 25 107 df<B612FCA21E027C8C27>0
D<EC7FC0903803FFF890380F803E90393C0007800170EB01C001C0EB006048488048C87E
0006814881A24881A248ED0180A248ED00C0A3481660AB006016C0A36CED0180A26CED03
00A26C1506A26C5D6C5D6C6C5C6C6C5C0170495A013CEB078090260F803EC7FC903803FF
F89038007FC02B2F7DA332>13 D<EA03F0EA0FFC487E487E481380A2B512C0A86C1380A2
6C13006C5A6C5AEA03F012147D9519>15 D<B7FC7EC9FCA8B7FCA2C9FCA8007FB6FCB7FC
20167D9627>17 D<150C153C15F0EC03C0EC0F00143C14F0EB07C0011FC7FC1378EA01E0
EA0780001EC8FC127812E01278121EEA0780EA01E0EA0078131FEB07C0EB00F0143C140F
EC03C0EC00F0153C150C1500A8007FB512F8B612FC1E277C9F27>20
D<12C012F0123C120FEA03C0EA00F0133CEB0F80EB03E0EB0078141EEC0780EC01E0EC00
78151C1578EC01E0EC0780EC1E001478EB03E0EB0F80013CC7FC13F0EA03C0000FC8FC12
3C127012C0C9FCA8007FB512F8B612FC1E277C9F27>I<487E48CAFCA21206A25A5A1270
B812C0A20070CAFC12187E7EA27EA26C7E2A127C9432>32 D<166082A282A28282EE0380
B812E017C0C9EA0380EE06005E5EA25EA25E2B127D9432>I<EB1FFF137F3801E000EA03
800006C7FC5A5A5AA25AA35AA2B6FCA200C0C7FCA21260A37EA27E7E7E6C7EEA01E03800
7FFF131F181E7C9A21>50 D<1403A21406A2140CA21418A21430A21460A214C0A3EB0180
A2EB0300A21306A25BA25BA25BA25BA25BA2485AA248C7FCA31206A25AA25AA25AA25AA2
5A1240183079A300>54 D<1506150E151E153EA2157E155E15DE159E1401151E14031402
1406140CA21418A214301460A214C013011480EB03009038077FFF91B5FC5B90381C000F
5BEA407001F01480EAE1E0B44813074914F890C713F0007EEC03C0003C91C7FC25267EA3
28>65 D<90380FFFE0017F13FC48B6FC260387801380D80C07EB1FC00018EC07E0003890
380003F000701401D8600FEB00F812C000001578A2130EA2131E1670A2011C14F016E013
3C0138EB01C0A20178EB038001701400150601F05B495B1520000114C0D9C007C7FC147E
3803FFF8000F13C0D81FFCC8FC25227FA126>68 D<013F1403D9FF8013060003150ED806
07141C120C00381538A2007090C712701260484814E01200150116C0130E91B5FC011F14
8015FB90381C0007013C1400A201385BA213780170130EA201F0131E5BA212015B160600
03150C49EB1F1890C713F00004EC0FC0C8EA070028247FA12A>72
D<0107B5FC017F13FE90B512F83903C00C003806001C000E5B5A00101378C71270A214F0
5CA21301A25CA213035CA21307A291C7FCA25B130EA25B15C09038380180903830030038
1FFFFE007F13F8B55A202281A11B>I<0110EB07800170EB1FC0D801F013630003EB0181
0004903806018000000108C7FC143014405C01E3C8FC13E4EA01EC13F8A4120313BCA2EA
079C139E131E7F120FEA0E0780121E381C03C06E1380D83C0113013A3800F00300ECF802
0078EB7C040070EB3E180060EB1FE00080EB0F8022247FA226>75
D<EC03E0EC0FF0EC3FF81443EB01C1EB038090380700F015E0010E13C0011E1300A25BA3
5BA35BA312015BA3485AA3485A90C7120C151CD80FFC1338391FFF8070ECF06039387FFF
C0D8600F130038C001FC1E247FA222>I<0218151002781530186014F818E017016E1403
EF07C002BC140FEB013C171F173B023E1473010215E3021E01011380EE03C30104158702
1FEB0707160E496C131C1638DB80781300011014F091390781E00FED83C00120EBC780ED
CF0090384003FE5D9038C001F801805B00616D5A007FC75A4891C713F04817E0EF078000
3C93C7FC34257EA23C>I<1618011FB512E090B612C04815002606001EC7FC120E485B12
3C123800785B127012C0C712F85CA313015CA313035CA3495AA291C8FC5B130E5B13185B
3801FFE0485B000F90C8FC25237FA21B>84 D<007C14C0B414F0383F8001000F14F8EA07
C0EC00786C6C1338151800011410A27F1530000014201560154015C0EC0180140315005C
140E5C5C14785CEBE1E0EBE3C03801E78001EFC7FC13FE5B5B5B5BEA038090C8FC1D247E
A11F>86 D<0040144000C014C0B3A40060EB0180A26CEB03006C1306000E131C38078078
3801FFE038007F801A1F7D9D21>91 D<130F1338137013E0EA01C0B1EA0380EA0700121E
12F0121E1207EA0380EA01C0B1EA00E013701338130F10317CA419>102
D<12F0121E1207EA0380EA01C0B1EA00E013701338130F1338137013E0EA01C0B1EA0380
EA0700121E12F010317CA419>I<134013C0A2EA0180A3EA0300A31206A25AA35AA35AA3
5AA35AA41260A37EA37EA37EA37EA27EA3EA0180A3EA00C0A213400A327BA413>I<12C0
A31260A37EA37EA27EA37EA37EA3EA0180A3EA00C0A4EA0180A3EA0300A31206A35AA35A
A25AA35AA35AA30A327DA413>I<12C0B3B3AD02317AA40E>I E /FL
134[17 17 1[17 17 9 13 11 1[17 17 17 26 9 2[9 17 17 1[15
17 15 17 15 7[24 3[24 20 18 22 2[24 24 30 20 2[11 24
24 18 20 24 22 22 24 7[17 17 17 17 17 17 17 17 17 17
1[8 46[{TeXBase1Encoding ReEncodeFont}49 33.333332 /Times-Roman
rf /FM 4 107 df<B61280A219027D8A20>0 D<EB03FE90380FFF8090383C01E09038F0
0078D801C0131C48C7120600068048EC018048EC00C0A2481560A2481530A3481518A900
601530A36C1560A26C15C0A26CEC01806CEC03006C1406D801C0131CD800F0137890383C
01E090380FFF80D903FEC7FC25277E9D2A>13 D<147E49B4FCEB031FEB060F130C1318EB
380CEB78080170C7FCA25BA21201A25BA212035BA21207A290C8FCA2000E14801403391F
E00700EBFC063831FF8C38603FF838C007E0191E7F9C1D>76 D<12C0B3B3A502297B9E0C
>106 D E /FN 87[14 16[42 2[18 18 24[18 21 21 30 21 21
12 16 14 21 21 21 21 32 12 21 12 12 21 21 14 18 21 18
21 18 14 2[14 1[14 3[39 30 1[25 23 28 30 23 30 30 37
25 30 1[14 30 1[23 25 30 28 28 30 1[18 3[12 12 21 21
21 21 21 21 21 21 21 21 1[10 14 10 2[14 14 14 5[14 29[23
23 2[{TeXBase1Encoding ReEncodeFont}75 41.666668 /Times-Roman
rf /FO 168[38 1[29 24 22 27 1[22 29 29 35 24 2[13 1[29
22 24 29 27 1[29 65[{TeXBase1Encoding ReEncodeFont}17
39.999962 /Times-Roman rf /FP 75[17 11[17 16[50 25 1[22
22 24[22 25 25 36 25 25 14 19 17 25 25 25 25 39 14 25
14 14 25 25 17 22 25 22 25 22 17 2[17 1[17 30 36 36 47
36 36 30 28 33 1[28 36 36 44 30 36 19 17 36 36 28 30
36 33 33 36 1[22 3[14 14 25 25 25 25 25 25 25 25 25 25
14 12 17 12 2[17 17 17 5[17 2[17 12[14 7[17 5[28 28 2[{
TeXBase1Encoding ReEncodeFont}86 50.000000 /Times-Roman
rf /FQ 103[27 30[27 27 27 27 27 27 27 27 1[27 27 27 27
27 27 1[27 27 27 27 27 27 27 27 27 3[27 1[27 1[27 27
1[27 1[27 27 27 1[27 27 2[27 27 1[27 27 1[27 27 27 27
27 27 1[27 4[27 7[27 27 27 27 27 27 7[27 37[{
TeXBase1Encoding ReEncodeFont}53 45.624989 /Courier rf
/FR 104[45 2[20 20 10[15 13[20 23 23 33 23 23 13 18 15
23 23 23 23 35 13 23 13 13 23 23 15 20 23 20 23 20 15
2[15 1[15 3[43 33 33 28 25 30 1[25 33 33 40 28 1[18 15
33 33 25 28 33 30 30 33 1[20 3[13 13 23 23 23 1[23 23
23 23 23 23 13 11 15 11 2[15 15 15 8[15 27[25 2[{
TeXBase1Encoding ReEncodeFont}75 45.624989 /Times-Roman
rf /FS 103[30 30[30 30 30 30 30 30 30 30 1[30 30 30 30
30 30 1[30 30 30 30 30 30 30 30 30 3[30 1[30 1[30 30
1[30 1[30 30 30 1[30 30 30 1[30 30 1[30 30 1[30 30 30
30 30 30 30 30 4[30 9[30 30 30 30 7[30 37[{
TeXBase1Encoding ReEncodeFont}53 50.000000 /Courier rf
/FT 87[20 83[37 1[40 6[43 2[43 6[43 19[20 45[{
TeXBase1Encoding ReEncodeFont}7 59.999973 /Times-Roman
rf /FU 170[35 29 27 32 2[35 35 1[29 2[16 3[29 1[32 1[35
65[{TeXBase1Encoding ReEncodeFont}11 47.999954 /Times-Roman
rf /FV 133[27 30 2[30 33 20 23 27 1[33 30 33 50 17 33
1[17 33 30 20 27 33 27 33 30 9[60 43 43 40 33 2[37 47
43 56 40 3[47 3[43 43 1[43 8[30 2[30 1[30 30 30 2[15
6[20 39[{TeXBase1Encoding ReEncodeFont}43 59.999973 /Times-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 523 289 a FV(W)l(arr)o(en')n(s)14 b(Abstract)g(Machine)470
467 y FT(A)k(T)r FU(U)r(T)q(O)r(R)s(I)s(A)r(L)j FT(R)r
FU(E)r(C)r(O)s(N)r(S)s(T)s(R)q(U)r(C)s(T)s(I)s(O)s(N)639
908 y FT(H)r FU(A)r(S)r(S)s(A)r(N)f FT(A)915 903 y(\250)917
908 y FU(I)r(T)n FT(-)s(K)s FU(AC)s(I)686 968 y FS(hak@cs.sfu.ca)635
1092 y FR(Intelligent)10 b(Software)h(Group)525 1152
y FQ(http://www.i)q(sg.)q(sfu.)q(ca/\230)q(hak)582 1257
y FP(School)h(of)g(Computing)f(Science)636 1317 y(Simon)h(Fraser)g(Uni)
o(v)o(ersity)611 1378 y(Burnaby)m(,)g(British)g(Columbia)699
1438 y(V5A)h(1S6,)f(Canada)697 1907 y(February)f(18,)i(1999)437
2012 y(\()r(R)r FO(E)r(P)r(R)r(I)r(N)r(T)s(E)s(D)k(F)r(RO)r(M)g
FP(M)r(I)r(T)f(P)r FO(R)r(E)r(S)r(S)h FP(V)r FO(E)r(R)r(S)r(I)r(O)r(N)r
FP(\))613 2453 y FN(Copyright)803 2452 y(c)791 2453 y
FM(\015)10 b FN(Hassan)i(A)1005 2449 y(\250)1006 2453
y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 2 2
2 1 bop eop
%%Page: 3 3
3 2 bop 84 287 a FP(c)71 289 y FK(\015)12 b FP(1991,)g(1997,)h(1999)f
(by)g(Hassan)i(A)o(\250)-16 b(\021t-Kaci)71 403 y(No)17
b(part)h(of)f(this)h(book)f(may)h(be)g(reproduced)f(in)g(an)o(y)h(form)
f(by)g(an)o(y)h(electronic)g(or)f(me-)71 463 y(chanical)g(means)g
(\(including)f(photocopying,)h(recording,)h(or)e(information)g(storage)
h(and)71 523 y(retrie)o(v)o(al\))10 b(without)i(permission)g(in)g
(writing)f(from)h(the)g(author)m(.)j(All)e(rights)f(reserv)o(ed.)p
eop
%%Page: 4 4
4 3 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 580 a
FR(Because)e(the)o(y)f(ha)o(v)o(e)h(seen)f(it)f(gro)o(w)h(from)h(the)f
(start,)257 636 y(this)f(modest)h(work)f(is)h(dedicated)g(to:)906
964 y(E)r FJ(L)r(I)978 960 y FR(\036)974 964 y FJ(E)r(S)r
FR(,)16 b(J)p FJ(A)n(Y)r(D)r FR(,)f(N)q FJ(A)r(S)r(S)r(I)r(M)r
FR(,)h FJ(A)r(N)r(D)f FR(J)r FJ(U)r(L)r(I)r(E)r(T)o(A)1487
1075 y FI(for)c(muc)o(h)g(needed)g(love)1442 1131 y(and)g(trusting)e
(me,)i(always)906 1403 y FR(N)q FJ(A)r(N)r(I)r(E)1307
1514 y FI(for)g(tr)o(anquil)e(unconditional)f(faith)1593
1570 y(and)i(being)h(ther)n(e)906 1847 y FR(F)r FJ(O)r(R)991
1843 y FR(\210)987 1847 y FJ(E)r(T)16 b(D)r(E)r(S)f FR(F)r
FJ(L)r(A)r(M)r(B)r(E)r(RT)r(I)s(N)r(S)1475 1957 y FI(for)10
b(peaceful)h(mornings)1445 2014 y(and)f(conniving)g(whispers)1434
2070 y(giving)g(me)h(some)g(answers)257 2640 y FH(iv)560
b FN(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 5 5
5 4 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(Contents)71 931 y FF(1)49
b(Intr)o(oduction)1248 b(3)145 1008 y FP(1.1)53 b(Existing)12
b(literature)24 b(.)i(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)76
b(3)145 1084 y(1.2)53 b(This)13 b(tutorial)25 b(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)76 b(5)260 1161 y(1.2.1)60 b(Disclaimer)12
b(and)h(moti)o(v)o(ation)30 b(.)25 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)76 b(5)260 1238 y(1.2.2)60
b(Or)o(ganization)12 b(of)g(presentation)28 b(.)d(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)76 b(6)71 1365
y FF(2)49 b(Uni\002cation\227Pur)o(e)11 b(and)h(Simple)881
b(9)145 1442 y FP(2.1)53 b(T)m(erm)12 b(representation)21
b(.)k(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(10)145 1519 y(2.2)i(Compiling)11
b FK(L)519 1526 y FE(0)552 1519 y FP(queries)22 b(.)j(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)51 b(11)145 1596 y(2.3)i(Compiling)11 b FK(L)519
1603 y FE(0)552 1596 y FP(programs)j(.)26 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(13)145 1673 y(2.4)i(Ar)o(gument)11 b(re)o(gisters)40
b(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(19)71 1800 y FF(3)e(Flat)13
b(Resolution)1168 b(25)145 1877 y FP(3.1)53 b(F)o(acts)18
b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(26)145 1954 y(3.2)i(Rules)13 b(and)f(queries)29 b(.)d(.)f(.)g(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)51 b(27)71 2081 y FF(4)e(Pr)o(olog)1355 b(33)145
2158 y FP(4.1)53 b(En)n(vironment)11 b(protection)22
b(.)k(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)51 b(34)145 2235 y(4.2)i(What')m(s)12
b(in)h(a)f(choice)h(point)48 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(36)71 2362 y FF(5)e(Optimizing)12 b(the)f(Design)1019
b(45)145 2439 y FP(5.1)53 b(Heap)12 b(representation)21
b(.)k(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(46)145 2516 y(5.2)i(Constants,)13
b(lists,)g(and)g(anon)o(ymous)f(v)o(ariables)38 b(.)25
b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(47)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)10
b FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o
FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)572
b FH(v)p eop
%%Page: 6 6
6 5 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 332 289 a
FP(5.3)53 b(A)12 b(note)g(on)h FS(set)f FP(instructions)26
b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)50 b(52)332 366 y(5.4)j(Re)o(gister)12
b(allocation)47 b(.)25 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(54)332
442 y(5.5)j(Last)13 b(call)f(optimization)23 b(.)i(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
50 b(56)332 519 y(5.6)j(Chain)12 b(rules)43 b(.)25 b(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)50 b(57)332 596 y(5.7)j(En)n(vironment)11
b(trimming)38 b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(58)332 673
y(5.8)j(Stack)12 b(v)o(ariables)44 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)50 b(60)447 750 y(5.8.1)60 b(V)-6 b(ariable)12 b(binding)g(and)h
(memory)e(layout)16 b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
50 b(62)447 826 y(5.8.2)60 b(Unsafe)13 b(v)o(ariables)41
b(.)25 b(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)h(.)f(.)50 b(64)447 903 y(5.8.3)60 b(Nested)13
b(stack)g(references)i(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(67)332 980 y(5.9)j(V)-6
b(ariable)12 b(classi\002cation)h(re)o(visited)23 b(.)i(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50
b(69)332 1057 y(5.10)28 b(Inde)o(xing)19 b(.)26 b(.)f(.)g(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(75)332 1134 y(5.11)28
b(Cut)12 b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)50 b(83)257 1260 y FF(6)g(Conclusion)1255 b(89)257
1387 y(A)39 b(Pr)o(olog)13 b(in)f(a)g(Nutshell)1072 b(91)257
1513 y(B)42 b(The)13 b(W)-6 b(AM)12 b(at)g(a)g(glance)1032
b(97)332 1590 y FP(B.1)45 b(W)-6 b(AM)12 b(instructions)17
b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(97)332 1667
y(B.2)45 b(W)-6 b(AM)12 b(ancillary)g(operations)42 b(.)25
b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)h(112)332 1744 y(B.3)45 b(W)-6 b(AM)12 b(memory)g(layout)g
(and)g(re)o(gisters)18 b(.)26 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(117)257 2640 y FH(vi)560 b FN(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 7 7
7 6 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(List)26 b(of)f(Figur)n(es)145
883 y FP(2.1)53 b(Heap)12 b(representation)g(of)g FD(p)p
FC(\()p FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p
FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)29 b FP(.)c(.)h(.)f(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)51 b(11)145 962 y(2.2)i FK(M)320
969 y FE(0)352 962 y FP(machine)12 b(instructions)g(for)g(query)f
(terms)44 b(.)25 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(14)145 1042 y(2.3)i(Compiled)12 b(code)g(for)g FK(L)680
1049 y FE(0)712 1042 y FP(query)g FS(?-)p FD(p)p FC(\()p
FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d
FC(\()p FD(W)i FC(\)\))p FD(:)44 b FP(.)25 b(.)g(.)h(.)f(.)g(.)51
b(14)145 1121 y(2.4)i(Compiled)12 b(code)g(for)g FK(L)680
1128 y FE(0)712 1121 y FP(program)g FD(p)p FC(\()p FD(f)5
b FC(\()p FD(X)t FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)j FC(\))p FD(:)k FP(.)25
b(.)g(.)h(.)f(.)g(.)51 b(16)145 1200 y(2.5)i(The)13 b
FB(der)n(ef)20 b FP(operation)i(.)j(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(17)145 1280 y(2.6)i FK(M)320 1287 y FE(0)352 1280 y
FP(machine)12 b(instructions)g(for)g(programs)k(.)26
b(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(18)145 1359 y(2.7)i(The)13 b FB(unify)f FP(operation)30
b(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(20)145 1439 y(2.8)i
FK(M)320 1446 y FE(1)352 1439 y FP(instructions)12 b(for)f(v)o(ariable)
h(ar)o(guments)46 b(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)51 b(23)145 1518 y(2.9)i(Ar)o(gument)11 b(re)o(gisters)i(for)e
FK(L)758 1525 y FE(1)791 1518 y FP(query)h FS(?-)p FD(p)p
FC(\()p FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p
FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)39 b FP(.)26
b(.)f(.)g(.)51 b(24)145 1597 y(2.10)28 b(Ar)o(gument)11
b(re)o(gisters)i(for)e FK(L)758 1604 y FE(1)791 1597
y FP(fact)h FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\))p
FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d FC(\()p FD(a)p FC(\)\))p
FD(;)j(Y)j FC(\))p FD(:)31 b FP(.)25 b(.)g(.)h(.)f(.)g(.)51
b(24)145 1718 y(3.1)i FK(M)320 1725 y FE(2)352 1718 y
FP(machine)12 b(code)h(for)e(rule)h FD(p)p FC(\()p FD(X)q(;)c(Y)k
FC(\))i FS(:-)g FD(q)r FC(\()p FD(X)q(;)8 b(Z)t FC(\))p
FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j FC(\))p FD(:)21 b FP(.)k(.)h(.)f(.)g
(.)51 b(31)145 1839 y(4.1)i FK(M)320 1846 y FE(3)352
1839 y FP(choice)12 b(point)g(instruction)g FS(try)p
928 1839 15 2 v 17 w(me)p 1005 1839 V 18 w(else)26 b
FP(.)g(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(41)145
1919 y(4.2)i FK(M)320 1926 y FE(3)352 1919 y FP(choice)12
b(point)g(instruction)g FS(retry)p 988 1919 V 17 w(me)p
1065 1919 V 18 w(else)41 b FP(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
51 b(41)145 1998 y(4.3)i FK(M)320 2005 y FE(3)352 1998
y FP(choice)12 b(point)g(instruction)g FS(trust)p 988
1998 V 17 w(me)30 b FP(.)25 b(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)51 b(42)145 2077 y(4.4)i FK(M)320 2084 y FE(3)352
2077 y FP(code)12 b(for)g(a)g(multiple)g(clause)h(de\002nition)21
b(.)k(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(43)145 2198 y(5.1)i(Better)12 b(heap)h(representation)e(for)h(term)f
FD(p)p FC(\()p FD(Z)q(;)d(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))24 b FP(.)h(.)h(.)f(.)g(.)51
b(46)145 2278 y(5.2)i(Specialized)12 b(instructions)g(for)f(constants)k
(.)25 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51
b(49)145 2357 y(5.3)i(Specialized)12 b(instructions)g(for)f(lists)45
b(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)51 b(50)145 2436 y(5.4)i(Specialized)12 b(code)g(for)g(query)g
FS(?-)p FD(p)p FC(\()p FD(Z)q(;)c FC([)p FD(Z)q(;)g(W)f
FC(])p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)40 b
FP(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(51)145 2516
y(5.5)i(Specialized)12 b(code)g(for)g(fact)g FD(p)p FC(\()p
FD(f)5 b FC(\()p FD(X)t FC(\))p FD(;)j FC([)p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)])p FD(;)j(Y)i FC(\))p FD(:)32 b
FP(.)26 b(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)51 b(51)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)10
b FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o
FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)549
b FH(vii)p eop
%%Page: 8 8
8 7 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 332 289 a
FP(5.6)53 b(Anon)o(ymous)12 b(v)o(ariable)g(instructions)22
b(.)j(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f
(.)50 b(53)332 366 y(5.7)j(Instructions)11 b(for)h(fact)f
FD(p)p FC(\()p 897 366 15 2 v 19 w FD(;)d(g)r FC(\()p
FD(X)t FC(\))p FD(;)g(f)d FC(\()p 1115 366 V 18 w FD(;)j(Y)s(;)p
1208 366 V 26 w FC(\)\))p FD(:)41 b FP(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)50 b(53)332 442 y(5.8)j(Better)12
b(re)o(gister)g(use)h(for)e FD(p)p FC(\()p FD(X)q(;)d(Y)k
FC(\))i FS(:-)g FD(q)r FC(\()p FD(X)q(;)8 b(Z)t FC(\))p
FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j FC(\))p FD(:)42 b FP(.)25
b(.)h(.)f(.)g(.)h(.)f(.)50 b(55)332 519 y(5.9)j FK(M)507
526 y FE(2)539 519 y FP(code)12 b(for)g FD(p)p FC(\()p
FD(X)q(;)c(Y)k FC(\))i FS(:-)f FD(q)r FC(\()p FD(X)q(;)8
b(Z)t FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j FC(\))p
FD(:)p FP(,)i(with)f(LCO)30 b(.)c(.)f(.)g(.)h(.)f(.)50
b(57)332 596 y(5.10)28 b(En)n(vironment)11 b(trimming)g(code)45
b(.)26 b(.)f(.)g(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)h(.)f(.)50 b(61)332 673 y(5.11)28 b(Unsafe)12 b(code)h(for)e
FD(p)p FC(\()p FD(X)t FC(\))k FS(:-)e FD(q)r FC(\()p
FD(Y)s(;)8 b(X)t FC(\))p FD(;)g(r)q FC(\()p FD(Y)s(;)g(X)t
FC(\))p FD(:)29 b FP(.)d(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50
b(64)332 750 y(5.12)28 b(Code)12 b(for)g FD(a)h FS(:-)h
FD(b)p FC(\()p FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)p FP(,)13
b(by)f(our)g(classi\002cation)31 b(.)25 b(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)50 b(72)332 826 y(5.13)28 b(Code)12 b(for)g FD(a)h
FS(:-)h FD(b)p FC(\()p FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)p
FP(,)13 b(by)f(W)l(arren')m(s)g(classi\002cation)31 b(.)25
b(.)h(.)f(.)g(.)h(.)f(.)50 b(72)332 903 y(5.14)28 b(Delayed)12
b(trimming)f(for)h FD(a)h FS(:-)h FD(b)p FC(\()p FD(X)q(;)8
b(X)t FC(\))p FD(;)g(c:)49 b FP(.)25 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)h(.)f(.)50 b(73)332 980 y(5.15)28 b(Useless)13
b(delayed)g(trimming)e(for)g FD(a)j FS(:-)f FD(b)p FC(\()p
FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)45 b FP(.)25 b(.)h(.)f(.)g(.)h(.)f
(.)g(.)h(.)f(.)50 b(74)332 1057 y(5.16)28 b(Inde)o(xing)11
b(code)i(for)e(subsequence)j FD(S)1107 1064 y FE(1)1166
1057 y FP(.)26 b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
h(.)f(.)50 b(80)332 1134 y(5.17)28 b(Inde)o(xing)11 b(code)i(for)e
(subsequence)j FD(S)1107 1141 y FE(4)1166 1134 y FP(.)26
b(.)f(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50
b(81)332 1210 y(5.18)28 b(Encoding)12 b(of)g FB(conc)p
FD(=)p FC(3)22 b FP(.)j(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)h(.)f(.)50 b(82)257
2640 y FH(viii)536 b FN(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 9 9
9 8 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(F)m(or)n(ew)o(ord)25 b(to)h(the)g(r)n
(eprinted)h(edition)71 880 y FP(This)16 b(document)f(is)g(a)h
(reprinted)e(edition)h(of)g(the)g(book)g(bearing)g(the)h(same)f(title)g
(that)h(was)71 940 y(published)10 b(by)h(MIT)g(Press,)h(in)f(1991)f
(under)h(ISBN)f(0-262-51058-8)f(\(paper\))h(and)h(ISBN)f(0-)71
1001 y(262-01123-9)g(\(cloth\).)15 b(The)e(MIT)g(Press)f(edition)g(is)h
(no)o(w)f(out)g(of)g(print,)g(and)h(its)f(copyright)71
1061 y(has)f(been)g(transferred)f(to)g(the)h(author)m(.)k(This)d(v)o
(ersion)f(is)g(a)o(v)o(ailable)f(for)g(free)h(to)g(an)o(yone)g(who)71
1121 y(wants)h(to)g(use)h(it)f(for)f FB(non-commer)n(cial)p
439 1128 325 2 v 13 w FP(purposes,)i(from)e(the)h(author')m(s)g(web)h
(site)f(at:)190 1239 y FS(http://www.isg.sfu.ca/\230hak/docume)o
(nts/wam.h)o(tml)71 1358 y FP(If)17 b(you)i(retrie)o(v)o(e)f(it,)i
(please)f(let)g(me)f(kno)o(w)g(who)h(you)f(are,)j(and)d(for)g(what)g
(purpose)h(you)71 1418 y(intend)12 b(to)g(use)h(it.)71
1495 y(Thank)f(you)g(v)o(ery)h(much.)1503 1625 y FK(H)p
FD(:)p FK(A)p FD(:)p FB(\226)p FK(K)q FD(:)1249 1686
y FB(Burnaby)m(,)h(BC,)g(Canada)1489 1746 y(May)f(1997)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)d
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)561
b FH(ix)p eop
%%Page: 10 10
10 9 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 2640
a FH(x)572 b FN(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 11 11
11 10 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(F)m(or)n(ew)o(ord)71 880
y FP(Prolog)d(was)i(concei)o(v)o(ed)g(in)g(the)g(early)f(1970s)h(by)g
(Alain)f(Colmerauer)g(and)h(his)g(colleagues)71 940 y(at)i(the)h(Uni)o
(v)o(ersity)f(of)g(Marseille.)26 b(It)15 b(was)h(the)g(\002rst)f
(practical)g(embodiment)g(of)g(the)h(con-)71 1001 y(cept)f(of)g(logic)h
(programming,)f(due)h(to)f(Robert)g(K)n(o)o(walski.)25
b(The)17 b(ke)o(y)e(idea)h(behind)f(logic)71 1061 y(programming)d(is)i
(that)g(computation)g(can)g(be)g(e)o(xpressed)h(as)g(controlled)e
(deduction)h(from)71 1121 y(declarati)o(v)o(e)d(statements.)16
b(Although)11 b(the)h(\002eld)g(has)g(de)o(v)o(eloped)g(considerably)f
(since)h(those)71 1181 y(early)f(days,)i(Prolog)e(remains)h(the)g(most)
h(fundamental)e(and)h(widely)g(used)g(logic)g(program-)71
1241 y(ming)f(language.)71 1318 y(The)i(\002rst)f(implementation)g(of)g
(Prolog)g(was)g(an)h(interpreter)e(written)h(in)h(F)o(ortran)f(by)g
(mem-)71 1378 y(bers)h(of)g(Colmerauer')m(s)g(group.)18
b(Although)12 b(in)i(some)f(ways)g(quite)g(crude,)h(this)g(implemen-)71
1439 y(tation)i(was)h(a)g(milestone)g(in)f(se)o(v)o(eral)h(ways:)24
b(it)17 b(established)g(the)g(viability)f(of)g(Prolog,)i(it)71
1499 y(helped)d(to)g(disseminate)g(the)g(language,)i(and)e(it)g(laid)g
(the)g(foundations)g(of)f(Prolog)g(imple-)71 1559 y(mentation)e
(technology)m(.)19 b(A)13 b(later)g(milestone)h(was)f(perhaps)h(the)f
(DEC-10)h(Prolog)e(system)71 1619 y(de)o(v)o(eloped)h(at)g(the)h(Uni)o
(v)o(ersity)f(of)g(Edinb)o(ur)o(gh)g(by)g(myself)g(and)h(colleagues.)19
b(This)14 b(system)71 1679 y(b)o(uilt)k(on)i(the)f(Marseille)h
(implementation)e(techniques)h(by)h(introducing)e(the)h(notion)g(of)71
1740 y(compiling)12 b(Prolog)h(into)g(a)g(lo)o(w-le)o(v)o(el)g
(language)g(\(in)g(this)g(case)i(DEC-10)e(machine)g(code\),)71
1800 y(as)f(well)h(as)g(v)o(arious)e(important)h(space-sa)o(ving)g
(measures.)17 b(I)12 b(later)f(re\002ned)h(and)h(abstracted)71
1860 y(the)h(principles)h(of)f(the)h(DEC-10)g(Prolog)f(implementation)g
(into)g(what)h(is)g(no)o(w)g(kno)o(wn)f(as)71 1920 y(the)e(W)-6
b(AM)13 b(\(W)l(arren)e(Abstract)h(Machine\).)71 1997
y(The)19 b(W)-6 b(AM)18 b(is)h(an)g(abstract)f(machine)g(consisting)h
(of)f(a)h(memory)e(architecture)h(and)g(in-)71 2057 y(struction)d(set)h
(tailored)f(to)g(Prolog.)25 b(It)15 b(can)h(be)g(realised)f(ef)o
(\002ciently)g(on)g(a)h(wide)g(range)f(of)71 2117 y(hardware,)10
b(and)i(serv)o(es)g(as)f(a)h(tar)o(get)e(for)h(portable)f(Prolog)g
(compilers.)15 b(It)c(has)h(no)o(w)f(become)71 2178 y(accepted)i(as)h
(a)g(standard)f(basis)h(for)f(implementing)f(Prolog.)18
b(This)c(is)g(personally)f(gratify-)71 2238 y(ing,)g(b)o(ut)f(some)o
(what)h(embarrassing)f(in)h(that)f(the)h(W)-6 b(AM)13
b(is)g(perhaps)g(too)f(readily)g(accepted)71 2298 y(as)j(the)f
(standard.)23 b(Although)14 b(the)g(W)-6 b(AM)15 b(is)g(a)g
(distillation)f(of)g(a)h(long)f(line)g(of)h(e)o(xperience)71
2358 y(in)h(Prolog)f(implementation,)h(it)g(is)g(by)g(no)g(means)h(the)
f(only)g(possible)g(point)g(to)g(consider)71 2418 y(in)e(the)g(design)g
(space.)22 b(F)o(or)13 b(e)o(xample,)i(whereas)g(the)f(W)-6
b(AM)14 b(adopts)h(\223structure)e(copying\224)71 2478
y(to)f(represent)h(Prolog)f(terms,)h(the)g(\223structure)g(sharing\224)
g(representation)f(used)h(in)g(the)g(Mar)o(-)71 2640
y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)561 b FH(xi)p eop
%%Page: 12 12
12 11 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(seille)j(and)f(DEC-10)g(implementations)g(still)g(has)h(much)f(to)g
(recommend)f(it.)27 b(Be)17 b(that)f(as)257 349 y(it)f(may)m(,)h(I)f
(belie)o(v)o(e)g(the)g(W)-6 b(AM)15 b(is)g(certainly)g(a)g(good)g
(starting)f(point)h(for)f(studying)g(Prolog)257 409 y(implementation)e
(technology)m(.)257 486 y(Re)o(grettably)m(,)18 b(until)f(no)o(w)m(,)g
(there)g(has)g(not)g(been)g(a)g(good)f(source)h(for)f(getting)h
(acquainted)257 546 y(with)12 b(the)g(W)-6 b(AM.)13 b(My)g(original)e
(technical)h(report)f(is)i(not)f(easily)g(accessible,)i(and)e(contains)
257 606 y(only)e(a)g(\223bare)f(bones\224)i(de\002nition)d(of)i(the)f
(abstract)h(machine,)h(written)e(for)g(an)h(e)o(xpert)f(reader)m(.)257
667 y(Other)14 b(works)f(ha)o(v)o(e)h(discussed)h(the)e(W)-6
b(AM)14 b(from)f(v)o(arious)g(points)h(of)f(vie)o(w)m(,)h(b)o(ut)g
(there)f(has)257 727 y(continued)f(to)g(be)h(a)g(lack)f(of)g(a)g(good)h
(tutorial)e(introduction.)257 804 y(It)16 b(is)g(therefore)f(a)h(great)
f(pleasure)h(to)g(see)h(the)e(emer)o(gence)h(of)g(this)g(e)o(xcellent)g
(tutorial)e(by)257 864 y(Hassan)i(A)o(\250)-16 b(\021t-Kaci.)20
b(The)15 b(book)f(is)h(a)f(delight)g(to)g(read.)22 b(It)13
b(e)o(xplains)i(the)f(W)-6 b(AM)15 b(with)f(great)257
924 y(clarity)h(and)h(ele)o(gance.)26 b(I)15 b(belie)o(v)o(e)h(readers)
g(with)f(an)h(interest)f(in)h(computer)e(science)j(will)257
984 y(\002nd)10 b(this)g(book)g(pro)o(vides)g(a)h(stimulating)e
(introduction)g(to)h(the)g(fascinating)f(subject)i(of)f(Pro-)257
1044 y(log)i(implementation.)i(I)d(am)h(most)f(grateful)g(to)g(Hassan)i
(for)d(making)i(my)f(work)f(accessible)257 1104 y(to)j(a)f(wider)g
(audience.)1475 1235 y FB(David)g(H.)h(D.)g(W)-5 b(arr)n(en)1647
1295 y(Bristol,)13 b(UK)1580 1356 y(F)l(ebruary)h(1991)257
2640 y FH(xii)548 b FN(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 13 13
13 12 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(Ackno)o(wledgments)71 880
y FP(First)j(and)h(foremost,)g(Da)o(vid)g(H.)g(D.)g(W)l(arren)f(is)h
(the)g(person)g(to)f(whom)h(I)f(must)h(e)o(xpress)71
940 y(not)c(only)g(my)g(a)o(we)g(for)g(ha)o(ving)g(in)n(v)o(ented)g
(and)g(described)h(the)f(W)-6 b(AM,)15 b(b)o(ut)f(also)h(my)f(most)71
1001 y(sincere)i(gratitude)f(for)g(ne)o(v)o(er)g(minding)h(my)f
(repeatedly)h(pestering)f(him)h(with)f(questions)71 1061
y(about)d(minute)g(details)h(he)g(had)g(to)g(dredge)f(out)h(from)e(the)
i(deeps)g(of)g(his)g(memory)m(.)j(I)c(am)h(all)71 1121
y(the)i(more)h(indebted)f(to)h(him)f(as)h(I)g(kno)o(w)f(ho)o(w)g(b)o
(usy)h(he)g(ne)o(v)o(er)g(ceases)h(being,)g(designing)71
1181 y(better)11 b(and)g(faster)g(architectures,)h(way)f(ahead)h(of)f
(most)g(of)g(us,)i(no)e(longer)g(worrying)f(about)71
1241 y(this)h(prehistoric)f(part)h(of)f(his)i(research)f(life.)k(In)10
b(addition,)i(I)e(am)h(particularly)f(\003attered)h(that)71
1302 y(he)f(spontaneously)h(cared)f(to)g(judge)h(this)f(humble)g(opus)h
(to)f(be)h(a)f(contrib)o(ution)g(worth)f(being)71 1362
y(part)k(of)h(the)f(prestigious)h(MIT)g(Press)h(Logic)f(Programming)e
(Series.)20 b(Finally)m(,)14 b(let)g(him)f(be)71 1422
y(again)f(thanked)f(for)h(granting)f(me)i(the)f(honor)g(of)g
(introducing)f(it)h(with)g(a)g(fore)o(word.)71 1499 y(T)l(o)e(be)f
(honest,)i(it)e(is)h(rather)f(ironical)g(that)g(I,)h(slo)o(w-witted)e
(as)i(I)f(notoriously)g(am,)h(be)g(credited)71 1559 y(with)j(e)o
(xplaining)h(the)g(W)-6 b(AM)14 b(to)g(the)g(world)f(at)h(lar)o(ge.)20
b(In)13 b(truth,)h(my)g(o)o(wn)g(deciphering)f(of)71
1619 y(the)k(W)-6 b(AM')m(s)19 b(intricacies)e(has)i(been)e(a)h
(painful)f(and)h(lengthy)f(process.)33 b(As)18 b(a)g(matter)f(of)71
1679 y(fact,)f(I)g(o)o(we)f(my)h(basic)g(understanding)f(of)h(it)f(to)h
(two)f(dear)h(friends,)g(speci\002cally)m(.)26 b(Thus,)71
1740 y(I)17 b(would)f(like)h(to)g(thank)g(Roger)h(Nasr)f(for)g
(introducing)f(the)h(W)-6 b(AM)18 b(to)f(me)h(and)f(Manuel)71
1800 y(Hermene)o(gildo)9 b(for)f(patiently)i(e)o(xplaining)f(it)g(to)h
(me)g(a)g(hundred)f(times)g(o)o(v)o(er)m(.)16 b(The)o(y)10
b(deserv)o(e)71 1860 y(most)k(of)h(the)f(credit)h(besto)o(wed)f(on)h
(me)g(as)g(this)g(monograph')m(s)f(author)n(,)h(ha)o(ving)f(gi)o(v)o
(en)h(me)71 1920 y(the)d(foundations)g(upon)g(which)g(I)g(structured)g
(my)g(presentation.)71 1997 y(This)18 b(tutorial)e(was,)j(in)e(an)g
(earlier)g(v)o(ersion,)i(a)e(technical)h(report)e(of)h(the)g(Digital)g
(Equip-)71 2057 y(ment)12 b(Corporation')m(s)f(P)o(aris)h(Research)h
(Laboratory)f(\(PRL\).)h(Se)o(v)o(eral)e(people)i(contrib)o(uted)71
2117 y(to)18 b(impro)o(v)o(e)h(on)f(the)h(form)f(and)h(contents)g(of)f
(that)h(report)f(and)g(thence)h(of)g(this)g(ensuing)71
2178 y(monograph.)41 b(Thus,)24 b(I)d(am)g(v)o(ery)g(much)g(in)g(debt)g
(to)g(Manuel)h(Hermene)o(gildo,)h(Da)o(vid)71 2238 y(Barker)o(-Plummer)
n(,)15 b(and)i(Da)o(vid)f(H.)h(D.)g(W)l(arren,)h(for)e(the)g(precious)h
(fa)o(v)o(or)e(of)h(proofread-)71 2298 y(ing)g(a)g(\002rst)g(draft,)h
(making)f(some)g(important)f(corrections.)27 b(Man)o(y)17
b(thanks)g(are)f(due)g(also)71 2358 y(to)i(P)o(atrick)f(Baudelaire,)j
(Michel)f(Gangnet,)h(Solange)d(Karsenty)m(,)j(Richard)e(Me)o(yer)n(,)j
(and)71 2418 y(Asc)s(\264)-20 b(ander)17 b(Su)s(\264)-20
b(arez,)19 b(for)e(suggesting)g(se)o(v)o(eral)h(emendations,)h(ha)o
(ving)e(gracefully)f(v)o(olun-)71 2478 y(teered)c(to)g(plo)o(w)g
(through)f(the)i(draft.)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)537 b FH(xiii)p eop
%%Page: 14 14
14 13 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(As)i(the)f(PRL)h(report)e(was)h(being)g(disseminated,)i(I)e(be)o
(gan)g(recei)o(ving)g(feedback)g(from)f(at-)257 349 y(tenti)o(v)o(e)j
(readers.)31 b(Some)17 b(of)f(them)h(caught)h(a)f(fe)o(w)g(serious)g(b)
o(ugs)h(that)f(remained)f(in)i(that)257 409 y(report)12
b(making)g(some)h(material,)g(as)h(presented)e(there,)h(insidiously)g
(incorrect.)j(Naturally)m(,)257 469 y(all)c(those)h(mistakes)f(ha)o(v)o
(e)h(no)o(w)f(been)g(corrected)g(in)g(this)g(monograph,)g(and,)g(where)
g(appro-)257 530 y(priate,)17 b(mention)e(is)g(made)h(of)f(those)h(who)
f(brought)g(to)g(my)g(attention)g(my)g(erroneous)g(ac-)257
590 y(count.)g(Ne)o(v)o(ertheless,)d(I)e(would)g(like)g(to)g(e)o
(xpress)h(here)g(my)f(gratitude)g(to)g(those)h(who)f(kindly)257
650 y(reported)15 b(b)o(ugs,)j(made)e(insightful)f(comments,)i(ga)o(v)o
(e)f(disturbing)f(counter)o(-e)o(xamples,)i(or)257 710
y(proposed)c(better)g(e)o(xplanations.)18 b(The)o(y)c(are:)j(Christoph)
12 b(Beierle,)i(Andr)s(\264)-20 b(e)13 b(Bolle,)h(Damian)257
770 y(Chu,)20 b(W)n(illiam)d(Clocksin,)j(Maarten)d(v)o(an)h(Emden,)h
(Michael)f(Hanus,)i(P)o(ascal)e(v)o(an)g(Hen-)257 830
y(tenryck,)j(Juhani)e(Jaakola,)i(Stott)d(P)o(arker)n(,)i(Fernando)e
(Pereira,)i(Frank)e(Pfenning,)i(Da)o(v)o(e)257 891 y(Raggett,)14
b(Dean)f(Rosenzweig,)h(Da)o(vid)f(Russinof)o(f,)g(and)g(two)g(anon)o
(ymous)g(re)o(vie)o(wers.)k(All)257 951 y(remaining)11
b(mistakes)g(are)g(to)g(be)g(blamed)g(on)g(my)g(o)o(wn)g(incompetence)f
(and)i(still)f(imprecise)257 1011 y(understanding.)257
1088 y(Ha)o(ving)18 b(been)f(presumptuous)g(enough)h(to)f(en)n(visage)h
(elaborating)e(the)i(original)e(tutorial)257 1148 y(into)i(book)g
(form,)g(I)g(ha)o(v)o(e)g(bene\002tted)g(from)f(the)g(kind)h(advice)g
(and)g(ef)o(\002cient)f(assistance)257 1208 y(of)g(Bob)g(Prior)n(,)h
(editor)e(at)h(MIT)h(Press.)30 b(I)16 b(thank)h(him)g(for)f(e)o(v)o
(erything\227his)g(patience)i(in)257 1268 y(particular)m(.)257
1345 y(Finally)m(,)11 b(I)h(gratefully)e(ackno)o(wledge)h(the)g(bene)o
(v)o(olent)g(agreement)g(kindly)g(gi)o(v)o(en)g(to)g(me)g(by)257
1405 y(P)o(atrick)j(Baudelaire,)i(director)e(of)g(PRL,)h(and)g(Sam)f
(Fuller)n(,)h(Digital')m(s)f(vice-president)g(for)257
1466 y(Corporate)f(Research)h(and)f(Architecture,)g(to)g(let)g(me)h
(publish)f(the)g(work)f(as)i(a)f(book.)18 b(I)13 b(am)257
1526 y(quite)f(obliged)g(for)g(their)g FB(laissez-fair)n(e)p
FP(.)1690 1657 y FK(H)p FD(:)p FK(A)p FD(:)p FB(\226)p
FK(K)q FD(:)1365 1717 y FB(Rueil-Malmaison,)h(F)m(r)o(ance)1603
1777 y(J)n(anuary)g(1991)257 2640 y FH(xiv)542 b FN(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 0 15
0 14 bop eop
%%Page: 1 16
1 15 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 718 267 a FN(Nobody)d(told)g(them)i(what)f(it)f(was.)19
b(The)13 b(thing)e(was)h(going)f(v)o(ery)718 309 y(slo)o(wly)m(.)h(I)d
(said)h(that)e(the)h(\002rst)g(thing)f(there)h(has)h(to)f(be)g(is)h
(that)e(these)718 350 y(technical)13 b(guys)g(kno)o(w)f(what)h(we')n
(re)h(doing.)20 b(...)j(I)13 b(could)f(gi)o(v)o(e)h(a)718
392 y(nice)g(lecture)g(about)f(what)h(we)g(were)g(doing,)g(and)g(the)o
(y)f(were)i(all)718 433 y(e)o(xcited)e(...)k(The)o(y)c(understood)e(e)o
(v)o(erything;)g(...)16 b(and)11 b(all)g(that)g(had)718
475 y(to)f(be)g(done)g(was)h(to)f(tell)f(them)h(what)h(it)e(was.)1284
620 y(R)r FL(I)r(C)r(H)r(A)r(R)r(D)k FN(P)m(.)g(F)r FL(E)r(Y)r(N)r(M)r
(A)r(N)1111 662 y FH(Sur)n(ely)e(Y)l(ou')o(r)n(e)g(J)o(oking,)f(Mr)-5
b(.)10 b(F)m(e)o(ynman)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)328 b(P)o FL(A)q(G)r(E)12 b FN(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 2 17
2 16 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 258 2640
a FN(P)o FL(A)q(G)r(E)f FN(2)f FL(O)r(F)h FN(1)r(2)r(9)326
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 3 18
3 17 bop 71 637 a FG(Chapter)26 b(1)71 862 y(Intr)n(oduction)71
1104 y FP(In)15 b(1983,)h(Da)o(vid)f(H.)h(D.)g(W)l(arren)f(designed)g
(an)h(abstract)f(machine)g(for)g(the)g(e)o(x)o(ecution)h(of)71
1165 y(Prolog)d(consisting)h(of)g(a)h(memory)e(architecture)h(and)g(an)
h(instruction)e(set)i([W)l(ar83)o(].)22 b(This)71 1225
y(design)15 b(became)g(kno)o(wn)f(as)h(the)g(W)l(arren)f(Abstract)h
(Machine)g(\(W)-6 b(AM\))14 b(and)h(has)h(become)71 1285
y(the)i FB(de)h(facto)f FP(standard)g(for)g(implementing)f(Prolog)g
(compilers.)34 b(In)18 b([W)l(ar83)o(],)i(W)l(arren)71
1345 y(describes)c(the)g(W)-6 b(AM)16 b(in)g(a)g(minimalist')m(s)g
(style,)h(making)f(understanding)f(v)o(ery)h(dif)o(\002cult)71
1405 y(for)g(the)i(a)o(v)o(erage)f(reader)n(,)i(e)o(v)o(en)f(with)f(a)h
(forekno)o(wledge)e(of)h(Prolog')m(s)f(operations.)31
b(T)l(oo)71 1466 y(much)15 b(is)h(left)g(untold,)g(and)g(v)o(ery)g
(little)f(is)h(justi\002ed)g(in)g(clear)f(terms.)1300
1448 y FL(1)1345 1466 y FP(This)h(has)h(resulted)71 1526
y(in)d(a)h(v)o(ery)g(scant)g(number)f(of)h(W)-6 b(AM)15
b FB(a\002cionados)f FP(who)h(could)f(boast)i(understanding)e(the)71
1586 y(details)g(of)f(its)i(workings.)k(T)l(ypically)m(,)c(these)f(ha)o
(v)o(e)h(been)f(Prolog)f(implementors)g(who)h(de-)71
1646 y(cided)h(to)h(in)n(v)o(est)g(the)g(necessary)h(time)e(to)h(learn)
g(by)g(doing)f(and)h(to)g(reach)f(enlightenment)71 1706
y(painstakingly)m(.)71 1890 y FA(1.1)71 b(Existing)17
b(literatur)o(e)71 2019 y FP(W)n(itness)f(to)g(this)f(lack)h(of)g
(understanding)f(is)h(the)g(fact)f(that)g(in)h(six)g(years)g(there)f
(has)h(been)71 2079 y(little)e(published)g(that)h(would)e(teach)i(the)g
(W)-6 b(AM,)15 b(let)g(alone)f(formally)g(justify)g(its)h(correct-)71
2139 y(ness.)25 b(Indeed,)15 b(besides)h(W)l(arren')m(s)f(original)f
(hermetic)h(report)f([W)l(ar83)o(],)i(there)f(has)g(been)71
2199 y(virtually)f(no)h(of)o(\002cial)g(publication)f(on)i(the)f(W)-6
b(AM.)16 b(A)g(fe)o(w)f(years)g(ago,)i(one)e(could)h(come)71
2260 y(across)h(a)g(draft)f(authored)g(by)h(a)g(group)f(at)g(Ar)o
(gonne)h(National)f(Laboratory)g([GLLO85].)71 2320 y(But,)e(to)f(be)h
(honest,)g(we)f(found)g(that)g(manuscript)g(e)o(v)o(en)h(harder)f(to)g
(understand)g(than)g(W)l(ar)o(-)71 2380 y(ren')m(s)g(report.)19
b(The)14 b(\003a)o(w)g(was)g(that)f(it)h(insisted)g(in)f(presenting)g
(the)h(complete)f(W)-6 b(AM)15 b(as)f(is,)p 71 2420 648
2 v 129 2451 a Fz(1)145 2466 y FN(Da)o(vid)c(H.)h(D.)g(W)m(arren')n(s)g
(con\002des)g(pri)o(v)o(ately)e(that)g(he)i(\223felt)f([that)g(the)g(W)
-5 b(AM])11 b(was)f(important,)g(b)o(ut)g([its])71 2516
y(details)f(unlikely)f(to)i(be)h(of)f(wide)g(interest.)i(Hence,)g([he)e
(used)h(a])f(`personal)g(notes')g(style.)m(\224)868 2640
y FP(3)p eop
%%Page: 4 19
4 18 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(rather)e(than)g(as)h(a)g(gradually)e(transformed)g(and)i(optimized)f
(design.)257 366 y(A)e(gradual)f(re\002nement)f(style)i(has)g(in)f
(fact)f(been)i(used)g(by)f(Da)o(vid)g(Maier)h(and)f(Da)o(vid)g(S.)h(W)l
(ar)o(-)257 426 y(ren)321 408 y FL(2)354 426 y FP(in)k([MW88)o(].)20
b(There,)c(one)e(can)g(\002nd)f(a)h(description)g(of)f(techniques)h(of)
g(Prolog)f(com-)257 486 y(pilation)g(akin)g(to)g(the)g(W)-6
b(AM')m(s.)814 468 y FL(3)851 486 y FP(Ho)o(we)o(v)o(er)n(,)14
b(we)f(belie)o(v)o(e)g(that)g(this)g(otherwise)g(quite)g(com-)257
546 y(mendable)i(ef)o(fort)f(still)h(suf)o(fers)g(from)f(a)h(fe)o(w)g
(dra)o(wbacks)g(as)h(a)g(de\002niti)o(v)o(e)e(tutorial.)23
b(First,)257 606 y(it)15 b(describes)g(a)h(close)f(v)o(ariant)f(of)g
(the)h(W)-6 b(AM)16 b(rather)e(than,)i(strictly)e(speaking,)i(the)f(W)
-6 b(AM)257 667 y(itself.)16 b(That)d(is,)g(not)f(all)g(of)g(the)h(W)-6
b(AM')m(s)13 b(features)f(are)g(co)o(v)o(ered.)k(Moreo)o(v)o(er)n(,)d
(e)o(xplanations)257 727 y(are)i(limited)f(to)h(illustrati)o(v)o(e)e(e)
o(xamples)j(and)e(seldom)h(make)f(e)o(xplicitly)h(and)f(e)o(xhausti)o
(v)o(ely)257 787 y(clear)k(the)f(speci\002c)h(conte)o(xt)g(in)f(which)h
(some)f(optimizations)g(apply)m(.)31 b(Second,)19 b(the)f(part)257
847 y(de)o(v)o(oted)g(to)h(compilation)e(of)h(Prolog)f(comes)i(v)o(ery)
f(late)h(in)f(the)g(book\227in)g(the)g(penulti-)257 907
y(mate)13 b(chapter)o(\227relying,)f(for)g(implementation)g(details,)i
(on)e(o)o(v)o(erly)h(detailed)g(P)o(ascal)g(pro-)257
967 y(cedures)h(and)g(data)g(structures)f(incrementally)g(re\002ned)g
(o)o(v)o(er)h(the)g(pre)o(vious)f(chapters.)20 b(W)l(e)257
1028 y(feel)e(that)h(this)f(sidetracks)h(reading)e(and)i(obfuscates)f
(to-the-point)f(learning)h(of)f(the)i(ab-)257 1088 y(stract)13
b(machine.)18 b(Finally)m(,)13 b(although)f(it)h(presents)g(a)h(series)
f(of)g(gradually)f(re\002ned)g(designs,)257 1148 y(their)g(tutorial)f
(does)i(not)f(separate)h(orthogonal)e(pieces)i(of)f(Prolog)f(in)i(the)f
(process.)k(All)c(the)257 1208 y(v)o(ersions)j(presented)f(are)h(full)e
(Prolog)h(machines.)22 b(As)15 b(a)f(result,)h(the)g(reader)e
(interested)i(in)257 1268 y(picking)e(and)g(choosing)f(partial)g
(techniques)h(to)g(adapt)g(some)o(where)f(else)i(cannot)e(discrim-)257
1329 y(inate)j(among)g(these)g(easily)m(.)23 b(No)o(w)m(,)15
b(in)g(all)f(fairness,)i(Maier)e(and)h(W)l(arren')m(s)g(book)f(has)h
(the)257 1389 y(dif)o(ferent)e(ambition)h(of)g(being)g(a)g(\002rst)g
(course)h(in)f(logic)g(programming.)20 b(Thus,)c(it)e(is)h(actu-)257
1449 y(ally)h(a)g(feat)f(that)h(its)g(authors)f(were)h(able)f(to)h(co)o
(v)o(er)g(so)g(much)f(material,)i(both)e(theoretical)257
1509 y(and)e(practical,)f(and)h(go)f(so)h(far)f(as)h(to)f(include)g
(also)h(Prolog)e(compiling)h(techniques.)k(More)257 1569
y(important,)g(their)g(book)f(is)i(the)f(\002rst)f(a)o(v)o(ailable)h
(of)o(\002cial)f(publication)g(to)h(contain)f(a)h(\(real\))257
1630 y(tutorial)c(on)g(the)g(W)-6 b(AM)13 b(techniques.)257
1706 y(After)18 b(the)g(preliminary)f(v)o(ersion)h(of)g(this)h(book)f
(had)g(been)h(completed,)h(another)e(recent)257 1767
y(publication)c(containing)f(a)h(tutorial)f(on)h(the)g(W)-6
b(AM)15 b(was)f(brought)f(to)h(this)g(author')m(s)g(atten-)257
1827 y(tion.)h(It)c(is)g(a)g(book)g(due)g(to)g(P)o(atrice)g(Boizumault)
f([Boi88])g(whose)i(Chapter)f(9)g(is)g(de)o(v)o(oted)g(to)257
1887 y(e)o(xplaining)j(the)g(W)-6 b(AM.)14 b(There)h(again,)f(its)g
(author)f(does)h(not)g(use)g(a)g(gradual)g(presentation)257
1947 y(of)g(partial)f(Prolog)f(machines.)20 b(Besides,)15
b(it)f(is)g(written)e(in)i(French\227a)f(some)o(what)g(restric-)257
2007 y(ti)o(v)o(e)e(trait)f(as)h(far)f(as)h(its)g(readership)f(is)h
(concerned.)k(Still,)c(Boizumault')m(s)f(book)h(is)g(v)o(ery)g(well)257
2068 y(concei)o(v)o(ed,)k(and)f(contains)g(a)g(detailed)g(discussion)g
(describing)g(an)g(e)o(xplicit)f(implementa-)257 2128
y(tion)f(technique)g(for)g(the)g FB(fr)n(eeze)i FP(meta-predicate.)1136
2110 y FL(4)p 257 2221 648 2 v 315 2252 a Fz(2)332 2267
y FN(A)d(dif)o(ferent)f(person)h(than)f(the)h(W)-5 b(AM')n(s)11
b(designer)n(,)g(for)g(whose)g(research)h(the)f(W)-5
b(AM)11 b(has)g(been)h(of)e(great)257 2317 y(inspiration.)g(In)e(turn,)
g(interestingly)e(enough,)i(Da)o(vid)g(H.)h(D.)f(W)m(arren)h(has)f
(lately)g(been)g(working)e(on)i(a)h(parallel)257 2366
y(architecture)15 b(for)f(Prolog)f(whose)h(abstract)h(model)f(shares)h
(its)f(essence)i(with)d(some)i(ideas)g(independently)257
2416 y(concei)o(v)o(ed)c(by)f(Da)o(vid)g(S.)h(W)m(arren.)315
2451 y Fz(3)332 2466 y FH(Op.)g(Cit.)p FN(,)e(Chapter)h(11.)315
2501 y Fz(4)332 2516 y FH(Op.)h(Cit.)p FN(,)e(Chapter)h(10.)258
2640 y(P)o FL(A)q(G)r(E)j FN(4)f FL(O)r(F)h FN(1)r(2)r(9)326
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 5 20
5 19 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(Ev)o(en)f(more)f(recently)m(,)g(a)g(formal)
g(v)o(eri\002cation)f(of)h(the)h(correctness)f(of)g(a)h(slight)f
(simpli\002ca-)71 349 y(tion)d(of)h(the)g(W)-6 b(AM)11
b(was)f(carried)g(out)g(by)g(Da)o(vid)g(Russinof)o(f)g([Rus89].)15
b(That)c(work)e(deserv)o(es)71 409 y(justi\002ed)14 b(praise)h(as)g(it)
g(methodically)e(certi\002es)i(correctness)g(of)f(most)h(of)f(the)h(W)
-6 b(AM)15 b(with)71 469 y(respect)g(to)g(Prolog')m(s)f(SLD)h
(resolution)g(semantics.)24 b(Ho)o(we)o(v)o(er)n(,)16
b(it)e(is)i(de\002nitely)e(not)h(a)g(tu-)71 530 y(torial,)d(although)g
(Russinof)o(f)h(de\002nes)g(most)f(of)h(the)g(notions)f(he)h(uses)h(in)
e(order)g(to)h(keep)f(his)71 590 y(work)j(self-contained.)29
b(In)16 b(spite)h(of)f(this)h(ef)o(fort,)g(understanding)f(the)h
(details)g(is)g(consid-)71 650 y(erably)c(impeded)h(without)g(working)e
(familiarity)h(with)g(the)h(W)-6 b(AM)15 b(as)g(a)f(prerequisite.)21
b(At)71 710 y(an)o(y)16 b(rate,)i(Russinof)o(f)s(')m(s)e(contrib)o
(ution)f(is)h(ne)o(v)o(ertheless)h(a)g FB(pr)n(emi)s(\036)-20
b(er)n(e)17 b FP(as)g(he)g(is)f(the)h(\002rst)f(to)71
770 y(establish)d(rigorously)f(something)h(that)g(had)g(been)g(taken)g
(for)f(granted)g(thus)i(far)m(.)j(Needless)71 830 y(to)12
b(say)m(,)h(that)f(report)f(is)i(not)f(for)g(the)g(fainthearted.)71
1035 y FA(1.2)71 b(This)17 b(tutorial)71 1181 y FV(1.2.1)59
b(Disclaimer)12 b(and)k(moti)o(v)o(ation)71 1295 y FP(The)11
b(length)g(of)f(this)h(monograph)f(has)h(been)g(kept)g(deliberately)f
(short.)15 b(Indeed,)c(this)g(author)71 1356 y(feels)18
b(that)g(the)g(typical)g(e)o(xpected)h(reader)e(of)h(a)h(tutorial)e(on)
h(the)g(W)-6 b(AM)19 b(would)e(wish)i(to)71 1416 y(get)e(to)f(the)h
(heart)g(of)g(the)g(matter)f(quickly)g(and)h(obtain)g(complete)g(b)o
(ut)f(short)h(answers)h(to)71 1476 y(questions.)35 b(Also,)22
b(for)c(reasons)h(pertaining)f(to)h(the)g(speci\002city)g(of)f(the)h
(topic)g(co)o(v)o(ered,)71 1536 y(it)c(was)h(purposefully)f(decided)h
(not)g(to)f(structure)h(it)f(as)i(a)f(real)f(te)o(xtbook,)i(with)f(ab)o
(undant)71 1596 y(e)o(x)o(ercises)c(and)f(lengthy)g(comments.)k(Our)c
(point)g(is)h(to)f(make)g(the)g(W)-6 b(AM)11 b(e)o(xplicit)h(as)f(it)h
(was)71 1657 y(concei)o(v)o(ed)j(by)h(Da)o(vid)g(H.)g(D.)h(W)l(arren)e
(and)h(to)g(justify)f(its)h(workings)f(to)h(the)g(reader)f(with)71
1717 y(con)n(vincing,)f(albeit)f(informal,)h(e)o(xplanations.)20
b(The)14 b(fe)o(w)g(proposed)f(e)o(x)o(ercises)i(are)f(meant)71
1777 y(more)d(as)i(an)g(aid)f(for)g(understanding)f(than)i(as)g(food)e
(for)h(further)f(thoughts.)71 1854 y(The)i(reader)f(may)g(\002nd,)g(at)
h(points,)g(that)f(some)h(design)f(decisions,)i(clearly)e(correct)f(as)
i(the)o(y)71 1914 y(may)c(be,)i(appear)e(arbitrarily)f(chosen)i(among)f
(potentially)g(man)o(y)g(other)g(alternati)o(v)o(es,)h(some)71
1974 y(of)g(which)g(he)h(or)f(she)h(might)f(fa)o(v)o(or)g(o)o(v)o(er)g
(what)h(is)g(described.)k(Also,)d(one)e(may)h(feel)f(that)h(this)71
2034 y(or)j(that)h(detail)f(could)h(be)g(\223simpli\002ed\224)f(in)h
(some)g(local)f(or)h(global)f(way)m(.)23 b(Re)o(garding)14
b(this,)71 2094 y(we)c(wish)g(to)h(underscore)f(two)f(points:)14
b(\(1\))c(we)g(chose)h(to)f(follo)o(w)f(W)l(arren')m(s)h(original)f
(design)71 2155 y(and)h(terminology)m(,)f(describing)h(what)g(he)g(did)
g(as)h(faithfully)d(as)j(possible;)g(and,)g(\(2\))e(we)h(warn)71
2215 y(against)k(the)g(casual)h(thinking)e(up)i(of)e(alterations)h
(that,)h(although)f(that)g(may)g(appear)g(to)g(be)71
2275 y(\223smarter\224)e(from)f(a)h(local)g(standpoint,)h(will)f
(generally)f(bear)h(subtle)h(global)f(consequences)71
2335 y(interfering)j(with)i(other)f(decisions)i(or)e(optimizations)h
(made)g(else)o(where)g(in)g(the)g(design.)71 2395 y(This)e(being)g
(said,)h(we)f(did)f(depart)h(in)g(some)g(mar)o(ginal)f(way)g(from)g(a)h
(fe)o(w)f(original)g(W)-6 b(AM)71 2456 y(details.)15
b(Ho)o(we)o(v)o(er)n(,)10 b(where)g(our)g(de)o(viations)g(from)f(the)h
(original)f(conception)h(are)g(proposed,)71 2516 y(an)i(e)o(xplicit)g
(mention)g(will)g(be)g(made)h(and)f(a)h(justi\002cation)e(gi)o(v)o(en.)
71 2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)328
b(P)o FL(A)q(G)r(E)12 b FN(5)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 6 21
6 20 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(Our)f(moti)o(v)o(ation)e(to)i(be)g(so)h(conserv)o(ati)o(v)o(e)e(is)i
(simple:)i(our)d(goal)f(is)i FB(not)f FP(to)f(teach)i(the)f(world)257
349 y(ho)o(w)k(to)h(implement)e(Prolog)h(optimally)m(,)h
FB(nor)f FP(is)h(it)f(to)h(pro)o(vide)f(a)g(guide)g(to)h(the)f(state)h
(of)257 409 y(the)i(art)f(on)h(the)f(subject.)38 b(Indeed,)22
b(ha)o(ving)d(contrib)o(uted)g(little)g(to)h(the)f(craft)g(of)g(Prolog)
257 469 y(implementation,)h(this)e(author)g(claims)g(glaring)g
(incompetence)g(for)f(carrying)h(out)g(such)257 530 y(a)g(task.)33
b(Rather)n(,)19 b(this)f(work')m(s)f(intention)g(is)h(to)f(e)o(xplain)h
(in)g(simpler)f(terms,)i(and)f(justify)257 590 y(with)h(informal)f
(discussions,)23 b(Da)o(vid)c(H.)g(D.)h(W)l(arren')m(s)f(abstract)g
(machine)g FB(speci\002cally)257 650 y FP(and)11 b FB(e)o(xclusively)p
FP(.)k(Our)10 b(source)h(is)f(what)h(he)f(describes)h(in)f([W)l(ar83)o
(,)h(W)l(ar88)o(].)k(The)c(e)o(xpected)257 710 y(achie)o(v)o(ement)g
(is)g(merely)f(the)h(long)f(o)o(v)o(erdue)h(\002lling)f(of)g(a)h(gap)f
(so)h(far)f(e)o(xisting)h(for)f(whoe)o(v)o(er)257 770
y(may)i(be)g(curious)g(to)f(acquire)h FB(basic)g FP(kno)o(wledge)f(of)g
(Prolog)g(implementation)g(techniques,)257 830 y(as)16
b(well)f(as)g(to)g(serv)o(e)h(as)f(a)g(spring)g(board)f(for)g(the)h(e)o
(xpert)g(eager)g(to)g(contrib)o(ute)f(further)g(to)257
891 y(this)j(\002eld)g(for)f(which)h(the)g(W)-6 b(AM)17
b(is,)i(in)e(fact,)h(just)f(the)g(tip)g(of)f(an)i(iceber)o(g.)29
b(As)18 b(such,)h(it)257 951 y(is)e(hoped)f(that)f(this)h(monograph)g
(would)f(constitute)g(an)i(interesting)e(and)h(self-contained)257
1011 y(complement)11 b(to)g(basic)h(te)o(xtbooks)f(for)f(general)h
(courses)h(on)f(logic)g(programming,)f(as)i(well)257
1071 y(as)g(to)e(those)h(on)g(compiler)f(design)h(for)f(more)g(con)n(v)
o(entional)g(programming)f(languages.)16 b(As)257 1131
y(a)d(stand-alone)f(work,)f(it)h(could)g(be)h(a)f(quick)g(reference)g
(for)f(the)h(computer)g(professional)g(in)257 1192 y(need)h(of)f
(direct)g(access)h(to)g(W)-6 b(AM)12 b(concepts.)257
1364 y FV(1.2.2)60 b(Or)o(ganization)13 b(of)i(pr)o(esentation)257
1476 y FP(Our)f(style)g(of)g(teaching)f(the)h(W)-6 b(AM)15
b(makes)e(a)i(special)f(ef)o(fort)e(to)i(consider)g(carefully)f(each)
257 1536 y(feature)h(of)g(the)h(W)-6 b(AM)15 b(design)g(in)f(isolation)
g(by)h(introducing)e(separately)i(and)f(incremen-)257
1596 y(tally)19 b(distinct)g(aspects)i(of)e(Prolog.)35
b(This)20 b(allo)o(ws)f(us)h(to)f(e)o(xplain)g(as)h(limpidly)f(as)h
(pos-)257 1657 y(sible)e(speci\002c)f(principles)g(proper)f(to)h(each.)
30 b(W)l(e)17 b(then)g(stitch)g(and)g(mer)o(ge)g(the)g(dif)o(ferent)257
1717 y(patches)g(into)f(lar)o(ger)g(pieces,)i(introducing)d
(independent)h(optimizations)f(one)i(at)f(a)g(time,)257
1777 y(con)n(v)o(er)o(ging)c(e)o(v)o(entually)f(to)g(the)h(complete)f
(W)-6 b(AM)12 b(design)g(as)g(described)g(in)f([W)l(ar83)o(])h(or)f(as)
257 1837 y(o)o(v)o(ervie)o(wed)i(in)g([W)l(ar88)o(].)k(Thus,)e(in)d
(Chapter)h(2,)h(we)f(consider)g(uni\002cation)f(alone.)17
b(Then,)257 1897 y(we)c(look)e(at)h(\003at)g(resolution)g(\(that)f(is,)
i(Prolog)e(without)g(backtracking\))h(in)f(Chapter)h(3.)k(F)o(ol-)257
1958 y(lo)o(wing)e(that,)h(we)f(turn)f(to)h(disjuncti)o(v)o(e)g
(de\002nitions)g(and)g(backtracking)f(in)h(Chapter)g(4.)21
b(At)257 2018 y(that)12 b(point,)g(we)f(will)h(ha)o(v)o(e)g(a)f
(complete,)h(albeit)g FB(na)o(\250)-16 b(\021ve)p FP(,)12
b(design)g(for)f(pure)g(Prolog.)j(In)e(Chap-)257 2078
y(ter)f(5,)h(this)f(\002rst-cut)f(design)h(will)g(be)g(subjected)h(to)e
(a)i(series)f(of)g(transformations)f(aiming)g(at)257
2138 y(optimizing)k(its)g(performance,)h(the)f(end)g(product)g(of)g
(which)g(is)h(the)f(full)g(W)-6 b(AM.)15 b(W)l(e)g(ha)o(v)o(e)257
2198 y(also)i(prepared)f(an)g(inde)o(x)h(for)e(quick)h(reference)g(to)g
(most)h(critical)f(concepts)g(used)h(in)f(the)257 2258
y(W)-6 b(AM,)14 b(something)e(without)f(which)h(no)h(\(real\))e
(tutorial)g(could)i(possibly)f(be)h(complete.)257 2335
y(It)g(is)h(e)o(xpected)f(that)g(the)g(reader)g(already)g(has)h(a)f
(basic)h(understanding)e(of)h(the)g(operational)257 2395
y(semantics)f(of)f(Prolog\227in)f(particular)n(,)g(of)h(uni\002cation)g
(and)g(backtracking.)k(Ne)o(v)o(ertheless,)257 2456 y(to)k(make)f(this)
h(work)f(also)h(pro\002table)f(to)h(readers)f(lacking)h(this)g
(background,)h(we)f(ha)o(v)o(e)257 2516 y(pro)o(vided)d(a)h(quick)f
(summary)g(of)g(the)h(necessary)g(Prolog)e(notions)h(in)h(Appendix)f
(A.)28 b(As)258 2640 y FN(P)o FL(A)q(G)r(E)13 b FN(6)f
FL(O)r(F)h FN(1)r(2)r(9)326 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 7 22
7 21 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(for)e(notation,)i(we)f(implicitly)g(use)g
(the)h(syntax)f(of)g(so-called)h(Edinb)o(ur)o(gh)f(Prolog)f(\(see,)i
(for)71 349 y(instance,)j([CM84]\),)g(which)f(we)h(also)f(recall)g(in)h
(that)f(appendix.)27 b(Finally)m(,)17 b(Appendix)f(B)71
409 y(contains)h(a)h(recapitulation)f(of)g(all)h(e)o(xplicit)g
(de\002nitions)f(implementing)f(the)i(full)f(W)-6 b(AM)71
469 y(instruction)13 b(set)i(and)f(its)g(architecture)g(so)g(as)h(to)f
(serv)o(e)h(as)g(a)f(complete)g(and)g(concise)h(sum-)71
530 y(mary)m(.)71 2640 y FN(Copyright)260 2639 y(c)249
2640 y FM(\015)10 b FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)328 b(P)o FL(A)q(G)r(E)12 b FN(7)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 8 23
8 22 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 258 2640
a FN(P)o FL(A)q(G)r(E)f FN(8)f FL(O)r(F)h FN(1)r(2)r(9)326
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 9 24
9 23 bop 71 637 a FG(Chapter)26 b(2)71 862 y(Uni\002cation\227Pur)n(e)g
(and)g(Simple)71 1104 y FP(Recall)13 b(that)g(a)g(\(\002rst-order\))e
(term)i(is)g(either)g(a)g FB(variable)g FP(\(denoted)g(by)g(a)g
(capitalized)g(iden-)71 1165 y(ti\002er\),)i(a)g FB(constant)g
FP(\(denoted)f(by)h(an)g(identi\002er)f(starting)h(with)g(a)g(lo)o(wer)
o(-case)g(letter\))f(or)g(a)71 1225 y FB(structur)n(e)g
FP(of)f(the)g(form)f FD(f)5 b FC(\()p FD(t)567 1232 y
FE(1)587 1225 y FD(;)j(:)g(:)g(:)g(;)g(t)715 1232 y Fy(n)737
1225 y FC(\))14 b FP(where)f FD(f)19 b FP(is)13 b(a)h(symbol)f(called)g
(a)h FB(functor)f FP(\(denoted)71 1285 y(as)e(a)g(constant\),)g(and)g
(the)g FD(t)535 1292 y Fy(i)548 1285 y FP(')m(s)g(are)g(\002rst-order)e
(terms\227the)h(term')m(s)h FB(subterms)p FP(.)16 b(The)11
b(number)71 1345 y(of)k(subterms)g(for)g(a)g(gi)o(v)o(en)h(functor)e
(symbol)h(is)h(predetermined)e(and)i(called)f(its)h FB(arity)p
FP(.)25 b(In)71 1405 y(order)16 b(to)h(allo)o(w)f(a)i(symbol)f(to)g(be)
g(used)g(with)g(possibly)g(dif)o(ferent)f(arities,)j(we)e(shall)g(use)
71 1466 y(the)12 b(e)o(xplicit)h(notation)f(`)p FD(f)5
b(=n)p FP(')13 b(when)f(referring)f(to)i(the)f(functor)g(consisting)h
(of)f(the)h(symbol)71 1526 y FD(f)21 b FP(and)c(arity)f
FD(n)p FP(.)28 b(Hence,)18 b(two)e(functors)g(are)g(equal)h(if)f(and)g
(only)g(if)g(the)o(y)h(ha)o(v)o(e)g(the)f(same)71 1586
y(symbol)11 b FB(and)g FP(arity)m(.)j(Letting)d FD(n)j
FC(=)g(0)p FP(,)f(a)e(constant)g(is)h(seen)g(as)f(a)h(special)f(case)i
(of)d(a)i(structure.)71 1646 y(Thus,)h(a)g(constant)f
FD(c)h FP(will)f(be)g(designated)h(as)f(the)h(functor)e
FD(c=)p FC(0)p FP(.)71 1723 y(W)l(e)16 b(consider)f(here)h
FK(L)472 1730 y FE(0)492 1723 y FP(,)h(a)f(v)o(ery)g(simple)g(language)
f(indeed.)26 b(In)16 b(this)g(language,)h(one)e(can)71
1783 y(specify)10 b(only)g(two)g(sorts)h(of)f(entities:)15
b(a)10 b FB(pr)n(ogr)o(am)h FP(term)f(and)h(a)f FB(query)i
FP(term.)i(Both)d(program)71 1843 y(and)k(query)f(are)i(\002rst-order)d
(terms)i(b)o(ut)g(not)g(v)o(ariables.)24 b(The)16 b(semantics)f(of)g
FK(L)1470 1850 y FE(0)1505 1843 y FP(is)h(simply)71 1904
y(tantamount)e(to)h(computing)f(the)h(most)g(general)g(uni\002er)f(of)h
(the)g(program)f(and)h(the)g(query)m(.)71 1964 y(As)j(for)f(syntax,)j
FK(L)416 1971 y FE(0)454 1964 y FP(will)e(denote)g(a)g(program)f(as)i
FD(t)f FP(and)g(a)g(query)f(as)i FS(?-)p FD(t)e FP(where)h
FD(t)g FP(is)g(a)71 2024 y(term.)h(The)c(scope)f(of)g(v)o(ariables)f
(is)h(limited)f(to)h(a)g(program)f(\(resp.,)i(a)f(query\))f(term.)19
b(Thus,)71 2084 y(the)13 b(meaning)g(of)g(a)h(program)e(\(resp.,)j(a)f
(query\))e(is)i(independent)f(of)g(its)h(v)o(ariables')f(names.)71
2144 y(An)h(interpreter)g(for)f FK(L)475 2151 y FE(0)510
2144 y FP(will)i(dispose)g(of)f(some)h(data)g(representation)f(for)g
(terms)g(and)h(use)71 2205 y(a)j(uni\002cation)f(algorithm)g(for)g(its)
h(operational)f(semantics.)33 b(W)l(e)18 b(ne)o(xt)g(describe)g
FK(M)1608 2212 y FE(0)1652 2205 y FC(=)71 2265 y FK(h)8
b(D)136 2272 y FE(0)167 2265 y FD(;)j FK(I)219 2272 y
FE(0)247 2265 y FK(i)q FP(,)16 b(an)f(abstract)g(machine)g(design)g
(for)f FK(L)963 2272 y FE(0)998 2265 y FP(consisting)h(of)g(a)g(data)g
(representation)71 2325 y FK(D)109 2332 y FE(0)141 2325
y FP(acted)e(upon)f(by)g(a)h(set)f FK(I)562 2332 y FE(0)595
2325 y FP(of)g(machine)g(instructions.)71 2402 y(The)k(idea)g(is)g
(quite)g(simple:)22 b(ha)o(ving)15 b(de\002ned)h(a)g(program)f(term)g
FD(p)p FP(,)j(one)e(can)g(submit)f(an)o(y)71 2462 y(query)g
FS(?-)o FD(q)j FP(and)d(e)o(x)o(ecution)h(either)f(fails)g(if)g
FD(p)i FP(and)e FD(q)i FP(do)f(not)f(unify)m(,)h(or)f(succeeds)i(with)e
(a)868 2640 y(9)p eop
%%Page: 10 25
10 24 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(binding)e(of)g(the)g(v)o(ariables)g(in)h FD(q)g FP(obtained)f(by)h
(unifying)e(it)h(with)g FD(p)p FP(.)257 522 y FA(2.1)72
b(T)-7 b(erm)17 b(r)o(epr)o(esentation)257 660 y FP(Let)d(us)f(\002rst)
f(de\002ne)h(an)g(internal)f(representation)g(for)g(terms)h(in)f
FK(L)1419 667 y FE(0)1440 660 y FP(.)17 b(W)l(e)c(will)f(use)i(a)f
(global)257 720 y(block)e(of)g(storage)g(in)f(the)h(form)f(of)h(an)g
(addressable)g FB(heap)g FP(called)g FS(HEAP)g FP(which)g(is)g(an)g
(array)257 781 y(of)h(data)h(cells.)j(A)c(heap)h(cell')m(s)f(address)h
(is)g(its)g(inde)o(x)f(in)g(the)g(array)g FS(HEAP)p FP(.)257
857 y(It)g(will)h(be)f(suf)o(\002cient,)g(in)h(order)f(to)g(represent)g
(arbitrary)f(terms)h(in)h FS(HEAP)p FP(,)f(to)h(encode)f(v)o(ari-)257
918 y(ables)j(and)f FB(`structur)n(es')g FP(of)g(the)g(form)f
FD(f)5 b FC(\(@)1032 925 y FE(1)1052 918 y FD(;)j(:)g(:)g(:)f(;)h
FC(@)1199 925 y Fy(n)1222 918 y FC(\))14 b FP(where)g
FD(f)5 b(=n)15 b FP(is)f(a)h(functor)d(and)i(the)257
978 y FC(@)295 985 y Fy(i)309 978 y FP(')m(s)e(are)f(references)g(to)g
(the)g(heap)g(addresses)h(the)f FD(n)g FP(subterms.)16
b(Thus,)c(there)f(are)g(two)f(sorts)257 1038 y(of)17
b(data)h(to)f(be)h(stored)f(in)h(the)f(array)g FS(HEAP)p
FP(:)g(v)o(ariables)g(and)h(structures.)31 b(Explicit)17
b FB(tags)p FP(,)257 1098 y(appearing)f(as)g(part)f(of)h(the)f(format)g
(of)h(some)g(heap)f(cells,)j(will)d(be)h(used)g(to)g(discriminate)257
1158 y(between)d(these)g(two)e(sorts)i(of)f(heap)g(data.)257
1235 y(A)i(v)o(ariable)e(will)h(be)g(identi\002ed)g(to)g(a)g(reference)
g(pointer)f(and)i(represented)f(using)g(a)g(single)257
1295 y(heap)f(cell.)k(Thus,)d(we)f(shall)f(speak)i(of)e
FB(variable)h(cells)p FP(.)k(A)11 b(v)o(ariable)g(cell)h(will)f(be)h
(identi\002ed)257 1356 y(by)i(the)f(tag)g FS(REF)p FP(,)h(as)g(denoted)
f(as)h FK(h)9 b Fx(REF)h FD(;)g(k)g FK(i)k FP(where)f
FD(k)j FP(is)e(a)f(store)g(address;)i FB(i.e)o(.)p FP(,)g(an)e(inde)o
(x)257 1416 y(into)h FS(HEAP)p FP(.)g(This)h(con)n(v)o(enience)f(is)g
(meant)g(to)g(facilitate)f(v)o(ariable)g(binding)g(by)h(establish-)257
1476 y(ing)k(a)f(reference)g(to)g(the)h(term)f(the)g(v)o(ariable)g(is)h
(to)f(be)h(bound)f(to.)31 b(Thus,)20 b(upon)d(binding)257
1536 y(a)f(v)o(ariable,)h(the)f(address)g(part)f(of)h(the)g
FS(REF)f FP(cell)h(that)g(represents)g(it)f(will)h(be)g(set)g(accord-)
257 1596 y(ingly)m(.)23 b(The)16 b(con)n(v)o(ention)e(for)h
(representing)f(an)h FB(unbound)f FP(v)o(ariable)h(is)g(to)g(set)g(the)
g(address)257 1657 y(part)e(of)g(the)g FS(REF)f FP(cell)i(to)e(contain)
h(its)g(o)o(wn)g(address.)19 b(Therefore)12 b(an)h(unbound)g(v)o
(ariable)f(is)257 1717 y(a)h(self-referential)e FS(REF)h
FP(cell.)257 1794 y(Structures)i(are)g(non-v)o(ariable)f(terms.)21
b(Thus,)16 b(the)e(heap)g(format)g(used)g(for)g(representing)f(a)257
1854 y(structure)e FD(f)5 b FC(\()p FD(t)509 1861 y FE(1)529
1854 y FD(;)j(:)g(:)g(:)f(;)h(t)656 1861 y Fy(n)679 1854
y FC(\))j FP(will)g(consist)h(of)f FD(n)c FC(+)g(2)k
FP(heap)h(cells.)j(The)d(\002rst)f(two)g(of)f(these)i
FD(n)7 b FC(+)g(2)257 1914 y FP(cells)14 b(are)f(not)g(necessarily)h
(contiguous.)19 b(In)13 b(ef)o(fect,)g(the)g(\002rst)g(of)g(the)g(two)g
(acts)h(as)g(a)g(sorted)257 1974 y(reference)k(pointer)f(to)h(the)h
(second,)h(itself)e(used)h(to)f(represent)g(the)g(functor)f
FD(f)5 b(=n)p FP(.)34 b(\(The)257 2034 y(reason)14 b(for)e(this)i
(apparently)e(odd)h(indirection)f(is)i(to)f(accommodate)g(structure)g
(sharing)g(as)257 2094 y(will)g(become)f(clear)h(shortly)m(.\))i(The)f
FD(n)f FP(other)f(cells)h(are)f(destined)h(to)g(contain)f(references)h
(to)257 2155 y(the)f(roots)e(of)h(the)g FD(n)h FP(subterms)f(in)g
(proper)f(order)m(.)15 b(More)d(speci\002cally)m(,)f(the)g(\002rst)g
(of)g(the)g FD(n)c FC(+)g(2)257 2215 y FP(cells)14 b(representing)e
FD(f)5 b FC(\()p FD(t)687 2222 y FE(1)706 2215 y FD(;)j(:)g(:)g(:)g(;)g
(t)834 2222 y Fy(n)857 2215 y FC(\))k FP(is)i(formatted)d(as)i(a)g
(tagged)g FB(structur)n(e)h(cell)p FP(,)f(denoted)g(as)257
2275 y FK(h)c Fx(STR)h FD(;)h(k)f FK(i)p FP(,)j(containing)e(the)g(tag)
h FS(STR)f FP(and)h(the)g(address)g FD(k)i FP(where)d(\(the)g
(representation)g(of\))257 2335 y(the)g(functor)e FD(f)c(=n)11
b FP(is)f(stored.)15 b(This)c(cell)f(is)h(called)f(a)h
FB(functor)f(cell)g FP(and,)h(quite)f(importantly)m(,)g(it)257
2395 y(is)i FB(always)h FP(immediately)d(follo)o(wed)h(by)h(a)g
(sequence)g(of)f FD(n)h FP(contiguous)g(cells,)g(one)g(for)f(each)257
2456 y(subterm)17 b FD(t)453 2463 y Fy(i)467 2456 y FP(,)i(respecti)o
(v)o(ely)m(.)30 b(That)18 b(is,)h(if)e FS(HEAP[)p FD(k)r
FS(])22 b FC(=)h FD(f)5 b(=n)18 b FP(then)g FS(HEAP[)p
FD(k)12 b FC(+)f(1)p FS(])18 b FP(will)257 2516 y(refer)10
b(to)h(the)g(\002rst)f(subterm)g FC(\()p FD(t)780 2523
y FE(1)800 2516 y FC(\))p FP(,)h(...)16 b FS(HEAP[)p
FD(k)d FC(+)e FD(n)p FS(])g FP(to)f(the)h FD(n)p FP(-th)f(\(and)h
(last\))f(subterm)h FC(\()p FD(t)1822 2523 y Fy(n)1845
2516 y FC(\))p FP(.)258 2640 y FN(P)o FL(A)q(G)r(E)i
FN(1)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 11 26
11 25 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 835 290 178 2 v 791 328 a Fw(0)p 834
345 2 57 v 42 w Fv(STR)p 947 345 V 41 w Fw(1)p 1011 345
V 835 347 178 2 v 791 385 a(1)p 834 402 2 57 v 74 w Fu(h=)p
Fw(2)p 1011 402 V 835 403 178 2 v 791 441 a(2)p 834 458
2 57 v 42 w Fv(REF)p 947 458 V 41 w Fw(2)p 1011 458 V
835 460 178 2 v 791 498 a(3)p 834 515 2 57 v 42 w Fv(REF)p
947 515 V 41 w Fw(3)p 1011 515 V 835 516 178 2 v 791
554 a(4)p 834 571 2 57 v 42 w Fv(STR)p 947 571 V 41 w
Fw(5)p 1011 571 V 835 573 178 2 v 791 611 a(5)p 834 627
2 57 v 73 w Fu(f)5 b(=)p Fw(1)p 1011 627 V 835 629 178
2 v 791 667 a(6)p 834 684 2 57 v 42 w Fv(REF)p 947 684
V 41 w Fw(3)p 1011 684 V 835 686 178 2 v 791 723 a(7)p
834 740 2 57 v 42 w Fv(STR)p 947 740 V 41 w Fw(8)p 1011
740 V 835 742 178 2 v 791 780 a(8)p 834 797 2 57 v 75
w Fu(p=)p Fw(3)p 1011 797 V 835 799 178 2 v 791 836 a(9)p
834 853 2 57 v 42 w Fv(REF)p 947 853 V 41 w Fw(2)p 1011
853 V 835 855 178 2 v 769 893 a(10)p 834 910 2 57 v 41
w Fv(STR)p 947 910 V 41 w Fw(1)p 1011 910 V 835 911 178
2 v 769 949 a(11)p 834 966 2 57 v 41 w Fv(STR)p 947 966
V 41 w Fw(5)p 1011 966 V 835 968 178 2 v 305 1095 a FP(Figure)12
b(2.1:)k(Heap)c(representation)g(of)g FD(p)p FC(\()p
FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d
FC(\()p FD(W)i FC(\)\))p FD(:)71 1239 y FP(F)o(or)19
b(e)o(xample,)j(a)e(possible)g(heap)f(representation)g(of)g(the)h(term)
f FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))71 1299 y FP(starts)17
b(at)h(address)g(7)g(in)f(the)h(heap)g(sho)o(wn)f(in)h(Figure)e(2.1.)32
b(Note)18 b(that)f(only)h(one)f(occur)o(-)71 1359 y(rence)11
b(of)g(a)g(gi)o(v)o(en)g(v)o(ariable)g(is)g(represented)g(by)g(an)h
(unbound)e FS(REF)h FP(cell,)h(whereas)g(its)f(other)71
1419 y(occurrences)f(are)h FS(REF)g FP(cells)g(containing)g(the)g(heap)
g(address)g(of)g(the)g(\002rst)f(occurrence.)15 b(Ob-)71
1479 y(serv)o(e)g(also)f(that,)i(although)e(it)g(is)h(true)f(that)g
(the)h(structure)f(cells)h(at)f(addresses)i(0,)f(4,)g(and)g(7)71
1539 y(do)d(contiguously)g(precede)h(their)e(respecti)o(v)o(e)i
(functor)f(cells,)h(such)g(is)g(not)f(the)h(case)g(for)f(the)71
1600 y(structure)f(cells)i(at)f(address)h(10,)g(and)f(11.)71
1786 y FA(2.2)71 b(Compiling)17 b Ft(L)622 1796 y FC(0)667
1786 y FA(queries)71 1914 y FP(According)g(to)h FK(L)390
1921 y FE(0)410 1914 y FP(')m(s)g(operational)f(semantics,)j(the)e
(processing)g(of)g(a)g(query)f(consists)i(of)71 1974
y(preparing)13 b(one)h(side)h(of)f(an)g(equation)g(to)h(be)f(solv)o
(ed.)22 b(Namely)m(,)15 b(a)g(query)f(term)g FD(q)h FP(is)g(trans-)71
2034 y(lated)i(into)g(a)g(sequence)h(of)f(instructions)f(designed)i(to)
f(b)o(uild)g(an)g(e)o(x)o(emplar)g(of)g FD(q)i FP(on)e(the)71
2094 y(heap)d(from)f FD(q)r FP(')m(s)g(te)o(xtual)h(form.)20
b(Hence,)15 b(due)f(to)g(the)g(tree)g(structure)f(of)h(a)g(term)g(and)g
(multi-)71 2155 y(ple)g(occurrences)h(of)f(v)o(ariables,)i(it)e(is)i
(necessary)m(,)g(while)e(processing)h(a)g(part)g(of)f(the)h(term,)71
2215 y(to)g(sa)o(v)o(e)i(temporarily)e(someplace)h(pieces)g(of)g(terms)
g(yet)f(to)h(be)g(processed)h(or)e(a)h(v)o(ariable)71
2275 y(that)e(may)h(occur)g(again)g(later)f(in)h(the)g(term.)23
b(F)o(or)15 b(this)g(purpose,)h FK(M)1287 2282 y FE(0)1322
2275 y FP(is)f(endo)o(wed)g(with)f(a)71 2335 y(suf)o(\002cient)d
(number)h(of)f(\(v)o(ariable\))g FB(r)n(e)n(gisters)i
FS(X)p FC(1)q FP(,)f FS(X)p FC(2)q FP(,)h(etc.,)g(to)f(be)g(used)h(to)f
(store)g(heap)h(data)71 2395 y(temporarily)i(as)j(terms)f(are)g(being)h
(b)o(uilt.)30 b(Thus,)19 b(the)f(contents)f(of)g(such)g(a)h(re)o
(gister)f(will)71 2456 y(ha)o(v)o(e)g(the)g(format)f(of)g(a)i(heap)f
(cell.)30 b(These)18 b(v)o(ariable)e(re)o(gisters)h(are)g(allocated)g
(to)g(a)g(term)71 2516 y(on)12 b(a)h(least)g(a)o(v)o(ailable)f(inde)o
(x)h(basis)h(such)f(that)f(\(1\))g(re)o(gister)g FS(X)p
FC(1)h FP(is)g(always)g(allocated)f(to)h(the)71 2640
y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(1)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 12 27
12 26 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(outermost)h(term,)g(and)g(\(2\))f(the)h(same)g(re)o(gister)g(is)g
(allocated)g(to)f(all)h(the)g(occurrences)g(of)f(a)257
349 y(gi)o(v)o(en)i(v)o(ariable.)28 b(F)o(or)15 b(e)o(xample,)j(re)o
(gisters)f(are)f(allocated)g(to)g(the)h(v)o(ariables)f(of)g(the)g(term)
257 409 y FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))13 b FP(as)g(follo)o(ws:)872
501 y FS(X)p FC(1)i(=)e FD(p)p FC(\()p FS(X)p FC(2)q
FD(;)8 b FS(X)p FC(3)p FD(;)g FS(X)p FC(4\))872 562 y
FS(X)p FC(2)15 b(=)e FD(Z)872 622 y FS(X)p FC(3)i(=)e
FD(h)p FC(\()p FS(X)p FC(2)q FD(;)8 b FS(X)p FC(5\))872
682 y FS(X)p FC(4)15 b(=)e FD(f)5 b FC(\()p FS(X)p FC(5)q(\))872
742 y FS(X)p FC(5)15 b(=)e FD(W)o(:)257 848 y FP(This)i(amounts)f(to)f
(saying)i(that)e(a)h(term)g(is)g(seen)g(as)h(a)f(\003attened)f
(conjuncti)o(v)o(e)h(set)g(of)g(equa-)257 909 y(tions)g(of)g(the)g
(form)e FD(X)649 916 y Fy(i)681 909 y FC(=)k FD(X)i FP(or)c
FD(X)889 916 y Fy(i)920 909 y FC(=)j FD(f)5 b FC(\()p
FD(X)1063 916 y Fy(i)1075 921 y Fs(1)1095 909 y FD(;)j(:)g(:)g(:)f(;)h
(X)1244 916 y Fy(i)1256 920 y Fr(n)1280 909 y FC(\))p
FP(,)15 b FC(\()p FD(n)h FK(\025)h FC(0\))d FP(where)g(the)g
FD(X)1754 916 y Fy(i)1768 909 y FP(')m(s)g(are)257 969
y(all)c(distinct)g(ne)o(w)g(v)o(ariable)f(names.)16 b(There)10
b(are)g(two)g(consequences)h(of)e(re)o(gister)h(allocation:)257
1029 y(\(1\))g(e)o(xternal)f(v)o(ariable)h(names)g(\(such)g(as)h
FD(Z)j FP(and)c FD(W)17 b FP(in)10 b(our)g(e)o(xample\))f(can)i(all)f
(be)g(for)o(gotten;)257 1089 y(and,)i(\(2\))d(a)i(query)f(term)g(can)g
(then)g(be)h(transformed)e(into)h(its)h FB(\003attened)f(form)p
FP(,)h(a)g(sequence)g(of)257 1149 y(re)o(gister)i(assignments)h(only)f
(of)g(the)g(form)f FS(X)p FD(i)i FC(=)i FD(f)5 b FC(\()p
FS(X)p FD(i)1227 1156 y FE(1)1246 1149 y FD(;)j(:)g(:)g(:)g(;)g
FS(X)p FD(i)1403 1156 y Fy(n)1426 1149 y FC(\))p FP(.)18
b(This)13 b(form)g(is)g(what)g(is)257 1210 y(to)e(guide)f(the)g(b)o
(uilding)g(of)g(the)g(term')m(s)h(heap)f(representation.)15
b(Thus,)d(for)d(left-to-right)f(code)257 1270 y(generation)j(to)h(be)f
(well-founded,)g(it)g(is)h(necessary)g(to)g(order)e(a)i(\003attened)f
(query)g(term)g(so)h(as)257 1330 y(to)g(ensure)g(that)g(a)g(re)o
(gister)g(name)g(may)f(not)h(be)g(used)g(in)g(the)g(right-hand)e(side)j
(of)e(an)h(assign-)257 1390 y(ment)j(\()p FB(viz.)p FP(,)h(as)f(a)g
(subterm\))f(before)g(its)h(assignment,)h(if)e(it)g(has)h(one)g(\()p
FB(viz.)p FP(,)h(being)f(the)f(left-)257 1450 y(hand)h(side\).)22
b(F)o(or)14 b(e)o(xample,)h(the)g(\003attened)f(form)f(of)h(query)g
(term)g FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))257 1511 y
FP(is)13 b(the)f(sequence)h FS(X)p FC(3)h(=)g FD(h)p
FC(\()p FS(X)p FC(2)q FD(;)8 b FS(X)p FC(5\))p FP(,)13
b FS(X)p FC(4)h(=)f FD(f)5 b FC(\()p FS(X)p FC(5)q(\))p
FP(,)13 b FS(X)p FC(1)h(=)g FD(p)p FC(\()p FS(X)p FC(2)q
FD(;)8 b FS(X)p FC(3)p FD(;)g FS(X)p FC(4\))p FP(.)257
1587 y(Scanning)16 b(a)h(\003attened)f(query)g(term)f(from)h(left)g(to)
g(right,)h(each)f(component)g(of)g(the)g(form)257 1648
y FS(X)p FD(i)g FC(=)g FD(f)5 b FC(\()p FS(X)p FD(i)469
1655 y FE(1)489 1648 y FD(;)j(:)g(:)g(:)f(;)h FS(X)p
FD(i)645 1655 y Fy(n)668 1648 y FC(\))14 b FP(is)f(tokenized)g(as)i(a)e
(sequence)i FS(X)p FD(i)g FC(=)h FD(f)5 b(=n)p FP(,)16
b FS(X)p FD(i)1515 1655 y FE(1)1534 1648 y FP(,)e FD(:)8
b(:)g(:)p FP(,)14 b FS(X)p FD(i)1691 1655 y Fy(n)1714
1648 y FP(;)g(that)g(is,)257 1708 y(a)h(re)o(gister)e(associated)i
(with)f(an)g FD(n)p FP(-ary)f(functor)g(follo)o(wed)g(by)h(e)o(xactly)g
FD(n)g FP(re)o(gister)g(names.)257 1768 y(Therefore,)19
b(in)e(a)h(stream)f(of)g(such)g(tokens)g(resulting)g(from)f(tokenizing)
h(a)g(full)g(\003attened)257 1828 y(term,)c(there)f(are)g(three)g
(kinds)g(of)g(items)h(to)f(process:)318 1932 y(1.)24
b(a)13 b(re)o(gister)f(associated)h(with)f(a)h(structure)e(functor;)318
2030 y(2.)24 b(a)13 b(re)o(gister)f(ar)o(gument)g(not)g(pre)o(viously)f
(encountered)h(an)o(ywhere)h(in)f(the)g(stream;)318 2127
y(3.)24 b(a)13 b(re)o(gister)f(ar)o(gument)g(seen)h(before)e(in)i(the)f
(stream.)257 2231 y(From)k(this)h(stream,)i(a)e(token-dri)o(v)o(en)e
(heap)i(representation)f(of)h(the)g(term)f(is)i(easy)f(to)g(ob-)257
2291 y(tain.)22 b(T)l(o)15 b(b)o(uild)f(it,)h(the)f(actions)h(to)f(be)h
(taken)f(for)f(each)i(of)f(the)g(three)g(sorts)h(of)f(tokens)g(are,)257
2351 y(respecti)o(v)o(ely:)318 2456 y(1.)24 b(push)17
b(a)f(ne)o(w)h FS(STR)f FP(\(and)g(adjoining)f(functor\))g(cell)i(onto)
f(the)g(heap)g(and)h(copy)f(that)379 2516 y(cell)d(into)f(the)g
(allocated)g(re)o(gister)g(address;)258 2640 y FN(P)o
FL(A)q(G)r(E)h FN(1)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 13 28
13 27 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 131 289 a FP(2.)25 b(push)13 b(a)h(ne)o(w)g
FS(REF)g FP(cell)f(onto)h(the)f(heap)h(containing)f(its)h(o)o(wn)g
(address,)h(and)f(copy)f(it)193 349 y(into)e(the)i(gi)o(v)o(en)f(re)o
(gister;)131 451 y(3.)25 b(push)12 b(a)h(ne)o(w)f(cell)g(onto)g(the)h
(heap)f(and)g(copy)g(into)g(it)g(the)h(re)o(gister')m(s)f(v)o(alue.)71
569 y(Each)18 b(of)f(these)h(three)g(actions)g(speci\002es)g(the)g(ef)o
(fect)f(of)g(respecti)o(v)o(e)h(instructions)f(of)h(the)71
630 y(machine)12 b FK(M)312 637 y FE(0)344 630 y FP(that)g(we)g(note:)
131 748 y(1.)25 b FS(put)p 286 748 15 2 v 17 w(structure)13
b FD(f)5 b(=n;)j FS(X)p FD(i)131 850 y FP(2.)25 b FS(set)p
286 850 V 17 w(variable)13 b(X)p FD(i)131 952 y FP(3.)25
b FS(set)p 286 952 V 17 w(value)13 b(X)p FD(i)71 1071
y FP(respecti)o(v)o(ely)m(.)71 1147 y(From)e(the)i(preceding)f
(considerations,)g(it)h(has)g(become)f(clear)h(that)f(the)g(heap)h(is)g
(implicitly)71 1208 y(used)20 b(as)g(a)g(stack)h(for)e(b)o(uilding)g
(terms.)38 b(Namely)m(,)21 b(term)f(parts)f(being)h(constructed)g(are)
71 1268 y(incrementally)d(piled)h(on)h FB(top)f FP(of)g(what)g(already)
h(e)o(xists)g(in)f(the)h(heap.)34 b(Therefore,)20 b(it)e(is)71
1328 y(necessary)10 b(to)f(keep)g(the)h(address)g(of)f(the)g(ne)o(xt)h
(free)f(cell)g(in)g(the)h(heap)f(some)o(where,)i(precisely)71
1388 y(as)19 b(for)g(a)g(stack.)364 1370 y FL(1)420 1388
y FP(Adding)f(to)h FK(M)706 1395 y FE(0)745 1388 y FP(a)h(global)e(re)o
(gister)h FS(H)g FP(containing)g(at)g(all)g(times)h(the)71
1448 y(ne)o(xt)e(a)o(v)o(ailable)f(address)h(on)g(the)g(heap,)i(these)e
(three)f(instructions)h(are)f(gi)o(v)o(en)h(e)o(xplicitly)71
1509 y(in)g(Figure)f(2.2.)99 b(F)o(or)18 b(e)o(xample,)i(gi)o(v)o(en)e
(that)g(re)o(gisters)g(are)g(allocated)g(as)h(abo)o(v)o(e,)i(the)71
1569 y(sequence)15 b(of)f(instructions)g(to)g(b)o(uild)g(the)h(query)f
(term)g FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FP(,)16 b(is)f(sho)o(wn)71
1629 y(in)d(Figure)f(2.3.)193 1756 y Fq(Exer)o(cise)f(2.1)21
b FR(V)-5 b(erify)10 b(that)f(the)h(ef)o(fect)h(of)f(e)o(x)o(ecuting)f
(the)h(sequence)g(of)g(instructions)e(sho)o(wn)193 1813
y(in)j(Figure)g(2.3)h(\(starting)e(with)h FQ(H)i Fw(=)h(0)p
FR(\))e(does)f(indeed)g(yield)f(a)i(correct)g(heap)g(representation)193
1869 y(for)f(the)g(term)g Fu(p)p Fw(\()p Fu(Z)q(;)d(h)p
Fw(\()p Fu(Z)q(;)g(W)e Fw(\))p Fu(;)i(f)d Fw(\()p Fu(W)h
Fw(\)\))o FR(\227the)j(one)i(sho)o(wn)f(earlier)h(as)g(Figure)g(2.1,)h
(in)f(fact.)71 2056 y FA(2.3)71 b(Compiling)17 b Ft(L)622
2067 y FC(0)667 2056 y FA(pr)o(ograms)71 2184 y FP(Compiling)12
b(a)h(program)f(term)h FD(p)g FP(is)h(just)f(a)g(bit)g(trickier)n(,)f
(although)h(not)g(by)g(much.)k(Observ)o(e)71 2245 y(that)11
b(it)h(assumes)h(that)e(a)h(query)g FS(?-)p FD(q)h FP(will)e(ha)o(v)o
(e)i(b)o(uilt)e(a)h(term)f(on)h(the)g(heap)g(and)g(set)g(re)o(gister)71
2305 y FS(X)p FC(1)g FP(to)f(contain)h(its)g(address.)k(Thus,)d
(unifying)e FD(q)i FP(to)f FD(p)g FP(can)g(proceed)f(by)h(follo)o(wing)
e(the)i(term)71 2365 y(structure)g(already)g(present)h(in)f
FS(X)p FC(1)h FP(as)g(long)g(as)g(it)f(matches)h(functor)f(for)g
(functor)f(the)i(struc-)71 2425 y(ture)d(of)h FD(p)p
FP(.)16 b(The)c(only)f(complication)f(is)h(that)g(when)h(an)f(unbound)f
FS(REF)h FP(cell)h(is)f(encountered)p 71 2470 648 2 v
129 2501 a Fz(1)145 2516 y FN(As)g(a)g(matter)f(of)g(fact,)h(in)e([W)m
(ar83],)h(W)m(arren)h(refers)g(to)e(the)h(heap)h(as)g(the)f
FH(global)f(stac)o(k)p FN(.)71 2640 y(Copyright)260 2639
y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(1)r(3)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 14 29
14 28 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 459 402 1217
3 v 500 499 a FQ(put)p 584 499 14 2 v 17 w(structure)h
Fu(f)5 b(=n;)j FQ(X)p Fu(i)k Fp(\021)34 b FQ(HEAP[H)r(])13
b Fp( )g(h)7 b Fv(STR)j Fu(;)f FQ(H)i Fw(+)f(1)e Fp(i)o
Fw(;)1078 556 y FQ(HEAP[H)k Fw(+)e(1)p FQ(])j Fp( )g
Fu(f)5 b(=n)p Fw(;)1078 612 y FQ(X)p Fu(i)13 b Fp( )g
FQ(HEAP[H)q(])q Fw(;)1078 668 y FQ(H)g Fp( )g FQ(H)d
Fw(+)h(2;)500 781 y FQ(set)p 584 781 V 17 w(variable)k(X)p
Fu(i)137 b Fp(\021)34 b FQ(HEAP[H)r(])13 b Fp( )g(h)7
b Fv(REF)j Fu(;)f FQ(H)f Fp(i)p Fw(;)1078 838 y FQ(X)p
Fu(i)13 b Fp( )g FQ(HEAP[H)q(])q Fw(;)1078 894 y FQ(H)g
Fp( )g FQ(H)d Fw(+)h(1;)500 1007 y FQ(set)p 584 1007
V 17 w(value)j(X)p Fu(i)219 b Fp(\021)34 b FQ(HEAP[H)r(])13
b Fp( )g FQ(X)p Fu(i)p Fw(;)1078 1064 y FQ(H)g Fp( )g
FQ(H)d Fw(+)h(1;)p 459 1139 1217 3 v 537 1291 a FP(Figure)h(2.2:)j
FK(M)831 1298 y FE(0)863 1291 y FP(machine)d(instructions)g(for)g
(query)g(terms)p 479 1617 1176 3 v 603 1714 a FQ(put)p
687 1714 14 2 v 18 w(structure)j Fu(h=)p Fw(2)p Fu(;)8
b FQ(X)p Fw(3)41 b FQ(\045)h(?-X)p Fw(3)13 b(=)g Fu(h)603
1770 y FQ(set)p 687 1770 V 18 w(variable)h(X)p Fw(2)162
b FQ(\045)233 b Fw(\()p Fu(Z)q(;)603 1827 y FQ(set)p
687 1827 V 18 w(variable)14 b(X)p Fw(5)162 b FQ(\045)295
b Fu(W)6 b Fw(\))p Fu(;)603 1883 y FQ(put)p 687 1883
V 18 w(structure)15 b Fu(f)5 b(=)p Fw(1)p Fu(;)j FQ(X)p
Fw(4)40 b FQ(\045)96 b(X)p Fw(4)13 b(=)g Fu(f)603 1940
y FQ(set)p 687 1940 V 18 w(value)h(X)p Fw(5)243 b FQ(\045)234
b Fw(\()p Fu(W)6 b Fw(\))p Fu(;)603 1996 y FQ(put)p 687
1996 V 18 w(structure)15 b Fu(p=)p Fw(3)p Fu(;)8 b FQ(X)p
Fw(1)44 b FQ(\045)96 b(X)p Fw(1)13 b(=)g Fu(p)603 2053
y FQ(set)p 687 2053 V 18 w(value)h(X)p Fw(2)243 b FQ(\045)230
b Fw(\()p Fu(Z)q(;)603 2109 y FQ(set)p 687 2109 V 18
w(value)14 b(X)p Fw(3)243 b FQ(\045)292 b(X)p Fw(3)p
Fu(;)603 2166 y FQ(set)p 687 2166 V 18 w(value)14 b(X)p
Fw(4)243 b FQ(\045)362 b(X)p Fw(4\))p Fu(:)p 479 2241
1176 3 v 406 2393 a FP(Figure)12 b(2.3:)j(Compiled)d(code)h(for)e
FK(L)1060 2400 y FE(0)1093 2393 y FP(query)h FS(?-)o
FD(p)p FC(\()p FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)258
2640 y FN(P)o FL(A)q(G)r(E)13 b FN(1)r(4)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 15 30
15 29 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(in)f(the)g(query)g(term)g(in)g(the)g(heap,)
i(then)e(it)g(is)h(to)f(be)g(bound)g(to)g(a)h(ne)o(w)f(term)g(that)g
(is)h(b)o(uilt)f(on)71 349 y(the)f(heap)g(as)h(an)f(e)o(x)o(emplar)g
(of)g(the)g(corresponding)g(subterm)f(in)h FD(p)p FP(.)17
b(Therefore,)12 b(an)g FK(L)1574 356 y FE(0)1607 349
y FP(pro-)71 409 y(gram)e(functions)h(in)g(two)f(modes:)15
b(a)c FS(read)g FP(mode)g(in)g(which)g(data)g(on)g(the)g(heap)g(is)h
(matched)71 469 y(against,)17 b(and)e(a)h FS(write)f
FP(mode)h(in)f(which)h(a)g(term)f(is)h(b)o(uilt)f(on)h(the)f(heap)h(e)o
(xactly)g(as)g(is)g(a)71 530 y(query)11 b(term.)71 606
y(As)16 b(with)f(queries,)i(re)o(gister)f(allocation)f(precedes)h
(translation)f(of)h(the)g(te)o(xtual)f(form)g(of)g(a)71
667 y(program)g(term)h(into)g(a)h(machine)g(instruction)f(sequence.)29
b(F)o(or)16 b(e)o(xample,)i(the)f(follo)o(wing)71 727
y(re)o(gisters)12 b(are)g(allocated)h(to)f(program)f(term)h
FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\))p FD(;)j(h)p
FC(\()p FD(Y)s(;)g(f)d FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k
FC(\))p FP(:)686 831 y FS(X)p FC(1)i(=)g FD(p)p FC(\()p
FS(X)p FC(2)p FD(;)8 b FS(X)p FC(3)p FD(;)g FS(X)p FC(4\))686
891 y FS(X)p FC(2)14 b(=)g FD(f)5 b FC(\()p FS(X)p FC(5\))686
952 y FS(X)p FC(3)14 b(=)g FD(h)p FC(\()p FS(X)p FC(4)p
FD(;)8 b FS(X)p FC(6\))686 1012 y FS(X)p FC(4)14 b(=)g
FD(Y)686 1072 y FS(X)p FC(5)g(=)g FD(X)686 1132 y FS(X)p
FC(6)g(=)g FD(f)5 b FC(\()p FS(X)p FC(7\))686 1192 y
FS(X)p FC(7)14 b(=)g FD(a:)71 1311 y FP(Recall)j(that)g(compiling)g(a)g
(query)g(necessitates)h(ordering)e(its)i(\003attened)f(form)f(in)h
(such)g(a)71 1371 y(way)e(as)i(to)f(b)o(uild)g(a)g(term)g(once)g(its)h
(subterms)f(ha)o(v)o(e)h(been)f(b)o(uilt.)27 b(Here,)17
b(the)f(situation)g(is)71 1431 y(re)o(v)o(ersed)d(because)h(query)f
(data)g(from)f(the)h(heap)h(are)f(assumed)h(a)o(v)o(ailable,)g(e)o(v)o
(en)f(if)g(only)g(in)71 1492 y(the)h(form)f(of)h(unbound)g
FS(REF)g FP(cells.)22 b(Hence,)15 b(a)g(program)e(term')m(s)h
(\003attened)g(form)f(follo)o(ws)71 1552 y(a)i(top-do)o(wn)e(order)m(.)
23 b(F)o(or)14 b(e)o(xample,)i(the)e(program)g(term)g
FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\))p FD(;)j(h)p
FC(\()p FD(Y)s(;)g(f)d FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k
FC(\))j FP(is)g(put)71 1612 y(into)f(the)h(\003attened)g(sequence:)21
b FS(X)p FC(1)f(=)e FD(p)p FC(\()p FS(X)p FC(2)q FD(;)8
b FS(X)p FC(3)p FD(;)g FS(X)p FC(4\))p FP(,)17 b FS(X)p
FC(2)i(=)g FD(f)5 b FC(\()p FS(X)p FC(5\))p FP(,)17 b
FS(X)p FC(3)i(=)g FD(h)p FC(\()p FS(X)p FC(4)p FD(;)8
b FS(X)p FC(6\))p FP(,)71 1672 y FS(X)p FC(6)14 b(=)f
FD(f)5 b FC(\()p FS(X)p FC(7)q(\))p FP(,)13 b FS(X)p
FC(7)h(=)g FD(a)p FP(.)71 1749 y(As)e(with)g(query)g(compiling,)g(the)h
(\003attened)f(form)f(of)h(a)h(program)e(is)i(tokenized)f(for)f
(left-to-)71 1809 y(right)i(processing)i(and)f(generates)g(three)g
(kinds)h(of)f(machine)g(instructions)g(depending)g(on)71
1869 y(whether)d(is)i(met:)131 1984 y(1.)25 b(a)12 b(re)o(gister)g
(associated)h(with)f(a)h(structure)f(functor;)131 2085
y(2.)25 b(a)12 b(\002rst-seen)g(re)o(gister)g(ar)o(gument;)g(or)n(,)131
2185 y(3.)25 b(an)12 b(already-seen)g(re)o(gister)g(ar)o(gument.)71
2300 y(These)h(instructions)f(are,)131 2415 y(1.)25 b
FS(get)p 286 2415 15 2 v 17 w(structure)13 b FD(f)5 b(=n;)j
FS(X)p FD(i)131 2516 y FP(2.)25 b FS(unify)p 346 2516
V 17 w(variable)13 b(X)p FD(i)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(1)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 16 31
16 30 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 504 291 1127
3 v 628 388 a FQ(get)p 712 388 14 2 v 17 w(structure)i
Fu(p=)p Fw(3)p Fu(;)8 b FQ(X)p Fw(1)44 b FQ(\045)e(X)p
Fw(1)12 b(=)h Fu(p)628 445 y FQ(unify)p 766 445 V 18
w(variable)i(X)p Fw(2)107 b FQ(\045)175 b Fw(\()p FQ(X)p
Fw(2)p Fu(;)628 501 y FQ(unify)p 766 501 V 18 w(variable)15
b(X)p Fw(3)107 b FQ(\045)255 b(X)p Fw(3)p Fu(;)628 558
y FQ(unify)p 766 558 V 18 w(variable)15 b(X)p Fw(4)107
b FQ(\045)326 b Fu(Y)10 b Fw(\))p Fu(;)628 614 y FQ(get)p
712 614 V 17 w(structure)16 b Fu(f)5 b(=)p Fw(1)p Fu(;)j
FQ(X)p Fw(2)40 b FQ(\045)i(X)p Fw(2)12 b(=)h Fu(f)628
670 y FQ(unify)p 766 670 V 18 w(variable)i(X)p Fw(5)107
b FQ(\045)179 b Fw(\()p Fu(X)t Fw(\))p Fu(;)628 727 y
FQ(get)p 712 727 V 17 w(structure)16 b Fu(h=)p Fw(2)p
Fu(;)8 b FQ(X)p Fw(3)41 b FQ(\045)h(X)p Fw(3)12 b(=)h
Fu(h)628 783 y FQ(unify)p 766 783 V 18 w(value)h(X)p
Fw(4)189 b FQ(\045)178 b Fw(\()p Fu(Y)s(;)628 840 y FQ(unify)p
766 840 V 18 w(variable)15 b(X)p Fw(6)107 b FQ(\045)259
b(X)p Fw(6\))p Fu(;)628 896 y FQ(get)p 712 896 V 17 w(structure)16
b Fu(f)5 b(=)p Fw(1)p Fu(;)j FQ(X)p Fw(6)40 b FQ(\045)i(X)p
Fw(6)12 b(=)h Fu(f)628 953 y FQ(unify)p 766 953 V 18
w(variable)i(X)p Fw(7)107 b FQ(\045)179 b Fw(\()p FQ(X)p
Fw(7\))p Fu(;)628 1009 y FQ(get)p 712 1009 V 17 w(structure)16
b Fu(a=)p Fw(0)p Fu(;)8 b FQ(X)p Fw(7)43 b FQ(\045)f(X)p
Fw(7)12 b(=)h Fu(a:)p 504 1085 1127 3 v 392 1236 a FP(Figure)e(2.4:)16
b(Compiled)c(code)g(for)g FK(L)1046 1243 y FE(0)1078
1236 y FP(program)g FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t
FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d FC(\()p FD(a)p
FC(\)\))p FD(;)j(Y)j FC(\))p FD(:)318 1388 y FP(3.)24
b FS(unify)p 532 1388 15 2 v 18 w(value)13 b(X)p FD(i)257
1520 y FP(respecti)o(v)o(ely)m(.)257 1596 y(T)l(aking)j(for)f(e)o
(xample)h(the)g(program)f(term)g FD(p)p FC(\()p FD(f)5
b FC(\()p FD(X)t FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k FC(\))p FP(,)17 b(the)f
FK(M)1672 1603 y FE(0)1708 1596 y FP(machine)257 1657
y(instructions)h(sho)o(wn)g(in)g(Figure)f(2.4)i(are)f(generated.)89
b(Each)18 b(of)f(the)g(two)f FS(unify)h FP(in-)257 1717
y(structions)d(functions)f(in)g(two)g(modes)h(depending)f(on)h(whether)
f(a)h(term)e(is)i(to)g(be)g(matched)257 1777 y(from,)k(or)e(being)g(b)o
(uilt)g(on,)i(the)f(heap.)29 b(F)o(or)16 b(b)o(uilding)g(\()p
FS(write)g FP(mode\),)h(the)g(work)f(to)g(be)257 1837
y(done)11 b(is)h(e)o(xactly)f(that)g(of)f(the)h(two)f
FS(set)h FP(query)f(instructions)h(of)g(Figure)f(2.2.)15
b(F)o(or)c(matching)257 1897 y(\()p FS(read)17 b FP(mode\),)h(these)f
(instructions)f(seek)i(to)f(recognize)g(data)g(from)f(the)g(heap)i(as)f
(those)257 1958 y(of)12 b(the)g(term)g(at)g(corresponding)g(positions,)
h(proceeding)e(if)h(successful)h(and)f(failing)f(other)o(-)257
2018 y(wise.)19 b(In)13 b FK(L)468 2025 y FE(0)488 2018
y FP(,)h(failure)d(aborts)i(all)h(further)d(work.)17
b(In)c FS(read)g FP(mode,)h(these)f(instructions)g(set)257
2078 y(a)h(global)g(re)o(gister)g FS(S)f FP(to)h(contain)g(at)g(all)g
(times)f(the)h(heap)g(address)h(of)e(the)h(ne)o(xt)g(subterm)g(to)257
2138 y(be)f(matched.)257 2215 y(V)-6 b(ariable)22 b(binding)f(creates)h
(the)g(possibility)f(that)h(reference)f(chains)h(may)f(be)h(formed.)257
2275 y(Therefore,)17 b FB(der)n(efer)n(encing)g FP(is)f(performed)f(by)
h(a)g(function)f FB(der)n(ef)24 b FP(which,)17 b(when)f(applied)257
2335 y(to)d(a)g(store)f(address,)i(follo)o(ws)e(a)g(possible)h
(reference)f(chain)h(until)f(it)g(reaches)h(either)f(an)h(un-)257
2395 y(bound)h FS(REF)g FP(cell)g(or)g(a)g(non-)p FS(REF)g
FP(cell,)h(the)f(address)g(of)g(which)g(it)g(returns.)21
b(The)14 b(ef)o(fect)g(of)257 2456 y(dereferencing)g(is)i(none)e(other)
h(than)g(composing)f(v)o(ariable)h(substitutions.)23
b(Its)15 b(de\002nition)257 2516 y(is)d(gi)o(v)o(en)g(in)g(Figure)f
(2.5.)16 b(W)l(e)c(shall)g(use)g(the)g(generic)f(notation)g
FS(STORE[)p FD(a)p FS(])g FP(to)h(denote)f(the)258 2640
y FN(P)o FL(A)q(G)r(E)i FN(1)r(6)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 17 32
17 31 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 509 291 742 3 v 530 388 a Fq(function)f
FI(der)n(ef)7 b Fw(\()p Fu(a)12 b Fw(:)g FI(addr)n(ess)o
Fw(\))g(:)h FI(addr)n(ess)n Fw(;)572 445 y Fq(begin)613
501 y Fp(h)7 b FI(tag)i Fu(;)h FI(value)d Fp(i)12 b( )h
FQ(STORE[)p Fu(a)p FQ(])r Fw(;)613 558 y Fq(if)g Fw(\()p
FI(tag)d Fw(=)j Fv(REF)p Fw(\))d Fp(^)g Fw(\()p FI(value)25
b Fp(6)p Fw(=)g Fu(a)p Fw(\))655 614 y Fq(then)12 b(r)o(etur)o(n)i
FI(der)n(ef)7 b Fw(\()p FI(value)o Fw(\))655 670 y Fq(else)k(r)o(etur)o
(n)j Fu(a)572 727 y Fq(end)e FI(der)n(ef)6 b Fw(;)p 509
807 V 564 959 a FP(Figure)11 b(2.5:)16 b(The)d FB(der)n(ef)20
b FP(operation)71 1158 y(contents)c(of)f(a)i(term)e(data)h(cell)h(at)f
(address)g FD(a)g FP(\(whether)f(heap,)j FS(X)e FP(re)o(gister)n(,)h
(or)f(an)o(y)g(other)71 1219 y(global)f(structure,)i(yet)f(to)g(be)g
(introduced,)g(containing)g(term)f(data)h(cells\).)27
b(W)l(e)16 b(shall)g(use)71 1279 y(speci\002c)f(area)g(notation)g(\()p
FB(e)o(.g)o(.)p FP(,)i FS(HEAP[)p FD(a)p FS(])o FP(\))e(whene)o(v)o(er)
g(we)g(want)g(to)g(emphasize)h(that)f(the)71 1339 y(address)d
FD(a)g FP(must)h(necessarily)g(lie)f(within)g(that)g(area.)71
1416 y(Mode)k(is)g(set)g(by)f FS(get)p 481 1416 15 2
v 18 w(structure)e FD(f)5 b(=n;)j FS(X)p FD(i)16 b FP(as)g(follo)o(ws:)
21 b(if)15 b(the)h(dereferenced)f(v)o(alue)71 1476 y(of)d
FS(X)p FD(i)h FP(is)h(an)f(unbound)g FS(REF)f FP(cell,)i(then)f(it)g
(is)h(bound)f(to)g(a)g(ne)o(w)g FS(STR)g FP(cell)g(pointing)g(to)g
FD(f)5 b(=n)71 1536 y FP(pushed)15 b(onto)h(the)f(heap)h(and)g(mode)f
(is)h(set)h(to)e FS(write)p FP(;)i(otherwise,)g(if)e(it)g(is)h(an)g
FS(STR)g FP(cell)71 1596 y(pointing)e(to)h(functor)f
FD(f)5 b(=n)p FP(,)17 b(then)d(re)o(gister)h FS(S)g FP(is)g(set)h(to)f
(the)g(heap)g(address)g(follo)o(wing)f(that)71 1657 y(functor)g(cell')m
(s)h(and)h(mode)f(is)g(set)h(to)f FS(read)o FP(.)25 b(If)15
b(it)g(is)g(not)g(an)h FS(STR)f FP(cell)g(or)g(if)f(the)i(functor)71
1717 y(is)f(not)f FD(f)5 b(=n)p FP(,)16 b(the)f(program)f(fails.)22
b(Similarly)m(,)13 b(in)i FS(read)f FP(mode,)i FS(unify)p
1376 1717 V 17 w(variable)d(X)p FD(i)71 1777 y FP(sets)i(re)o(gister)g
FS(X)p FD(i)g FP(to)f(the)h(contents)g(of)g(the)g(heap)g(at)g(address)g
FS(S)p FP(;)h(in)f FS(write)g FP(mode,)h(a)f(ne)o(w)71
1837 y(unbound)e FS(REF)g FP(cell)h(is)g(pushed)g(on)g(the)f(heap)h
(and)g(copied)f(into)h FS(X)p FD(i)o FP(.)20 b(In)14
b(both)f(modes,)i FS(S)e FP(is)71 1897 y(then)f(incremented)g(by)h
(one.)k(As)d(for)e FS(unify)p 885 1897 V 17 w(value)h(X)p
FD(i)p FP(,)g(in)g FS(read)f FP(mode,)i(the)e(v)o(alue)h(of)71
1958 y FS(X)p FD(i)e FP(must)h(be)g(uni\002ed)g(with)f(the)h(heap)h
(term)e(at)h(address)h FS(S)o FP(;)f(in)g FS(write)g
FP(mode,)g(a)g(ne)o(w)g(cell)g(is)71 2018 y(pushed)h(onto)f(the)h(heap)
g(and)g(set)g(to)g(the)g(v)o(alue)g(of)f(re)o(gister)h
FS(X)p FD(i)o FP(.)18 b(Again,)13 b(in)g(either)f(mode,)i
FS(S)71 2078 y FP(is)e(incremented.)j(All)d(three)h(instructions)e(are)
i(e)o(xpressed)g(e)o(xplicitly)f(in)g(Figure)f(2.6.)71
2155 y(In)k(the)g(de\002nition)g(of)g FS(get)p 561 2155
V 18 w(structure)e FD(f)5 b(=n;)j FS(X)p FD(i)p FP(,)17
b(we)f(write)f FB(bind)q FC(\()p FB(addr)p FD(;)8 b FS(H)o
FC(\))16 b FP(to)g(ef)o(fec-)71 2215 y(tuate)c(the)h(binding)f(of)h
(the)f(heap)h(cell)g(rather)f(than)h FS(HEAP[)p FB(addr)o
FS(])h FK( )g(h)8 b FS(REF)j FD(;)g FS(H)d FK(i)13 b
FP(for)f(rea-)71 2275 y(sons)k(that)f(will)g(become)g(clear)h(later)m
(.)25 b(The)16 b FB(bind)g FP(operation)f(is)h(performed)e(on)h(two)g
(store)71 2335 y(addresses,)20 b(at)d(least)h(one)f(of)g(which)g(is)g
(that)g(of)g(an)h(unbound)e FS(REF)h FP(cell.)31 b(Its)17
b(ef)o(fect,)h(for)71 2395 y(no)o(w)m(,)g(is)f(to)g(bind)f(the)h
(unbound)g(one)g(to)f(the)h(other)o(\227)p FB(i.e)o(.)p
FP(,)i(change)e(the)g(data)g(\002eld)g(of)g(the)71 2456
y(unbound)12 b FS(REF)h FP(cell)g(to)f(contain)h(the)g(address)g(of)g
(the)g(other)f(cell.)18 b(In)13 b(the)f(case)i(where)f(both)71
2516 y(are)j(unbound,)h(the)g(binding)e(direction)h(is)h(chosen)g
(arbitrarily)m(.)26 b(Later)n(,)18 b(this)e(will)g(change)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)10
b FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o
FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(1)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 18 33
18 32 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 288 389 1558
3 v 329 486 a FQ(get)p 413 486 14 2 v 18 w(structure)h
Fu(f)5 b(=n;)j FQ(X)p Fu(i)k Fp(\021)33 b FI(addr)12
b Fp( )h FI(der)n(ef)6 b Fw(\()p FQ(X)p Fu(i)p Fw(\);)907
543 y Fq(case)13 b FQ(STORE[)p FI(addr)p FQ(])g Fq(of)970
599 y Fp(h)7 b Fv(REF)j Fu(;)p 1102 599 V 33 w Fp(i)20
b Fw(:)33 b FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(STR)j
Fu(;)g FQ(H)g Fw(+)g(1)e Fp(i)o Fw(;)1207 656 y FQ(HEAP[H)k
Fw(+)e(1)p FQ(])j Fp( )g Fu(f)5 b(=n)p Fw(;)1207 712
y FI(bind)p Fw(\()p FI(addr)o Fu(;)j FQ(H)o Fw(\);)1207
769 y FQ(H)13 b Fp( )g FQ(H)e Fw(+)f(2;)1207 825 y FI(mode)i
Fp( )h FQ(write)r Fw(;)970 881 y Fp(h)7 b Fv(STR)j Fu(;)f(a)f
Fp(i)k Fw(:)33 b Fq(if)13 b FQ(HEAP[)p Fu(a)p FQ(])27
b Fw(=)e Fu(f)5 b(=n)1249 938 y Fq(then)1290 994 y(begin)1332
1051 y FQ(S)13 b Fp( )g Fu(a)d Fw(+)g(1;)1332 1107 y
FI(mode)i Fp( )h FQ(read)1290 1164 y Fq(end)1249 1220
y(else)f FI(fail)f Fp( )i Fq(true)q Fw(;)970 1277 y Fq(other)88
b Fw(:)33 b FI(fail)11 b Fp( )j Fq(true)p Fw(;)907 1333
y Fq(endcase)q Fw(;)329 1446 y FQ(unify)p 467 1446 V
18 w(variable)h(X)p Fu(i)83 b Fp(\021)33 b Fq(case)13
b FI(mode)f Fq(of)970 1503 y FQ(read)41 b Fw(:)33 b FQ(X)p
Fu(i)12 b Fp( )h FQ(HEAP[S)r(])p Fw(;)970 1559 y FQ(write)h
Fw(:)33 b FQ(HEAP[H)q(])13 b Fp( )g(h)8 b Fv(REF)h Fu(;)h
FQ(H)e Fp(i)o Fw(;)1165 1615 y FQ(X)p Fu(i)k Fp( )h FQ(HEAP[H)r(])p
Fw(;)1165 1672 y FQ(H)g Fp( )g FQ(H)d Fw(+)g(1;)907 1728
y Fq(endcase)q Fw(;)907 1785 y FQ(S)j Fp( )g FQ(S)e Fw(+)f(1;)329
1898 y FQ(unify)p 467 1898 V 18 w(value)k(X)p Fu(i)165
b Fp(\021)33 b Fq(case)13 b FI(mode)f Fq(of)970 1954
y FQ(read)41 b Fw(:)33 b FI(unify)o Fw(\()p FQ(X)p Fu(i)o(;)8
b FQ(S)p Fw(\);)970 2011 y FQ(write)14 b Fw(:)33 b FQ(HEAP[H)q(])13
b Fp( )g FQ(X)p Fu(i)p Fw(;)1165 2067 y FQ(H)g Fp( )g
FQ(H)d Fw(+)g(1;)907 2124 y Fq(endcase)q Fw(;)907 2180
y FQ(S)j Fp( )g FQ(S)e Fw(+)f(1;)p 288 2255 1558 3 v
561 2407 a FP(Figure)i(2.6:)j FK(M)855 2414 y FE(0)887
2407 y FP(machine)e(instructions)f(for)f(programs)258
2640 y FN(P)o FL(A)q(G)r(E)i FN(1)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 19 34
19 33 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(as)19 b(a)f(correctness-preserving)g
(measure)h(in)f(order)g(to)g(accommodate)h(an)f(optimization.)71
349 y(Also,)g(we)f(will)f(see)h(that)g FB(bind)h FP(is)f(the)f(logical)
h(place,)h(when)f(backtracking)f(needs)h(to)f(be)71 409
y(considered,)h(for)f(recording)g(ef)o(fects)g(to)g(be)h(undone)f(upon)
g(failure)f(\(see)i(Chapter)g(4,)h(and)71 469 y(appendix)11
b(Section)g(B.2)i(on)f(P)o(age)g(113\).)j(If)c(wished,)h
FB(bind)h FP(may)f(also)g(be)g(made)f(to)h(perform)71
530 y(the)j FB(occurs-c)o(hec)o(k)h FP(test)f(in)g(order)g(to)g(pre)o
(v)o(ent)g(formation)e(of)i(c)o(yclic)h(terms)f(\(by)g(failing)f(at)71
590 y(that)g(point\).)23 b(Ho)o(we)o(v)o(er)n(,)15 b(the)g
(occurs-check)g(test)g(is)g(omitted)f(in)h(most)g(actual)g(Prolog)e
(im-)71 650 y(plementations)f(in)g(order)f(not)h(to)h(impede)f
(performance.)71 727 y(W)l(e)i(must)g(also)g(e)o(xplicate)h(the)f
FB(unify)f FP(operation)h(used)g(in)g(the)g(matching)g(phase)g(\(in)g
FS(read)71 787 y FP(mode\).)i(It)c(is)h(a)g(uni\002cation)f(algorithm)f
(based)j(on)e(the)h FR(UNION/FIND)f FP(method)g([AHU74)o(],)71
847 y(where)f(v)o(ariable)f(substitutions)i(are)f(b)o(uilt,)g(applied,)
h(and)f(composed)h(through)e FB(der)n(efer)n(ence)71
907 y FP(pointers.)36 b(In)18 b FK(M)400 914 y FE(0)439
907 y FP(\(and)h(in)g(all)g(later)g(machines)g(that)g(will)g(be)h
(considered)f(here\),)i(this)71 967 y(uni\002cation)15
b(operation)g(is)i(performed)e(on)h(a)g(pair)g(of)g(store)g(addresses.)
29 b(It)15 b(uses)j(a)e(global)71 1028 y(dynamic)c(structure,)g(an)h
(array)f(of)g(store)h(addresses,)h(as)f(a)g(uni\002cation)f(stack)h
(\(called)f FS(PDL)p FP(,)71 1088 y(for)f FS(P)p FP(ush-)p
FS(D)p FP(o)o(wn)h FS(L)p FP(ist\).)j(The)e(uni\002cation)f(operation)f
(is)i(de\002ned)f(as)h(sho)o(wn)f(in)g(Figure)g(2.7,)71
1148 y(where)g FB(empty)p FP(,)h FB(push)p FP(,)g(and)f
FB(pop)g FP(are)g(the)h(e)o(xpected)f(stack)h(operations.)193
1269 y Fq(Exer)o(cise)g(2.2)25 b FR(Gi)o(v)o(e)12 b(heap)h
(representations)e(for)i(the)f(terms)h Fu(f)5 b Fw(\()p
Fu(X)q(;)j(g)r Fw(\()p Fu(X)q(;)g(a)p Fw(\))o(\))i FR(and)i
Fu(f)5 b Fw(\()p Fu(b;)j(Y)h Fw(\))p FR(.)193 1326 y(Let)k
Fu(a)291 1333 y FE(1)326 1326 y FR(and)g Fu(a)429 1333
y FE(2)464 1326 y FR(be)h(their)f(respecti)o(v)o(e)h(heap)g(addresses,)
h(and)f(let)g Fu(a)1280 1333 y Fy(X)1328 1326 y FR(and)g
Fu(a)1432 1333 y Fy(Y)1477 1326 y FR(be)g(the)g(heap)193
1382 y(addresses)f(corresponding)g(to)g(v)o(ariables)h
Fu(X)j FR(and)d Fu(Y)d FR(,)k(respecti)o(v)o(ely)m(.)23
b(T)n(race)15 b(the)f(ef)o(fects)h(of)193 1439 y(e)o(x)o(ecuting)10
b FI(unify)p Fw(\()p Fu(a)513 1446 y FE(1)532 1439 y
Fu(;)e(a)577 1446 y FE(2)596 1439 y Fw(\))p FR(,)j(v)o(erifying)g(that)
g(it)g(terminates)g(with)f(the)h(e)o(v)o(entual)g(dereferenced)193
1495 y(bindings)d(from)k Fu(a)484 1502 y Fy(X)529 1495
y FR(and)f Fu(a)630 1502 y Fy(Y)672 1495 y FR(corresponding)e(to)i
Fu(X)16 b Fw(=)d Fu(b)e FR(and)g Fu(Y)23 b Fw(=)13 b
Fu(g)r Fw(\()p Fu(b;)8 b(a)p Fw(\))p FR(.)193 1617 y
Fq(Exer)o(cise)i(2.3)21 b FR(V)-5 b(erify)10 b(that)f(the)h(ef)o(fect)h
(of)f(e)o(x)o(ecuting)f(the)h(sequence)g(of)g(instructions)e(sho)o(wn)
193 1673 y(in)g(Figure)g(2.4)g(right)g(after)h(that)f(in)f(Figure)i
(2.3)f(produces)g(the)g(MGU)h(of)f(the)h(terms)f Fu(p)p
Fw(\()p Fu(Z)q(;)g(h)p Fw(\()p Fu(Z)q(;)g(W)e Fw(\))p
Fu(;)i(f)d Fw(\()o Fu(W)h Fw(\)\))193 1730 y FR(and)k
Fu(p)p Fw(\()p Fu(f)5 b Fw(\()p Fu(X)t Fw(\))p Fu(;)j(h)p
Fw(\()p Fu(Y)s(;)f(f)e Fw(\()p Fu(a)p Fw(\))o(\))p Fu(;)i(Y)h
Fw(\))p FR(.)14 b(That)9 b(is,)i(the)e(\(dereferenced\))j(bindings)c
(corresponding)g(to)193 1786 y Fu(W)18 b Fw(=)13 b Fu(f)5
b Fw(\()p Fu(a)p Fw(\))p FR(,)12 b Fu(X)j Fw(=)e Fu(f)5
b Fw(\()p Fu(a)p Fw(\))p FR(,)12 b Fu(Y)23 b Fw(=)13
b Fu(f)5 b Fw(\()p Fu(f)g Fw(\()p Fu(a)p Fw(\)\))p FR(,)11
b Fu(Z)k Fw(=)e Fu(f)5 b Fw(\()p Fu(f)g Fw(\()p Fu(a)p
Fw(\)\))p FR(.)193 1907 y Fq(Exer)o(cise)13 b(2.4)26
b FR(What)12 b(are)h(the)g(respecti)o(v)o(e)f(sequences)h(of)g
Fp(M)1199 1914 y FE(0)1231 1907 y FR(instructions)d(for)j
Fp(L)1553 1914 y FE(0)1586 1907 y FI(query)193 1964 y
FR(term)e FQ(?-)q Fu(p)p Fw(\()p Fu(f)5 b Fw(\()p Fu(X)t
Fw(\))p Fu(;)j(h)p Fw(\()p Fu(Y)s(;)f(f)e Fw(\()p Fu(a)p
Fw(\)\))o Fu(;)j(Y)f Fw(\))k FR(and)g FI(pr)n(ogr)o(am)e
FR(term)j Fu(p)p Fw(\()p Fu(Z)q(;)c(h)p Fw(\()p Fu(Z)q(;)g(W)e
Fw(\))p Fu(;)i(f)d Fw(\()o Fu(W)h Fw(\)\))p FR(?)193
2085 y Fq(Exer)o(cise)14 b(2.5)28 b FR(After)14 b(doing)e(Ex)o(ercise)i
(2.4,)h(v)o(erify)f(that)f(the)h(ef)o(fect)g(of)g(e)o(x)o(ecuting)g
(the)f(se-)193 2142 y(quence)e(you)f(produced)h(yields)f(the)h(same)g
(solution)e(as)i(that)g(of)g(Ex)o(ercise)g(2.3.)71 2327
y FA(2.4)71 b(Ar)o(gument)17 b(r)o(egisters)71 2456 y
FP(Since)d(we)h(ha)o(v)o(e)g(in)f(mind)g(to)h(use)g(uni\002cation)f(in)
g(Prolog)g(for)g(procedure)f(in)n(v)o(ocation,)i(we)71
2516 y(can)10 b(introduce)f(a)h(distinction)f(between)h(atoms)g
(\(terms)f(whose)h(functor)f(is)h(a)g(predicate\))g(and)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)g
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(1)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 20 35
20 34 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 442 528 1250
3 v 463 625 a Fq(pr)o(ocedur)o(e)g FI(unify)o Fw(\()p
Fu(a)806 632 y FE(1)826 625 y Fu(;)8 b(a)871 632 y FE(2)902
625 y Fw(:)13 b FI(addr)n(ess)n Fw(\);)505 681 y FI(push)n
Fw(\()p Fu(a)632 688 y FE(1)652 681 y Fu(;)8 b Fv(PDL)o
Fw(\);)19 b FI(push)o Fw(\()p Fu(a)922 688 y FE(2)941
681 y Fu(;)8 b Fv(PDL)o Fw(\);)505 738 y FI(fail)j Fp( )i
Fq(false)o Fw(;)505 794 y Fq(while)f Fp(:)p Fw(\()p FI(empty)o
Fw(\()p Fv(PDL)o Fw(\))e Fp(_)h FI(fail)n Fw(\))i Fq(do)546
851 y(begin)588 907 y Fu(d)612 914 y FE(1)644 907 y Fp( )g
FI(der)n(ef)6 b Fw(\()p FI(pop)o Fw(\()p Fv(PDL)o Fw(\)\);)19
b Fu(d)1067 914 y FE(2)1099 907 y Fp( )13 b FI(der)n(ef)7
b Fw(\()p FI(pop)o Fw(\()p Fv(PDL)o Fw(\)\);)588 964
y Fq(if)12 b Fu(d)652 971 y FE(1)697 964 y Fp(6)p Fw(=)25
b Fu(d)781 971 y FE(2)813 964 y Fq(then)629 1020 y(begin)671
1077 y Fp(h)7 b Fu(t)712 1084 y FE(1)742 1077 y Fu(;)j(v)787
1084 y FE(1)814 1077 y Fp(i)i( )h FQ(STORE[)p Fu(d)1088
1084 y FE(1)1109 1077 y FQ(])q Fw(;)20 b Fp(h)7 b Fu(t)1211
1084 y FE(2)1241 1077 y Fu(;)j(v)1286 1084 y FE(2)1313
1077 y Fp(i)i( )i FQ(STORE[)p Fu(d)1588 1084 y FE(2)1609
1077 y FQ(])p Fw(;)671 1133 y Fq(if)e Fw(\()p Fu(t)745
1140 y FE(1)777 1133 y Fw(=)h Fv(REF)p Fw(\))d Fp(_)g
Fw(\()p Fu(t)999 1140 y FE(2)1032 1133 y Fw(=)j Fv(REF)o
Fw(\))712 1190 y Fq(then)h FI(bind)n Fw(\()p Fu(d)933
1197 y FE(1)952 1190 y Fu(;)8 b(d)997 1197 y FE(2)1016
1190 y Fw(\))712 1246 y Fq(else)754 1302 y(begin)795
1359 y Fu(f)817 1366 y FE(1)837 1359 y Fu(=n)887 1366
y FE(1)919 1359 y Fp( )13 b FQ(STORE[)p Fu(v)1161 1366
y FE(1)1183 1359 y FQ(])p Fw(;)20 b Fu(f)1265 1366 y
FE(2)1285 1359 y Fu(=n)1335 1366 y FE(2)1367 1359 y Fp( )13
b FQ(STORE[)p Fu(v)1609 1366 y FE(2)1631 1359 y FQ(])p
Fw(;)795 1415 y Fq(if)f Fw(\()p Fu(f)875 1422 y FE(1)908
1415 y Fw(=)h Fu(f)978 1422 y FE(2)998 1415 y Fw(\))c
Fp(^)i Fw(\()p Fu(n)1111 1422 y FE(1)1143 1415 y Fw(=)i
Fu(n)1218 1422 y FE(2)1238 1415 y Fw(\))837 1472 y Fq(then)878
1528 y(f)o(or)g Fu(i)f Fp( )h Fw(1)f Fq(to)h Fu(n)1147
1535 y FE(1)1179 1528 y Fq(do)920 1585 y(begin)961 1641
y FI(push)o Fw(\()p Fu(v)1087 1648 y FE(1)1117 1641 y
Fw(+)d Fu(i;)e Fv(PDL)n Fw(\);)961 1698 y FI(push)o Fw(\()p
Fu(v)1087 1705 y FE(2)1117 1698 y Fw(+)i Fu(i;)e Fv(PDL)n
Fw(\))920 1754 y Fq(end)837 1811 y(else)k FI(fail)f Fp( )i
Fq(true)754 1867 y(end)629 1923 y(end)546 1980 y(end)463
2036 y(end)f FI(unify)o Fw(;)p 442 2117 V 755 2268 a
FP(Figure)f(2.7:)16 b(The)d FB(unify)f FP(operation)258
2640 y FN(P)o FL(A)q(G)r(E)h FN(2)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 21 36
21 35 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(terms)g(\(ar)o(guments)h(to)g(a)g
(predicate\).)24 b(W)l(e)15 b(thus)g(e)o(xtend)g FK(L)1121
296 y FE(0)1157 289 y FP(into)f(a)i(language)f FK(L)1516
296 y FE(1)1551 289 y FP(similar)71 349 y(to)c FK(L)155
356 y FE(0)188 349 y FP(b)o(ut)g(where)h(a)g(program)f(may)h(be)g(a)g
(set)h(of)e(\002rst-order)g(atoms)h(each)g(de\002ning)g(at)g(most)71
409 y(one)g FB(fact)g FP(per)g(predicate)g(name.)k(Thus,)e(in)e(the)h
(conte)o(xt)f(of)g(such)h(a)g(program,)e(e)o(x)o(ecution)i(of)71
469 y(a)d(query)g(connects)h(to)g(the)f(appropriate)f(de\002nition)h
(to)g(use)h(for)f(solving)g(a)h(gi)o(v)o(en)f(uni\002cation)71
530 y(equation,)i(or)g(fails)g(if)g(none)g(e)o(xists)h(for)f(the)g
(predicate)g(in)n(v)o(oked.)71 606 y(The)g(set)g(of)f(instructions)g
FK(I)551 613 y FE(1)582 606 y FP(contains)h(all)g(those)f(in)h
FK(I)1016 613 y FE(0)1036 606 y FP(.)j(In)c FK(M)1176
613 y FE(1)1196 606 y FP(,)h(compiled)f(code)h(is)g(stored)71
667 y(in)18 b(a)h FB(code)g(ar)n(ea)g FP(\()p FS(CODE)p
FP(\),)f(an)h(addressable)g(array)f(of)g(data)h(words,)h(each)f
(containing)f(a)71 727 y(possibly)12 b(labeled)g(instruction)g(o)o(v)o
(er)g(one)h(or)e(more)h(memory)g(words)f(consisting)i(of)f(an)g(op-)71
787 y(code)18 b(follo)o(wed)f(by)h(operands.)34 b(F)o(or)18
b(con)n(v)o(enience,)i(the)e(size)h(of)f(an)g(instruction)g(stored)71
847 y(at)f(address)h FD(a)g FP(\()p FB(i.e)o(.)p FP(,)i
FS(CODE[)p FD(a)p FS(])o FP(\))d(will)h(be)f(assumed)i(gi)o(v)o(en)e
(by)h(the)f(e)o(xpression)i FB(instruc-)71 907 y(tion)p
152 907 15 2 v 17 w(size)p FC(\()p FD(a)p FC(\))p FP(.)d(Labels)d(are)e
(symbolic)h(entry)f(points)h(into)f(the)h(code)g(area)g(that)g(may)f
(be)h(used)71 967 y(as)e(operands)g(of)f(instructions)h(for)f
(transferring)f(control)i(to)f(the)h(code)g(labeled)g(accordingly)m(.)
71 1028 y(Therefore,)k(there)g(is)h(no)f(need)h(to)f(store)g(a)h
(procedure)e(name)i(in)f(the)g(heap)h(as)g(it)f(denotes)g(a)71
1088 y(ke)o(y)e(into)h(a)g(compiled)f(instruction)g(sequence.)17
b(Thus,)e(a)e(ne)o(w)f(instruction)g FS(call)i FD(p=n)f
FP(can)71 1148 y(be)k(used)g(to)g(pass)h(control)e(o)o(v)o(er)h(to)g
(the)g(instruction)f(labeled)h(with)g FD(p=n)p FP(,)j(or)c(fail)g(if)h
(none)71 1208 y(such)12 b(e)o(xists.)71 1285 y(A)i(global)g(re)o
(gister)h FS(P)f FP(is)h(always)f(set)h(to)f(contain)g(the)h(address)g
(of)f(the)g(ne)o(xt)h(instruction)f(to)71 1345 y(e)o(x)o(ecute)i(\(an)f
(instruction)f(counter\).)24 b(The)15 b(standard)h(e)o(x)o(ecution)f
(order)g(of)f(instructions)h(is)71 1405 y(sequential.)25
b(Unless)16 b(failure)e(occurs,)i(most)g(machine)f(instructions)g
(\(like)f(all)h(those)h(seen)71 1466 y(before\))i(are)h(implicitly)f
(assumed,)k(to)d(increment)f FS(P)i FP(by)f(an)g(appropriate)f(of)o
(fset)h(in)g(the)71 1526 y(code)12 b(area)f(as)i(an)f(ultimate)f
(action.)16 b(This)c(of)o(fset)f(is)i(the)e(size)i(of)e(the)h
(instruction)f(at)h(address)71 1586 y FS(P)o FP(.)23
b(Ho)o(we)o(v)o(er)n(,)14 b(some)h(instructions)f(ha)o(v)o(e)h(for)f
(purpose)g(to)g(break)g(the)h(sequential)f(order)g(of)71
1646 y(e)o(x)o(ecution)f(or)f(to)h(connect)g(to)g(some)g(other)f
(instruction)g(at)h(the)g(end)g(of)f(a)h(sequence.)19
b(These)71 1706 y(instructions)9 b(are)h(called)g FB(contr)n(ol)g
(instructions)h FP(as)g(the)o(y)f(typically)f(set)i FS(P)f
FP(in)g(a)g(non-standard)71 1767 y(way)m(.)15 b(This)d(is)g(the)g(case)
h(of)e FS(call)i FD(p=n)q FP(,)g(whose)f(e)o(xplicit)g(ef)o(fect,)f(in)
h(the)g(machine)f FK(M)1583 1774 y FE(1)1603 1767 y FP(,)h(is:)583
1888 y FS(call)h FD(p=n)i FK(\021)35 b FS(P)13 b FK( )h
FC(@\()p FD(p=n)p FC(\);)71 2018 y FP(where)g(the)h(notation)f
FC(@\()p FD(p=n)p FC(\))i FP(stands)g(for)e(the)h(address)g(in)g(the)g
(code)g(area)g(of)f(instruction)71 2078 y(labeled)9 b
FD(p=n)p FP(.)16 b(If)9 b(the)g(procedure)g FD(p=n)i
FP(is)e(not)h(de\002ned)f(\()p FB(i.e)o(.)p FP(,)i(if)e(that)h(address)
g(is)f(not)h(allocated)71 2138 y(in)i(the)g(code)h(area\),)f(a)h
(uni\002cation)e(failure)g(occurs)i(and)f(o)o(v)o(erall)g(e)o(x)o
(ecution)h(aborts.)71 2215 y(W)l(e)e(also)h(introduce)f(another)g
(control)f(instruction,)i FS(proceed)o FP(,)g(which)f(indicates)h(the)g
(end)71 2275 y(of)j(a)h(fact')m(s)f(instruction)g(sequence.)26
b(These)16 b(two)f(ne)o(w)h(control)f(instructions')f(ef)o(fects)i(are)
71 2335 y(tri)o(vial)e(for)h(no)o(w)m(,)h(and)g(the)o(y)g(will)f(be)h
(elaborated)g(later)m(.)25 b(F)o(or)16 b(our)f(present)h(purposes,)h
(it)e(is)71 2395 y(suf)o(\002cient)i(that)g FS(proceed)g
FP(be)h(construed)g(as)g(a)g(no-op)g(\()p FB(i.e)o(.)p
FP(,)i(just)e(a)g(code)g(terminator\),)71 2456 y(and)c
FS(call)g FD(p=n)h FP(as)g(an)g(unconditional)f(\223jump\224)g(to)h
(the)f(start)h(address)g(of)f(the)g(instruction)71 2516
y(sequence)f(for)e(program)g(term)h(with)g(functor)f
FD(p=n)p FP(.)71 2640 y FN(Copyright)260 2639 y(c)249
2640 y FM(\015)f FN(Hassan)i(A)463 2636 y(\250)464 2640
y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(2)r(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 22 37
22 36 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(Ha)o(ving)h(eliminated)f(predicate)g(symbols)g(from)g(the)g(heap,)i
(the)e(uni\002cation)g(problem)g(be-)257 349 y(tween)20
b(fact)f(and)g(query)g(terms)h(amounts)f(to)g(solving,)j(not)d(one,)j
(b)o(ut)d(man)o(y)h(equations,)257 409 y(simultaneously)m(.)g(Namely)m
(,)14 b(there)f(are)g(as)i(man)o(y)e(term)g(roots)h(in)f(a)h(gi)o(v)o
(en)f(fact)g(or)h(query)f(as)257 469 y(there)g(are)g(ar)o(guments)g(to)
g(the)h(corresponding)e(predicate.)18 b(Therefore,)13
b(we)h(must)f(or)o(ganize)257 530 y(re)o(gisters)h(quite)g
(speci\002cally)g(so)g(as)h(to)e(re\003ect)h(this)g(situation.)20
b(As)14 b(we)g(pri)o(vile)o(ged)f FS(X)p FC(1)i FP(be-)257
590 y(fore)d(to)h(denote)g(the)f(\(single\))g(term)g(root,)h(we)g
(generalize)f(the)h(con)n(v)o(ention)g(to)f(re)o(gisters)h
FS(X)p FC(1)257 650 y FP(to)f FS(X)p FD(n)g FP(which)g(will)g(no)o(w)g
(always)f(refer)g(to)h(the)g(\002rst)g(to)g FD(n)p FP(-th)f(ar)o
(guments)h(of)g(a)g(fact)f(or)h(query)257 710 y(atom.)29
b(In)17 b(other)f(words,)i(re)o(gisters)f FS(X)p FC(1)p
FD(;)8 b(:)g(:)g(:)g(;)g FS(X)p FD(n)17 b FP(are)f(systematically)h
(allocated)g(to)g(term)257 770 y(roots)12 b(of)g(an)g
FD(n)p FP(-ary)f(predicate')m(s)h(ar)o(guments.)j(T)l(o)e(emphasize)f
(this,)g(we)g(use)h(a)f(conspicuous)257 830 y(notation,)h(writing)e(a)i
(re)o(gister)f FS(A)p FD(i)g FP(rather)f(than)h FS(X)p
FD(i)g FP(when)h(it)f(is)h(being)f(used)h(as)g(an)f(ar)o(gument)257
891 y(of)k(an)g(atom.)26 b(In)16 b(that)g(case,)i(we)e(refer)f(to)h
(that)g(re)o(gister)g(as)g(an)g FB(ar)n(gument)g FP(re)o(gister)m(.)27
b(Oth-)257 951 y(erwise,)17 b(where)e(re)o(gister)g FS(X)p
FD(i)g FP(is)h(not)f(used)h(as)g(an)f(ar)o(gument)g(re)o(gister)n(,)h
(it)f(is)h(written)f FS(X)p FD(i)o FP(,)i(as)257 1011
y(usual.)g(Note)c(that)f(this)h(is)g(just)g(notation)f(as)h(the)f
FS(A)p FD(i)p FP(')m(s)h(are)f(not)h(ne)o(w)f(re)o(gisters)h(b)o(ut)f
(the)h(same)257 1071 y(old)i FS(X)p FD(i)o FP(')m(s)g(used)g(thus)f
(far)m(.)22 b(F)o(or)14 b(e)o(xample,)h(re)o(gisters)g(are)f(no)o(w)g
(allocated)h(for)e(the)i(v)o(ariables)257 1131 y(of)d(the)h(atom)f
FD(p)p FC(\()p FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))13 b FP(as)g(follo)o(ws:)909
1229 y FS(A)p FC(1)h(=)g FD(Z)909 1289 y FS(A)p FC(2)g(=)g
FD(h)p FC(\()p FS(A)p FC(1)p FD(;)8 b FS(X)p FC(4\))909
1349 y FS(A)p FC(3)14 b(=)g FD(f)5 b FC(\()p FS(X)p FC(4\))909
1410 y FS(X)p FC(4)14 b(=)g FD(W)o(:)257 1521 y FP(Observ)o(e)j(also)f
(that)g(a)g(ne)o(w)g(situation)g(arises)h(no)o(w)f(as)g(v)o(ariables)g
(can)g(be)h(ar)o(guments)e(and)257 1581 y(thus)h(must)f(be)h(handled)f
(as)h(roots.)25 b(Therefore,)16 b(pro)o(vision)f(must)g(be)h(made)f
(for)g(v)o(ariables)257 1641 y(to)20 b(be)g(loaded)g(into,)h(or)f(e)o
(xtracted)g(from,)h(ar)o(gument)e(re)o(gisters)h(for)f(queries)g(and)h
(facts,)257 1702 y(respecti)o(v)o(ely)m(.)f(As)14 b(before,)f(the)g
(necessary)h(instructions)f(correspond)g(to)g(when)h(a)f(v)o(ariable)
257 1762 y(ar)o(gument)f(is)h(a)f(\002rst)g(or)g(later)g(occurrence,)h
(either)e(in)i(a)f(query)g(or)g(a)h(fact.)i(In)d(a)g(query)m(,)318
1871 y(1.)24 b(the)18 b(\002rst)g(occurrence)g(of)g(a)g(v)o(ariable)g
(in)g FD(i)p FP(-th)f(ar)o(gument)g(position)h(pushes)h(a)g(ne)o(w)379
1931 y(unbound)12 b FS(REF)f FP(cell)h(onto)g(the)g(heap)g(and)g
(copies)g(it)g(into)f(that)h(v)o(ariable')m(s)f(re)o(gister)h(as)379
1991 y(well)h(as)f(ar)o(gument)g(re)o(gister)g FS(A)p
FD(i)p FP(;)g(and,)318 2090 y(2.)24 b(a)14 b(later)f(occurrence)g
(copies)h(its)f(v)o(alue)g(into)g(ar)o(gument)g(re)o(gister)g
FS(A)p FD(i)p FP(.)19 b(Whereas,)14 b(in)f(a)379 2150
y(fact,)318 2248 y(3.)24 b(the)11 b(\002rst)f(occurrence)g(of)h(a)f(v)o
(ariable)g(in)h FD(i)p FP(-th)e(ar)o(gument)h(position)h(sets)g(it)g
(to)f(the)h(v)o(alue)379 2308 y(of)h(ar)o(gument)g(re)o(gister)g
FS(A)p FD(i)p FP(;)g(and,)318 2407 y(4.)24 b(a)13 b(later)f(occurrence)
g(uni\002es)g(it)g(with)g(the)h(v)o(alue)f(of)g FS(A)p
FD(i)o FP(.)257 2516 y(The)h(corresponding)f(instructions)g(are,)g
(respecti)o(v)o(ely:)258 2640 y FN(P)o FL(A)q(G)r(E)h
FN(2)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 23 38
23 37 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 336 291 1089 3 v 377 388 a FQ(put)p 461
388 14 2 v 18 w(variable)g(X)p Fu(n)q(;)8 b FQ(A)p Fu(i)k
Fp(\021)33 b FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(REF)j
Fu(;)g FQ(H)e Fp(i)o Fw(;)905 445 y FQ(X)p Fu(n)14 b
Fp( )f FQ(HEAP[H)q(])q Fw(;)905 501 y FQ(A)p Fu(i)g Fp( )g
FQ(HEAP[H)r(])p Fw(;)905 558 y FQ(H)g Fp( )g FQ(H)e Fw(+)f(1;)377
670 y FQ(put)p 461 670 V 18 w(value)k(X)p Fu(n;)8 b FQ(A)p
Fu(i)94 b Fp(\021)33 b FQ(A)p Fu(i)13 b Fp( )g FQ(X)p
Fu(n)377 783 y FQ(get)p 461 783 V 18 w(variable)h(X)p
Fu(n)q(;)8 b FQ(A)p Fu(i)k Fp(\021)33 b FQ(X)p Fu(n)14
b Fp( )f FQ(A)p Fu(i)377 896 y FQ(get)p 461 896 V 18
w(value)h(X)p Fu(n;)8 b FQ(A)p Fu(i)94 b Fp(\021)33 b
FI(unify)o Fw(\()p FQ(X)p Fu(n)q(;)8 b FQ(A)p Fu(i)o
Fw(\))p 336 972 1089 3 v 370 1123 a FP(Figure)k(2.8:)j
FK(M)664 1130 y FE(1)696 1123 y FP(instructions)d(for)g(v)o(ariable)f
(ar)o(guments)131 1252 y(1.)25 b FS(put)p 286 1252 15
2 v 17 w(variable)13 b(X)p FD(n;)8 b FS(A)p FD(i)131
1347 y FP(2.)25 b FS(put)p 286 1347 V 17 w(value)13 b(X)p
FD(n;)8 b FS(A)p FD(i)131 1441 y FP(3.)25 b FS(get)p
286 1441 V 17 w(variable)13 b(X)p FD(n;)8 b FS(A)p FD(i)131
1536 y FP(4.)25 b FS(get)p 286 1536 V 17 w(value)13 b(X)p
FD(n;)8 b FS(A)p FD(i)71 1633 y FP(and)h(are)h(gi)o(v)o(en)f(e)o
(xplicitly)h(in)f(Figure)g(2.8.)44 b(F)o(or)10 b(e)o(xample,)g(Figure)f
(2.9)h(sho)o(ws)g(code)g(gener)o(-)71 1693 y(ated)f(for)g(query)f
FS(?-)14 b FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)p FP(,)k(and)e(Figure)
f(2.10)i(that)f(for)g(fact)f FD(p)p FC(\()p FD(f)d FC(\()p
FD(X)t FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d FC(\()p
FD(a)p FC(\)\))p FD(;)j(Y)k FC(\))p FP(.)193 1791 y Fq(Exer)o(cise)h
(2.6)28 b FR(V)-5 b(erify)13 b(that)g(the)g(ef)o(fect)h(of)f(e)o(x)o
(ecuting)g(the)h(sequence)f(of)g Fp(M)1444 1798 y FE(1)1477
1791 y FR(instructions)193 1848 y(sho)o(wn)c(in)g(Figure)h(2.9)h
(produces)e(the)h(same)h(heap)f(representation)f(as)i(that)e(produced)h
(by)g(the)193 1904 y Fp(M)248 1911 y FE(0)278 1904 y
FR(code)h(of)h(Figure)f(2.3)g(\(see)g(Ex)o(ercise)h(2.1\).)193
2002 y Fq(Exer)o(cise)19 b(2.7)38 b FR(V)-5 b(erify)19
b(that)g(the)g(ef)o(fect)g(of)g(e)o(x)o(ecuting)g(the)g(sequence)g(of)g
Fp(M)1512 2009 y FE(1)1551 2002 y FR(instruc-)193 2059
y(tions)c(sho)o(wn)i(in)f(Figure)i(2.10)f(right)f(after)i(that)f(in)g
(Figure)g(2.9)g(produces)g(the)g(MGU)h(of)193 2115 y(the)11
b(terms)i Fu(p)p Fw(\()p Fu(Z)q(;)8 b(h)p Fw(\()p Fu(Z)q(;)g(W)e
Fw(\))p Fu(;)h(f)e Fw(\()p Fu(W)h Fw(\)\))j FR(and)j
Fu(p)p Fw(\()p Fu(f)5 b Fw(\()p Fu(X)t Fw(\))p Fu(;)j(h)p
Fw(\()p Fu(Y)s(;)f(f)e Fw(\()p Fu(a)p Fw(\)\))o Fu(;)j(Y)f
Fw(\))p FR(.)17 b(That)12 b(is,)g(the)g(binding)193 2172
y Fu(W)18 b Fw(=)13 b Fu(f)5 b Fw(\()p Fu(a)p Fw(\))p
FR(,)12 b Fu(X)j Fw(=)e Fu(f)5 b Fw(\()p Fu(a)p Fw(\))p
FR(,)12 b Fu(Y)23 b Fw(=)13 b Fu(f)5 b Fw(\()p Fu(f)g
Fw(\()p Fu(a)p Fw(\)\))p FR(,)11 b Fu(Z)k Fw(=)e Fu(f)5
b Fw(\()p Fu(f)g Fw(\()p Fu(a)p Fw(\)\))p FR(.)193 2270
y Fq(Exer)o(cise)13 b(2.8)26 b FR(What)12 b(are)h(the)g(respecti)o(v)o
(e)f(sequences)h(of)g Fp(M)1199 2277 y FE(1)1231 2270
y FR(instructions)d(for)j Fp(L)1553 2277 y FE(1)1586
2270 y FI(query)193 2326 y FR(term)e FQ(?-)q Fu(p)p Fw(\()p
Fu(f)5 b Fw(\()p Fu(X)t Fw(\))p Fu(;)j(h)p Fw(\()p Fu(Y)s(;)f(f)e
Fw(\()p Fu(a)p Fw(\)\))o Fu(;)j(Y)f Fw(\))k FR(and)g
Fp(L)897 2333 y FE(1)929 2326 y FI(pr)n(ogr)o(am)e FR(term)j
Fu(p)p Fw(\()p Fu(Z)q(;)c(h)p Fw(\()p Fu(Z)q(;)g(W)e
Fw(\))p Fu(;)h(f)e Fw(\()p Fu(W)h Fw(\)\))o FR(?)193
2424 y Fq(Exer)o(cise)14 b(2.9)28 b FR(After)14 b(doing)e(Ex)o(ercise)i
(2.8,)h(v)o(erify)f(that)f(the)h(ef)o(fect)g(of)g(e)o(x)o(ecuting)g
(the)f(se-)193 2481 y(quence)e(you)f(produced)h(yields)f(the)h(same)g
(solution)e(as)i(that)g(of)g(Ex)o(ercise)g(2.7.)71 2640
y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(2)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 24 39
24 38 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 443 444 1248
3 v 568 541 a FQ(put)p 652 541 14 2 v 17 w(variable)h(X)p
Fw(4)p Fu(;)8 b FQ(A)p Fw(1)90 b FQ(\045)42 b(?-)q Fu(p)p
Fw(\()p Fu(Z)q(;)568 597 y FQ(put)p 652 597 V 17 w(structure)15
b Fu(h=)p Fw(2)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)181
b Fu(h)568 654 y FQ(set)p 652 654 V 17 w(value)14 b(X)p
Fw(4)243 b FQ(\045)215 b Fw(\()p Fu(Z)q(;)568 710 y FQ(set)p
652 710 V 17 w(variable)15 b(X)p Fw(5)161 b FQ(\045)277
b Fu(W)6 b Fw(\))p Fu(;)568 767 y FQ(put)p 652 767 V
17 w(structure)15 b Fu(f)5 b(=)p Fw(1)p Fu(;)j FQ(A)p
Fw(3)40 b FQ(\045)364 b Fu(f)568 823 y FQ(set)p 652 823
V 17 w(value)14 b(X)p Fw(5)243 b FQ(\045)399 b Fw(\()p
Fu(W)6 b Fw(\))568 880 y FQ(call)13 b Fu(p=)p Fw(3)350
b FQ(\045)484 b Fw(\))p Fu(:)p 443 955 1248 3 v 367 1107
a FP(Figure)11 b(2.9:)16 b(Ar)o(gument)c(re)o(gisters)g(for)g
FK(L)1100 1114 y FE(1)1132 1107 y FP(query)g FS(?-)p
FD(p)p FC(\()p FD(Z)q(;)c(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)p 436
1518 1261 3 v 478 1616 a Fu(p=)p Fw(3)41 b(:)g FQ(get)p
726 1616 14 2 v 17 w(structure)15 b Fu(f)5 b(=)p Fw(1)p
Fu(;)j FQ(A)p Fw(1)40 b FQ(\045)i Fu(p)p Fw(\()p Fu(f)642
1672 y FQ(unify)p 780 1672 V 18 w(variable)14 b(X)p Fw(4)107
b FQ(\045)j Fw(\()p Fu(X)t Fw(\))p Fu(;)642 1728 y FQ(get)p
726 1728 V 17 w(structure)15 b Fu(h=)p Fw(2)p Fu(;)8
b FQ(A)p Fw(2)41 b FQ(\045)199 b Fu(h)642 1785 y FQ(unify)p
780 1785 V 18 w(variable)14 b(X)p Fw(5)107 b FQ(\045)233
b Fw(\()p Fu(Y)s(;)642 1841 y FQ(unify)p 780 1841 V 18
w(variable)14 b(X)p Fw(6)107 b FQ(\045)292 b(X)p Fw(6\))p
Fu(;)642 1898 y FQ(get)p 726 1898 V 17 w(value)14 b(X)p
Fw(5)p Fu(;)8 b FQ(A)p Fw(3)172 b FQ(\045)380 b Fu(Y)10
b Fw(\))p Fu(;)642 1954 y FQ(get)p 726 1954 V 17 w(structure)15
b Fu(f)5 b(=)p Fw(1)p Fu(;)j FQ(X)p Fw(6)40 b FQ(\045)i(X)p
Fw(6)13 b(=)g Fu(f)642 2011 y FQ(unify)p 780 2011 V 18
w(variable)h(X)p Fw(7)107 b FQ(\045)180 b Fw(\()p FQ(X)p
Fw(7\))p Fu(;)642 2067 y FQ(get)p 726 2067 V 17 w(structure)15
b Fu(a=)p Fw(0)p Fu(;)8 b FQ(X)p Fw(7)43 b FQ(\045)f(X)p
Fw(7)13 b(=)g Fu(a)642 2124 y FQ(proceed)351 b(\045)42
b Fu(:)p 436 2199 1261 3 v 387 2351 a FP(Figure)12 b(2.10:)j(Ar)o
(gument)d(re)o(gisters)g(for)g FK(L)1145 2358 y FE(1)1177
2351 y FP(fact)g FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t
FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d FC(\()p FD(a)p
FC(\)\))p FD(;)j(Y)k FC(\))p FD(:)258 2640 y FN(P)o FL(A)q(G)r(E)h
FN(2)r(4)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 25 40
25 39 bop 71 637 a FG(Chapter)26 b(3)71 862 y(Flat)f(Resolution)71
1104 y FP(W)l(e)20 b(no)o(w)f(e)o(xtend)h(the)g(language)f
FK(L)726 1111 y FE(1)766 1104 y FP(into)h(a)f(language)h
FK(L)1139 1111 y FE(2)1179 1104 y FP(where)g(procedures)f(are)h(no)71
1165 y(longer)14 b(reduced)h(only)g(to)g(facts)g(b)o(ut)g(may)g(also)h
(ha)o(v)o(e)f(bodies.)25 b(A)15 b(body)g(de\002nes)h(a)f(proce-)71
1225 y(dure)h(as)h(a)g(conjuncti)o(v)o(e)f(sequence)h(of)g(atoms.)29
b(Said)16 b(otherwise,)i FK(L)1301 1232 y FE(2)1338 1225
y FP(is)f(Prolog)e(without)71 1285 y(backtracking.)71
1362 y(An)e FK(L)179 1369 y FE(2)212 1362 y FB(pr)n(ogr)o(am)g
FP(is)g(a)g(set)h(of)e(procedure)g(de\002nitions)h(or)f(\(de\002nite\))
g FB(clauses)p FP(,)j(at)e(most)g(one)71 1422 y(per)f(predicate)h
(name,)h(of)e(the)h(form)f(`)p FD(a)758 1429 y FE(0)792
1422 y FS(:-)j FD(a)893 1429 y FE(1)912 1422 y FD(;)8
b(:)g(:)g(:)f(;)h(a)1047 1429 y Fy(n)1070 1422 y FD(:)p
FP(')13 b(where)f FD(n)j FK(\025)g FC(0)f FP(and)f(the)g
FD(a)1569 1429 y Fy(i)1582 1422 y FP(')m(s)h(are)71 1482
y(atoms.)k(As)13 b(before,)g(when)g FD(n)j FC(=)f(0)p
FP(,)f(the)f(clause)h(is)f(called)g(a)h FB(fact)f FP(and)g(written)f
(without)h(the)71 1542 y(`)p FS(:-)p FP(')h(implication)h(symbol.)26
b(When)16 b FD(n)k(>)h FC(0)p FP(,)c(the)f(clause)g(is)h(called)e(a)h
FB(rule)p FP(,)i(the)e(atom)f FD(a)1670 1549 y FE(0)71
1603 y FP(is)g(called)g(its)h FB(head)p FP(,)g(the)g(sequence)f(of)g
(atoms)h FD(a)933 1610 y FE(1)952 1603 y FD(;)8 b(:)g(:)g(:)f(;)h(a)
1087 1610 y Fy(n)1126 1603 y FP(is)15 b(called)h(its)f
FB(body)g FP(and)g(atoms)71 1663 y(composing)c(this)i(body)e(are)h
(called)h FB(goals)p FP(.)i(A)d(rule)g(with)g(e)o(xactly)g(one)g(body)g
(goal)g(is)h(called)71 1723 y(a)18 b FB(c)o(hain)g FP(\(rule\).)33
b(Other)17 b(rules)i(are)f(called)g FB(deep)g FP(rules.)34
b FK(L)1148 1730 y FE(2)1186 1723 y FP(queries)19 b(are)f(sequences)h
(of)71 1783 y(goals,)14 b(of)f(the)g(form)f(`)p FS(?-)o
FD(g)540 1790 y FE(1)560 1783 y FD(;)c(:)g(:)g(:)g(;)g(g)693
1790 y Fy(k)714 1783 y FD(:)p FP(')13 b(where)g FD(k)k
FK(\025)f FC(0)p FP(.)i(When)c FD(k)j FC(=)f(0)p FP(,)e(the)f(query)g
(is)h(called)71 1843 y(the)h FB(empty)g FP(query.)24
b(As)16 b(in)f(Prolog,)g(the)g(scope)h(of)f(v)o(ariables)g(is)g
(limited)g(to)g(the)g(clause)h(or)71 1904 y(query)11
b(in)i(which)f(the)o(y)g(appear)m(.)71 1980 y(Ex)o(ecuting)g(a)g(query)
g(`)p FS(?-)o FD(g)543 1987 y FE(1)563 1980 y FD(;)c(:)g(:)g(:)g(;)g(g)
696 1987 y Fy(k)717 1980 y FD(:)p FP(')k(in)f(the)i(conte)o(xt)f(of)f
(a)i(program)d(made)j(up)f(of)f(a)h(set)h(of)71 2041
y(procedure-de\002ning)e(clauses)j(consists)g(of)f(repeated)g
(application)g(of)g FB(leftmost)g(r)n(esolution)71 2101
y FP(until)18 b(the)h(empty)g(query)m(,)i(or)e(failure,)h(is)f
(obtained.)36 b(Leftmost)19 b(resolution)g(amounts)g(to)71
2161 y(unifying)d(the)h(goal)h FD(g)462 2168 y FE(1)499
2161 y FP(with)g(its)f(de\002nition')m(s)g(head)h(\(or)e(failing)g(if)h
(none)h(e)o(xists\))g(and,)h(if)71 2221 y(this)f(succeeds,)j(e)o(x)o
(ecuting)e(the)f(query)g(resulting)g(from)f(replacing)g
FD(g)1326 2228 y FE(1)1365 2221 y FP(by)h(its)h(de\002nition)71
2281 y(body)m(,)h(v)o(ariables)f(in)g(scope)g(bearing)g(the)g(binding)f
(side-ef)o(fects)h(of)f(uni\002cation.)35 b(Thus,)71
2341 y(e)o(x)o(ecuting)14 b(a)h(query)f(in)g FK(L)529
2348 y FE(2)564 2341 y FP(either)g(terminates)g(with)h(success)h(\()p
FB(i.e)o(.)p FP(,)g(it)e(simpli\002es)h(into)f(the)71
2402 y(empty)g(query\),)g(or)g(terminates)g(with)g(failure,)g(or)g(ne)o
(v)o(er)g(terminates.)21 b(The)15 b(\223result\224)g(of)e(an)71
2462 y FK(L)105 2469 y FE(2)140 2462 y FP(query)h(whose)h(e)o(x)o
(ecution)g(terminates)g(with)f(success)j(is)e(the)g(\(dereferenced\))e
(binding)855 2640 y(25)p eop
%%Page: 26 41
26 40 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(of)e(its)h(original)e(v)o(ariables)h(after)g(termination.)257
366 y(Note)i(that)g(a)h(clause)f(with)g(a)g(non-empty)f(body)h(can)g
(be)g(vie)o(wed)g(in)g(fact)f(as)i(a)f FB(conditional)257
426 y FP(query)m(.)g(That)c(is,)h(it)e(beha)o(v)o(es)i(as)f(a)f(query)g
(pro)o(vided)g(that)g(its)h(head)f(successfully)h(uni\002es)g(with)257
486 y(a)15 b(predicate)f(de\002nition.)22 b(F)o(acts)15
b(merely)f(v)o(erify)g(this)g(condition,)h(adding)f(nothing)g(ne)o(w)h
(to)257 546 y(the)c(query)e(b)o(ut)h(a)h(contingent)f(binding)f
(constraint.)15 b(Thus,)d(as)f(a)f(\002rst)g(approximation,)g(since)257
606 y(an)17 b FK(L)355 613 y FE(2)391 606 y FP(query)e(\(resp.,)j
(clause)e(body\))g(is)g(a)g(conjuncti)o(v)o(e)g(sequence)h(of)e(atoms)i
(interpreted)257 667 y(as)h(procedure)e(calls)i(with)f(uni\002cation)f
(as)i(ar)o(gument)e(passing,)k(instructions)c(for)h(it)g(may)257
727 y(simply)g(be)h(the)f(concatenation)g(of)g(the)g(compiled)g(code)g
(of)g(each)g(goal)g(as)h(an)f FK(L)1725 734 y FE(1)1763
727 y FP(query)257 787 y(making)e(it)g(up.)24 b(As)15
b(for)f(a)h(clause)h(head,)g(since)g(the)f(semantics)h(requires)e(that)
h(it)g(retrie)o(v)o(es)257 847 y(ar)o(guments)g(by)g(uni\002cation)f
(as)h(did)g(facts)f(in)h FK(L)1103 854 y FE(1)1123 847
y FP(,)h(instructions)f(for)f FK(L)1506 854 y FE(1)1526
847 y FP(')m(s)h(fact)f(uni\002cation)257 907 y(are)f(clearly)f(suf)o
(\002cient.)257 984 y(Therefore,)k FK(M)542 991 y FE(1)577
984 y FP(uni\002cation)e(instructions)h(can)g(be)g(used)h(for)e
FK(L)1413 991 y FE(2)1448 984 y FP(clauses,)j(b)o(ut)e(with)g(two)257
1044 y(measures)10 b(of)g(caution:)j(one)d(concerning)f(continuation)g
(of)g(e)o(x)o(ecution)h(of)f(a)h(goal)f(sequence,)257
1104 y(and)k(one)f(meant)g(to)h(a)o(v)o(oid)f(con\003icting)f(use)i(of)
f(ar)o(gument)g(re)o(gisters.)257 1290 y FA(3.1)72 b(F)n(acts)257
1419 y FP(Let)13 b(us)g(\002rst)g(only)f(consider)g FK(L)800
1426 y FE(2)833 1419 y FP(facts.)k(Note)d(that)f FK(L)1186
1426 y FE(1)1219 1419 y FP(is)h(all)f(contained)g(in)h
FK(L)1619 1426 y FE(2)1639 1419 y FP(.)j(Therefore,)257
1479 y(it)11 b(is)g(natural)f(to)g(e)o(xpect)h(that)g(the)g(e)o(xact)g
(same)g(compilation)e(scheme)j(for)d(facts)i(carries)f(o)o(v)o(er)257
1539 y(untouched)j(from)e FK(L)621 1546 y FE(1)654 1539
y FP(to)h FK(L)739 1546 y FE(2)760 1539 y FP(.)k(This)e(is)e(true)h(up)
f(to)h(a)g(wee)f(detail)h(re)o(garding)e(the)i FS(proceed)257
1599 y FP(instruction.)28 b(It)16 b(must)h(be)f(made)h(to)f(continue)g
(e)o(x)o(ecution,)j(after)d(successfully)h(returning)257
1659 y(from)f(a)h(call)g(to)f(a)h(fact,)g(back)g(to)g(the)f
(instruction)g(in)h(the)f(goal)h(sequence)g(follo)o(wing)e(the)257
1720 y(call.)h(T)l(o)c(do)g(this)g(correctly)m(,)f(we)h(will)f(use)h
(another)g(global)f(re)o(gister)h FS(CP)o FP(,)h(along)e(with)h
FS(P)p FP(,)g(set)257 1780 y(to)i(contain)f(the)h(address)g(\(in)f(the)
h(code)g(area\))f(of)h(the)f(ne)o(xt)h(instruction)f(to)g(follo)o(w)g
(up)h(with)257 1840 y(upon)c(successful)h(return)e(from)g(a)h(call)g
(\()p FB(i.e)o(.)p FP(,)i(set)f(to)f FS(P)r FC(+)s Fo(instruction)p
1457 1840 15 2 v 22 w(size)t FC(\()p FS(P)p FC(\))g FP(at)g(procedure)
257 1900 y(call)16 b(time\).)24 b(Then,)17 b(ha)o(ving)e(e)o(xited)h
(the)f(called)g(procedure')m(s)g(code)h(sequence,)h(e)o(x)o(ecution)257
1960 y(could)d(thus)g(be)h(resumed)f(as)g(indicated)g(by)g
FS(CP)p FP(.)21 b(Thus,)16 b(for)d FK(L)1366 1967 y FE(2)1386
1960 y FP(')m(s)i(facts,)f(we)h(need)f(to)g(alter)257
2020 y(the)f(ef)o(fect)e(of)h FK(M)569 2027 y FE(1)589
2020 y FP(')m(s)g FS(call)i FD(p=n)f FP(to:)586 2125
y FS(call)g FD(p=n)i FK(\021)35 b FS(CP)13 b FK( )h FS(P)d
FC(+)g Fo(instruction)p 1349 2125 V 23 w(size)s FC(\()p
FS(P)p FC(\);)885 2185 y FS(P)i FK( )h FC(@\()p FD(p=n)p
FC(\);)257 2296 y FP(and)f(that)f(of)g FS(proceed)g FP(to:)818
2402 y FS(proceed)h FK(\021)34 b FS(P)14 b FK( )g FS(CP)o
FC(;)257 2516 y FP(As)f(before,)f(when)h(the)f(procedure)g
FD(p=n)h FP(is)g(not)f(de\002ned,)g(e)o(x)o(ecution)h(fails.)258
2640 y FN(P)o FL(A)q(G)r(E)g FN(2)r(6)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 27 42
27 41 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(In)d(summary)m(,)h(with)f(the)h(simple)g
(fore)o(going)f(adjustment,)h FK(L)1131 296 y FE(2)1163
289 y FP(facts)f(are)h(translated)f(e)o(xactly)71 349
y(as)i(were)f FK(L)268 356 y FE(1)300 349 y FP(facts.)71
543 y FA(3.2)71 b(Rules)17 b(and)h(queries)71 673 y FP(W)l(e)c(no)o(w)f
(must)h(think)g(about)g(translating)f(rules.)21 b(A)14
b(query)f(is)h(a)h(particular)d(case)j(of)f(a)g(rule)71
733 y(in)j(the)h(sense)h(that)f(it)g(is)g(one)g(with)g(no)g(head.)33
b(It)17 b(is)h(translated)g(e)o(xactly)g(the)g(same)h(way)m(,)71
793 y(b)o(ut)13 b(without)f(the)h(instructions)g(for)g(the)g(missing)g
(head.)19 b(The)14 b(idea)f(is)h(to)f(use)h FK(L)1471
800 y FE(1)1491 793 y FP(')m(s)f(instruc-)71 853 y(tions,)j(treating)e
(the)h(head)g(as)g(a)g(fact,)h(and)f(each)g(goal)g(in)g(the)f(body)h
(as)h(an)f FK(L)1435 860 y FE(1)1470 853 y FP(query)f(term)71
913 y(in)k(sequence;)k(that)c(is,)j(roughly)c(translate)h(a)h(rule)f(`)
p FD(p)1043 920 y FE(0)1063 913 y FC(\()p FD(:)8 b(:)g(:)o
FC(\))25 b FS(:-)g FD(p)1292 920 y FE(1)1312 913 y FC(\()p
FD(:)8 b(:)g(:)o FC(\))p FD(;)g(:)g(:)g(:)f(;)h(p)1540
920 y Fy(n)1564 913 y FC(\()p FD(:)g(:)g(:)o FC(\))p
FD(:)p FP(')71 974 y(follo)o(wing)i(the)j(pattern:)95
1094 y FB(get)f(ar)n(guments)h(of)f FD(p)464 1101 y FE(0)95
1155 y FB(put)h(ar)n(guments)g(of)f FD(p)468 1162 y FE(1)95
1215 y FS(call)i FD(p)253 1222 y FE(1)287 1263 y FP(.)287
1279 y(.)287 1296 y(.)95 1356 y FB(put)f(ar)n(guments)g(of)f
FD(p)468 1363 y Fy(n)95 1416 y FS(call)i FD(p)253 1423
y Fy(n)71 1536 y FP(Here,)h(in)f(addition)g(to)g(ensuring)g(correct)f
(continuation)h(of)g(e)o(x)o(ecution,)h(we)g(must)f(arrange)71
1596 y(for)d(correct)h(use)g(of)g(ar)o(gument)g(re)o(gisters.)k
(Indeed,)c(since)h(the)f(same)h(re)o(gisters)f(are)g(used)h(by)71
1657 y(each)j(goal)f(in)h(a)g(query)g(or)f(body)h(sequence)g(to)g(pass)
h(its)f(ar)o(guments)f(to)h(the)g(procedure)f(it)71 1717
y(in)n(v)o(okes,)e(v)o(ariables)f(that)h(occur)g(in)f(man)o(y)h(dif)o
(ferent)e(goals)j(in)e(the)h(scope)h(of)e(the)h(sequence)71
1777 y(need)f(to)h(be)g(protected)f(from)g(the)g(side)i(ef)o(fects)e
(of)g FS(put)h FP(instructions.)j(F)o(or)d(e)o(xample,)g(con-)71
1837 y(sider)g(the)h(rule)f(`)p FD(p)p FC(\()p FD(X)q(;)8
b(Y)k FC(\))k FS(:-)g FD(q)r FC(\()p FD(X)q(;)8 b(Z)t
FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j FC(\))p FD(:)p
FP(')i(If)g(the)h(v)o(ariables)f FD(Y)s(;)8 b(Z)17 b
FP(were)d(allo)o(wed)71 1897 y(to)e(be)h(accessible)h(only)f(from)f(an)
h(ar)o(gument)f(re)o(gister)n(,)h(no)g(guarantee)f(could)h(be)g(made)g
(that)71 1958 y(the)o(y)d(still)g(would)f(be)h(after)f(performing)g
(the)h(uni\002cations)f(required)h(in)f(e)o(x)o(ecuting)i(the)f(body)71
2018 y(of)i FD(p)p FP(.)71 2094 y(Therefore,)k(it)g(is)h(necessary)f
(that)g(v)o(ariables)g(of)g(this)g(kind)g(be)g(sa)o(v)o(ed)h(in)f(an)g
FB(en)n(vir)n(onment)71 2155 y FP(associated)f(with)e(each)i(acti)o(v)o
(ation)e(of)h(the)g(procedure)f(the)o(y)h(appear)g(in.)21
b(V)-6 b(ariables)15 b(which)71 2215 y(occur)f(in)h(more)f(than)h(one)g
(body)f(goal)h(are)g(dubbed)g FB(permanent)g FP(as)g(the)o(y)g(ha)o(v)o
(e)g(to)g(outli)o(v)o(e)71 2275 y(the)f(procedure)f(call)h(where)g(the)
o(y)g(\002rst)g(appear)m(.)21 b(All)14 b(other)g(v)o(ariables)g(in)g(a)
g(scope)h(that)f(are)71 2335 y(not)e(permanent)h(are)g(called)g
FB(tempor)o(ary)p FP(.)18 b(W)l(e)c(shall)f(denote)g(a)g(permanent)g(v)
o(ariable)f(as)i FS(Y)p FD(i)o FP(,)71 2395 y(and)f(use)i
FS(X)p FD(i)e FP(as)h(before)f(for)g(temporary)g(v)o(ariables.)20
b(T)l(o)14 b(determine)f(whether)g(a)h(v)o(ariable)f(is)71
2456 y(permanent)i(or)h(temporary)e(in)i(a)g(rule,)h(the)f(head)h(atom)
e(is)i(considered)e(to)h(be)g(part)g(of)g(the)71 2516
y(\002rst)11 b(body)g(goal.)k(This)d(is)g(because)g FS(get)f
FP(and)h FS(unify)f FP(instructions)g(do)g(not)g(load)g(re)o(gisters)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(2)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 28 43
28 42 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(for)d(further)g(processing.)16 b(Thus,)d(the)f(v)o(ariable)f
FD(X)16 b FP(in)c(the)g(e)o(xample)g(abo)o(v)o(e)g(is)g(temporary)f(as)
257 349 y(it)h(does)g(not)g(occur)g(in)g(more)f(than)h(one)g(goal)g(in)
f(the)h(body)g(\()p FB(i.e)o(.)p FP(,)h(it)f(is)g(not)g(af)o(fected)f
(by)h(more)257 409 y(than)h(one)f(goal')m(s)g FS(put)h
FP(instructions\).)257 486 y(Clearly)m(,)i(permanent)e(v)o(ariables)h
(beha)o(v)o(e)h(like)e(con)n(v)o(entional)h(local)g(v)o(ariables)g(in)g
(a)g(proce-)257 546 y(dure.)24 b(The)15 b(situation)g(is)h(therefore)d
(quite)i(familiar)m(.)23 b(As)15 b(is)h(customary)e(in)h(programming)
257 606 y(languages,)23 b(we)c(protect)h(a)f(procedure')m(s)h(local)f
(v)o(ariables)h(by)f(maintaining)g(a)h(run-time)257 667
y(stack)14 b(of)g(procedure)f(acti)o(v)o(ation)f(frames)i(in)f(which)h
(to)f(sa)o(v)o(e)i(information)d(needed)i(for)e(the)257
727 y(correct)e(e)o(x)o(ecution)g(of)g(what)g(remains)g(to)g(be)h(done)
f(after)f(returning)g(from)g(a)h(procedure)g(call.)257
787 y(W)l(e)i(call)g(such)g(a)g(frame)e(an)i FB(en)n(vir)n(onment)g(fr)
o(ame)p FP(.)k(W)l(e)11 b(will)h(keep)f(the)g(address)h(of)g(the)f
(latest)257 847 y(en)n(vironment)h(on)g(top)g(of)g(the)g(stack)h(in)f
(a)h(global)f(re)o(gister)g FS(E)p FP(.)1326 829 y FL(1)257
924 y FP(As)17 b(for)f(continuation)g(of)g(e)o(x)o(ecution,)j(the)d
(situation)h(for)f(rules)g(is)h(not)g(as)g(simple)f(as)i(that)257
984 y(for)13 b(facts.)20 b(Indeed,)14 b(since)g(a)g(rule)g(serv)o(es)g
(to)g(in)n(v)o(oke)f(further)f(procedures)i(in)f(its)h(body)m(,)g(the)
257 1044 y(v)o(alue)j(of)f(the)h(program)f(continuation)f(re)o(gister)i
FS(CP)p FP(,)h(which)f(was)f(sa)o(v)o(ed)i(at)f(the)g(point)f(of)257
1104 y(its)i(call,)g(will)f(be)g(o)o(v)o(erwritten.)29
b(Therefore,)18 b(it)f(is)g(necessary)h(to)f(preserv)o(e)g
(continuation)257 1165 y(information)11 b(by)h(sa)o(ving)h(the)f(v)o
(alue)g(of)g FS(CP)g FP(along)h(with)f(permanent)f(v)o(ariables.)257
1241 y(Let)h(us)f(recapitulate:)j FK(M)711 1248 y FE(2)742
1241 y FP(is)d(an)g(augmentation)f(of)h FK(M)1239 1248
y FE(1)1269 1241 y FP(with)g(the)g(addition)f(of)g(a)i(ne)o(w)e(data)
257 1302 y(area,)15 b(along)e(with)h(the)f FB(heap)h
FP(\()p FS(HEAP)p FP(\),)f(the)h FB(code)f(ar)n(ea)i
FP(\()p FS(CODE)p FP(\),)e(and)g(the)h FB(push-down)f(list)257
1362 y FP(\()p FS(PDL)p FP(\).)d(It)f(is)h(called)g(the)g
FB(stac)o(k)g FP(\()p FS(STACK)p FP(\))f(and)g(will)h(contain)f
(procedure)g(acti)o(v)o(ation)g(frames.)257 1422 y(Stack)18
b(frames)f(are)h(called)g FB(en)n(vir)n(onments)p FP(.)33
b(An)17 b(en)n(vironment)g(is)h(pushed)g(onto)g FS(STACK)257
1482 y FP(upon)i(a)f(\(non-fact\))e(procedure)i(entry)g(call,)j(and)d
(popped)g(from)g FS(STACK)g FP(upon)g(return.)257 1542
y(Thus,)h(an)e FS(allocate)o FP(/)p FS(deallocate)e FP(pair)h(of)g
(instructions)g(must)g(bracket)g(the)g(code)257 1603
y(generated)12 b(for)g(a)g(rule)g(in)g(order)g(to)g(create)g(and)h
(discard,)f(respecti)o(v)o(ely)m(,)h(such)f(en)n(vironment)257
1663 y(frames)18 b(on)f(the)h(stack.)33 b(In)17 b(addition,)i
FS(deallocate)e FP(being)g(the)h(ultimate)f(instruction)257
1723 y(of)i(the)g(rule,)h(it)f(must)g(connect)g(to)g(the)f(appropriate)
g(ne)o(xt)h(instruction)f(as)i(indicated)e(by)257 1783
y(the)13 b(continuation)f(pointer)g(that)g(had)h(been)g(sa)o(v)o(ed)g
(upon)g(entry)f(in)g(the)h(en)n(vironment)f(being)257
1843 y(discarded.)257 1920 y(Since)19 b(the)f(size)h(of)f(an)h(en)n
(vironment)e(v)o(aries)h(with)h(each)f(procedure)g(in)h(function)e(of)h
(its)257 1980 y(number)d(of)h(permanent)f(v)o(ariables,)h(the)g(stack)g
(is)g(or)o(ganized)g(as)g(a)g(linked)f(list)g(through)g(a)257
2041 y FB(continuation)f(en)n(vir)n(onment)g FP(slot;)i
FB(i.e)o(.)p FP(,)h(a)e(cell)f(in)h(each)g(en)n(vironment)e(frame)h
(bearing)g(the)257 2101 y(stack)f(inde)o(x)g(of)f(the)g(en)n(vironment)
f(pre)o(viously)h(pushed)g(onto)g(the)h(stack.)257 2178
y(T)l(o)h(sum)g(up,)g(two)e(ne)o(w)i FK(I)705 2185 y
FE(2)738 2178 y FP(instructions)f(for)f FK(M)1115 2185
y FE(2)1148 2178 y FP(are)i(added)f(to)g(the)h(ones)g(we)f(de\002ned)g
(for)257 2238 y FK(I)284 2245 y FE(1)304 2238 y FP(:)318
2371 y(1.)24 b FS(allocate)p 257 2420 648 2 v 315 2451
a Fz(1)347 2466 y FN(In)14 b([W)m(ar83)o(],)i(this)d(stack)i(is)f
(called)h(the)f FH(local)f(stac)o(k)i FN(to)f(distinguish)e(it)h(from)h
(the)g(global)g(stack)g(\(see)257 2516 y(F)o(ootnote)c(1)g(at)g(the)g
(bottom)f(of)h(P)o(age)i(13\).)258 2640 y(P)o FL(A)q(G)r(E)h
FN(2)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 29 44
29 43 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 131 289 a FP(2.)25 b FS(deallocate)71
414 y FP(with)12 b(ef)o(fect,)g(respecti)o(v)o(ely:)131
539 y(1.)25 b(to)11 b(allocate)g(a)h(ne)o(w)g(en)n(vironment)e(on)i
(the)f(stack,)i(setting)e(its)h(continuation)f(en)n(viron-)193
599 y(ment)j(\002eld)g(to)g(the)h(current)e(v)o(alue)i(of)f
FS(E)p FP(,)h(and)g(its)g(continuation)e(point)h(\002eld)g(to)h(that)
193 659 y(of)c FS(CP)p FP(;)i(and,)131 770 y(2.)25 b(to)18
b(remo)o(v)o(e)g(the)h(en)n(vironment)e(frame)h(at)g(stack)h(location)f
FS(E)h FP(from)e(the)i(stack)g(and)193 830 y(proceed,)13
b(resetting)g FS(P)g FP(to)g(the)g(v)o(alue)g(of)g(its)g
FS(CP)g FP(\002eld)g(and)g FS(E)h FP(to)f(the)g(v)o(alue)g(of)f(its)i
FS(CE)193 890 y FP(\002eld.)71 1015 y(T)l(o)f(ha)o(v)o(e)h(proper)e(ef)
o(fect,)h(an)g FS(allocate)g FP(instruction)f(needs)i(to)f(ha)o(v)o(e)g
(access)i(to)e(the)g(size)71 1075 y(of)f(the)h(current)g(en)n
(vironment)f(in)h(order)f(to)h(increment)f(the)h(v)o(alue)g(of)g
FS(E)g FP(by)g(the)g(right)f(stack)71 1136 y(of)o(fset.)j(The)f
(necessary)f(piece)g(of)f(information)f(is)i(a)f(function)g(of)g(the)h
(calling)f(clause)h(\()p FB(i.e)o(.)p FP(,)71 1196 y(the)g(number)g(of)
h(permanent)f(v)o(ariables)h(occurring)e(in)i(the)g(calling)f
(clause\).)21 b(Therefore,)14 b(it)71 1256 y(is)d(easily)g(statically)g
(a)o(v)o(ailable)f(at)h(the)g(time)g(the)f(code)h(for)f(the)h(calling)g
(clause)g(is)g(generated.)71 1316 y(No)o(w)m(,)16 b(the)g(problem)f(is)
h(to)g(transmit)f(this)h(information)e(to)i(the)g(called)g(procedure)f
(that,)i(if)71 1376 y(de\002ned)h(as)i(a)g(rule)e(\()p
FB(i.e)o(.)p FP(,)k(starting)d(with)g(an)g FS(allocate)o
FP(\),)i(will)e(need)g(it)g(dynamically)m(,)71 1437 y(depending)13
b(on)g(which)h(clause)g(calls)g(it.)20 b(A)13 b(simple)h(solution)f(is)
h(to)g(sa)o(v)o(e)g(this)g(of)o(fset)f(in)h(the)71 1497
y(calling)d(clause')m(s)i(en)n(vironment)e(frame)h(from)f(where)h(it)g
(can)g(be)h(retrie)o(v)o(ed)e(by)h(a)g(callee)h(that)71
1557 y(needs)e(it.)16 b(Hence,)c(in)f FK(M)512 1564 y
FE(2)532 1557 y FP(,)h(an)f(additional)g(slot)g(in)g(an)h(en)n
(vironment)e(is)h(set)h(by)f FS(allocate)71 1617 y FP(to)h(contain)g
(the)g(number)g(of)g(permanent)f(v)o(ariables)i(in)f(the)g(clause)h(in)
f(question.)71 1694 y(Summing)f(up)h(again,)h(an)f FK(M)591
1701 y FE(2)623 1694 y FP(stack)h(en)n(vironment)e(frame)h(contains:)
131 1819 y(1.)25 b(the)16 b(address)i(in)f(the)f(code)h(area)g(of)g
(the)g(ne)o(xt)g(instruction)f(to)h(e)o(x)o(ecute)g(upon)g(\(suc-)193
1879 y(cessful\))12 b(return)f(from)h(the)g(in)n(v)o(oked)f(procedure;)
131 1990 y(2.)25 b(the)13 b(stack)g(address)h(of)f(the)g(pre)o(vious)g
(en)n(vironment)f(to)h(reinstate)g(upon)g(return)f(\()p
FB(i.e)o(.)p FP(,)193 2050 y(where)g(to)g(pop)g(the)g(stack)h(to\);)131
2160 y(3.)25 b(the)15 b(of)o(fset)g(of)h(this)g(frame)f(on)g(the)h
(stack)g(\(the)g(number)f(of)g(permanent)g(v)o(ariables\);)193
2220 y(and,)131 2330 y(4.)25 b(as)16 b(man)o(y)f(cells)i(as)f(there)f
(are)h(permanent)f(v)o(ariables)g(in)h(the)f(body)h(of)f(the)g(in)n(v)o
(oked)193 2391 y(procedure)c(\(possibly)h(none\).)71
2516 y(Such)g(an)g FK(M)302 2523 y FE(2)334 2516 y FP(en)n(vironment)f
(frame)h(pushed)h(on)f(top)g(of)g(the)g(stack)h(looks)f(thus:)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)e
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(2)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 30 45
30 44 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 786 334 808
2 v 735 375 a FS(E)p 785 393 2 61 v 41 w(CE)42 b FC(\()p
FB(continuation)11 b(en)n(vir)n(onment)q FC(\))p 1592
393 V 786 394 808 2 v 651 435 a FS(E)f FC(+)h(1)p 785
453 2 61 v 42 w FS(CP)42 b FC(\()p FB(continuation)11
b(point)p FC(\))p 1592 453 V 786 455 808 2 v 651 495
a FS(E)f FC(+)h(2)p 785 513 2 61 v 58 w FD(n)57 b FC(\()p
FB(number)12 b(of)g(permanent)h(variables)p FC(\))p 1592
513 V 786 515 808 2 v 651 555 a FS(E)d FC(+)h(3)p 785
573 2 61 v 45 w FS(Y)p FC(1)45 b(\()p FB(permanent)12
b(variable)h(1)p FC(\))p 1592 573 V 786 575 808 2 v 1061
603 a FP(.)1061 620 y(.)1061 636 y(.)p 786 656 V 561
697 a FS(E)e FC(+)g FD(n)g FC(+)g(2)p 785 715 2 61 v
43 w FS(Y)p FD(n)42 b FC(\()p FB(permanent)12 b(variable)h
FD(n)p FC(\))p 1592 715 V 786 716 808 2 v 257 846 a FP(This)18
b(necessitates)g(gi)o(ving)e FS(allocate)f FP(an)i(e)o(xplicit)g(ar)o
(gument)f(that)g(is)h(the)g(number)f(of)257 906 y(permanent)c(v)o
(ariables)g(of)g(the)g(rule)g(at)h(hand,)f(such)h(that,)g(in)f
FK(M)1373 913 y FE(2)1393 906 y FP(:)515 1003 y FS(allocate)h
FD(N)19 b FK(\021)34 b FB(ne)o(wE)15 b FK( )f FS(E)d
FC(+)g FS(STACK[E)f FC(+)h(2)p FS(])g FC(+)g(3;)899 1063
y FS(STACK[)p FB(ne)o(wE)p FS(])j FK( )g FS(E)p FC(;)899
1123 y FS(STACK[)p FB(ne)o(wE)d FC(+)g(1)p FS(])k FK( )e
FS(CP)p FC(;)899 1184 y FS(STACK[)p FB(ne)o(wE)e FC(+)g(2)p
FS(])k FK( )e FD(N)5 b FC(;)899 1244 y FS(E)14 b FK( )g
FB(ne)o(wE)p FC(;)899 1304 y FS(P)g FK( )g FS(P)c FC(+)h
FB(instruction)p 1315 1304 15 2 v 18 w(size)q FC(\()p
FS(P)p FC(\);)257 1408 y FP(Similarly)m(,)g(the)i(e)o(xplicit)f
(de\002nition)f(of)h FK(M)1016 1415 y FE(2)1036 1408
y FP(')m(s)h FS(deallocate)e FP(is:)641 1505 y FS(deallocate)i
FK(\021)34 b FS(P)14 b FK( )g FS(STACK[E)c FC(+)h(1)p
FS(])p FC(;)1027 1565 y FS(E)j FK( )g FS(STACK[E)o(])p
FC(;)257 1678 y FP(W)n(ith)e(this)g(being)g(set)h(up,)g(the)f(general)g
(translation)f(scheme)i(into)e FK(M)1482 1685 y FE(2)1514
1678 y FP(instructions)h(for)f(an)257 1738 y FK(L)291
1745 y FE(2)323 1738 y FP(rule)g(`)p FD(p)453 1745 y
FE(0)473 1738 y FC(\()p FD(:)d(:)g(:)o FC(\))14 b FS(:-)g
FD(p)680 1745 y FE(1)700 1738 y FC(\()p FD(:)8 b(:)g(:)o
FC(\))p FD(;)g(:)g(:)g(:)g(;)g(p)929 1745 y Fy(n)952
1738 y FC(\()p FD(:)g(:)g(:)p FC(\))p FD(:)p FP(')j(with)g
FD(N)17 b FP(permanent)11 b(v)o(ariables)g(will)g(follo)o(w)257
1798 y(the)i(pattern:)282 1904 y FD(p)306 1911 y FE(0)354
1904 y FC(:)50 b FS(allocate)12 b FD(N)418 1965 y FB(get)f(ar)n
(guments)i(of)f FD(p)786 1972 y FE(0)418 2025 y FB(put)g(ar)n(guments)h
(of)f FD(p)790 2032 y FE(1)418 2085 y FS(call)h FD(p)575
2092 y FE(1)542 2133 y FP(.)542 2150 y(.)542 2166 y(.)418
2226 y FB(put)f(ar)n(guments)h(of)f FD(p)790 2233 y Fy(n)418
2287 y FS(call)h FD(p)575 2294 y Fy(n)418 2347 y FS(deallocate)257
2456 y FP(F)o(or)k(e)o(xample,)h(for)e FK(L)650 2463
y FE(2)687 2456 y FP(clause)h(`)p FD(p)p FC(\()p FD(X)q(;)8
b(Y)k FC(\))21 b FS(:-)h FD(q)r FC(\()p FD(X)q(;)8 b(Z)t
FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j FC(\))p FD(:)p
FP(',)18 b(the)e(corresponding)257 2516 y FK(M)317 2523
y FE(2)349 2516 y FP(code)d(is)g(sho)o(wn)f(in)g(Figure)g(3.1.)258
2640 y FN(P)o FL(A)q(G)r(E)h FN(3)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 31 46
31 45 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 279 291 1203 3 v 320 388 a Fu(p=)p Fw(2)41
b(:)g FQ(allocate)15 b Fw(2)237 b FQ(\045)42 b Fu(p)484
445 y FQ(get)p 568 445 14 2 v 17 w(variable)15 b(X)p
Fw(3)p Fu(;)8 b FQ(A)p Fw(1)41 b FQ(\045)64 b Fw(\()p
Fu(X)q(;)484 501 y FQ(get)p 568 501 V 17 w(variable)15
b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)133 b
Fu(Y)11 b Fw(\))h FQ(:-)484 558 y(put)p 568 558 V 17
w(value)i(X)p Fw(3)p Fu(;)8 b FQ(A)p Fw(1)123 b FQ(\045)275
b Fu(q)r Fw(\()p Fu(X)q(;)484 614 y FQ(put)p 568 614
V 17 w(variable)15 b(Y)p Fw(2)p Fu(;)8 b FQ(A)p Fw(2)41
b FQ(\045)366 b Fu(Z)484 670 y FQ(call)14 b Fu(q)r(=)p
Fw(2)301 b FQ(\045)408 b Fw(\))p Fu(;)484 727 y FQ(put)p
568 727 V 17 w(value)14 b(Y)p Fw(2)p Fu(;)8 b FQ(A)p
Fw(1)123 b FQ(\045)275 b Fu(r)q Fw(\()p Fu(Z)q(;)484
783 y FQ(put)p 568 783 V 17 w(value)14 b(Y)p Fw(1)p Fu(;)8
b FQ(A)p Fw(2)123 b FQ(\045)359 b Fu(Y)484 840 y FQ(call)14
b Fu(r)q(=)p Fw(2)301 b FQ(\045)403 b Fw(\))484 896 y
FQ(deallocate)221 b(\045)420 b Fu(:)p 279 972 1203 3
v 190 1123 a FP(Figure)11 b(3.1:)16 b FK(M)484 1130 y
FE(2)516 1123 y FP(machine)c(code)h(for)e(rule)h FD(p)p
FC(\()p FD(X)q(;)c(Y)k FC(\))i FS(:-)g FD(q)r FC(\()p
FD(X)q(;)8 b(Z)t FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j
FC(\))p FD(:)193 1269 y Fq(Exer)o(cise)d(3.1)18 b FR(Gi)o(v)o(e)8
b Fp(M)589 1276 y FE(2)617 1269 y FR(code)g(for)h Fp(L)804
1276 y FE(2)832 1269 y FR(facts)f Fu(q)r Fw(\()p Fu(a;)g(b)p
Fw(\))f FR(and)h Fu(r)q Fw(\()p Fu(b;)g(c)p Fw(\))e FR(and)j
Fp(L)1361 1276 y FE(2)1389 1269 y FR(query)g FQ(?-)p
Fu(p)p Fw(\()p Fu(U;)f(V)g Fw(\))p FR(,)193 1325 y(then)14
b(trace)i(the)f(code)h(sho)o(wn)e(in)h(Figure)g(3.1)g(and)g(v)o(erify)h
(that)e(the)h(solution)f(produced)g(is)193 1381 y Fu(U)j
Fw(=)c Fu(a;)8 b(V)22 b Fw(=)13 b Fu(c)p FR(.)71 2640
y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(3)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 32 47
32 46 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 258 2640
a FN(P)o FL(A)q(G)r(E)f FN(3)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 33 48
33 47 bop 71 637 a FG(Chapter)26 b(4)71 862 y(Pr)n(olog)71
1104 y FP(The)16 b(language)g FK(L)394 1111 y FE(3)430
1104 y FP(\(resp.,)i(the)e(machine)g FK(M)894 1111 y
FE(3)914 1104 y FP(\))f(corresponds)h(to)g(pure)g(Prolog,)g(as)h(it)f
(e)o(x-)71 1165 y(tends)g(the)g(language)h FK(L)500 1172
y FE(2)536 1165 y FP(\(resp.,)h(the)e(machine)g FK(M)1000
1172 y FE(2)1020 1165 y FP(\))g(to)g(allo)o(w)g(disjuncti)o(v)o(e)g
(de\002nitions.)71 1225 y(As)f(in)h FK(L)230 1232 y FE(2)250
1225 y FP(,)h(an)e FK(L)375 1232 y FE(3)411 1225 y FP(program)f(is)i(a)
g(set)g(of)f(procedure)f(de\002nitions.)25 b(In)15 b
FK(L)1363 1232 y FE(3)1383 1225 y FP(,)i(a)f(de\002nition)e(is)71
1285 y(an)j(ordered)f(sequence)i(of)e(clauses)j(\()p
FB(i.e)o(.)p FP(,)g(a)e(sequence)h(of)f(facts)g(or)f(rules\))h
(consisting)g(of)71 1345 y(all)d(and)g(only)g(those)g(whose)h(head)f
(atoms)h(share)f(the)g(same)h(predicate)f(name.)21 b(That)15
b(name)71 1405 y(is)f(the)g(name)g(of)f(the)h(procedure)f(speci\002ed)h
(by)g(the)g(de\002nition.)19 b FK(L)1245 1412 y FE(3)1280
1405 y FP(queries)13 b(are)h(the)g(same)71 1466 y(as)k(those)g(of)g
FK(L)347 1473 y FE(2)367 1466 y FP(.)32 b(The)19 b(semantics)f(of)f
FK(L)814 1473 y FE(3)852 1466 y FP(operates)h(using)g(top-do)o(wn)f
(leftmost)g(resolu-)71 1526 y(tion,)12 b(an)h(approximation)f(of)g(SLD)
h(resolution.)j(Thus,)e(in)f FK(L)1137 1533 y FE(3)1157
1526 y FP(,)g(a)g(failure)e(of)i(uni\002cation)f(no)71
1586 y(longer)j(yields)h(irre)o(v)o(ocable)e(abortion)h(of)g(e)o(x)o
(ecution)h(b)o(ut)g(considers)g(alternati)o(v)o(e)f(choices)71
1646 y(of)10 b(clauses)h(in)g(the)g(order)e(in)i(which)g(the)o(y)f
(appear)h(in)f(de\002nitions.)15 b(This)c(is)g(done)g(by)g(chrono-)71
1706 y(logical)g(backtracking;)h FB(i.e)o(.)p FP(,)i(the)e(latest)g
(choice)h(at)f(the)g(moment)g(of)g(failure)e(is)j(ree)o(xamined)71
1767 y(\002rst.)71 1843 y(It)f(is)i(necessary)f(to)g(alter)g
FK(M)581 1850 y FE(2)600 1843 y FP(')m(s)h(design)f(so)g(as)h(to)f(sa)o
(v)o(e)h(the)f(state)g(of)g(computation)f(at)h(each)71
1904 y(procedure)i(call)g(of)o(fering)g(alternati)o(v)o(es)g(to)h
(restore)f(upon)h(backtracking)f(to)h(this)g(point)f(of)71
1964 y(choice.)30 b(W)l(e)17 b(call)g(such)h(a)f(state)h(a)f
FB(c)o(hoice)g(point)p FP(.)30 b(W)l(e)17 b(thus)h(need)f(to)g(analyze)
g(what)g(in-)71 2024 y(formation)e(must)h(be)h(sa)o(v)o(ed)h(as)f(a)g
(choice)g(point)f(in)g(order)g(to)h(create)f(a)h(record)f(\(a)g(choice)
71 2084 y(point)h(frame\))f(wherefrom)g(a)i(correct)f(state)h(of)f
(computation)g(can)h(be)f(restored)h(to)f(of)o(fer)71
2144 y(another)e(alternati)o(v)o(e,)h(with)f(all)h(ef)o(fects)f(of)h
(the)f(failed)g(computation)g(undone.)25 b(Note)16 b(that)71
2205 y(choice)11 b(point)h(frames)f(must)h(be)f(or)o(ganized)h(as)g(a)g
(stack)g(\(just)f(like)g(en)n(vironments\))g(in)g(order)71
2265 y(to)g(re\003ect)g(the)g(compounding)g(of)g(alternati)o(v)o(es)g
(as)h(each)g(choice)g(point)f(spa)o(wns)h(potentially)71
2325 y(more)f(alternati)o(v)o(es)h(to)h(try)e(in)i(sequence.)71
2402 y(T)l(o)e(distinguish)h(the)f(two)g(stacks,)i(let)e(us)h(call)f
(the)h(en)n(vironment)e(stack)i(the)f FB(AND-stac)o(k)i
FP(and)71 2462 y(the)k(choice)i(point)e(stack)h(the)g
FB(OR-stac)o(k)p FP(.)33 b(As)19 b(with)e(the)h(AND-stack,)i(we)e(or)o
(ganize)g(the)855 2640 y(33)p eop
%%Page: 34 49
34 48 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(OR-stack)j(as)g(a)f(linked)g(list.)28 b(The)17 b(head)f(of)g(this)g
(list)h(always)f(corresponds)g(to)g(the)g(latest)257
349 y(choice)f(point,)h(and)f(will)f(be)h(kept)g(in)g(a)g(ne)o(w)f
(global)h(re)o(gister)g FS(B)p FP(,)h(such)f(that)g(upon)f(failure,)257
409 y(computation)j(is)h(made)g(to)f(resume)h(from)e(the)i(state)g
(reco)o(v)o(ered)f(from)g(the)g(choice)h(point)257 469
y(frame)g(indicated)g(by)h FS(B)p FP(.)34 b(When)19 b(the)f(latest)h
(frame)f(of)o(fers)f(no)i(more)f(alternati)o(v)o(es,)i(it)e(is)257
530 y(popped)13 b(of)o(f)f(the)i(OR-stack)f(by)g(resetting)g
FS(B)g FP(to)g(its)h(predecessor)f(if)g(one)g(e)o(xists,)i(otherwise)
257 590 y(computation)d(fails)g(terminally)m(.)257 667
y(Clearly)m(,)g(if)e(a)i(de\002nition)e(contains)h(only)g(one)g
(clause,)i(there)e(is)g(no)g(need)h(to)f(create)g(a)g(choice)257
727 y(point)k(frame,)g(e)o(xactly)h(as)f(was)h(the)f(case)g(in)g
FK(M)1117 734 y FE(2)1137 727 y FP(.)24 b(F)o(or)15 b(de\002nitions)f
(with)h(more)f(than)h(one)257 787 y(alternati)o(v)o(e,)h(a)f(choice)g
(point)g(frame)f(is)i(created)e(by)h(the)g(\002rst)g(alternati)o(v)o
(e;)h(then,)g(it)f(is)g(up-)257 847 y(dated)h(\(as)f(far)f(as)i(which)f
(alternati)o(v)o(e)f(to)h(try)g(ne)o(xt\))g(by)g(intermediate)f(\(b)o
(ut)g(non)h(ultimate\))257 907 y(alternati)o(v)o(es;)d(\002nally)m(,)g
(it)g(is)h(discarded)f(by)h(the)f(last)h(alternati)o(v)o(e.)257
1090 y FA(4.1)72 b(En)m(vir)o(onment)16 b(pr)o(otection)257
1219 y FP(Before)d(we)f(go)h(into)f(the)g(details)h(of)f(what)h(e)o
(xactly)f(constitutes)h(a)g(choice)f(frame,)h(we)f(must)257
1279 y(ponder)17 b(carefully)g(the)g(interaction)f(between)i(the)f
(AND-stack)g(and)h(the)f(OR-stack.)31 b(As)257 1339 y(long)14
b(as)h(we)f(considered)g(\(deterministic\))e FK(L)1059
1346 y FE(2)1093 1339 y FP(program)h(de\002nitions,)i(it)e(was)h
(clearly)g(safe)257 1399 y(to)j(deallocate)f(an)h(en)n(vironment)e
(frame)h(allocated)h(to)f(a)h(rule)f(after)g(successfully)h(falling)257
1459 y(of)o(f)d(the)g(end)g(of)g(the)g(rule.)21 b(No)o(w)m(,)15
b(the)f(situation)g(is)g(not)g(quite)g(so)h(straightforward)d(as)j
(later)257 1520 y(failure)f(may)h(force)f(reconsidering)g(a)i(choice)f
(from)e(a)j(computation)e(state)h(in)g(the)g(middle)257
1580 y(of)d(a)f(rule)h(whose)g(en)n(vironment)e(has)i(long)g(been)f
(deallocated.)16 b(This)c(case)h(is)f(illustrated)e(by)257
1640 y(the)j(follo)o(wing)e(e)o(xample)h(program:)889
1725 y FD(a)i FS(:-)f FD(b)p FC(\()p FD(X)t FC(\))p FD(;)8
b(c)p FC(\()p FD(X)t FC(\))p FD(:)889 1803 y(b)p FC(\()p
FD(X)t FC(\))14 b FS(:-)g FD(e)p FC(\()p FD(X)t FC(\))p
FD(:)889 1882 y(c)p FC(\(1\))p FD(:)889 1960 y(e)p FC(\()p
FD(X)t FC(\))g FS(:-)g FD(f)5 b FC(\()p FD(X)t FC(\))p
FD(:)889 2020 y(e)p FC(\()p FD(X)t FC(\))14 b FS(:-)g
FD(g)r FC(\()p FD(X)t FC(\))p FD(:)889 2098 y(f)5 b FC(\(2\))p
FD(:)889 2176 y(g)r FC(\(1\))p FD(:)257 2261 y FP(Ex)o(ecuting)20
b(`)p FS(?-)o FD(a:)p FP(')e(allocates)i(an)f(en)n(vironment)f(for)h
FD(a)p FP(,)i(then)e(calls)h FD(b)p FP(.)36 b(Ne)o(xt,)22
b(an)d(en)n(vi-)257 2321 y(ronment)f(for)g FD(b)g FP(is)h(allocated,)i
(and)d FD(e)h FP(is)g(called.)34 b(This)19 b(creates)g(a)g(choice)g
(point)f(on)g(the)257 2382 y(OR-stack,)d(and)e(an)h(en)n(vironment)e
(for)h FD(e)g FP(is)h(pushed)f(onto)h(the)f(AND-stack.)19
b(At)13 b(this)h(point)257 2442 y(the)f(two)e(stacks)j(look)e(thus:)750
2424 y FL(1)p 257 2470 648 2 v 315 2501 a Fz(1)332 2516
y FN(In)e(these)h(diagrams,)g(the)f(stacks)h(gro)o(w)e(do)o(wnwards;)g
FH(i.e)o(.)p FN(,)j(the)e(stack)h(top)e(is)h(the)g(lo)o(wer)g(part.)258
2640 y(P)o FL(A)q(G)r(E)j FN(3)r(4)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 35 50
35 49 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 213 320 2 82 v 416 269 a FP(.)416 285
y(.)416 302 y(.)p 630 320 V 214 322 417 2 v 213 380 2
61 v 239 362 a(En)n(vironment)d(for)h FD(a)p 630 380
V 214 382 417 2 v 213 441 2 61 v 241 422 a FP(En)n(vironment)g(for)f
FD(b)p 630 441 V 214 442 417 2 v 95 483 a FS(E)j FK(!)p
213 501 2 61 v 51 w FP(En)n(vironment)e(for)f FD(e)p
630 501 V 214 502 417 2 v 1034 441 2 82 v 1234 389 a
FP(.)1234 406 y(.)1234 422 y(.)p 1445 441 V 1035 442
412 2 v 916 483 a FS(B)j FK(!)p 1034 501 2 61 v 50 w
FP(Choice)e(point)g(for)g FD(e)p 1445 501 V 1035 502
412 2 v 71 646 a FP(The)g(follo)o(wing)e(call)i(to)f
FD(f)17 b FP(succeeds)c(binding)e FD(X)16 b FP(to)c FC(2)p
FP(.)k(The)c(en)n(vironment)f(for)g FD(e)g FP(is)h(deallo-)71
706 y(cated,)h(then)g(the)f(en)n(vironment)g(for)g FD(b)g
FP(is)h(also)g(deallocated.)k(This)c(leads)g(to)g(stacks)g(looking)71
766 y(thus:)p 213 937 2 82 v 416 885 a(.)416 902 y(.)416
919 y(.)p 630 937 V 214 938 417 2 v 95 979 a FS(E)h FK(!)p
213 997 2 61 v 50 w FP(En)n(vironment)d(for)h FD(a)p
630 997 V 214 999 417 2 v 1034 937 2 82 v 1234 885 a
FP(.)1234 902 y(.)1234 919 y(.)p 1445 937 V 1035 938
412 2 v 916 979 a FS(B)i FK(!)p 1034 997 2 61 v 50 w
FP(Choice)e(point)g(for)g FD(e)p 1445 997 V 1035 999
412 2 v 71 1142 a FP(Ne)o(xt,)20 b(the)e(continuation)f(follo)o(ws)g
(up)h(with)g(e)o(x)o(ecution)g(of)g FD(a)p FP(')m(s)g(body)m(,)h
(calling)f FD(c)p FP(,)i(which)71 1202 y(immediately)c(hits)i(failure.)
29 b(The)18 b(choice)f(point)g(indicated)g(by)h FS(B)f
FP(sho)o(ws)h(an)f(alternati)o(v)o(e)71 1262 y(clause)g(for)f
FD(e)p FP(,)i(b)o(ut)f(at)g(this)g(point)g FD(b)p FB(')n(s)f(en)n(vir)n
(onment)h(has)g(been)g(lost.)30 b FP(Indeed,)18 b(in)f(a)g(more)71
1322 y(in)n(v)o(olv)o(ed)10 b(e)o(xample)i(where)f FD(c)g
FP(proceeded)g(deeper)g(before)f(failing,)h(the)g(old)g(stack)h(space)f
(for)71 1383 y FD(b)p FP(')m(s)h(en)n(vironment)f(would)h(ha)o(v)o(e)g
(been)h(o)o(v)o(erwritten)f(by)g(further)f(calls)i(in)f
FD(c)p FP(')m(s)g(body)m(.)71 1459 y(Therefore,)21 b(to)e(a)o(v)o(oid)h
(this)f(kind)g(of)g(misfortune,)i(a)f(setup)g(must)f(be)h(found)f(to)g
(pre)o(v)o(ent)71 1520 y(unreco)o(v)o(erable)9 b(deallocation)g(of)g
(en)n(vironment)g(frames)g(whose)h(creation)f(chronologically)71
1580 y(precedes)18 b(that)f(of)h(an)o(y)g(e)o(xisting)g(choice)f
(point.)32 b(The)18 b(idea)g(is)g(that)g(e)o(v)o(ery)f(choice)h(point)
71 1640 y(must)c(\223protect\224)h(from)e(deallocation)i(all)f(en)n
(vironment)g(frames)g(already)g(e)o(xisting)h(before)71
1700 y(its)j(creation.)32 b(No)o(w)m(,)19 b(since)f(a)g(stack)h
(re\003ects)f(chronological)e(order)n(,)j(it)f(makes)g(sense)h(to)71
1760 y(use)14 b(the)f(same)h(stack)g(for)f FB(both)g
FP(en)n(vironments)g(and)g(choice)h(points.)19 b(A)13
b(choice)h(point)f(no)o(w)71 1821 y(caps)f(all)g(older)f(en)n
(vironments.)k(In)c(ef)o(fect,)h(as)g(long)f(as)i(it)e(is)h(acti)o(v)o
(e,)h(it)e(forces)h(allocation)f(of)71 1881 y(further)g(en)n
(vironments)i(on)g(top)g(of)g(it,)g(pre)o(v)o(enting)f(the)i(older)e
(en)n(vironments')g(stack)i(space)71 1941 y(to)j(be)h(o)o(v)o
(erwritten)g(e)o(v)o(en)g(though)f(the)o(y)h(may)g(e)o(xplicitly)g(be)g
(deallocated.)32 b(This)19 b(allo)o(ws)71 2001 y(their)11
b(safe)g(resurrection)g(if)g(needed)h(by)f(coming)g(back)h(to)g(an)f
(alternati)o(v)o(e)g(from)g(this)g(choice)71 2061 y(point.)j(Moreo)o(v)
o(er)n(,)e(this)f(\223protection\224)f(lasts)h(just)g(as)g(long)g(as)g
(it)g(is)g(needed)g(since)g(as)g(soon)g(as)71 2121 y(the)i(choice)g
(point)g(disappears,)i(all)e(e)o(xplicitly)g(deallocated)g(en)n
(vironments)g(can)g(be)h(safely)71 2182 y(o)o(v)o(erwritten.)71
2258 y(Hence,)e(there)e(is)i(no)e(need)i(to)e(distinguish)h(between)g
(the)g(AND-stack)g(from)f(the)h(OR-stack,)71 2319 y(calling)h(the)g
(single)h(one)g FB(the)f FP(stack.)17 b(Choice)c(point)f(frames)h(are)f
(stored)h(in)f(the)h(stack)g(along)71 2379 y(with)f(en)n(vironments,)g
(and)g(thus)h FS(B)o FP(')m(s)g(v)o(alue)f(is)h(an)f(address)h(in)f
(the)h(stack.)71 2456 y(Going)d(back)h(to)f(our)g(e)o(xample)h(abo)o(v)
o(e,)h(the)f(snapshot)g(of)f(the)h(single)f(stack)i(at)e(the)h(same)g
(\002rst)71 2516 y(instant)h(looks)g(thus:)71 2640 y
FN(Copyright)260 2639 y(c)249 2640 y FM(\015)e FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(3)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 36 51
36 50 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 400 320 2
82 v 603 269 a FP(.)603 285 y(.)603 302 y(.)p 816 320
V 401 322 417 2 v 400 380 2 61 v 426 362 a(En)n(vironment)d(for)h
FD(a)p 816 380 V 401 382 417 2 v 400 441 2 61 v 428 422
a FP(En)n(vironment)g(for)f FD(b)p 816 441 V 401 442
417 2 v 282 483 a FS(B)j FK(!)p 400 501 2 61 v 52 w FP(Choice)f(point)f
(for)f FD(e)p 816 501 V 401 502 417 2 v 282 543 a FS(E)j
FK(!)p 400 561 2 61 v 51 w FP(En)n(vironment)e(for)f
FD(e)p 816 561 V 401 563 417 2 v 257 659 a FP(and)j(at)g(the)g(same)g
(second)g(instant)g(as)g(before,)g(the)f(stack)h(is)h(such)f(that)f(ha)
o(ving)h(pushed)f(on)257 720 y(it)h(the)g(choice)g(point)g(for)f
FD(e)h FP(protects)f FD(b)p FP(')m(s)h(deallocated)g(en)n(vironment)f
(\(which)h(may)f(still)h(be)257 780 y(needed)f(by)f(future)g(alternati)
o(v)o(es)g(gi)o(v)o(en)g(by)g FD(e)p FP(')m(s)g(choice)h(point\),)f
(looking)f(thus:)p 400 944 2 82 v 721 893 a(.)721 910
y(.)721 926 y(.)p 1054 944 V 401 946 654 2 v 282 987
a FS(E)j FK(!)p 400 1005 2 61 v 168 w FP(En)n(vironment)e(for)f
FD(a)p 1054 1005 V 401 1006 654 2 v 400 1065 2 61 v 426
1047 a FP(Deallocated)h(en)n(vironment)f(for)h FD(b)p
1054 1065 V 401 1066 654 2 v 282 1107 a FS(B)i FK(!)p
400 1125 2 61 v 171 w FP(Choice)e(point)g(for)g FD(e)p
1054 1125 V 401 1127 654 2 v 257 1232 a FP(No)o(w)m(,)20
b(the)f(computation)f(can)h(safely)f(reco)o(v)o(er)h(the)g(state)g
(from)e(the)i(choice)g(point)f(for)g FD(e)257 1292 y
FP(indicated)f(by)g FS(B)p FP(,)i(in)e(which)h(the)f(sa)o(v)o(ed)h(en)n
(vironment)e(to)h(restore)g(is)g(the)h(one)f(current)f(at)257
1352 y(the)f(time)f(of)g(this)h(choice)f(point')m(s)h(creation\227)p
FB(i.e)o(.)p FP(,)h(that)e(\(still)g(e)o(xisting\))g(of)g
FD(b)p FP(.)22 b(Ha)o(ving)14 b(no)257 1412 y(more)j(alternati)o(v)o(e)
f(for)h FD(e)f FP(after)h(the)g(second)g(one,)i(this)e(choice)h(point)e
(is)i(discarded)f(upon)257 1472 y(backtracking,)e(\(safely\))e(ending)g
(the)h(protection.)20 b(Ex)o(ecution)14 b(of)g(the)g(last)g(alternati)o
(v)o(e)f(for)257 1533 y FD(e)f FP(proceeds)h(with)f(a)h(stack)f
(looking)g(thus:)282 1658 y FS(B)i FK(!)p 400 1676 2
61 v 816 1676 V 400 1758 2 82 v 603 1706 a FP(.)603 1723
y(.)603 1740 y(.)p 816 1758 V 401 1759 417 2 v 400 1818
2 61 v 426 1800 a(En)n(vironment)d(for)h FD(a)p 816 1818
V 401 1819 417 2 v 400 1878 2 61 v 428 1860 a FP(En)n(vironment)g(for)f
FD(b)p 816 1878 V 401 1880 417 2 v 282 1920 a FS(E)j
FK(!)p 400 1938 2 61 v 51 w FP(En)n(vironment)e(for)f
FD(e)p 816 1938 V 401 1940 417 2 v 257 2087 a FA(4.2)72
b(What')m(s)17 b(in)h(a)g(choice)f(point)257 2215 y FP(When)j(a)f
(chosen)h(clause)g(is)f(attempted)g(among)g(those)h(of)e(a)i
(de\002nition,)g(it)g(will)e(create)257 2275 y(side)d(ef)o(fects)f(on)g
(the)h(stack)g(and)f(the)g(heap)h(by)f(binding)g(v)o(ariables)g
(residing)g(there.)21 b(These)257 2335 y(ef)o(fects)13
b(must)h(be)f(undone)g(when)h(reconsidering)e(the)i(choice.)19
b(A)13 b(record)g(must)g(be)h(kept)f(of)257 2395 y(those)j(v)o
(ariables)g(which)f(need)h(to)g(be)g(reset)g(to)f(`unbound')g(upon)g
(backtracking.)26 b(Hence,)257 2456 y(we)18 b(pro)o(vide,)g(along)f
(with)g(the)h(heap,)h(the)e(stack,)i(the)f(code)f(area,)i(and)e(the)h
FS(PDL)p FP(,)f(a)h(ne)o(w)257 2516 y(\(and)d(last!\))21
b(data)15 b(area)g(called)f(the)h FB(tr)o(ail)g FP(\()p
FS(TRAIL)p FP(\).)f(This)h(trail)f(is)h(or)o(ganized)f(as)h(an)g(array)
258 2640 y FN(P)o FL(A)q(G)r(E)e FN(3)r(6)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 37 52
37 51 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(of)f(addresses)i(of)f(those)g(\(stack)g(or)
g(heap\))g(v)o(ariables)g(which)g(must)g(be)g(reset)g(to)g(`unbound')71
349 y(upon)f(backtracking.)20 b(Note)14 b(that)g(it)g(also)g(works)g
(as)g(a)g(stack,)i(and)e(we)g(need)g(a)g(ne)o(w)g(global)71
409 y(re)o(gister)e FS(TR)g FP(always)g(set)g(to)h(contain)f(the)g(top)
g(of)g(the)g(trail.)71 486 y(It)g(is)i(important)e(to)h(remark)g(that)g
(not)g(all)g(bindings)g(need)g(to)h(be)f(remembered)f(in)i(the)f
(trail.)71 546 y(Only)i FB(conditional)g FP(bindings)g(do.)26
b(A)16 b(conditional)f(binding)g(is)h(one)g(af)o(fecting)e(a)i(v)o
(ariable)71 606 y(e)o(xisting)11 b(before)f(creation)h(of)f(the)h
(current)g(choice)g(point.)k(T)l(o)c(determine)f(this,)i(we)f(will)g
(use)71 667 y(a)f(ne)o(w)f(global)h(re)o(gister)f FS(HB)h
FP(set)h(to)e(contain)h(the)g(v)o(alue)f(of)h FS(H)g
FP(at)g(the)g(time)f(of)h(the)f(latest)h(choice)71 727
y(point.)186 709 y FL(2)224 727 y FP(Hence)15 b(only)e(bindings)h(of)g
(heap)g(\(resp.,)h(stack\))f(v)o(ariables)f(whose)i(addresses)g(are)71
787 y FB(less)e FP(than)g FS(HB)g FP(\(resp.,)h FS(B)p
FP(\))f(need)g(be)g(recorded)g(in)f(the)h(trail.)18 b(W)l(e)13
b(shall)g(write)g FB(tr)o(ail)p FC(\()p FD(a)p FC(\))g
FP(when)71 847 y(that)k(this)g(operation)g(is)h(performed)e(on)h(store)
h(address)g FD(a)p FP(.)31 b(As)18 b(mentioned)e(before,)j(it)e(is)71
907 y(done)12 b(as)h(part)f(of)g(the)g FB(bind)g FP(operation.)71
984 y(Let)e(us)g(no)o(w)g(think)f(about)h(what)g(constitutes)g(a)g
(computation)f(state)h(to)g(be)g(sa)o(v)o(ed)h(in)e(a)h(choice)71
1044 y(point)h(frame.)k(Upon)e(backtracking,)f(the)g(follo)o(wing)f
(information)g(is)h(needed:)71 1150 y FK(\017)o FB(The)h(ar)n(gument)f
(r)n(e)n(gisters)i FS(A)p FC(1)p FB(,)f(...,)h FS(A)p
FD(n)p FP(,)f(where)g FD(n)f FP(is)h(the)f(arity)g(of)g(the)h
(procedure)e(of)o(fering)71 1210 y(alternati)o(v)o(e)f(choices)i(of)f
(de\002nitions.)k(This)d(is)f(clearly)g(needed)g(as)h(the)f(ar)o
(gument)g(re)o(gisters,)71 1271 y(loaded)g(by)h FS(put)f
FP(instructions)h(with)f(the)h(v)o(alues)g(of)f(ar)o(guments)h
(necessary)g(for)f(goal)h(being)71 1331 y(attempted,)g(are)g(o)o(v)o
(erwritten)g(by)g(e)o(x)o(ecuting)h(the)f(chosen)h(clause.)71
1391 y FK(\017)o FB(The)g(curr)n(ent)h(en)n(vir)n(onment)f
FP(\(v)o(alue)f(of)g(re)o(gister)h FS(E)p FP(\),)g(to)f(reco)o(v)o(er)h
(as)g(a)g(protected)g(en)n(viron-)71 1451 y(ment)f(as)h(e)o(xplained)f
(abo)o(v)o(e.)71 1511 y FK(\017)o FB(The)i(continuation)f(pointer)h
FP(\(v)o(alue)f(of)g(re)o(gister)h FS(CP)p FP(\),)g(as)h(the)e(current)
g(choice)h(will)g(o)o(v)o(er)o(-)71 1571 y(write)d(it.)71
1632 y FK(\017)o FB(The)i(latest)f(c)o(hoice)h(point)f
FP(\(v)o(alue)g(of)g(re)o(gister)g FS(B)p FP(\),)g(where)g(to)h
(backtrack)f(in)g(case)h(all)f(alter)o(-)71 1692 y(nati)o(v)o(es)j(of)o
(fered)f(by)i(the)f(current)f(choice)i(point)f(fail.)24
b(This)16 b(acts)g(as)g(the)f(link)g(connecting)71 1752
y(choice)10 b(points)h(as)g(a)g(list.)k(It)10 b(is)h(reinstated)g(as)g
(the)f(v)o(alue)h(of)f(the)h FS(B)f FP(re)o(gister)h(upon)f(discarding)
71 1812 y(the)i(choice)g(point.)71 1872 y FK(\017)o FB(The)k(ne)o(xt)h
(clause)p FP(,)h(to)e(try)f(in)h(this)h(de\002nition)e(in)h(case)h(the)
f(currently)f(chosen)i(one)f(fails.)71 1933 y(This)e(slot)g(is)g
(updated)f(at)h(each)g(backtracking)f(to)h(this)f(choice)h(point)f(if)h
(more)f(alternati)o(v)o(es)71 1993 y(e)o(xist.)71 2053
y FK(\017)o FB(The)f(curr)n(ent)h(tr)o(ail)f(pointer)g
FP(\(v)o(alue)f(of)h(re)o(gister)g FS(TR)p FP(\),)g(which)f(is)i
(needed)f(as)g(the)g(boundary)71 2113 y(where)i(to)h
FB(unwind)f FP(the)h(trail)f(upon)h(backtracking.)23
b(If)14 b(computation)g(comes)h(back)g(to)g(this)71 2173
y(choice)f(point,)g(this)h(will)e(be)i(the)f(address)g(in)h(the)f
(trail)f(do)o(wn)h(to)g(which)g(all)g(v)o(ariables)g(that)71
2234 y(must)e(be)g(reset)h(ha)o(v)o(e)g(been)f(recorded.)71
2294 y FK(\017)o FB(The)e(curr)n(ent)g(top)f(of)g(heap)h
FP(\(v)o(alue)e(of)h(re)o(gister)g FS(H)p FP(\),)h(which)g(is)f(needed)
h(to)f(reco)o(v)o(er)g(\(garbage\))71 2354 y(heap)i(space)h(of)e(all)i
(the)f(structures)g(and)g(v)o(ariables)g(constructed)f(during)h(the)g
(failed)f(attempt)p 71 2420 648 2 v 129 2451 a Fz(2)145
2466 y FN(Strictly)g(speaking,)h(re)o(gister)h Fn(HB)f
FN(can)h(in)e(fact)h(be)h(dispensed)f(with)f(since,)i(as)g(we)g(see)g
(ne)o(xt,)g(its)f(v)o(alue)g(is)71 2516 y(that)e(of)h
Fn(H)g FN(which)g(will)f(ha)o(v)o(e)j(been)e(sa)o(v)o(ed)i(in)d(the)i
(latest)f(choice)g(point)f(frame.)71 2640 y(Copyright)260
2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(3)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 38 53
38 52 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(which)f(will)f(ha)o(v)o(e)g(resulted)g(in)h(coming)f(back)g(to)g
(this)h(choice)f(point.)257 395 y(In)g(summary)m(,)g(a)h(choice)f
(point)g(frame)g(is)h(allocated)f(on)g(the)g(stack)h(looking)f(thus:)
1689 377 y FL(3)p 511 467 708 2 v 456 508 a FS(B)p 510
526 2 61 v 50 w FD(n)80 b FC(\()p FB(number)13 b(of)f(ar)n(guments)p
FC(\))p 1217 526 V 511 528 708 2 v 371 568 a FS(B)f FC(+)g(1)p
510 586 2 61 v 51 w FS(A)p FC(1)55 b(\()p FB(ar)n(gument)13
b(r)n(e)n(gister)g FC(1\))p 1217 586 V 511 588 708 2
v 858 616 a FP(.)858 633 y(.)858 649 y(.)p 511 669 V
367 709 a FS(B)e FC(+)g FD(n)p 510 727 2 61 v 50 w FS(A)p
FD(n)50 b FC(\()p FB(ar)n(gument)13 b(r)n(e)n(gister)g
FD(n)p FC(\))p 1217 727 V 511 729 708 2 v 282 770 a FS(B)e
FC(+)g FD(n)g FC(+)g(1)p 510 788 2 61 v 51 w FS(CE)49
b FC(\()p FB(continuation)11 b(en)n(vir)n(onment)q FC(\))p
1217 788 V 511 789 708 2 v 282 830 a FS(B)g FC(+)g FD(n)g
FC(+)g(2)p 510 848 2 61 v 51 w FS(CP)49 b FC(\()p FB(continuation)11
b(pointer)q FC(\))p 1217 848 V 511 850 708 2 v 282 890
a FS(B)g FC(+)g FD(n)g FC(+)g(3)p 510 908 2 61 v 51 w
FS(B)79 b FC(\()p FB(pr)n(e)o(vious)14 b(c)o(hoice)e(point)q
FC(\))p 1217 908 V 511 910 708 2 v 282 950 a FS(B)f FC(+)g
FD(n)g FC(+)g(4)p 510 968 2 61 v 51 w FS(BP)49 b FC(\()p
FB(ne)o(xt)13 b(clause)p FC(\))p 1217 968 V 511 970 708
2 v 282 1010 a FS(B)e FC(+)g FD(n)g FC(+)g(5)p 510 1028
2 61 v 51 w FS(TR)49 b FC(\()p FB(tr)o(ail)13 b(pointer)q
FC(\))p 1217 1028 V 511 1030 708 2 v 282 1071 a FS(B)e
FC(+)g FD(n)g FC(+)g(6)p 510 1089 2 61 v 51 w FS(H)79
b FC(\()p FB(heap)12 b(pointer)q FC(\))p 1217 1089 V
511 1090 708 2 v 257 1183 a FP(Note)f(in)g(passing)h(that)f
FK(M)722 1190 y FE(2)741 1183 y FP(')m(s)g(e)o(xplicit)g(de\002nition)f
(for)g FS(allocate)j FD(N)k FP(must)11 b(be)g(altered)g(in)257
1243 y(order)e(to)h(work)f(for)f FK(M)660 1250 y FE(3)680
1243 y FP(.)15 b(This)10 b(is)g(because)h(the)f(top)f(of)g(stack)i(is)f
(no)o(w)f(computed)g(dif)o(ferently)257 1303 y(depending)16
b(on)f(whether)g(an)h(en)n(vironment)f(or)g(choice)g(point)h(is)g(the)f
(latest)h(frame)f(on)g(the)257 1364 y(stack.)i(Namely)m(,)12
b(in)g FK(M)678 1371 y FE(3)698 1364 y FP(:)447 1450
y FS(allocate)h FD(N)19 b FK(\021)34 b FF(if)13 b FS(E)h
FD(>)g FS(B)873 1510 y FF(then)f FB(ne)o(wE)h FK( )g
FS(E)d FC(+)g FS(STACK[E)f FC(+)h(2)p FS(])h FC(+)f(3)873
1570 y FF(else)j FB(ne)o(wE)h FK( )e FS(B)e FC(+)g FS(STACK[B])g
FC(+)g(7;)831 1630 y FS(STACK[)p FB(ne)o(wE)p FS(])j
FK( )g FS(E)p FC(;)831 1690 y FS(STACK[)p FB(ne)o(wE)e
FC(+)f(1)p FS(])j FK( )f FS(CP)p FC(;)831 1750 y FS(STACK[)p
FB(ne)o(wE)f FC(+)f(2)p FS(])j FK( )f FD(N)5 b FC(;)831
1811 y FS(E)14 b FK( )g FB(ne)o(wE)q FC(;)831 1871 y
FS(P)g FK( )g FS(P)d FC(+)g FB(instruction)p 1248 1871
15 2 v 17 w(size)q FC(\()p FS(P)p FC(\);)257 1973 y FP(T)l(o)19
b(work)f(with)g(the)g(fore)o(going)g(choice)g(point)g(format,)i(three)e
(ne)o(w)g FK(I)1526 1980 y FE(3)1564 1973 y FP(instructions)g(are)257
2033 y(added)13 b(to)g(those)g(already)f(in)g FK(I)796
2040 y FE(2)816 2033 y FP(.)17 b(The)o(y)d(are)e(to)h(deal)f(with)h
(the)f(choice)h(point)f(manipulation)p 257 2072 648 2
v 315 2102 a Fz(3)332 2117 y FN(In)e([W)m(ar83],)g(Da)o(vid)g(W)m
(arren)h(does)f(not)g(include)f(the)i(arity)e(in)h(a)h(choice)f(point,)
g(as)h(we)f(do)g(here.)k(He)d(sets)257 2167 y(up)g(things)e(slightly)f
(dif)o(ferently)h(so)h(that)g(this)g(number)g(can)i(always)e(be)h
(quickly)e(computed.)14 b(He)d(can)g(do)f(this)257 2217
y(by)g(making)f(re)o(gister)h Fn(B)f FN(\(and)h(the)f(pointers)g
(linking)e(the)j(choice)g(point)e(list\))g(reference)j(a)f(choice)g
(point)e(frame)257 2267 y(at)14 b(its)e FH(end)p FN(,)j(rather)e(than)g
(its)g FH(start)f FN(as)i(is)f(the)g(case)i(for)e(en)n(vironment)g
(frames.)23 b(In)13 b(other)g(words,)g(re)o(gister)g
Fn(B)257 2317 y FN(contains)f(the)h(stack)g(address)g(immediately)f
(follo)o(wing)e(the)j(latest)f(choice)h(point)e(frame,)k(whereas)e(re)o
(gister)257 2366 y Fn(E)i FN(contains)g(the)f(address)i(of)e(the)h
(\002rst)g(slot)f(in)g(the)h(en)n(vironment.)26 b(Thus,)16
b(the)f(arity)f(of)h(the)f(latest)h(choice)257 2416 y(point)10
b(predicate)h(is)g(always)g(gi)o(v)o(en)f(by)h Fm(n)i
Fl(=)g Fn(B)d FM(\000)g Fn(STACK[B)f FM(\000)g Fl(4)p
Fn(])h FM(\000)g Fl(6)p FN(.)15 b(F)o(or)c(didactic)g(reasons,)h(we)g
(chose)257 2466 y(to)h(handle)g Fn(E)g FN(and)h Fn(B)f
FN(identically)m(,)g(judging)e(that)i(sa)o(ving)g(one)g(stack)g(slot)g
(is)g(not)f(really)h(worth)f(the)h(entailed)257 2516
y(complication)d(of)f(the)i(code)f(implementing)f(the)h(instructions.)
258 2640 y(P)o FL(A)q(G)r(E)j FN(3)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 39 54
39 53 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(needed)9 b(for)g(multiple)g(clause)i
(de\002nitions.)j(As)c(e)o(xpected,)h(these)f(instructions)g
(correspond,)71 349 y(respecti)o(v)o(ely)m(,)15 b(to)g(\(1\))f(a)h
(\002rst,)h(\(2\))e(an)h(intermediate)f(\(b)o(ut)h(non)f(ultimate\),)h
(and)g(\(3\))30 b(a)15 b(last,)71 409 y(clause)e(of)e(a)i
(de\002nition.)i(The)o(y)e(are:)131 529 y(1.)25 b FS(try)p
286 529 15 2 v 17 w(me)p 363 529 V 18 w(else)13 b FD(L)131
633 y FP(2.)25 b FS(retry)p 346 633 V 17 w(me)p 423 633
V 18 w(else)13 b FD(L)131 737 y FP(3.)25 b FS(trust)p
346 737 V 17 w(me)71 857 y FP(where)14 b FD(L)h FP(is)g(an)g
(instruction)f(label)h(\()p FB(i.e)o(.)p FP(,)h(an)f(address)g(in)g
(the)f(code)h(area\).)23 b(The)o(y)15 b(ha)o(v)o(e)g(for)71
917 y(ef)o(fect,)d(respecti)o(v)o(ely:)131 1037 y(1.)25
b(to)11 b(allocate)g(a)h(ne)o(w)f(choice)g(point)g(frame)g(on)g(the)g
(stack)h(setting)f(its)h(ne)o(xt)f(clause)h(\002eld)193
1098 y(to)g FD(L)h FP(and)f(the)g(other)g(\002elds)h(according)f(to)g
(the)g(current)g(conte)o(xt,)h(and)f(set)h FS(B)g FP(to)f(point)193
1158 y(to)g(it;)131 1262 y(2.)25 b(ha)o(ving)19 b(backtracked)g(to)g
(the)h(current)f(choice)h(point)f(\(indicated)g(by)h(the)f(current)193
1322 y(v)o(alue)c(of)h(the)g FS(B)g FP(re)o(gister\),)h(to)f(reset)g
(all)g(the)g(necessary)h(information)e(from)g(it)h(and)193
1382 y(update)c(its)g(ne)o(xt)h(clause)g(\002eld)f(to)g
FD(L)p FP(;)g(and,)131 1486 y(3.)25 b(ha)o(ving)17 b(backtracked)g(to)h
(the)g(current)f(choice)h(point,)h(to)f(reset)g(all)g(the)g(necessary)
193 1546 y(information)e(from)h(it,)i(then)f(discard)g(it)g(by)f
(resetting)h FS(B)g FP(to)g(its)g(predecessor)g(\(the)193
1606 y(v)o(alue)12 b(of)g(the)g(link)g(slot\).)71 1727
y(W)n(ith)i(this)g(setup,)i(backtracking)e(is)g(ef)o(fecti)o(v)o(ely)g
(handled)g(quite)g(easily)m(.)22 b(All)14 b(instructions)71
1787 y(in)h(which)g(failure)f(may)i(occur)f(\()p FB(i.e)o(.)p
FP(,)i(some)f(uni\002cation)f(instructions)g(and)g(all)g(procedure)71
1847 y(calls\))c(must)g(ultimately)f(test)i(whether)e(failure)g(has)i
(indeed)f(occurred.)k(If)10 b(such)i(is)f(the)g(case,)71
1907 y(the)o(y)j(must)h(then)f(set)i(the)e(instruction)g(counter)g
(accordingly)m(.)22 b(That)15 b(is,)h(the)o(y)e(perform)g(the)71
1967 y(follo)o(wing)c(operation:)355 2079 y Fo(b)n(acktr)n(ack)20
b FK(\021)34 b FS(P)14 b FK( )f FS(STACK[B)e FC(+)g FS(STACK[B)o(])g
FC(+)g(4)p FS(])p FC(;)71 2198 y FP(as)17 b(opposed)f(to)h(ha)o(ving)f
FS(P)g FP(be)h(unconditionally)e(set)i(to)g(follo)o(w)e(its)i(normal)f
(\(successful\))71 2258 y(course.)26 b(Naturally)m(,)15
b(if)h(no)f(more)g(choice)h(point)g(e)o(xists)g(on)g(the)f(stack,)j
(this)e(is)g(a)f(terminal)71 2319 y(failure)9 b(and)i(e)o(x)o(ecution)h
(aborts.)j(All)c(the)g(appropriate)f(alterations)g(of)h(instructions)g
(re)o(gard-)71 2379 y(ing)h(this)g(precaution)g(are)g(gi)o(v)o(en)g(in)
g(Appendix)g(B.)71 2456 y(The)d(three)h(choice)f(point)g(instructions)g
(are)g(de\002ned)g(e)o(xplicitly)g(in)g(Figures)g(4.1,)i(4.2,)g(and)e
(4.3,)71 2516 y(respecti)o(v)o(ely)m(.)43 b(In)21 b(the)h(de\002nition)
e(of)i FS(try)p 877 2516 V 17 w(me)p 954 2516 V 18 w(else)13
b FD(L)q FP(,)24 b(we)e(use)g(a)g(global)f(v)o(ariable)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)10
b FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o
FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(3)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 40 55
40 54 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FB(num)p 346 289 15 2 v 18 w(of)p 403 289 V 18 w(ar)n(gs)20
b FP(gi)o(ving)f(the)g(arity)g(of)g(the)h(current)e(procedure.)37
b(This)20 b(v)o(ariable)f(is)h(set)f(by)257 349 y FS(call)12
b FP(that)h(we)f(must)g(accordingly)g(modify)f(for)h
FK(M)1191 356 y FE(3)1223 349 y FP(from)f(its)i FK(M)1452
356 y FE(2)1484 349 y FP(form)e(as)i(follo)o(ws:)1810
331 y FL(4)586 531 y FS(call)g FD(p=n)i FK(\021)35 b
FS(CP)13 b FK( )h FS(P)d FC(+)g Fo(instruction)p 1349
531 V 23 w(size)s FC(\()p FS(P)p FC(\);)885 591 y FB(num)p
974 591 V 17 w(of)p 1030 591 V 18 w(ar)n(gs)k FK( )e
FD(n)p FC(;)885 651 y FS(P)g FK( )h FC(@\()p FD(p=n)p
FC(\);)257 840 y FP(As)g(we)g(just)f(e)o(xplained,)h(we)g(omit)f
(treating)f(the)h(case)i(of)e(failure)f(\(and)h(therefore)f(of)h(back-)
257 900 y(tracking\))k(where)h FD(p=n)h FP(is)f(not)g(de\002ned)g(in)f
(this)h(e)o(xplicit)g(de\002nition)f(of)h FS(call)13
b FD(p=n)q FP(.)32 b(Its)257 961 y(ob)o(vious)16 b(complete)e(form)g
(is,)j(as)f(those)f(of)g(all)g(instructions)g(of)f(the)h(full)g(W)-6
b(AM,)16 b(gi)o(v)o(en)f(in)257 1021 y(Appendix)d(B.)257
1098 y(Finally)m(,)17 b(the)e(de\002nitions)h(of)f FS(retry)p
938 1098 V 17 w(me)p 1015 1098 V 18 w(else)e FD(L)k FP(and)e
FS(trust)p 1453 1098 V 18 w(me)p FP(,)i(use)f(an)g(ancillary)257
1158 y(operation,)e FB(unwind)p 622 1158 V 18 w(tr)o(ail)p
FP(,)g(to)f(reset)h(all)g(v)o(ariables)f(since)h(the)f(last)h(choice)g
(point)f(to)g(an)h(un-)257 1218 y(bound)e(state.)17 b(Its)12
b(e)o(xplicit)g(de\002nition)f(can)i(be)f(found)g(in)g(Appendix)g(B.)
257 1295 y(In)h(conclusion,)g(there)g(are)g(three)g(patterns)f(of)h
(code)g(translations)g(for)f(a)h(procedure)f(de\002ni-)257
1355 y(tion)i(in)f FK(L)435 1362 y FE(3)456 1355 y FP(,)h(depending)g
(on)f(whether)h(it)f(has)i(one,)f(two,)g(or)g(more)f(than)h(two)f
(clauses.)21 b(The)257 1415 y(code)12 b(generated)f(in)g(the)h(\002rst)
f(case)h(is)g(identical)f(to)g(what)h(is)g(generated)f(for)f(an)i
FK(L)1676 1422 y FE(2)1708 1415 y FP(program)257 1475
y(on)h FK(M)380 1482 y FE(2)399 1475 y FP(.)j(In)c(the)g(second)h
(case,)h(the)e(pattern)g(for)f(a)i(procedure)f FD(p=n)h
FP(is:)282 1692 y FD(p=n)51 b FP(:)f FS(try)p 567 1692
V 17 w(me)p 644 1692 V 18 w(else)13 b FD(L)474 1752 y
FB(code)f(for)h(\002rst)f(clause)282 1812 y FD(L)95 b
FP(:)50 b FS(trust)p 627 1812 V 17 w(me)474 1873 y FB(code)12
b(for)h(second)g(clause)257 2087 y FP(and)g(for)e(the)i(last)f(case:)p
257 2221 648 2 v 315 2252 a Fz(4)332 2267 y FN(As)j(for)f
FH(num)p 530 2267 13 2 v 15 w(of)p 578 2267 V 14 w(ar)n(gs)p
FN(,)i(it)e(is)h(le)o(gitimate)f(to)g(ask)h(why)f(this)g(is)h(not)f(a)h
(global)e(re)o(gister)i(like)f Fn(E)p FN(,)i Fn(P)p FN(,)g
FH(etc.)p FN(,)257 2317 y(in)c(the)g(design.)19 b(In)12
b(fact,)h(the)f(e)o(xact)i(manner)f(in)e(which)h(the)g(number)h(of)f
(ar)o(guments)g(is)g(retrie)o(v)o(ed)h(at)f(choice)257
2366 y(point)h(creation)i(time)f(is)h(not)f(at)g(all)g(e)o(xplained)h
(in)f([W)m(ar83)o(,)h(W)m(ar88].)26 b(Moreo)o(v)o(er)n(,)17
b(upon)d(pri)o(v)o(ate)g(inquiry)m(,)257 2416 y(Da)o(vid)c(H.)g(D.)g(W)
m(arren)g(could)f(not)g(remember)i(whether)f(that)f(was)h(an)g
(incidental)f(omission.)j(So)d(we)i(chose)f(to)257 2466
y(introduce)f(this)g(global)g(v)o(ariable)g(as)i(opposed)e(to)g(a)h(re)
o(gister)g(as)h(no)e(such)h(e)o(xplicit)f(re)o(gister)g(was)h
(speci\002ed)h(for)257 2516 y(the)f(original)f(W)-5 b(AM.)258
2640 y(P)o FL(A)q(G)r(E)13 b FN(4)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 41 56
41 55 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 211 332 1338 3 v 253 429 a FQ(try)p 337
429 14 2 v 17 w(me)p 408 429 V 17 w(else)f Fu(L)g Fp(\021)34
b Fq(if)12 b FQ(E)h Fu(>)g FQ(B)697 485 y Fq(then)h FI(ne)o(wB)f
Fp( )g FQ(E)d Fw(+)h FQ(STACK[E)h Fw(+)e(2)p FQ(])g Fw(+)h(3)697
542 y Fq(else)i FI(ne)o(wB)f Fp( )i FQ(B)c Fw(+)g FQ(STACK[B)r(])h
Fw(+)f(7;)656 598 y FQ(STACK[)p FI(ne)o(wB)r FQ(])j Fp( )g
FI(num)p 1100 598 V 15 w(of)p 1151 598 V 16 w(ar)n(gs)o
Fw(;)656 655 y Fu(n)g Fp( )g FQ(STACK[)p FI(ne)o(wB)r
FQ(])p Fw(;)656 711 y Fq(f)o(or)f Fu(i)h Fp( )g Fw(1)f
Fq(to)g Fu(n)h Fq(do)g FQ(STACK[)p FI(ne)o(wB)f Fw(+)f
Fu(i)p FQ(])h Fp( )h FQ(A)p Fu(i)p Fw(;)656 768 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(1)p FQ(])j Fp( )g FQ(E)p
Fw(;)656 824 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h
Fw(+)f(2)p FQ(])j Fp( )g FQ(CP)p Fw(;)656 881 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(3)p FQ(])j Fp( )g FQ(B)p
Fw(;)656 937 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h
Fw(+)f(4)p FQ(])j Fp( )g Fu(L)p Fw(;)656 993 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(5)p FQ(])j Fp( )g FQ(TR)p
Fw(;)656 1050 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h
Fw(+)f(6)p FQ(])j Fp( )g FQ(H)p Fw(;)656 1106 y FQ(B)g
Fp( )g FI(ne)o(wB)p Fw(;)656 1163 y FQ(HB)g Fp( )g FQ(H)p
Fw(;)656 1219 y FQ(P)g Fp( )g FQ(P)d Fw(+)h FI(instruction)p
1039 1219 V 13 w(size)o Fw(\()p FQ(P)p Fw(\);)p 211 1295
1338 3 v 323 1446 a FP(Figure)h(4.1:)j FK(M)617 1453
y FE(3)649 1446 y FP(choice)e(point)f(instruction)f FS(try)p
1225 1446 15 2 v 18 w(me)p 1303 1446 V 17 w(else)p 220
1632 1320 3 v 262 1729 a FQ(retry)p 400 1729 14 2 v 18
w(me)p 472 1729 V 16 w(else)j Fu(L)f Fp(\021)34 b Fu(n)12
b Fp( )h FQ(STACK[B)r(])q Fw(;)720 1786 y Fq(f)o(or)f
Fu(i)g Fp( )h Fw(1)g Fq(to)f Fu(n)h Fq(do)g FQ(A)p Fu(i)f
Fp( )h FQ(STACK[B)f Fw(+)f Fu(i)p FQ(])p Fw(;)720 1842
y FQ(E)h Fp( )h FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(1)p
FQ(])p Fw(;)720 1899 y FQ(CP)i Fp( )g FQ(STACK[B)f Fw(+)e
Fu(n)h Fw(+)f(2)p FQ(])p Fw(;)720 1955 y FQ(STACK[B)i
Fw(+)e Fu(n)g Fw(+)h(4)p FQ(])h Fp( )i Fu(L)p Fw(;)720
2012 y FI(unwind)p 858 2012 V 15 w(tr)o(ail)n Fw(\()p
FQ(STACK[B)e Fw(+)f Fu(n)f Fw(+)g(5)p FQ(])p Fu(;)e FQ(TR)p
Fw(\);)720 2068 y FQ(TR)13 b Fp( )g FQ(STACK[B)f Fw(+)e
Fu(n)h Fw(+)f(5)p FQ(])p Fw(;)720 2124 y FQ(H)i Fp( )h
FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(6)p FQ(])p Fw(;)720
2181 y FQ(HB)i Fp( )g FQ(H)p Fw(;)720 2237 y FQ(P)f Fp( )h
FQ(P)e Fw(+)f FI(instruction)p 1103 2237 V 14 w(size)o
Fw(\()p FQ(P)p Fw(\);)p 220 2313 1320 3 v 293 2464 a
FP(Figure)i(4.2:)j FK(M)587 2471 y FE(3)619 2464 y FP(choice)e(point)f
(instruction)f FS(retry)p 1255 2464 15 2 v 18 w(me)p
1333 2464 V 17 w(else)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)f FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(4)r(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 42 57
42 56 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 492 291 1151
3 v 533 388 a FQ(trust)p 671 388 14 2 v 18 w(me)f Fp(\021)34
b Fu(n)13 b Fp( )g FQ(STACK[B)r(])p Fw(;)822 445 y Fq(f)o(or)f
Fu(i)h Fp( )g Fw(1)f Fq(to)h Fu(n)f Fq(do)h FQ(A)p Fu(i)g
Fp( )g FQ(STACK[B)f Fw(+)e Fu(i)p FQ(])p Fw(;)822 501
y FQ(E)j Fp( )g FQ(STACK[B)f Fw(+)e Fu(n)h Fw(+)f(1)p
FQ(])p Fw(;)822 558 y FQ(CP)j Fp( )g FQ(STACK[B)f Fw(+)f
Fu(n)f Fw(+)g(2)p FQ(])p Fw(;)822 614 y FI(unwind)p 960
614 V 15 w(tr)o(ail)o Fw(\()p FQ(STACK[B)h Fw(+)g Fu(n)f
Fw(+)h(5)p FQ(])p Fu(;)d FQ(TR)o Fw(\);)822 670 y FQ(TR)13
b Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)g(5)p FQ(])p
Fw(;)822 727 y FQ(H)j Fp( )g FQ(STACK[B)f Fw(+)e Fu(n)h
Fw(+)f(6)p FQ(])p Fw(;)822 783 y FQ(B)j Fp( )g FQ(STACK[B)f
Fw(+)e Fu(n)h Fw(+)f(3)p FQ(])p Fw(;)822 840 y FQ(HB)j
Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)g(6)p FQ(])p Fw(;)822
896 y FQ(P)j Fp( )g FQ(P)d Fw(+)h FI(instruction)p 1205
896 V 13 w(size)o Fw(\()p FQ(P)p Fw(\);)p 492 972 1151
3 v 549 1123 a FP(Figure)g(4.3:)16 b FK(M)843 1130 y
FE(3)875 1123 y FP(choice)c(point)g(instruction)g FS(trust)p
1511 1123 15 2 v 17 w(me)282 1265 y FD(p=n)73 b FP(:)49
b FS(try)p 588 1265 V 18 w(me)p 666 1265 V 18 w(else)13
b FD(L)847 1272 y FE(1)495 1325 y FB(code)g(for)f(\002rst)h(clause)282
1385 y FD(L)315 1392 y FE(1)432 1385 y FP(:)49 b FS(retry)p
648 1385 V 18 w(me)p 726 1385 V 17 w(else)14 b FD(L)907
1392 y FE(2)495 1446 y FB(code)f(for)f(second)h(clause)765
1494 y FP(.)765 1510 y(.)765 1527 y(.)282 1587 y FD(L)315
1594 y Fy(k)q Fk(\000)p FE(1)432 1587 y FP(:)49 b FS(retry)p
648 1587 V 18 w(me)p 726 1587 V 17 w(else)14 b FD(L)907
1594 y Fy(k)495 1647 y FB(code)f(for)f(penultimate)g(clause)282
1707 y FD(L)315 1714 y Fy(k)432 1707 y FP(:)49 b FS(trust)p
648 1707 V 18 w(me)495 1768 y FB(code)13 b(for)f(last)h(clause)257
1894 y FP(where)h(each)h(clause)g(is)f(translated)g(as)h(it)f(would)f
(be)h(as)h(a)f(single)h FK(L)1450 1901 y FE(2)1484 1894
y FP(clause)g(for)e FK(M)1755 1901 y FE(2)1775 1894 y
FP(.)21 b(F)o(or)257 1954 y(e)o(xample,)13 b FK(M)510
1961 y FE(3)542 1954 y FP(code)g(for)e(the)i(de\002nition:)775
2070 y FD(p)p FC(\()p FD(X)q(;)8 b(a)p FC(\))p FD(:)775
2130 y(p)p FC(\()p FD(b;)g(X)t FC(\))p FD(:)775 2190
y(p)p FC(\()p FD(X)q(;)g(Y)k FC(\))i FS(:-)g FD(p)p FC(\()p
FD(X)q(;)8 b(a)p FC(\))p FD(;)g(p)p FC(\()p FD(b;)g(Y)j
FC(\))p FD(:)257 2305 y FP(is)i(gi)o(v)o(en)f(in)g(Figure)g(4.4.)379
2450 y Fq(Exer)o(cise)i(4.1)26 b FR(T)n(race)15 b(the)d(e)o(x)o
(ecution)h(of)g Fp(L)1094 2457 y FE(3)1128 2450 y FR(query)g
FQ(?-)p Fu(p)p Fw(\()p Fu(c;)8 b(d)p Fw(\))j FR(with)h(code)h(in)g
(Figure)g(4.4,)379 2506 y(gi)o(ving)d(all)h(the)f(successi)o(v)o(e)h
(states)f(of)h(the)g(stack,)g(the)g(heap,)h(and)f(the)g(trail.)258
2640 y FN(P)o FL(A)q(G)r(E)i FN(4)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 43 58
43 57 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 260 707 1241 3 v 301 805 a Fu(p=)p Fw(2)41
b(:)g FQ(try)p 549 805 14 2 v 17 w(me)p 620 805 V 17
w(else)14 b Fu(L)787 812 y FE(1)1003 805 y FQ(\045)42
b Fu(p)465 861 y FQ(get)p 549 861 V 17 w(variable)15
b(X)p Fw(3)p Fu(;)8 b FQ(A)p Fw(1)88 b FQ(\045)64 b Fw(\()p
Fu(X)q(;)465 917 y FQ(get)p 549 917 V 17 w(structure)16
b Fu(a=)p Fw(0)p Fu(;)8 b FQ(A)p Fw(2)40 b FQ(\045)133
b Fu(a)p Fw(\))465 974 y FQ(proceed)349 b(\045)183 b
Fu(:)301 1051 y(L)332 1058 y FE(1)411 1051 y Fw(:)41
b FQ(retry)p 603 1051 V 18 w(me)p 675 1051 V 17 w(else)14
b Fu(L)842 1058 y FE(2)1003 1051 y FQ(\045)42 b Fu(p)465
1107 y FQ(get)p 549 1107 V 17 w(structure)16 b Fu(b=)p
Fw(0)p Fu(;)8 b FQ(A)p Fw(1)44 b FQ(\045)64 b Fw(\()p
Fu(b;)465 1164 y FQ(get)p 549 1164 V 17 w(variable)15
b(X)p Fw(3)p Fu(;)8 b FQ(A)p Fw(2)88 b FQ(\045)114 b
Fu(X)t Fw(\))465 1220 y FQ(proceed)349 b(\045)181 b Fu(:)301
1297 y(L)332 1304 y FE(2)411 1297 y Fw(:)41 b FQ(trust)p
603 1297 V 18 w(me)331 b(\045)465 1354 y(allocate)15
b Fw(1)284 b FQ(\045)42 b Fu(p)465 1410 y FQ(get)p 549
1410 V 17 w(variable)15 b(X)p Fw(3)p Fu(;)8 b FQ(A)p
Fw(1)88 b FQ(\045)64 b Fw(\()p Fu(X)q(;)465 1467 y FQ(get)p
549 1467 V 17 w(variable)15 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p
Fw(2)88 b FQ(\045)133 b Fu(Y)11 b Fw(\))h FQ(:-)465 1523
y(put)p 549 1523 V 17 w(value)i(X)p Fw(3)p Fu(;)8 b FQ(A)p
Fw(1)170 b FQ(\045)275 b Fu(p)p Fw(\()p Fu(X)q(;)465
1579 y FQ(put)p 549 1579 V 17 w(structure)16 b Fu(a=)p
Fw(0)p Fu(;)8 b FQ(A)p Fw(2)40 b FQ(\045)367 b Fu(a)465
1636 y FQ(call)14 b Fu(p=)p Fw(2)347 b FQ(\045)398 b
Fw(\))p Fu(;)465 1692 y FQ(put)p 549 1692 V 17 w(structure)16
b Fu(b=)p Fw(0)p Fu(;)8 b FQ(A)p Fw(1)44 b FQ(\045)275
b Fu(p)p Fw(\()p Fu(b;)465 1749 y FQ(put)p 549 1749 V
17 w(value)14 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)170 b
FQ(\045)348 b Fu(Y)465 1805 y FQ(call)14 b Fu(p=)p Fw(2)347
b FQ(\045)392 b Fw(\))465 1862 y FQ(deallocate)268 b(\045)409
b Fu(:)p 260 1937 1241 3 v 358 2089 a FP(Figure)11 b(4.4:)16
b FK(M)652 2096 y FE(3)684 2089 y FP(code)d(for)e(a)i(multiple)e
(clause)i(de\002nition)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(4)r(3)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 44 59
44 58 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 379 289 a
Fq(Exer)o(cise)d(4.2)21 b FR(It)10 b(is)g(possible)f(to)g(maintain)h
(separate)g(AND-stack)g(and)g(OR-stack.)k(Discuss)379
345 y(the)i(alterations)e(that)i(would)e(be)i(needed)g(to)f(the)h(fore)
o(going)f(setup)g(to)h(do)f(so,)i(ensuring)e(a)379 402
y(correct)d(management)f(of)h(en)n(vironments)e(and)h(choice)g(points.)
258 2640 y FN(P)o FL(A)q(G)r(E)i FN(4)r(4)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 45 60
45 59 bop 71 637 a FG(Chapter)26 b(5)71 862 y(Optimizing)g(the)g
(Design)71 1104 y FP(No)o(w)11 b(that)g(the)g(reader)g(is)h(hopefully)e
(con)n(vinced)h(that)h(the)f(design)h(we)f(ha)o(v)o(e)h(reached)f
(forms)71 1165 y(an)k(adequate)h(tar)o(get)f(language)h(and)g
(architecture)f(for)g(compiling)f(pure)i(Prolog,)g(we)f(can)71
1225 y(be)o(gin)d(transforming)f(it)h(in)h(order)f(to)g(reco)o(v)o(er)h
(W)l(arren')m(s)f(machine)g(as)h(an)g(ultimate)f(design.)71
1285 y(Therefore,)e(since)h(all)f(optimizations)g(considered)g(here)h
(are)f(part)g(of)g(the)g(de\002niti)o(v)o(e)g(design,)71
1345 y(we)g(shall)h(no)o(w)f(refer)g(to)h(the)f(abstract)h(machine)f
(gradually)g(being)h(elaborated)f(as)h(the)h FO(W)m(A)r(M)q
FP(.)71 1405 y(In)e(the)h(process,)h(we)f(shall)g(abide)f(by)h(a)g(fe)o
(w)f(principles)h(of)f(design)h(perv)o(asi)o(v)o(ely)f(moti)o(v)o
(ating)71 1466 y(all)g(the)h(conception)f(features)g(of)g(the)i
FO(W)m(A)r(M)q FP(.)k(W)l(e)11 b(will)f(repeatedly)g(in)n(v)o(oke)g
(these)h(principles)71 1526 y(in)h(design)g(decisions)h(as)g(we)f
(progress)g(to)o(ward)f(the)h(full)h FO(W)m(A)r(M)i FP(engine,)d(as)h
(more)f(e)o(vidence)71 1586 y(justifying)f(them)h(accrues.)72
1765 y(W)l(A)r(M)k(P)r FO(R)r(I)r(N)r(C)r(I)r(P)r(L)r(E)i
FP(1)26 b FB(Heap)13 b(space)h(is)f(to)g(be)h(used)f(as)h(sparingly)f
(as)h(possible,)f(as)h(terms)71 1825 y(b)o(uilt)d(on)i(the)f(heap)g
(turn)h(out)f(to)g(be)h(r)n(elatively)f(persistent.)72
2005 y FP(W)l(A)r(M)k(P)r FO(R)r(I)r(N)r(C)r(I)r(P)r(L)r(E)i
FP(2)26 b FB(Re)n(gisters)18 b(must)e(be)g(allocated)g(in)g(suc)o(h)h
(a)g(way)f(as)h(to)f(avoid)g(un-)71 2065 y(necessary)d(data)f
(movement,)h(and)f(minimize)g(code)h(size)g(as)g(well.)72
2244 y FP(W)l(A)r(M)j(P)r FO(R)r(I)r(N)r(C)r(I)r(P)r(L)r(E)i
FP(3)26 b FB(P)l(articular)12 b(situations)e(that)h(occur)g(very)h
(often,)f(e)o(ven)g(though)g(cor)o(-)71 2304 y(r)n(ectly)16
b(handled)f(by)g(gener)o(al-case)h(instructions,)h(ar)n(e)f(to)f(be)h
(accommodated)f(by)g(special)71 2364 y(ones)d(if)g(space)h(and/or)g
(time)f(may)g(be)h(saved)g(thanks)f(to)g(their)h(speci\002city)m(.)71
2516 y FP(In)f(the)g(light)g(of)g(W)-6 b(AM)12 b(Principles)g(1,)h(2,)g
(and)f(3,)h(we)f(may)h(no)o(w)f(impro)o(v)o(e)g(on)g
FK(M)1500 2523 y FE(3)1519 2516 y FP(.)855 2640 y(45)p
eop
%%Page: 46 61
46 60 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 1010 290
178 2 v 967 328 a Fw(0)p 1009 345 2 57 v 73 w Fu(h=)p
Fw(2)p 1187 345 V 1010 347 178 2 v 967 385 a(1)p 1009
402 2 57 v 41 w Fv(REF)p 1123 402 V 41 w Fw(1)p 1187
402 V 1010 403 178 2 v 967 441 a(2)p 1009 458 2 57 v
41 w Fv(REF)p 1123 458 V 41 w Fw(2)p 1187 458 V 1010
460 178 2 v 967 498 a(3)p 1009 515 2 57 v 73 w Fu(f)5
b(=)p Fw(1)p 1187 515 V 1010 516 178 2 v 967 554 a(4)p
1009 571 2 57 v 41 w Fv(REF)p 1123 571 V 41 w Fw(2)p
1187 571 V 1010 573 178 2 v 967 611 a(5)p 1009 627 2
57 v 75 w Fu(p=)p Fw(3)p 1187 627 V 1010 629 178 2 v
967 667 a(6)p 1009 684 2 57 v 41 w Fv(REF)p 1123 684
V 41 w Fw(1)p 1187 684 V 1010 686 178 2 v 967 723 a(7)p
1009 740 2 57 v 41 w Fv(STR)p 1123 740 V 41 w Fw(0)p
1187 740 V 1010 742 178 2 v 967 780 a(8)p 1009 797 2
57 v 41 w Fv(STR)p 1123 797 V 41 w Fw(3)p 1187 797 V
1010 799 178 2 v 377 926 a FP(Figure)12 b(5.1:)j(Better)e(heap)f
(representation)g(for)f(term)h FD(p)p FC(\()p FD(Z)q(;)c(h)p
FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d FC(\()p FD(W)i
FC(\)\))257 1079 y FA(5.1)72 b(Heap)17 b(r)o(epr)o(esentation)257
1212 y FP(As)h(man)o(y)g(readers)g(of)f([AK90)o(])g(did,)j(this)d
(reader)h(may)f(ha)o(v)o(e)h(wondered)f(about)g(the)h(ne-)257
1273 y(cessity)f(of)e(the)g(e)o(xtra)h(le)o(v)o(el)f(of)h(indirection)e
(systematically)i(introduced)f(in)g(the)h(heap)f(by)257
1333 y(an)20 b FS(STR)f FP(cell)h(for)e FB(eac)o(h)i
FP(functor)f(symbol.)37 b(In)19 b(particular)n(,)i(Fernando)d(Pereira)h
([Per90)o(])257 1393 y(suggested)13 b(that)f(instead)g(of)f(that)h(sho)
o(wn)g(in)g(Figure)f(2.1)h(on)g(P)o(age)g(11,)g(a)g(more)g(economical)
257 1453 y(heap)e(representation)f(for)g FD(p)p FC(\()p
FD(Z)q(;)f(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d
FC(\()p FD(W)i FC(\)\))j FP(ought)f(to)h(be)f(that)h(of)f(Figure)g
(5.1,)i(where)257 1513 y(reference)h(to)h(the)f(term)g(from)g(else)o
(where)h(must)f(be)h(from)e(a)i(store)g(\(or)f(re)o(gister\))g(cell)g
(of)g(the)257 1574 y(form)e FK(h)f Fx(STR)h FD(;)g FC(5)e
FK(i)q FP(.)16 b(In)10 b(other)g(words,)h(there)f(is)i(actually)e(no)h
(need)g(to)f(allot)h(a)f(systematic)i FS(STR)257 1634
y FP(cell)h(before)e(each)i(functor)e(cell.)257 1711
y(As)i(it)f(turns)h(out,)f(only)g(one)h(tin)o(y)f(modi\002cation)f(of)h
(one)h(instruction)e(is)i(needed)g(in)f(order)g(to)257
1771 y(accommodate)i(this)f(more)g(compact)g(representation.)19
b(Namely)m(,)13 b(the)h FS(put)p 1593 1771 15 2 v 17
w(structure)257 1831 y FP(instruction)e(is)h(simpli\002ed)e(to:)550
1951 y FS(put)p 643 1951 V 18 w(structure)i FD(f)5 b(=n;)j
FS(X)p FD(i)14 b FK(\021)34 b FS(HEAP[H])13 b FK( )h
FD(f)5 b(=n)p FC(;)1179 2011 y FS(X)p FD(i)14 b FK( )f(h)c
Fx(STR)h FD(;)h FS(H)d FK(i)p FC(;)1179 2071 y FS(H)14
b FK( )g FS(H)d FC(+)g(1;)257 2198 y FP(Clearly)m(,)h(this)f(is)g(not)g
(only)g(in)g(complete)g(congruence)f(with)h(W)-6 b(AM)11
b(Principle)g(1,)g(b)o(ut)g(it)g(also)257 2258 y(eliminates)i
(unnecessary)f(le)o(v)o(els)h(of)f(indirection)f(and)i(hence)f(speeds)i
(up)e(dereferencing.)257 2335 y(The)17 b(main)f(reason)g(for)f(our)g
(not)h(ha)o(ving)g(used)g(this)g(better)g(heap)g(representation)f(in)h
(Sec-)257 2395 y(tion)g(2.1)g(was)g(essentially)g(didactic,)h(wishing)e
(to)h(a)o(v)o(oid)f(ha)o(ving)h(to)g(mention)f(references)257
2456 y(from)f(outside)h(the)g(heap)g(\()p FB(e)o(.g)o(.)p
FP(,)i(from)d(re)o(gisters\))g(before)g(due)h(time.)23
b(In)14 b(addition,)i(we)f(did)257 2516 y(not)h(bother)f(bringing)f(up)
i(this)f(optimization)g(in)g([AK90])g(as)h(we)g(are)f(doing)g(here,)i
(as)f(we)258 2640 y FN(P)o FL(A)q(G)r(E)d FN(4)r(6)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 47 62
47 61 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(had)e(not)g(realized)g(that)g(so)h(little)f
(was)g(in)h(fact)e(needed)i(to)f(incorporate)f(it.)1360
271 y FL(1)71 495 y FA(5.2)71 b(Constants,)17 b(lists,)g(and)h
(anonymous)e(v)o(ariables)71 628 y FP(T)l(o)f(be)g(fully)f(consistent)i
(with)f(the)g(complete)f(W)-6 b(AM)16 b(uni\002cation)e(instruction)g
(set)i(and)f(in)71 688 y(accordance)e(with)g(W)-6 b(AM)14
b(Principle)e(3,)i(we)g(introduce)f(special)h(instructions)f(for)f(the)
i(spe-)71 748 y(ci\002c)c(handling)g(of)g FC(0)p FP(-ary)g(structures)g
(\()p FB(i.e)o(.)p FP(,)j(constants\),)e(lists,)h(and)e(v)o(ariables)g
(which)h(appear)71 808 y(only)j(once)h(within)f(a)g(scope\227so-called)
h FB(anonymous)g FP(v)o(ariables.)22 b(These)15 b(enhancements)71
869 y(will)10 b(also)h(be)h(in)e(the)h(spirit)g(of)f(W)-6
b(AM)12 b(Principles)e(1)h(and)g(2)g(as)h(sa)o(vings)f(in)g(heap)g
(space,)h(code)71 929 y(size,)h(and)f(data)h(mo)o(v)o(ement)f(will)g
(ensue.)71 1006 y(Constants)18 b(and)g(lists)g(are,)i(of)e(course,)i
(well)d(handled)h(by)g(the)g(structure)f(oriented)g FS(get)p
FP(,)71 1066 y FS(put)p FP(,)f(and)f FS(unify)g FP(instructions.)24
b(Ho)o(we)o(v)o(er)n(,)16 b(work)e(and)i(space)g(are)f(wasted)g(in)g
(the)h(pro-)71 1126 y(cess,)g(that)f(need)g(not)f(really)g(be.)23
b(Consider)15 b(the)f(case)i(of)e(constants)h(as,)i(for)d(instance,)i
(the)71 1186 y(code)c(in)g(Figure)g(2.10,)h(on)f(P)o(age)h(24.)i
(There,)e(the)g(sequence)g(of)f(instructions:)610 1304
y FS(unify)p 763 1304 15 2 v 17 w(variable)h(X)p FC(7)610
1364 y FS(get)p 703 1364 V 17 w(structure)g FD(a=)p FC(0)p
FD(;)8 b FS(X)p FC(7)71 1482 y FP(simply)14 b(binds)h(a)f(re)o(gister)h
(and)f(proceeds)h(to)g(check)f(the)h(presence)g(of,)g(or)f(b)o(uild,)h
(the)g(con-)71 1542 y(stant)g FD(a)f FP(on)h(the)g(heap.)24
b(Clearly)m(,)16 b(one)f(re)o(gister)f(can)i(be)f(sa)o(v)o(ed)g(and)g
(data)h(mo)o(v)o(ement)e(opti-)71 1602 y(mized)h(with)g(one)g
(specialized)h(instruction:)21 b FS(unify)p 1038 1602
V 17 w(constant)13 b FD(a)p FP(.)25 b(The)16 b(same)g(situa-)p
71 1662 648 2 v 129 1692 a Fz(1)145 1707 y FN(After)10
b(dire)f(re\003ection)h(seeded)h(by)f(discussions)f(with)f(Fernando)i
(Pereira,)h(we)g(e)o(v)o(entually)e(realized)h(that)71
1757 y(this)f(optimization)f(was)j(indeed)f(cheap\227a)h(fact)g(that)f
(had)g(escaped)i(our)e(attention.)i(W)m(e)e(are)i(grateful)d(to)h(him)
71 1807 y(for)f(pointing)f(this)h(out.)k(Ho)o(we)o(v)o(er)n(,)e(he)g
(himself)f(warns)g([Per90]:)193 1889 y(\223No)o(w)m(,)15
b(this)e(representation)g(\(which,)i(I)f(belie)o(v)o(e,)h(is)f(the)g
(one)g(used)g(by)g(Quintus,)f(SICStus)193 1939 y(Prolog,)c
FH(etc.)p FN(\))k(has)e(indeed)f(some)h(disadv)o(antages:)244
2039 y(1.)25 b(If)13 b(there)g(aren')o(t)g(enough)f(tags)i(to)e
(distinguish)e(functor)j(cells)g(from)g(the)g(other)f(cells,)300
2089 y(garbage)h(collection)e(becomes)j(trickier)n(,)f(because)h(a)g
(pointed-to)c(v)o(alue)j(does)f(not)g(in)300 2139 y(general)e(identify)
f(its)g(o)o(wn)h(type)g(\(only)f(the)h(pointer)f(does\).)244
2217 y(2.)25 b(If)9 b(you)h(want)f(to)g(use)i([the)e(Huet-F)o(ages])i
(circular)f(term)g(uni\002cation)e(algorithm,)h(redi-)300
2267 y(recting)g(pointers)h(becomes)h(messy)m(,)h(for)e(the)g([same])h
(reason...)193 2366 y(In)h(fact,)j(what)e([the)g(term)g(representation)
g(in)f(Section)h(2.1)h(is])f(doing)e(is)j(enforcing)e(a)i(con-)193
2416 y(v)o(ention)9 b(that)g(makes)i(e)o(v)o(ery)g(functor)f
(application)f(tagged)h(as)h(such)f(by)g(the)g(appearance)i(of)e(a)193
2466 y Fn(STR)g FN(cell)g(just)f(before)i(the)f(functor)f(word.)m(\224)
71 2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)h
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(4)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 48 63
48 62 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(tion)e(in)h(a)f(query)g(would)f(simplify)h(a)h(sequence:)803
392 y FS(put)p 896 392 15 2 v 17 w(structure)g FD(c=)p
FC(0)p FD(;)8 b FS(X)p FD(i)803 452 y FS(set)p 896 452
V 17 w(variable)13 b(X)p FD(i)257 554 y FP(into)i(one)f(specialized)h
(instruction)f FS(set)p 993 554 V 17 w(constant)f FD(c)p
FP(.)23 b(Similarly)m(,)14 b FS(put)g FP(and)h FS(get)f
FP(in-)257 610 y(structions)d(can)g(thus)g(be)g(specialized)g(from)f
(those)h(of)f(structures)h(to)f(deal)h(speci\002cally)g(with)257
667 y(constants.)16 b(Thus,)d(we)f(de\002ne)f(a)h(ne)o(w)f(sort)g(of)g
(data)h(cells)f(tagged)h FS(CON)p FP(,)f(indicating)g(that)g(the)257
723 y(cell')m(s)j(datum)g(is)g(a)g(constant.)20 b(F)o(or)14
b(e)o(xample,)h(a)f(heap)g(representation)f(starting)g(at)h(address)257
780 y FC(10)g FP(for)d(the)h(structure)g FD(f)5 b FC(\()p
FD(b;)j(g)r FC(\()p FD(a)p FC(\)\))k FP(could)g(be:)p
1021 840 179 2 v 978 878 a Fw(8)p 1020 895 2 57 v 75
w Fu(g)r(=)p Fw(1)p 1199 895 V 1021 897 179 2 v 978 935
a(9)p 1020 952 2 57 v 41 w Fv(CON)p 1133 952 V 41 w Fu(a)p
1199 952 V 1021 953 179 2 v 955 991 a Fw(10)p 1020 1008
2 57 v 73 w Fu(f)5 b(=)p Fw(2)p 1199 1008 V 1021 1010
179 2 v 955 1048 a(11)p 1020 1064 2 57 v 41 w Fv(CON)p
1133 1064 V 43 w Fu(b)p 1199 1064 V 1021 1066 179 2 v
955 1104 a Fw(12)p 1020 1121 2 57 v 41 w Fv(STR)p 1133
1121 V 42 w Fw(8)p 1199 1121 V 1021 1123 179 2 v 379
1222 a Fq(Exer)o(cise)19 b(5.1)36 b FR(Could)17 b(the)h(follo)o(wing)e
(\(smaller\))i(heap)g(representation)f(starting)f(at)i(ad-)379
1279 y(dress)11 b Fw(10)g FR(be)g(an)g(alternati)o(v)o(e)g(for)g(the)g
(structure)g Fu(f)5 b Fw(\()p Fu(b;)j(g)r Fw(\()p Fu(a)p
Fw(\)\))o FR(?)k(Why?)p 1082 1338 V 1016 1376 a Fw(10)p
1081 1393 2 57 v 73 w Fu(f)5 b(=)p Fw(2)p 1260 1393 V
1082 1395 179 2 v 1016 1433 a(11)p 1081 1450 2 57 v 41
w Fv(CON)p 1194 1450 V 43 w Fu(b)p 1260 1450 V 1082 1451
179 2 v 1016 1489 a Fw(12)p 1081 1506 2 57 v 75 w Fu(g)r(=)p
Fw(1)p 1260 1506 V 1082 1508 179 2 v 1016 1546 a(13)p
1081 1563 2 57 v 41 w Fv(CON)p 1194 1563 V 41 w Fu(a)p
1260 1563 V 1082 1564 179 2 v 257 1667 a FP(Heap)13 b(space)g(for)f
(constants)h(can)g(also)f(be)h(sa)o(v)o(ed)g(when)g(loading)f(a)g(re)o
(gister)g(with,)h(or)f(bind-)257 1727 y(ing)17 b(a)h(v)o(ariable)f(to,)
i(a)e(constant.)31 b(Rather)17 b(than)g(systematically)h(occupying)e(a)
i(heap)f(cell)257 1787 y(to)e(reference,)g(a)g(constant)g(can)g(be)g
(simply)g(assigned)g(as)g(a)g(literal)g(v)o(alue.)22
b(The)16 b(follo)o(wing)257 1847 y(instructions)c(are)h(thus)f(added)g
(to)h FK(I)881 1854 y FE(0)901 1847 y FP(:)318 1962 y(1.)24
b FS(put)p 472 1962 15 2 v 18 w(constant)13 b FD(c;)8
b FS(X)p FD(i)318 2063 y FP(2.)24 b FS(get)p 472 2063
V 18 w(constant)13 b FD(c;)8 b FS(X)p FD(i)318 2163 y
FP(3.)24 b FS(set)p 472 2163 V 18 w(constant)13 b FD(c)318
2264 y FP(4.)24 b FS(unify)p 532 2264 V 18 w(constant)13
b FD(c)257 2379 y FP(and)g(are)f(e)o(xplicitly)g(de\002ned)g(in)g
(Figure)g(5.2.)257 2456 y(Programming)17 b(with)h(linear)g(lists)g
(being)g(so)h(pri)o(vile)o(ged)f(in)g(Prolog,)h(it)f(makes)g(sense)i
(to)257 2516 y(tailor)14 b(the)h(design)g(for)f(this)g(speci\002c)h
(structure.)23 b(In)14 b(particular)n(,)h(non-empty)e(list)i(functors)
258 2640 y FN(P)o FL(A)q(G)r(E)e FN(4)r(8)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 49 64
49 63 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 140 699 1481 3 v 181 797 a FQ(put)p 265
797 14 2 v 18 w(constant)g Fu(c;)8 b FQ(X)p Fu(i)k Fp(\021)34
b FQ(X)p Fu(i)12 b Fp( )h(h)7 b Fv(CON)j Fu(;)g(c)e Fp(i)o
Fw(;)181 910 y FQ(get)p 265 910 V 18 w(constant)14 b
Fu(c;)8 b FQ(X)p Fu(i)k Fp(\021)34 b FI(addr)11 b Fp( )i
FI(der)n(ef)6 b Fw(\()p FQ(X)p Fu(i)p Fw(\);)675 966
y Fq(case)12 b FQ(STORE[)p FI(addr)p FQ(])h Fq(of)737
1023 y Fp(h)7 b Fv(REF)j Fu(;)p 869 1023 V 33 w Fp(i)28
b Fw(:)33 b FQ(STORE[)p FI(addr)p FQ(])13 b Fp( )g(h)7
b Fv(CON)j Fu(;)g(c)e Fp(i)o Fw(;)982 1079 y FI(tr)o(ail)n
Fw(\()p FI(addr)o Fw(\);)737 1136 y Fp(h)f Fv(CON)j Fu(;)f(c)886
1119 y Fk(0)905 1136 y Fp(i)k Fw(:)33 b FI(fail)11 b
Fp( )i Fw(\()p Fu(c)25 b Fp(6)p Fw(=)g Fu(c)1256 1119
y Fk(0)1268 1136 y Fw(\);)737 1192 y Fq(other)96 b Fw(:)33
b FI(fail)11 b Fp( )i Fq(true)q Fw(;)675 1248 y Fq(endcase)p
Fw(;)181 1361 y FQ(set)p 265 1361 V 18 w(constant)h Fu(c)76
b Fp(\021)34 b FQ(HEAP[H)q(])13 b Fp( )g(h)7 b Fv(CON)j
Fu(;)g(c)e Fp(i)o Fw(;)675 1418 y FQ(H)k Fp( )i FQ(H)c
Fw(+)g(1;)181 1531 y FQ(unify)p 319 1531 V 18 w(constant)15
b Fu(c)21 b Fp(\021)34 b Fq(case)12 b FI(mode)g Fq(of)737
1587 y FQ(read)41 b Fw(:)33 b FI(addr)11 b Fp( )i FI(der)n(ef)7
b Fw(\()p FQ(S)p Fw(\);)932 1644 y Fq(case)12 b FQ(STORE[)p
FI(addr)q FQ(])h Fq(of)932 1700 y Fw(\()p Fp(\001)8 b(\001)g(\001)n
Fw(\))p Fq(endcase)p Fw(;)737 1757 y FQ(write)14 b Fw(:)33
b FQ(HEAP[H)q(])13 b Fp( )g(h)8 b Fv(CON)h Fu(;)h(c)e
Fp(i)o Fw(;)932 1813 y FQ(H)13 b Fp( )g FQ(H)d Fw(+)h(1;)675
1869 y Fq(endcase)p Fw(;)p 140 1945 1481 3 v 392 2096
a FP(Figure)g(5.2:)16 b(Specialized)c(instructions)g(for)f(constants)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(4)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 50 65
50 64 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 405 291 1325
3 v 446 388 a FQ(put)p 530 388 14 2 v 18 w(list)f(X)p
Fu(i)g Fp(\021)34 b FQ(X)p Fu(i)12 b Fp( )h(h)7 b Fv(LIS)j
Fu(;)g FQ(H)e Fp(i)o Fw(;)446 501 y FQ(get)p 530 501
V 18 w(list)13 b(X)p Fu(i)g Fp(\021)34 b FI(addr)11 b
Fp( )i FI(der)n(ef)6 b Fw(\()p FQ(X)p Fu(i)p Fw(\);)791
558 y Fq(case)12 b FQ(STORE[)p FI(addr)p FQ(])h Fq(of)853
614 y Fp(h)7 b Fv(REF)j Fu(;)p 985 614 V 33 w Fp(i)20
b Fw(:)33 b FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(LIS)j
Fu(;)g FQ(H)g Fw(+)g(1)e Fp(i)o Fw(;)1090 670 y FI(bind)p
Fw(\()p FI(addr)o Fu(;)g FQ(H)o Fw(\);)1090 727 y FQ(H)13
b Fp( )g FQ(H)e Fw(+)f(1;)1090 783 y FI(mode)i Fp( )i
FQ(write)q Fw(;)853 840 y Fp(h)7 b Fv(LIS)j Fu(;)f(a)f
Fp(i)k Fw(:)33 b FQ(S)13 b Fp( )g Fu(a)p Fw(;)1090 896
y FI(mode)f Fp( )i FQ(read)q Fw(;)853 953 y Fq(other)88
b Fw(:)33 b FI(fail)12 b Fp( )h Fq(true)p Fw(;)791 1009
y Fq(endcase)p Fw(;)p 405 1085 1325 3 v 631 1236 a FP(Figure)e(5.3:)16
b(Specialized)c(instructions)g(for)f(lists)257 1379 y(need)h(not)f(be)g
(represented)g(e)o(xplicitly)g(on)g(the)g(heap.)k(Thus)d(again,)g(we)f
(de\002ne)g(a)h(fourth)e(sort)257 1439 y(for)k(heap)g(cells)g(tagged)g
FS(LIS)p FP(,)g(indicating)f(that)h(the)g(cell')m(s)g(datum)g(is)g(the)
g(heap)g(address)h(of)257 1500 y(the)g(\002rst)f(element)g(of)f(a)i
(list)f(pair)m(.)22 b(Clearly)m(,)14 b(to)h(respect)f(the)g(subterm)g
(contiguity)g(con)n(v)o(en-)257 1560 y(tion,)e(the)g(second)h(of)e(the)
h(pair)g(is)g(always)f(at)h(the)g(address)h(follo)o(wing)d(that)i(of)g
(the)g(\002rst.)j(The)257 1620 y(follo)o(wing)c(instructions)h
(\(de\002ned)g(e)o(xplicitly)g(in)g(Figure)g(5.3\))g(are)g(thus)h
(added)f(to)g FK(I)1746 1627 y FE(0)1766 1620 y FP(:)318
1737 y(1.)24 b FS(put)p 472 1737 15 2 v 18 w(list)13
b(X)p FD(i)318 1839 y FP(2.)24 b FS(get)p 472 1839 V
18 w(list)13 b(X)p FD(i)257 1956 y FP(F)o(or)d(e)o(xample,)h(the)g
(code)f(generated)g(for)f(query)h FS(?-)p FD(p)p FC(\()p
FD(Z)q(;)e FC([)p FD(Z)q(;)g(W)f FC(])p FD(;)h(f)d FC(\()p
FD(W)i FC(\)\))p FD(:)p FP(,)j(using)g(Prolog')m(s)257
2016 y(notation)i(for)g(lists,)h(is)g(sho)o(wn)g(in)f(Figure)g(5.4)38
b(and)13 b(that)f(for)g(fact)f FD(p)p FC(\()p FD(f)5
b FC(\()p FD(X)t FC(\))p FD(;)j FC([)p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)])p FD(;)j(Y)j FC(\))p FD(:)p FP(,)257
2076 y(in)i(Figure)e(5.5.)16 b(Note)d(the)f(hidden)g(presence)h(of)f
(the)g(atom)g FC([])g FP(as)g(list)h(terminator)m(.)257
2153 y(Of)k(course,)h(ha)o(ving)e(introduced)g(specially)h(tagged)g
(data)f(cells)h(for)f(constants)h(and)g(non-)257 2213
y(empty)10 b(lists)h(will)e(require)g(adapting)h(accordingly)g(the)g
(general-purpose)f(uni\002cation)g(algo-)257 2273 y(rithm)h(gi)o(v)o
(en)g(in)h(Figure)f(2.7.)15 b(The)c(reader)f(will)h(\002nd)f(the)g
(complete)h(algorithm)e(in)i(appendix)257 2334 y(Section)h(B.2,)i(on)e
(P)o(age)h(117.)379 2459 y Fq(Exer)o(cise)c(5.2)17 b
FR(In)9 b([W)l(ar83],)h(W)l(arren)f(also)f(uses)g(special)g
(instructions)d FQ(put)p 1592 2459 14 2 v 18 w(nil)13
b(X)p Fu(i)p FR(,)c FQ(get)p 1848 2459 V 18 w(nil)k(X)p
Fu(i)p FR(,)379 2516 y(and)i(to)f(handle)g(the)g(list)g(terminator)g
(constant)f Fw(\([]\))p FR(.)23 b(De\002ne)15 b(the)g(ef)o(fect)g(of)f
(these)g(instruc-)258 2640 y FN(P)o FL(A)q(G)r(E)f FN(5)r(0)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 51 66
51 65 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 277 373 1207 3 v 401 470 a FQ(put)p 485
470 14 2 v 17 w(list)g(X)p Fw(5)271 b FQ(\045)41 b(?-)q(X)p
Fw(5)13 b(=)g([)401 527 y FQ(set)p 485 527 V 17 w(variable)i(X)p
Fw(6)162 b FQ(\045)219 b Fu(W)6 b Fp(j)401 583 y FQ(set)p
485 583 V 17 w(constant)15 b Fw([])186 b FQ(\045)281
b Fw([]])p Fu(;)401 640 y FQ(put)p 485 640 V 17 w(variable)15
b(X)p Fw(4)p Fu(;)8 b FQ(A)p Fw(1)91 b FQ(\045)96 b Fu(p)p
Fw(\()p Fu(Z)q(;)401 696 y FQ(put)p 485 696 V 17 w(list)14
b(A)p Fw(2)271 b FQ(\045)181 b Fw([)401 753 y FQ(set)p
485 753 V 17 w(value)14 b(X)p Fw(4)244 b FQ(\045)201
b Fu(Z)s Fp(j)401 809 y FQ(set)p 485 809 V 17 w(value)14
b(X)p Fw(5)244 b FQ(\045)k(X)p Fw(5])p Fu(;)401 866 y
FQ(put)p 485 866 V 17 w(structure)15 b Fu(f)5 b(=)p Fw(1)p
Fu(;)j FQ(A)p Fw(3)41 b FQ(\045)323 b Fu(f)401 922 y
FQ(set)p 485 922 V 17 w(value)14 b(X)p Fw(6)244 b FQ(\045)358
b Fw(\()p Fu(W)6 b Fw(\))401 979 y FQ(call)14 b Fu(p=)p
Fw(3)350 b FQ(\045)443 b Fw(\))p Fu(:)p 277 1054 1207
3 v 256 1206 a FP(Figure)11 b(5.4:)16 b(Specialized)c(code)g(for)g
(query)g FS(?-)o FD(p)p FC(\()p FD(Z)q(;)c FC([)p FD(Z)q(;)g(W)f
FC(])p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))p FD(:)p 268
1476 1225 3 v 309 1573 a Fu(p=)p Fw(3)41 b(:)g FQ(get)p
557 1573 14 2 v 17 w(structure)15 b Fu(f)5 b(=)p Fw(1)p
Fu(;)j FQ(A)p Fw(1)41 b FQ(\045)h Fu(p)p Fw(\()p Fu(f)473
1630 y FQ(unify)p 611 1630 V 18 w(variable)15 b(X)p Fw(4)107
b FQ(\045)i Fw(\()p Fu(X)t Fw(\))p Fu(;)473 1686 y FQ(get)p
557 1686 V 17 w(list)14 b(A)p Fw(2)271 b FQ(\045)198
b Fw([)473 1743 y FQ(unify)p 611 1743 V 18 w(variable)15
b(X)p Fw(5)107 b FQ(\045)219 b Fu(Y)10 b Fp(j)473 1799
y FQ(unify)p 611 1799 V 18 w(variable)15 b(X)p Fw(6)107
b FQ(\045)268 b(X)p Fw(6])p Fu(;)473 1855 y FQ(get)p
557 1855 V 17 w(value)14 b(X)p Fw(5)p Fu(;)8 b FQ(A)p
Fw(3)173 b FQ(\045)343 b Fu(Y)11 b Fw(\))p Fu(;)473 1912
y FQ(get)p 557 1912 V 17 w(list)j(X)p Fw(6)271 b FQ(\045)42
b(X)p Fw(6)12 b(=)h([)473 1968 y FQ(unify)p 611 1968
V 18 w(variable)i(X)p Fw(7)107 b FQ(\045)165 b(X)p Fw(7)p
Fp(j)473 2025 y FQ(unify)p 611 2025 V 18 w(constant)15
b Fw([])131 b FQ(\045)227 b Fw([]])p Fu(;)473 2081 y
FQ(get)p 557 2081 V 17 w(structure)15 b Fu(f)5 b(=)p
Fw(1)p Fu(;)j FQ(X)p Fw(7)41 b FQ(\045)h(X)p Fw(7)12
b(=)h Fu(f)473 2138 y FQ(unify)p 611 2138 V 18 w(constant)i
Fu(a)133 b FQ(\045)179 b Fw(\()p Fu(a)p Fw(\))473 2194
y FQ(proceed)352 b(\045)239 b Fu(:)p 268 2270 1225 3
v 288 2421 a FP(Figure)12 b(5.5:)k(Specialized)c(code)g(for)g(fact)f
FD(p)p FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\))p FD(;)j
FC([)p FD(Y)s(;)g(f)d FC(\()p FD(a)p FC(\)])p FD(;)j(Y)j
FC(\))p FD(:)71 2640 y FN(Copyright)260 2639 y(c)249
2640 y FM(\015)f FN(Hassan)i(A)463 2636 y(\250)464 2640
y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(5)r(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 52 67
52 66 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 379 289 a
FR(tions,)g(and)f(gi)o(v)o(e)g(e)o(xplicit)g(pseudo-code)f
(implementing)h(them.)21 b(Discuss)13 b(their)g(worth)f(be-)379
345 y(ing)h(pro)o(vided)g(as)h(opposed)e(to)h(using)f
FQ(put)p 1088 345 14 2 v 18 w(constant)i Fw([])p Fu(;)8
b FQ(X)p Fu(i)o FR(,)15 b FQ(get)p 1532 345 V 17 w(constant)g
Fw([])p Fu(;)8 b FQ(X)p Fu(i)n FR(,)379 402 y FQ(set)p
463 402 V 17 w(constant)15 b Fw([])p FR(,)c(and)g FQ(unify)p
971 402 V 18 w(constant)k Fw([])o FR(.)257 520 y FP(Last)f(in)e(the)h
(rubric)e(of)h(specialized)h(instructions)f(is)h(the)f(case)i(of)e
(single-occurrence)f(v)o(ari-)257 580 y(ables)i(in)f(non-ar)o(gument)e
(positions)i(\()p FB(e)o(.g)o(.)p FP(,)i FD(X)i FP(in)c(Figure)f(2.4)i
(on)f(P)o(age)g(16,)g(Figure)f(2.10)h(on)257 641 y(P)o(age)j(24,)h(and)
e(Figure)g(5.5)h(on)f(P)o(age)h(51\).)22 b(This)15 b(is)g(worth)e(gi)o
(ving)h(specialized)h(treatment)257 701 y(insofar)h(as)g(no)h(re)o
(gister)e(need)i(be)f(allocated)g(for)g(these.)28 b(In)15
b(addition,)j(if)d(man)o(y)i(occur)f(in)257 761 y(a)h(ro)o(w)f(as)i(in)
e FD(f)5 b FC(\()p 554 761 15 2 v 19 w FD(;)p 594 761
V 25 w(;)p 634 761 V 26 w FC(\))p FP(,)18 b(say)m(,)h(the)o(y)e(can)g
(be)g(all)f(be)h(processed)g(in)g(one)g(swoop,)h(sa)o(ving)f(in)257
821 y(generated)12 b(code)h(size)g(and)f(time.)k(W)l(e)c(introduce)g
(two)g(ne)o(w)g(instructions:)318 930 y(1.)24 b FS(set)p
472 930 V 18 w(void)13 b FD(n)318 1029 y FP(2.)24 b FS(unify)p
532 1029 V 18 w(void)13 b FD(n)257 1138 y FP(whose)g(ef)o(fect)f(is,)h
(respecti)o(v)o(ely:)318 1247 y(1.)24 b(to)13 b(push)f
FD(n)h FP(ne)o(w)f(unbound)g FS(REF)g FP(cells)h(on)f(the)g(heap;)318
1346 y(2.)24 b(in)11 b FS(write)g FP(mode,)h(to)f(beha)o(v)o(e)g(as)h
FS(set)p 1071 1346 V 18 w(void)h FD(n)f FP(and,)f(in)h
FS(read)e FP(mode,)i(to)f(skip)g(the)379 1406 y(ne)o(xt)i
FD(n)f FP(heap)h(cells)g(starting)f(at)g(location)g FS(S)p
FP(.)257 1515 y(These)i(are)e(gi)o(v)o(en)g(e)o(xplicitly)g(in)g
(Figure)g(5.6.)257 1592 y(Note)h(\002nally)m(,)g(that)g(an)g(anon)o
(ymous)g(v)o(ariable)g(occurring)f(as)h(an)h(ar)o(gument)e(of)h(the)g
(head)g(of)257 1652 y(a)g(clause)g(can)f(be)h(simply)f(ignored.)j(Then)
e(indeed,)g(the)f(corresponding)f(instruction:)829 1752
y FS(get)p 922 1752 V 18 w(variable)i(X)p FD(i)o(;)8
b FS(A)p FD(i)257 1851 y FP(is)16 b(clearly)f(v)o(acuous.)26
b(Thus,)17 b(such)f(instructions)f(are)h(simply)f(eliminated.)24
b(The)17 b(code)e(for)257 1911 y(fact)c FD(p)p FC(\()p
389 1911 V 19 w FD(;)d(g)r FC(\()p FD(X)t FC(\))p FD(;)g(f)d
FC(\()p 607 1911 V 18 w FD(;)j(Y)s(;)p 700 1911 V 26
w FC(\)\))p FD(:)p FP(,)k(for)e(e)o(xample,)j(sho)o(wn)e(in)h(Figure)f
(5.7,)h(illustrates)g(this)f(point.)379 2086 y Fq(Exer)o(cise)17
b(5.3)32 b FR(What)15 b(is)g(the)h(machine)g(code)g(generated)g(for)g
(the)f(fact)h Fu(p)p Fw(\()p 1613 2086 14 2 v 16 w Fu(;)p
1649 2086 V 24 w(;)p 1686 2086 V 23 w Fw(\))p Fu(:)p
FR(?)28 b(What)379 2143 y(about)11 b(the)g FI(query)f
FQ(?-)q Fu(p)p Fw(\()p 772 2143 V 16 w Fu(;)p 808 2143
V 23 w(;)p 844 2143 V 24 w Fw(\))p Fu(:)p FR(?)257 2327
y FA(5.3)72 b(A)17 b(note)h(on)g Fj(set)g FA(instructions)257
2456 y FP(De\002ning)e(the)h(simplistic)f(language)h
FK(L)967 2463 y FE(0)1003 2456 y FP(has)g(allo)o(wed)g(us)f(to)h
(introduce,)g(independently)257 2516 y(of)i(other)g(Prolog)g
(considerations,)i(all)f(W)-6 b(AM)19 b(instructions)g(dealing)h(with)f
(uni\002cation.)258 2640 y FN(P)o FL(A)q(G)r(E)13 b FN(5)r(2)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 53 68
53 67 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 240 472 1281 3 v 281 570 a FQ(set)p 365
570 14 2 v 17 w(void)g Fu(n)67 b Fp(\021)34 b Fq(f)o(or)13
b Fu(i)f Fp( )h FQ(H)g Fq(to)f FQ(H)f Fw(+)f Fu(n)h Fp(\000)f
Fw(1)i Fq(do)706 626 y FQ(HEAP[)p Fu(i)p FQ(])i Fp( )f(h)7
b Fv(REF)j Fu(;)f(i)f Fp(i)o Fw(;)664 683 y FQ(H)13 b
Fp( )g FQ(H)e Fw(+)f Fu(n)p Fw(;)281 795 y FQ(unify)p
419 795 V 18 w(void)k Fu(n)e Fp(\021)34 b Fq(case)13
b FI(mode)f Fq(of)726 852 y FQ(read)41 b Fw(:)33 b FQ(S)13
b Fp( )g FQ(S)e Fw(+)f Fu(n)p Fw(;)726 908 y FQ(write)k
Fw(:)33 b Fq(f)o(or)13 b Fu(i)f Fp( )h FQ(H)g Fq(to)g
FQ(H)d Fw(+)h Fu(n)f Fp(\000)g Fw(1)j Fq(do)963 965 y
FQ(HEAP[)p Fu(i)p FQ(])h Fp( )f(h)7 b Fv(REF)j Fu(;)g(i)e
Fp(i)o Fw(;)921 1021 y FQ(H)13 b Fp( )g FQ(H)e Fw(+)f
Fu(n)p Fw(;)664 1078 y Fq(endcase)p 240 1153 1281 3 v
433 1305 a FP(Figure)i(5.6:)j(Anon)o(ymous)e(v)o(ariable)e
(instructions)p 256 1772 1249 3 v 297 1869 a Fu(p=)p
Fw(3)41 b(:)g FQ(get)p 545 1869 14 2 v 17 w(structure)16
b Fu(g)r(=)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)43 b FQ(\045)f
Fu(p)p Fw(\()p 1115 1869 V 16 w Fu(;)8 b(g)461 1926 y
FQ(unify)p 599 1926 V 18 w(void)14 b Fw(1)243 b FQ(\045)142
b Fw(\()p Fu(X)t Fw(\))p Fu(;)461 1982 y FQ(get)p 545
1982 V 17 w(structure)16 b Fu(f)5 b(=)p Fw(3)p Fu(;)j
FQ(A)p Fw(3)40 b FQ(\045)231 b Fu(f)461 2039 y FQ(unify)p
599 2039 V 18 w(void)14 b Fw(3)243 b FQ(\045)266 b Fw(\()p
1316 2039 V 16 w Fu(;)8 b(Y)s(;)p 1401 2039 V 23 w Fw(\))461
2095 y FQ(proceed)352 b(\045)403 b Fw(\))p Fu(:)p 256
2170 1249 3 v 349 2322 a FP(Figure)12 b(5.7:)j(Instructions)d(for)f
(fact)h FD(p)p FC(\()p 1034 2322 15 2 v 18 w FD(;)c(g)r
FC(\()p FD(X)t FC(\))p FD(;)g(f)d FC(\()p 1251 2322 V
19 w FD(;)j(Y)s(;)p 1345 2322 V 25 w FC(\)\))p FD(:)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)i
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(5)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 54 69
54 68 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(Strictly)f(speaking,)h(the)g FS(set)f FP(instructions)g(we)h(ha)o(v)
o(e)f(de\002ned)h(are)f(not)g(part)g(of)h(the)f(W)-6
b(AM)257 349 y(as)15 b(described)g(in)f([W)l(ar83)o(])g(or)g(in)h([W)l
(ar88)o(].)22 b(There,)15 b(one)g(will)f(\002nd)g(that)g(the)g
(correspond-)257 409 y(ing)i FS(unify)f FP(instructions)g(are)g
(systematically)h(used)f(where)h(we)f(use)h FS(set)f
FP(instructions.)257 469 y(The)j(reason)f(is,)i(as)f(the)f(reader)g
(may)f(ha)o(v)o(e)i(noticed,)g(that)f(indeed)g(this)g(is)h(possible)f
(pro-)257 530 y(vided)10 b(that)g(the)g FS(put)p 627
530 15 2 v 17 w(structure)f FP(and)h FS(put)p 1095 530
V 18 w(list)g FP(instructions)f(set)i FB(mode)f FP(to)f
FS(write)p FP(.)257 590 y(Then,)j(clearly)m(,)e(all)g
FS(set)g FP(instructions)g(are)g(equi)o(v)o(alent)f(to)h
FS(unify)f FP(instructions)h(in)g FS(write)257 650 y
FP(mode.)25 b(W)l(e)16 b(chose)g(to)f(keep)g(these)h(separate)g(as)g
(using)g FS(set)f FP(instructions)g(after)g FS(put)g
FP(in-)257 710 y(structions)d(is)h(more)e(ef)o(\002cient)g(\(it)h(sa)o
(v)o(es)h(mode)f(setting)g(and)g(testing\))g(and)g(makes)g(the)g(code)
257 770 y(more)18 b(perspicuous.)31 b(Moreo)o(v)o(er)n(,)20
b(these)e(instructions)f(are)h(more)f(natural,)i(easier)f(to)f(e)o(x-)
257 830 y(plain)12 b(and)g(moti)o(v)o(ate)e(as)j(the)f(data)f(b)o
(uilding)g(phase)i(of)e(uni\002cation)g(before)g(matching)g(work)257
891 y(comes)i(into)f(play)m(.)257 967 y(Incidentally)m(,)e(these)h
(instructions)e(together)h(with)g(their)f FS(unify)h
FP(homologues,)g(make)g(\223on-)257 1028 y(the-\003y\224)18
b(copying)f(part)g(of)h(uni\002cation,)h(resulting)e(in)h(impro)o(v)o
(ed)f(space)i(and)f(time)g(con-)257 1088 y(sumption,)c(as)g(opposed)f
(to)g(the)g(more)g FB(na)o(\250)-16 b(\021ve)13 b FP(systematic)h
(copying)e(of)h(rules)g(before)f(using)257 1148 y(them.)257
1333 y FA(5.4)72 b(Register)17 b(allocation)257 1461
y FP(As)c(in)g(con)n(v)o(entional)f(compiler)g(technology)m(,)h(the)f
(code)h(generated)f(from)g(the)h(source)g(may)257 1521
y(gi)o(v)o(e)g(rise)f(to)h(ob)o(viously)f(unnecessary)h(data)g(mo)o(v)o
(ements.)k(Such)12 b(can)h(be)f(simpli\002ed)g(a)o(way)257
1582 y(by)j(so-called)f(\223peep-hole\224)g(optimization.)21
b(This)16 b(applies)e(to)g(this)h(design)g(as)g(well.)22
b(Con-)257 1642 y(sider)13 b(for)e(e)o(xample)i(the)f
FB(na)o(\250)-16 b(\021ve)12 b FP(translation)g(of)g(the)g(fact)g(`)p
FB(conc)p FC(\([])p FD(;)c(L;)g(L)p FC(\))p FD(:)p FP(':)511
1740 y FB(conc)p FD(=)p FC(3)28 b(:)41 b FS(get)p 829
1740 V 18 w(constant)13 b FC([])p FD(;)8 b FS(A)p FC(1)68
b FS(\045)41 b FB(conc)p FC(\([])p FD(;)736 1800 y FS(get)p
829 1800 V 18 w(variable)13 b(X)p FC(4)p FD(;)8 b FS(A)p
FC(2)42 b FS(\045)195 b FD(L;)736 1860 y FS(get)p 829
1860 V 18 w(value)13 b(X)p FC(4)p FD(;)8 b FS(A)p FC(3)132
b FS(\045)250 b FD(L)p FC(\))736 1921 y FS(proceed)323
b(\045)310 b FD(:)257 2016 y FP(No)o(w)m(,)15 b(there)f(is)h(clearly)f
(no)g(need)g(to)h(allocate)f(re)o(gister)g FS(X)p FC(4)h
FP(for)e(v)o(ariable)h FD(L)g FP(since)h(its)g(only)257
2076 y(use)10 b(is)g(to)f(serv)o(e)h(as)g(temporary)e(repository\227b)o
(ut)g(so)i(can)f FS(A)p FC(2)q FP(.)15 b(Thus,)c(the)e
FS(get)p 1626 2076 V 18 w(variable)257 2137 y FP(becomes)j
FS(get)p 536 2137 V 18 w(variable)h(A)p FC(2)p FD(;)8
b FS(A)p FC(2)p FP(,)k(and)g(can)f(be)h(eliminated)f(altogether)n(,)g
(yielding)g(bet-)257 2197 y(ter)h(code:)524 2283 y FB(conc)p
FD(=)p FC(3)29 b(:)41 b FS(get)p 843 2283 V 18 w(constant)12
b FC([])p FD(;)c FS(A)p FC(1)41 b FS(\045)h FB(conc)p
FC(\([])p FD(;)750 2343 y FS(get)p 843 2343 V 18 w(value)13
b(A)p FC(2)p FD(;)8 b FS(A)p FC(3)104 b FS(\045)195 b
FD(L;)8 b(L)p FC(\))750 2404 y FS(proceed)295 b(\045)311
b FD(:)257 2516 y FP(More)12 b(generally)m(,)f(since)h(ar)o(gument)e
(and)h(temporary)g(v)o(ariable)f(re)o(gisters)i(are)f(the)g(same,)h
(the)258 2640 y FN(P)o FL(A)q(G)r(E)h FN(5)r(4)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 55 70
55 69 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 279 291 1203 3 v 320 388 a Fu(p=)p Fw(2)41
b(:)g FQ(allocate)15 b Fw(2)237 b FQ(\045)42 b Fu(p)484
445 y FQ(get)p 568 445 14 2 v 17 w(variable)15 b(Y)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)64 b Fw(\()p
Fu(X)q(;)8 b(Y)h Fw(\))k FQ(:-)484 501 y(put)p 568 501
V 17 w(variable)i(Y)p Fw(2)p Fu(;)8 b FQ(A)p Fw(2)41
b FQ(\045)275 b Fu(q)r Fw(\()p Fu(X)q(;)8 b(Z)484 558
y FQ(call)14 b Fu(q)r(=)p Fw(2)301 b FQ(\045)408 b Fw(\))p
Fu(;)484 614 y FQ(put)p 568 614 V 17 w(value)14 b(Y)p
Fw(2)p Fu(;)8 b FQ(A)p Fw(1)123 b FQ(\045)275 b Fu(r)q
Fw(\()p Fu(Z)q(;)484 670 y FQ(put)p 568 670 V 17 w(value)14
b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)123 b FQ(\045)359 b
Fu(Y)484 727 y FQ(call)14 b Fu(r)q(=)p Fw(2)301 b FQ(\045)403
b Fw(\))484 783 y FQ(deallocate)221 b(\045)420 b Fu(:)p
279 859 1203 3 v 238 1010 a FP(Figure)11 b(5.8:)16 b(Better)c(re)o
(gister)g(use)h(for)e FD(p)p FC(\()p FD(X)q(;)d(Y)k FC(\))i
FS(:-)g FD(q)r FC(\()p FD(X)q(;)8 b(Z)t FC(\))p FD(;)g(r)q
FC(\()p FD(Z)q(;)g(Y)j FC(\))p FD(:)71 1163 y FP(follo)o(wing)f
(instructions)i(are)h(v)o(acuous)f(operations:)642 1282
y FS(get)p 735 1282 15 2 v 18 w(variable)h(X)p FD(i)o(;)8
b FS(A)p FD(i)642 1342 y FS(put)p 735 1342 V 18 w(value)13
b(X)p FD(i;)8 b FS(A)p FD(i)71 1459 y FP(and)14 b(can)h(be)f
(eliminated.)22 b(F)o(or)14 b(e)o(xample,)i(looking)d(back)i(at)g(the)f
(e)o(xample)h(sho)o(wn)f(in)g(Fig-)71 1520 y(ure)e(3.1)h(on)g(P)o(age)f
(31,)h(we)g(realize)g(that)f(the)h(temporary)e(v)o(ariable)h
FD(X)17 b FP(is)c(the)g(\002rst)f(ar)o(gument)71 1580
y(in)g(the)h(head)h(as)f(well)g(as)h(the)f(\002rst)g(atom)f(in)h(the)g
(body)m(.)18 b(Therefore,)13 b(allocating)f(re)o(gister)h
FS(X)p FC(3)71 1640 y FP(to)h(the)g(v)o(ariable)g FD(X)19
b FP(is)14 b(clearly)g(silly)g(as)h(it)g(has)f(for)g(consequence)h(the)
f(useless)i(mo)o(v)o(ement)71 1700 y(of)e(the)h(contents)h(of)f(re)o
(gister)f FS(A)p FC(1)i FP(to)f FS(X)p FC(3)p FP(,)i(then)e(back,)h(as)
g(well)f(as)h(two)e(more)h(instructions)71 1760 y(increasing)g(the)g
(code)h(size.)25 b(Thus,)18 b(with)d(this)g(observ)o(ation,)h(it)g
(makes)f(sense)h(to)g(allocate)71 1821 y(re)o(gister)d
FS(A)p FC(1)i FP(to)e FD(X)19 b FP(and)14 b(apply)g(the)g(abo)o(v)o(e)g
(v)o(acuous)g(operation)f(elimination,)h(resulting)g(in)71
1881 y(the)e(ob)o(viously)g(better)g(instruction)g(sequence)h(sho)o(wn)
f(in)g(Figure)g(5.8.)71 1958 y(Re)o(gister)e(allocation)f(must)h(try)f
(to)h(take)f(adv)o(antage)h(of)g(this)g(fact)f(by)g(recognizing)h
(situations)71 2018 y(when)15 b(appropriate)f(ar)o(gument)g(re)o
(gisters)h(may)g(also)g(safely)h(be)f(used)g(as)h(temporary)e(v)o(ari-)
71 2078 y(ables.)20 b(Algorithms)13 b(that)h(do)f(this)h(well)g(can)g
(be)g(quite)f(in)n(v)o(olv)o(ed.)20 b(A)14 b(general)f(method)h(due)71
2138 y(to)d(Debray)g([Deb86])g(works)g(well)h(in)f(reasonable)h(time.)j
(A)d(more)f(sophisticated)h(b)o(ut)f(more)71 2198 y(\(compile-time\))h
(e)o(xpensi)o(v)o(e)j(technique)f(using)g(Debray')m(s)h(method)f
(combined)g(with)g(a)g(re-)71 2258 y(ordering)d(of)i(uni\002cation)f
(instructions)h(can)g(be)g(found)f(in)h([JDM88].)18 b(Re)o(gister)13
b(allocation)71 2319 y(is)j(really)f(auxiliary)g(to)h(the)g(W)-6
b(AM)16 b(design)g(and)g(can)h(be)f(performed)e(by)i(an)g(independent)
71 2379 y(module)11 b(in)i(the)f(compiler)m(.)71 2456
y(In)f(the)h(sequel,)g(we)g(shall)g(implicitly)f(use)h(this)g
(optimization)e(whene)o(v)o(er)i(better)f(than)h FB(na)o(\250)-16
b(\021ve)71 2516 y FP(re)o(gister)12 b(allocation)g(can)g(be)h(ob)o
(viously)f(inferred)f(by)h(the)h(reader)m(.)71 2640 y
FN(Copyright)260 2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(5)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 56 71
56 70 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FA(5.5)72 b(Last)17 b(call)h(optimization)257 417 y FP(The)g
(re\002nement)d(that)i(we)f(introduce)g(ne)o(xt)h(is)g(a)g
(generalization)f(of)g(tail-recursion)f(opti-)257 478
y(mization,)e(the)g(ef)o(fect)f(of)h(which)g(is)g(to)g(turn)f(some)h
(recursi)o(v)o(e)g(procedures)g(into)f(equi)o(v)o(alent)257
538 y(iterati)o(v)o(e)h(forms.)k(It)c(is)h(called)f(here)g
FB(last)g(call)g(optimization)f FP(\(LCO\),)i(as)g(it)f(is)g(applied)g
(sys-)257 598 y(tematically)18 b(with)g(or)g(without)f(recursion.)33
b(If)17 b(the)i(last)f(procedure)f(call)i(happens)f(to)g(be)257
658 y(recursi)o(v)o(e,)c(then)f(it)g(does)h(amount)f(to)g(tail)g
(recursion)g(optimization.)18 b(Ho)o(we)o(v)o(er)n(,)13
b(it)g(is)h(more)257 718 y(general)e(as)h(a)g(stack)g(frame)e(reco)o(v)
o(ery)i(process.)257 795 y(The)f(essence)g(of)f(LCO)g(resides)h(in)e
(the)h(fact)f(that)h(permanent)f(v)o(ariables)h(allocated)g(to)g(a)g
(rule)257 855 y(should)h(no)f(longer)g(be)h(needed)f(by)h(the)f(time)g
(all)h(the)f FS(put)h FP(instructions)f(preceding)g(the)g(last)257
916 y FS(call)h FP(in)h(the)f(body)g(are)h(passed.)k(Hence,)c(it)f(is)h
(safe)g(to)f(discard)g(the)h(current)e(en)n(vironment)257
976 y FB(befor)n(e)k FP(calling)e(the)h(last)g(procedure)f(of)g(the)h
(rule')m(s)f(body)m(.)20 b(This)14 b(could)g(be)g(achie)o(v)o(ed)g
(quite)257 1036 y(simply)h(by)h(swapping)e(the)i FS(call)p
FP(,)g FS(deallocate)e FP(sequence)i(that)f(always)g(conclude)g(a)257
1096 y(rule')m(s)e(instruction)e(sequence)i(\()p FB(i.e)o(.)p
FP(,)h(into)e FS(deallocate)o FP(,)g FS(call)p FP(\).)257
1173 y(A)f(consequence)g(of)g(this)g(is)g(that)f FS(deallocate)g
FP(is)h(ne)o(v)o(er)f(the)h(last)g(instruction)f(in)h(a)g(rule')m(s)257
1233 y(instruction)19 b(sequence)h(as)h(it)e(used)h(to)f(be)h(for)f
FK(M)1175 1240 y FE(2)1214 1233 y FP(and)h FK(M)1366
1240 y FE(3)1385 1233 y FP(.)38 b(Therefore,)21 b(it)f(must)f(be)257
1293 y(modi\002ed)13 b(accordingly)m(.)j(Namely)m(,)d(it)g(must)g
(reset)g FS(CP)p FP(,)g(rather)f(than)h FS(P)p FP(,)h(to)e(the)h(v)o
(alue)g(of)f(the)257 1354 y(continuation)e(slot)g(of)g(the)g(current)f
(en)n(vironment)g(being)h(discarded,)h(and)f(set)h FS(P)f
FP(to)g(continue)257 1414 y(in)j(sequence.)j(Thus,)577
1521 y FS(deallocate)c FK(\021)35 b FS(CP)13 b FK( )h
FS(STACK[E)c FC(+)h(1)p FS(])p FC(;)963 1582 y FS(E)i
FK( )h FS(STACK[E)o(])p FC(;)963 1642 y FS(P)f FK( )h
FS(P)d FC(+)g FB(instruction)p 1379 1642 15 2 v 18 w(size)q
FC(\()p FS(P)o FC(\))257 1757 y FP(But)16 b(then,)g FS(call)f
FP(being)h(no)o(w)f(the)g(last)h(instruction,)g(there)f(is)g(no)h(need)
f(for)g(it)g(to)g(set)h FS(CP)p FP(.)257 1817 y(As)h(a)f(matter)f(of)g
(fact,)h(it)g(would)f(be)h(wrong)f(if)g(it)h(did)f(since)h(the)g(right)
f(continuation)g(will)257 1877 y(no)o(w)c(ha)o(v)o(e)g(been)g(set)g
FB(a)g(priori)g FP(by)g FS(deallocate)o FP(.)16 b(A)10
b(simple)h(setting)g(of)g FS(P)f FP(to)h(the)g(callee')m(s)257
1938 y(address)j(is)g(all)g(that)f(is)h(needed.)20 b(W)l(e)14
b(shall)g(not)f(modify)g FS(call)p FP(,)h(since)g(it)f(works)g
(correctly)257 1998 y(for)k(non-ultimate)f(procedure)g(calls.)31
b(Rather)n(,)19 b(we)e(introduce)g FS(execute)c FD(p=n)q
FP(,)19 b(de\002ned)257 2058 y(as:)679 2106 y FS(execute)13
b FD(p=n)i FK(\021)34 b FB(num)p 1156 2106 V 18 w(of)p
1213 2106 V 17 w(ar)n(gs)15 b FK( )f FD(n)p FC(;)1067
2166 y FS(P)g FK( )f FC(@\()p FD(p=n)p FC(\);)257 2258
y FP(to)20 b(be)f(used)h(systematically)f(for)g(the)g(last)h(call)f(in)
h(a)f(rule)g(instead)h(of)f FS(call)g FP(.)37 b(T)l(o)20
b(see)257 2319 y(an)d(e)o(xample,)i(consider)e(the)g(rule)f(`)p
FD(p)p FC(\()p FD(X)q(;)8 b(Y)k FC(\))22 b FS(:-)g FD(q)r
FC(\()p FD(X)q(;)8 b(Z)t FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)k
FC(\))p FD(:)p FP(')k(whose)h(\223last)g(call)257 2379
y(optimized\224)12 b(code)h(is)f(sho)o(wn)h(in)f(Figure)f(5.9.)257
2456 y(The)16 b(ef)o(fect)e(of)h(LCO)g(is)h(subtler)e(than)h(it)g
(\002rst)f(appears)i(due)f(to)f(the)h(interlea)o(ving)f(of)h(en)n(vi-)
257 2516 y(ronment)f(and)h(choice)h(point)e(frames)h(on)g(the)g(same)g
(stack.)24 b(Thus,)17 b(if)e(the)g(topmost)f(frame)258
2640 y FN(P)o FL(A)q(G)r(E)f FN(5)r(6)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 57 72
57 71 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 279 291 1203 3 v 320 388 a Fu(p=)p Fw(2)41
b(:)g FQ(allocate)15 b Fw(2)237 b FQ(\045)42 b Fu(p)484
445 y FQ(get)p 568 445 14 2 v 17 w(variable)15 b(Y)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)64 b Fw(\()p
Fu(X)q(;)8 b(Y)h Fw(\))k FQ(:-)484 501 y(put)p 568 501
V 17 w(variable)i(Y)p Fw(2)p Fu(;)8 b FQ(A)p Fw(2)41
b FQ(\045)275 b Fu(q)r Fw(\()p Fu(X)q(;)8 b(Z)484 558
y FQ(call)14 b Fu(q)r(=)p Fw(2)301 b FQ(\045)408 b Fw(\))p
Fu(;)484 614 y FQ(put)p 568 614 V 17 w(value)14 b(Y)p
Fw(2)p Fu(;)8 b FQ(A)p Fw(1)123 b FQ(\045)275 b Fu(r)q
Fw(\()p Fu(Z)q(;)484 670 y FQ(put)p 568 670 V 17 w(value)14
b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)123 b FQ(\045)359 b
Fu(Y)484 727 y FQ(deallocate)221 b(\045)403 b Fw(\))484
783 y FQ(execute)15 b Fu(r)q(=)p Fw(2)219 b FQ(\045)420
b Fu(:)p 279 859 1203 3 v 213 1010 a FP(Figure)11 b(5.9:)16
b FK(M)507 1017 y FE(2)539 1010 y FP(code)c(for)g FD(p)p
FC(\()p FD(X)q(;)c(Y)k FC(\))i FS(:-)f FD(q)r FC(\()p
FD(X)q(;)8 b(Z)t FC(\))p FD(;)g(r)q FC(\()p FD(Z)q(;)g(Y)j
FC(\))p FD(:)p FP(,)i(with)f(LCO)71 1198 y(on)k(the)g(stack)h(is)g(the)
f(current)g(en)n(vironment)f(and)h(not)g(the)h(current)e(choice)i
(point)e(\()p FB(i.e)o(.)p FP(,)k(if)71 1258 y FS(E)13
b FD(>)h FS(B)p FP(\),)d(its)f(space)h(can)g(then)f(be)h(re-used)f(in)g
(the)g(ne)o(xt)g(stack)h(allocation)f(\()p FB(e)o(.g)o(.)p
FP(,)i FS(allocate)71 1318 y FP(or)i FS(try)p 220 1318
15 2 v 18 w(me)p 298 1318 V 18 w(else)p FP(\).)23 b(This)15
b(slo)o(ws)h(do)o(wns)f(gro)o(wth)f(of)h(the)g(stack)g(considerably)m
(.)24 b(On)15 b(the)71 1378 y(other)c(hand,)h(if)f(the)h(top)g(of)f
(the)h(stack)g(is)g(a)g(choice)g(point,)g(LCO)g(does)g(not)g(ha)o(v)o
(e)g(immediate)71 1438 y(ef)o(fect)h(on)h(the)g(stack)h(due)f(to)g(en)n
(vironment)f(protection.)21 b(In)14 b(the)g(case)h(where)f(the)g(last)h
(call)71 1499 y(of)c(the)i(last)f(rule)g(is)h(a)f(recursi)o(v)o(e)g
(call,)h(the)f(stack)h(does)f(not)g(gro)o(w)g(at)g(all,)h(re-using)e(o)
o(v)o(er)i(and)71 1559 y(o)o(v)o(er)e(the)h(e)o(xact)g(same)g(space)h
(for)e(successi)o(v)o(e)i(acti)o(v)o(ation)d(frames)i(of)f(the)h(same)g
(procedure,)71 1619 y(resulting)f(in)i(an)f(iterati)o(v)o(e)g(loop.)643
1601 y FL(2)71 1919 y FA(5.6)71 b(Chain)17 b(rules)71
2070 y FP(A)e(consequence)h(of)f(LCO)h(is)f(that)g(the)g(generated)g
(code)h(translating)f(chain)g(rules)g(can)g(be)71 2130
y(greatly)k(simpli\002ed.)36 b(Indeed,)22 b(the)d(generic)h
(translation)e(of)i(a)f(chain)h(rule)f(of)g(the)h(form)71
2190 y(`)p FD(p)p FC(\()p FD(:)8 b(:)g(:)o FC(\))14 b
FS(:-)f FD(q)r FC(\()p FD(:)8 b(:)g(:)o FC(\))p FD(:)p
FP(':)p 71 2321 648 2 v 129 2351 a Fz(2)145 2366 y FN(In)h(pure)g
FM(L)301 2372 y Fi(2)319 2366 y FN(,)h(this)e(would)g(of)g(course)i(be)
f(of)g(little)e(interest)h(since)i(an)o(y)f(recursi)o(v)o(e)h(program)f
(would)e(always)71 2416 y(either)i(fail)g(or)g(loop)g(inde\002nitely)f
(an)o(yway\227albeit)h(with)f(a)j(small)e(stack!)k(At)d(an)o(y)g(rate,)
g(LCO)g(is)g(nonetheless)71 2466 y(an)j(interesting)f(optimization)g
(of)h(e)o(x)o(ecution)h(of)f(\(non-recursi)o(v)o(e\))g
FM(L)1103 2472 y Fi(2)1135 2466 y FN(programs)h(as)g(it)f(keeps)g
(stack)h(space)71 2516 y(well)9 b(utilized.)71 2640 y(Copyright)260
2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(5)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 58 73
58 72 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282 281 a
FD(p)28 b FC(:)50 b FS(allocate)13 b FD(N)398 341 y FB(get)f(ar)n
(guments)h(of)f FD(p)398 401 y FB(put)g(ar)n(guments)h(of)f
FD(q)398 462 y FS(call)h FD(q)398 522 y FS(deallocate)257
639 y FP(is)g(transformed)e(by)h(LCO)i(into:)282 758
y FD(p)28 b FC(:)50 b FS(allocate)13 b FD(N)398 818 y
FB(get)f(ar)n(guments)h(of)f FD(p)398 878 y FB(put)g(ar)n(guments)h(of)
f FD(q)398 938 y FS(deallocate)398 998 y(execute)h FD(q)257
1116 y FP(No)o(w)m(,)h(note)f(that)h(all)f(v)o(ariables)g(in)h(a)f
(chain)h(rule)f(are)g(necessarily)h(temporary)m(.)k(Hence,)c(the)257
1176 y(only)f(information)e(which)i(is)g(sa)o(v)o(ed)g(on)g(the)g
(stack)g(by)g(an)g(initial)f FS(allocate)g FP(is)h(the)g(con-)257
1236 y(tinuation)h(re)o(gister)g FS(CP)p FP(.)22 b(But)15
b(this)g(ef)o(fect)e(of)h FS(allocate)g FP(is)h(undone)f(before)g
FS(execute)257 1296 y FP(by)i FS(deallocate)n FP(.)25
b(Therefore,)16 b(this)g(is)f(totally)g(wasted)g(work,)h(and)f(both)g
FS(allocate)257 1357 y FP(and)e FS(deallocate)f FP(can)i(be)f
(eliminated.)k(Thus,)d(LCO)g(allo)o(ws)f(translation)f(of)g(the)h
(chain)257 1417 y(rule)f(`)p FD(p)p FC(\()p FD(:)c(:)g(:)p
FC(\))13 b FS(:-)h FD(q)r FC(\()p FD(:)8 b(:)g(:)o FC(\))p
FD(:)p FP(')j(simply)h(into:)282 1537 y FD(p)28 b FC(:)50
b FB(get)12 b(ar)n(guments)h(of)f FD(p)398 1597 y FB(put)g(ar)n
(guments)h(of)f FD(q)398 1657 y FS(execute)h FD(q)257
1775 y FP(That)g(is,)g(chain)g(rules)f(need)g(no)h(run-time)e(acti)o(v)
o(ation)g(frame)h(on)g(the)g(stack)h(at)g(all!)257 1965
y FA(5.7)72 b(En)m(vir)o(onment)16 b(trimming)257 2094
y FP(The)h(correctness)g(of)f(LCO)h(hinges)f(on)g(ha)o(ving)g(observ)o
(ed)h(that)f(permanent)g(v)o(ariables)g(in)257 2155 y(the)h(current)e
(en)n(vironment)h(are)g(needed)g(only)g(as)h(long)f(as)h(all)g(the)f
FS(put)g FP(instructions)g(for)257 2215 y(the)f(last)f(call')m(s)h(ar)o
(guments)f(are)g(not)g(yet)h(done.)21 b(This)15 b(observ)o(ation)f(can)
h(be)f(sharpened)g(by)257 2275 y(noticing)e(that)h(a)g(permanent)f(v)o
(ariable)g(is)h(in)f(fact)g(no)h(longer)f(needed)h(after)f(the)h(ar)o
(guments)257 2335 y(of)i(its)g(ultimate)f(occurrence')m(s)h(goal)g(ha)o
(v)o(e)g(all)g(been)g(loaded)f(by)h FS(put)g FP(instructions.)23
b(This)257 2395 y(entails)15 b(a)f(natural)g(generalization)g(of)f(LCO)
i(to)g(allo)o(w)e(maximal)h(reuse)h(of)f(stack)g(space)h(at)257
2456 y(each)h(\()p FB(i.e)o(.)p FP(,)h(not)e(only)g(the)g(last\))h
(call)f(in)g(the)g(body)g(of)g(the)g(rule.)25 b(More)15
b(speci\002cally)m(,)h(each)257 2516 y(permanent)f(v)o(ariable)f(in)h
(the)h(en)n(vironment)e(can)h(be)g(associated)h(with)f(the)g(goal)h(in)
f(which)258 2640 y FN(P)o FL(A)q(G)r(E)e FN(5)r(8)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 59 74
59 73 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(it)f(is)g(used)h(last,)g(and)f(therefore)f
(can)h(safely)h(be)f(disposed)g(of)g(before)g(performing)e(the)i(call.)
71 349 y(The)g(intended)g(ef)o(fect)g(of)f(such)i(a)f(process)h(is)g
(to)f(make)f(the)i(current)e(en)n(vironment)g(frame')m(s)71
409 y(size)h(on)f(the)g(stack)h(shrink)f(gradually)m(,)g(until)g(it)g
(e)o(v)o(entually)g(v)o(anishes)h(altogether)f(by)g(LCO,)71
469 y(this)g(latter)g(optimization)f(being)h(simply)g(the)h(special)f
(case)i(of)e(the)g(last)h(goal.)71 546 y(This)i(gradual)f(en)n
(vironment)f(trimming)g(can)i(be)g(made)f(to)g(work)g(automatically)g
(by)g(care-)71 606 y(fully)h(ordering)h(the)g(v)o(ariables)h(in)f
(their)g(en)n(vironment)f(so)i(as)g(to)g(re\003ect)f(the)h(ordering)e
(of)71 667 y(their)g(associated)j(last)e(occurrence)g(goals.)28
b(Namely)m(,)17 b(the)g(later)f(a)g(permanent)g(v)o(ariable')m(s)71
727 y(last)g(occurrence')m(s)g(goal)g(is)h(in)f(the)h(body)m(,)g(the)f
(lo)o(wer)g(its)g(of)o(fset)g(in)g(the)g(current)g(en)n(viron-)71
787 y(ment)e(frame)g(is.)24 b(Thus,)16 b(the)f FS(call)g
FP(instruction)f(is)h(gi)o(v)o(en)g(a)g(second)g(ar)o(gument)f
(counting)71 847 y(the)c(number)g(of)g(v)o(ariables)g(still)g(needed)h
(in)f(the)g(en)n(vironment)g(after)f(the)i(point)f(of)g(call.)15
b(This)71 907 y(count)d(allo)o(ws)g(later)h(stack)g(allocating)f
(instructions)g(to)g(compute)g(a)h(lo)o(wer)f(top)g(of)h(stack,)g(if)71
967 y(possible.)28 b(Namely)m(,)17 b(if)f(the)h(topmost)f(frame)f(on)i
(the)f(stack)h(is)g(the)f(current)g(en)n(vironment)71
1028 y(\()p FB(i.e)o(.)p FP(,)d(if)f FS(E)i FD(>)g FS(B)o
FP(\).)71 1104 y(Note)i(that)g(the)g(e)o(xplicit)g(de\002nition)g(of)f
FS(allocate)h FP(again)g(needs)h(to)f(be)g(changed)h(from)71
1165 y(what)11 b(it)g(was)g(for)g FK(M)436 1172 y FE(3)455
1165 y FP(.)16 b(In)11 b(order)f(to)h(re\003ect)g(a)h(correct)e(v)o
(alue)h(at)h(all)f(times,)h(the)f(of)o(fset)g(that)g(it)71
1225 y(gets)g(from)e(the)i(preceding)f(en)n(vironment)f(must)i(be)g
(updated)f(by)h(each)g(trimming)e FS(call)p FP(.)15 b(In)71
1285 y(fact,)10 b(such)g(updates)h(are)f(not)f(needed.)16
b(Since)9 b(a)i(more)e(precise)h(en)n(vironment)f(stack)i(of)o(fset)e
(is)71 1345 y(no)o(w)i(e)o(xplicitly)g(passed)i(as)f(an)g(ar)o(gument)f
(to)h FS(call)p FP(')m(s,)g(the)g(ar)o(gument)f(of)g
FS(allocate)g FP(be-)71 1405 y(comes)f(super\003uous.)k(Indeed,)c(the)g
(of)o(fset)f(can)h(be)f(dynamically)g(retrie)o(v)o(ed)g(by)g
FS(allocate)71 1466 y FP(\(and)h FS(try)p 263 1466 15
2 v 18 w(me)p 341 1466 V 17 w(else)p FP(\))g(as)i(a)f(consequence)g(of)
f(the)h(follo)o(wing)e(fact:)14 b FB(the)d(continuation)f(slot)71
1526 y(of)19 b(the)h(latest)g(en)n(vir)n(onment)f(fr)o(ame,)j
FS(STACK[E)11 b FC(+)g(1)p FS(])p FB(,)22 b(always)e(contains)g(the)f
(addr)n(ess)71 1586 y(of)c(the)h(instruction)g(immediately)f(following)
g(the)h(appr)n(opriate)f FS(call)f FD(P)q(;)8 b(N)22
b FB(instruction)71 1646 y(wher)n(e)17 b FD(N)22 b FB(is)17
b(pr)n(ecisely)h(the)f(desir)n(ed)g(of)o(fset.)29 b FP(Hence,)18
b FS(allocate)e FP(no)h(longer)f(takes)g(an)71 1706 y(ar)o(gument,)e
(and)h(an)f(en)n(vironment)g(frame)g(no)g(longer)g(needs)h(an)f(of)o
(fset)g(slot.)22 b(Instead,)16 b(the)71 1767 y(right)11
b(of)o(fset)h(is)g(calculated)h(by)f FS(allocate)g FP(as)h
FS(CODE[STACK[E)c FC(+)i(1)p FS(])h FK(\000)e FC(1)p
FS(])q FP(.)1530 1748 y FL(3)71 1843 y FP(W)n(ith)g(this)h
(simpli\002cation,)g(an)g(en)n(vironment)e(frame)h(on)h(top)g(of)f(the)
h(stack)g(no)o(w)g(looks)g(thus:)p 235 2060 703 2 v 180
2100 a FS(E)p 234 2118 2 61 v 50 w(CE)49 b FP(\()p FB(continuation)11
b(en)n(vir)n(onment)q FP(\))p 936 2118 V 235 2120 703
2 v 95 2160 a FS(E)g FC(+)g(1)p 234 2178 2 61 v 51 w
FS(CP)49 b FP(\()p FB(continuation)11 b(point)q FP(\))p
936 2178 V 235 2180 703 2 v 95 2220 a FS(E)g FC(+)g(2)p
234 2238 2 61 v 53 w FS(Y)p FC(1)53 b FP(\()p FB(permanent)12
b(variable)h FC(1)p FP(\))p 936 2238 V 235 2240 703 2
v 234 2320 2 82 v 234 2320 V 580 2268 a(.)580 2285 y(.)580
2302 y(.)p 936 2320 V 71 2420 648 2 v 129 2451 a Fz(3)145
2466 y FN(Recall)g(that)f(by)g Fn(CODE[)p Fm(i)p Fn(])o
FN(,)i(we)e(mean)i(the)e(contents)g(of)g Fn(STORE[)p
Fm(i)p Fn(])g FN(in)g(the)g(code)h(area)g(at)g(address)g
Fm(i)p FN(.)71 2516 y(This)d(works)f(under)h(the)g(\(reasonable\))h
(assumption)e(that)h(an)g(inte)o(ger)g(occupies)h(one)f(memory)h(word.)
71 2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(5)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 60 75
60 74 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(and)f(the)f(\(no)o(w)g(de\002niti)o(v)o(e\))f(de\002nition)g(of)h
FS(allocate)g FP(is:)1300 271 y FL(4)344 387 y FS(allocate)h
FK(\021)34 b FF(if)13 b FS(E)h FD(>)g FS(B)711 448 y
FF(then)f FB(ne)o(wE)i FK( )f FS(E)d FC(+)g FS(CODE[STACK[E)e
FC(+)i(1)p FS(])h FK(\000)f FC(1)p FS(])g FC(+)g(2)711
508 y FF(else)k FB(ne)o(wE)f FK( )g FS(B)d FC(+)g FS(STACK[B)o(])g
FC(+)g(7;)670 568 y FS(STACK[)p FB(ne)o(wE)p FS(])j FK( )g
FS(E)o FC(;)670 628 y FS(STACK[)p FB(ne)o(wE)d FC(+)g(1)p
FS(])j FK( )g FS(CP)p FC(;)670 688 y FS(E)g FK( )f FB(ne)o(wE)q
FC(;)670 749 y FS(P)h FK( )f FS(P)e FC(+)g FB(instruction)p
1086 749 15 2 v 18 w(size)q FC(\()p FS(P)p FC(\);)257
868 y FP(The)g(rule)e(`)p FD(p)p FC(\()p FD(X)q(;)f(Y)s(;)g(Z)t
FC(\))14 b FS(:-)g FD(q)r FC(\()p FD(U;)8 b(V)s(;)g(W)f
FC(\))p FD(;)h(r)q FC(\()p FD(Y)s(;)g(Z)q(;)g(U)d FC(\))p
FD(;)j(s)p FC(\()p FD(U;)g(W)f FC(\))p FD(;)h(t)p FC(\()p
FD(X)q(;)g(V)i FC(\))p FD(:)p FP(',)g(for)f(e)o(xample,)257
929 y(is)17 b(one)f(in)h(which)f(all)g(v)o(ariables)g(are)g(permanent.)
27 b(The)17 b(last)g(occurrence')m(s)f(goal)g(of)g(each)257
989 y(v)o(ariable)11 b(is)h(gi)o(v)o(en)f(in)g(the)h(follo)o(wing)e
(table,)i(along)f(with)g(a)h(consistent)g(ordering)e(assigning)257
1049 y(to)j(each)f(a)h FS(Y)p FD(i)f FP(inde)o(x)o(ed)h(by)f(its)g(of)o
(fset)g(in)g(the)g(en)n(vironment)g(frame:)p 768 1118
599 2 v 767 1178 2 61 v 788 1160 a FB(V)-6 b(ariable)p
977 1178 V 43 w(Last)12 b(goal)p 1206 1178 V 41 w(Of)o(fset)p
1365 1178 V 768 1180 599 2 v 767 1240 2 61 v 851 1222
a FD(X)p 977 1240 V 192 w(t)p 1206 1240 V 158 w FS(Y)p
FC(1)p 1365 1240 V 768 1242 599 2 v 767 1302 2 61 v 853
1284 a FD(Y)p 977 1302 V 200 w(r)p 1206 1302 V 156 w
FS(Y)p FC(5)p 1365 1302 V 768 1304 599 2 v 767 1364 2
61 v 854 1346 a FD(Z)p 977 1364 V 194 w(r)p 1206 1364
V 156 w FS(Y)p FC(6)p 1365 1364 V 768 1366 599 2 v 767
1426 2 61 v 854 1408 a FD(U)p 977 1426 V 194 w(s)p 1206
1426 V 155 w FS(Y)p FC(3)p 1365 1426 V 768 1428 599 2
v 767 1488 2 61 v 853 1470 a FD(V)p 977 1488 V 202 w(t)p
1206 1488 V 158 w FS(Y)p FC(2)p 1365 1488 V 768 1489
599 2 v 767 1550 2 61 v 846 1532 a FD(W)p 977 1550 V
189 w(s)p 1206 1550 V 155 w FS(Y)p FC(4)p 1365 1550 V
768 1551 599 2 v 257 1642 a FP(That)h(is,)g(after)e(the)h
FS(CE)g FP(and)g FS(CP)g FP(slots,)h FD(X)q(;)8 b(V)s(;)g(U;)g(W)o(;)g
(Y)s(;)g(Z)16 b FP(come)c(in)g(this)h(order)e(in)h(the)g(en)n(vi-)257
1702 y(ronment.)j(En)n(vironment)d(trimming)f(code)h(for)g(this)g(rule)
g(is)h(sho)o(wn)f(in)g(Figure)g(5.10.)257 1888 y FA(5.8)72
b(Stack)17 b(v)o(ariables)257 2016 y FP(Recall)k(that,)i(according)c
(to)i(W)-6 b(AM)20 b(Principle)g(1,)i(allocation)e(of)g(heap)g(space)h
(is)g(to)f(be)257 2076 y(a)o(v)o(oided)f(whene)o(v)o(er)g(possible.)36
b(Thus,)22 b(we)d(may)g(go)g(e)o(v)o(en)g(farther)e(in)i(optimizing)f
(aus-)257 2137 y(terity)c(in)f(the)h(case)h(of)f(a)g(permanent)g(v)o
(ariable)f(which)h(\002rst)f(occurs)h(in)g(the)g(body)g(of)g(a)g(rule)
257 2197 y(as)d(a)g(goal)f(ar)o(gument.)k(From)c(what)g(we)h(ha)o(v)o
(e)f(seen,)i(such)f(a)f(v)o(ariable)g FS(Y)p FD(n)g FP(is)h
(initialized)f(with)257 2257 y(a)j FS(put)p 385 2257
15 2 v 17 w(variable)g(Y)p FD(n;)8 b FS(A)p FD(i)k FP(which)g(sets)h
(both)f(the)g(en)n(vironment)f(slot)i FS(Y)p FD(n)f FP(and)g(ar)o
(gument)257 2317 y(re)o(gister)e FS(A)p FD(i)g FP(to)h(point)e(to)i(a)f
(ne)o(wly)g(allocated)g(unbound)g FS(REF)g FP(heap)h(cell)f(\(see)g
(Figure)g(2.8,)h(on)257 2377 y(P)o(age)j(23\).)19 b(No)o(w)m(,)13
b(since)h FS(Y)p FD(n)g FP(is)g(to)f(be)h(treated)f(as)h(a)g(local)f(v)
o(ariable,)h(it)f(has)h(been)f(allocated)p 257 2420 648
2 v 315 2451 a Fz(4)332 2466 y FN(Note)g(incidentally)m(,)h(that)f(a)h
(similar)f(alteration)f(must)h(be)h(done)g(for)f Fn(try)p
1433 2466 13 2 v 14 w(me)p 1497 2466 V 15 w(else)p FN(.)23
b(The)14 b(de\002niti)o(v)o(e)257 2516 y(v)o(ersion)c(for)g(that)g
(instruction)e(is)i(gi)o(v)o(en)g(in)f(Appendix)h(B.)258
2640 y(P)o FL(A)q(G)r(E)j FN(6)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 61 76
61 75 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 227 728 1307 3 v 268 825 a Fu(p=)p Fw(3)41
b(:)g FQ(allocate)275 b(\045)42 b Fu(p)432 881 y FQ(get)p
516 881 14 2 v 18 w(variable)14 b(Y)p Fw(1)p Fu(;)8 b
FQ(A)p Fw(1)41 b FQ(\045)65 b Fw(\()p Fu(X)q(;)432 938
y FQ(get)p 516 938 V 18 w(variable)14 b(Y)p Fw(5)p Fu(;)8
b FQ(A)p Fw(2)41 b FQ(\045)134 b Fu(Y)s(;)432 994 y FQ(get)p
516 994 V 18 w(variable)14 b(Y)p Fw(6)p Fu(;)8 b FQ(A)p
Fw(3)41 b FQ(\045)183 b Fu(Z)s Fw(\))12 b FQ(:-)432 1051
y(put)p 516 1051 V 18 w(variable)i(Y)p Fw(3)p Fu(;)8
b FQ(A)p Fw(1)41 b FQ(\045)322 b Fu(q)r Fw(\()p Fu(U;)432
1107 y FQ(put)p 516 1107 V 18 w(variable)14 b(Y)p Fw(2)p
Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)405 b Fu(V)s(;)432
1164 y FQ(put)p 516 1164 V 18 w(variable)14 b(Y)p Fw(4)p
Fu(;)8 b FQ(A)p Fw(3)41 b FQ(\045)455 b Fu(W)432 1220
y FQ(call)14 b Fu(q)r(=)p Fw(3)p Fu(;)8 b Fw(6)257 b
FQ(\045)511 b Fw(\))p Fu(;)432 1277 y FQ(put)p 516 1277
V 18 w(value)14 b(Y)p Fw(5)p Fu(;)8 b FQ(A)p Fw(1)122
b FQ(\045)322 b Fu(r)q Fw(\()p Fu(Y)s(;)432 1333 y FQ(put)p
516 1333 V 18 w(value)14 b(Y)p Fw(6)p Fu(;)8 b FQ(A)p
Fw(2)122 b FQ(\045)403 b Fu(Z)q(;)432 1390 y FQ(put)p
516 1390 V 18 w(value)14 b(Y)p Fw(3)p Fu(;)8 b FQ(A)p
Fw(3)122 b FQ(\045)455 b Fu(U)432 1446 y FQ(call)14 b
Fu(r)q(=)p Fw(3)p Fu(;)8 b Fw(4)257 b FQ(\045)499 b Fw(\))p
Fu(;)432 1503 y FQ(put)p 516 1503 V 18 w(value)14 b(Y)p
Fw(3)p Fu(;)8 b FQ(A)p Fw(1)122 b FQ(\045)322 b Fu(s)p
Fw(\()p Fu(U;)432 1559 y FQ(put)p 516 1559 V 18 w(value)14
b(Y)p Fw(4)p Fu(;)8 b FQ(A)p Fw(2)122 b FQ(\045)405 b
Fu(W)432 1615 y FQ(call)14 b Fu(s=)p Fw(2)p Fu(;)8 b
Fw(2)258 b FQ(\045)462 b Fw(\))p Fu(;)432 1672 y FQ(put)p
516 1672 V 18 w(value)14 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p
Fw(1)122 b FQ(\045)322 b Fu(t)p Fw(\()p Fu(X)q(;)432
1728 y FQ(put)p 516 1728 V 18 w(value)14 b(Y)p Fw(2)p
Fu(;)8 b FQ(A)p Fw(2)122 b FQ(\045)408 b Fu(V)432 1785
y FQ(deallocate)221 b(\045)452 b Fw(\))432 1841 y FQ(execute)15
b Fu(t=)p Fw(2)225 b FQ(\045)469 b Fu(:)p 227 1917 1307
3 v 469 2068 a FP(Figure)12 b(5.10:)j(En)n(vironment)d(trimming)f(code)
71 2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(6)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 62 77
62 76 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(a)k(cell)g(in)g(the)g(en)n(vironment)f(which)h(is)g(to)g(e)o(xist)g
(during)f(this)h(rule')m(s)g(body)f(e)o(x)o(ecution\227)257
349 y(assuming,)22 b(for)c(the)h(time)g(being,)i(that)d(en)n(vironment)
g(trimming)g(or)h(LCO)g(are)g(not)g(per)o(-)257 409 y(formed.)34
b(So)18 b(why)g(not)g(sa)o(v)o(e,)j(rather)d(than)h(systematically)f
(waste,)j(that)d(\(global\))f(heap)257 469 y(cell?)30
b(More)17 b(speci\002cally)m(,)h(a)f(more)g(appropriate)f(semantics)h
(for)g(the)g FS(put)p 1623 469 15 2 v 17 w(variable)257
530 y FP(instruction,)12 b(when)h(used)f(on)h(a)f(permanent)g(v)o
(ariable,)g(ought)g(to)g(be:)441 635 y FS(put)p 534 635
V 17 w(variable)h(Y)p FD(n;)8 b FS(A)p FD(i)13 b FK(\021)35
b FB(addr)14 b FK( )f FS(E)e FC(+)g FD(n)h FC(+)f(1;)1016
695 y FS(STACK[)p FB(addr)o FS(])j FK( )g(h)8 b Fx(REF)i
FD(;)h FB(addr)d FK(i)q FC(;)1016 755 y FS(A)p FD(i)13
b FK( )h FS(STACK[)p FB(addr)o FS(])p FC(;)257 868 y
FP(That)f(is,)g(it)f(should)h(not)f(allocate)g(a)h(heap)f(cell)h(as)g
(done)f(for)f(a)i(temporary)e(re)o(gister)m(.)257 944
y(Unfortunately)m(,)i(there)h(are)g(rather)f(insidious)h(consequences)h
(to)f(this)g(apparently)f(innocu-)257 1004 y(ous)f(change)g(as)g(it)f
(interferes)g(with)g(en)n(vironment)f(trimming)h(and)g(LCO.)i(The)f
(trouble)f(then)257 1065 y(is)j(that)f(en)n(vironment)f(v)o(ariables)h
(may)h(be)f(disposed)h(of)f(while)g(still)g(unbound.)18
b(Therefore,)257 1125 y(an)o(y)c(reference)f(to)h(an)f(unbound)g(stack)
h(v)o(ariable)f(runs)h(the)f(risk)h(of)f(potential)g(catastrophe,)257
1185 y(becoming)g(a)h(dangling)f(reference)g(upon)g(careless)i
(discarding)e(of)g(the)h(v)o(ariable.)k(As)c(a)g(re-)257
1245 y(sult,)e(it)g(is)f(no)h(longer)e(correct)h(to)g(let)g(the)h
FB(bind)g FP(operation)f(set)g(an)h(arbitrary)e(direction)g(when)257
1305 y(establishing)i(a)f(reference)f(between)i(two)e(unbound)h(v)o
(ariables.)k(More)c(pathologically)m(,)f(the)257 1366
y(follo)o(wing)k(instructions)h(ha)o(v)o(e)g(no)o(w)g(become)g
(incorrect)g(if)f(used)i(blindly)e(in)h(some)h(situa-)257
1426 y(tions:)f FS(put)p 476 1426 V 17 w(value)10 b FP(and)g
FS(set)p 825 1426 V 18 w(value)g FP(\(thus)g(also)g FS(unify)p
1353 1426 V 18 w(value)g FP(in)g FS(write)g FP(mode\).)257
1503 y(The)18 b(follo)o(wing)d(three)h(subsections)i(treat)e(each)h
(problem)f(by)h(\(1\))f(\002rst)g(gi)o(ving)g(a)h(correct)257
1563 y(binding)9 b(con)n(v)o(ention,)i(then)e(\(2\))g(analyzing)h(what)
f(may)h(go)f(wrong)g(with)h FS(put)p 1618 1563 V 17 w(value)p
FP(,)g(and)257 1623 y(\(3\))i(with)g FS(set)p 522 1623
V 18 w(value)f FP(and)i FS(unify)p 936 1623 V 17 w(value)p
FP(,)g(e)o(xplaining)f(ho)o(w)g(to)g(repair)f(the)i(trouble.)257
1787 y FV(5.8.1)60 b(V)-5 b(ariable)13 b(binding)i(and)g(memory)e(lay)o
(out)257 1897 y FP(Three)j(cases)g(of)f(v)o(ariable-v)o(ariable)e
(bindings)i(are)g(possible:)21 b(\(1\))15 b(heap-heap,)h(\(2\))e
(stack-)257 1958 y(stack,)h(and)e(\(3\))g(heap-stack.)19
b(In)13 b(Case)h(\(1\),)g(as)g(alluded)f(to)g(before)g(on)g(P)o(age)h
(17,)g(when)f(the)257 2018 y FB(bind)j FP(operation)d(is)i(performed)e
(on)h(two)f(unbound)h(\(heap\))g(addresses,)i(which)e(of)g(the)g(two)
257 2078 y(is)i(made)g(to)g(reference)f(the)h(other)f(does)h(not)f(af)o
(fect)g(correctness.)27 b(Ho)o(we)o(v)o(er)n(,)16 b(making)f(an)257
2138 y(arbitrary)e(choice)h(does)h(af)o(fect)e(performance)g(as)i(it)f
(may)g(lead)g(to)g(much)g(more)f(work)h(than)257 2198
y(necessary)19 b(by)g(causing)f(more)g(v)o(ariable)f(trailing)h(and)g
(resetting)g(than)g(may)g(be)h(needed.)257 2258 y(Consider)c(for)f(e)o
(xample)h(two)g(heap)g(v)o(ariables,)g(one)g(before)g
FS(HB)g FP(and)f(the)h(other)g(after)f FS(HB)p FP(.)257
2319 y(Making)h(the)f(\002rst)g(reference)f(the)h(second)h(requires)f
(trailing)f(it)h(\(and)g(its)g(potential)g(subse-)257
2379 y(quent)f(resetting\))e(while)h(the)h(contrary)e(is)i
(unconditional)e(and)h(requires)g(none.)257 2456 y(In)19
b(Cases)h(\(2\))f(and)g(\(3\),)h(the)f(symptoms)g(are)g(quite)g(more)f
(serious)i(as)f(which)g(direction)257 2516 y(the)13 b(binding)f(occurs)
h(can)g(be)g(incorrect)f(due)h(to)g(potential)f(discarding)h(of)f
(stack)h(v)o(ariables.)258 2640 y FN(P)o FL(A)q(G)r(E)g
FN(6)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 63 78
63 77 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(F)o(or)f(e)o(xample,)h(the)f(rule)g(`)p
FD(p)p FC(\()p FD(X)q(;)8 b(X)t FC(\))17 b FS(:-)e FD(q)r
FC(\()p FD(X)t FC(\))p FD(;)8 b(r)q FC(\()p FD(X)t FC(\))p
FD(:)p FP(')13 b(in)n(v)o(oked)g(with)g(`)p FS(?-)o FD(p)p
FC(\()p FD(Y)s(;)8 b(Z)t FC(\))p FD(:)p FP(')13 b(will)71
349 y(not)h(work)g(correctly)f(if)h FD(Y)26 b FP(is)15
b(bound)f(to)h FD(X)k FP(since)c FD(q)r(=)p FC(1)g FP(may)f(lea)o(v)o
(e)i(the)e(stack)h(v)o(ariable)f FD(X)71 409 y FP(unbound.)h(The)d
(other)g(direction)f(is)h(the)g(only)g(correct)f(one.)16
b(As)c(it)g(turns)g(out,)g(most)g(correct)71 469 y(bindings)g(can)g(be)
h(ensured)f(follo)o(wing)f(a)i(simple)f(chronological)f(reference)h
(rule:)72 594 y(W)l(A)r(M)k(B)r FO(I)r(N)r(D)r(I)r(N)r(G)h
FP(R)p FO(U)r(L)r(E)h FP(1)25 b FB(Always)17 b(make)e(the)g(variable)h
(of)f(higher)g(addr)n(ess)i(r)n(efer)n(ence)71 655 y(that)12
b(of)g(lower)h(addr)n(ess.)71 774 y FP(In)c(other)g(words,)h(an)g
(older)f(\(less)h(recently)f(created\))g(v)o(ariable)g(cannot)g
(reference)g(a)h(younger)71 834 y(\(more)h(recently)h(created\))g(v)o
(ariable.)71 911 y(Let)17 b(us)g(e)o(xamine)g(what)g(is)g(gained.)29
b(In)17 b(Case)g(\(1\),)h(as)g(e)o(xplained)f(abo)o(v)o(e,)i
(unconditional)71 971 y(bindings)g(are)g(thus)h(fa)o(v)o(ored)f(o)o(v)o
(er)g(conditional)g(ones,)j(a)o(v)o(oiding)d(unnecessary)i(trailing)71
1031 y(and)12 b(resulting)g(in)g(swift)g(heap)h(space)g(reco)o(v)o(ery)
f(upon)g(backtracking.)71 1108 y(In)g(Case)h(\(2\),)g(W)-6
b(AM)13 b(Binding)f(Rule)h(1)f(rule)g(is)h(also)g(clearly)f
(bene\002cial)h(for)e(the)i(same)g(rea-)71 1168 y(sons)k(as)h(for)e
(Case)i(\(1\).)28 b(It)17 b(happens)g(to)g(be)g(also)g(consistent)h
(with)e(the)h(ordering)f(among)71 1228 y(v)o(ariables)11
b(within)g(a)h(single)f(en)n(vironment)g(set)h(up)g(to)f(allo)o(w)g(en)
n(vironment)g(trimming.)j(This)71 1288 y(is)e(all)g(the)g(better)m(.)k
(Unfortunately)m(,)11 b(this)h(rule)g(is)g(not)g(suf)o(\002cient)g(to)g
(pre)o(v)o(ent)f(dangling)h(refer)o(-)71 1349 y(ences)h(in)f(a)g
(stack-stack)h(binding)f(as)h(will)f(be)g(seen)h(in)f(the)h(ne)o(xt)f
(subsection.)71 1425 y(In)17 b(Case)h(\(3\),)g(the)g(problem)e(\(as)i
(e)o(xposed)g(in)f(the)h(ne)o(xt)f(two)g(subsections\))h(is)g(that)f
(stack)71 1486 y(space)h(is)h(v)o(olatile)e(while)h(heap)g(space)h(is)f
(persistent,)i(making)e(references)f(to)h(the)g(stack)71
1546 y(potentially)10 b(dangerous.)15 b(Clearly)m(,)c(it)g(would)g(be)g
(a)g(source)h(of)e(complication)h(e)o(v)o(er)g(to)g(estab-)71
1606 y(lish)k(a)h(binding)f(from)g(the)g(heap)h(to)o(ward)e(the)i
(stack,)h(whereas)f(the)g(contrary)f(presents)h(no)71
1666 y(problem.)e(Therefore,)f(the)f(W)-6 b(AM)13 b(enforces)f(the)g
(follo)o(wing:)72 1791 y(W)l(A)r(M)k(B)r FO(I)r(N)r(D)r(I)r(N)r(G)h
FP(R)p FO(U)r(L)r(E)h FP(2)25 b FB(Heap)11 b(variables)f(must)h(ne)o
(ver)p 1018 1798 110 2 v 11 w(be)g(set)f(to)h(a)f(r)n(efer)n(ence)i
(into)e(the)71 1852 y(stac)o(k.)71 1971 y FP(T)l(o)19
b(suit)h(this,)h(the)f(W)-6 b(AM)19 b(or)o(ganizes)g(its)h(memory)e
(layout)h(speci\002cally)g(so)h(that)f(W)-6 b(AM)71 2031
y(Binding)12 b(Rule)g(1)g(is)h(naturally)f(consistent)g(with:)72
2156 y(W)l(A)r(M)k(B)r FO(I)r(N)r(D)r(I)r(N)r(G)h FP(R)p
FO(U)r(L)r(E)h FP(3)25 b FB(The)17 b(stac)o(k)g(must)g(be)g(allocated)g
(at)f(higher)h(addr)n(esses)i(than)71 2216 y(the)12 b(heap,)h(in)f(the)
g(same)h(global)f(addr)n(ess)h(space)o(.)71 2335 y FP(This)k(must)h(be)
f(done,)i(of)d(course,)j(allo)o(wing)e(suf)o(\002cient)f(slack)i(for)e
(gro)o(wth)g(of)h(the)g(heap.)71 2395 y(This)10 b(rule)g(entails)h
(forbidding)d(the)i(participation)f(of)h(stack)h(v)o(ariables)f(in)g(a)
g(reference)g(chain)71 2456 y(in)16 b(an)o(y)i(way)e(other)h(than)g
(grouped)f(as)i(a)f(subchain)g(pre\002x.)30 b(That)17
b(is,)i(a)e(reference)g(chain)71 2516 y(containing)e(an)o(y)h(stack)g
(v)o(ariables)f(at)h(all)f(will)h(ha)o(v)o(e)g(them)f(all)h(appear)f
(contiguously)h(and)71 2640 y FN(Copyright)260 2639 y(c)249
2640 y FM(\015)10 b FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(6)r(3)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 64 79
64 78 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 435 291 1265
3 v 496 388 a Fp(h)c Fw(0)g Fp(i)19 b Fu(p=)p Fw(1)41
b(:)g FQ(allocate)275 b(\045)42 b Fu(p)496 445 y Fp(h)10
b Fw(1)g Fp(i)183 b FQ(get)p 842 445 14 2 v 18 w(variable)14
b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(1)41 b FQ(\045)65 b Fw(\()p
Fu(X)t Fw(\))11 b FQ(:-)496 501 y Fp(h)f Fw(2)g Fp(i)183
b FQ(put)p 842 501 V 18 w(variable)14 b(Y)p Fw(2)p Fu(;)8
b FQ(A)p Fw(1)41 b FQ(\045)221 b Fu(q)r Fw(\()p Fu(Y)s(;)496
558 y Fp(h)10 b Fw(3)g Fp(i)183 b FQ(put)p 842 558 V
18 w(value)14 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)122 b
FQ(\045)302 b Fu(X)496 614 y Fp(h)10 b Fw(4)g Fp(i)183
b FQ(call)14 b Fu(q)r(=)p Fw(2)p Fu(;)8 b Fw(2)257 b
FQ(\045)351 b Fw(\))p Fu(;)496 670 y Fp(h)10 b Fw(5)g
Fp(i)183 b FQ(put)p 842 670 V 18 w(value)14 b(Y)p Fw(2)p
Fu(;)8 b FQ(A)p Fw(1)122 b FQ(\045)221 b Fu(r)q Fw(\()p
Fu(Y)s(;)496 727 y Fp(h)10 b Fw(6)g Fp(i)183 b FQ(put)p
842 727 V 18 w(value)14 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p
Fw(2)122 b FQ(\045)302 b Fu(X)496 783 y Fp(h)10 b Fw(7)g
Fp(i)183 b FQ(deallocate)221 b(\045)351 b Fw(\))496 840
y Fp(h)10 b Fw(8)g Fp(i)183 b FQ(execute)15 b Fu(r)q(=)p
Fw(2)219 b FQ(\045)369 b Fu(:)p 435 915 1265 3 v 499
1067 a FP(Figure)11 b(5.11:)16 b(Unsafe)c(code)h(for)e
FD(p)p FC(\()p FD(X)t FC(\))k FS(:-)e FD(q)r FC(\()p
FD(Y)s(;)8 b(X)t FC(\))p FD(;)g(r)q FC(\()p FD(Y)s(;)g(X)t
FC(\))p FD(:)257 1234 y FP(early)14 b(in)h(the)f(chain.)22
b(Then,)15 b(discarding)f(a)h(stack)g(v)o(ariable)e(cannot)i(break)f(a)
g(chain.)22 b(\(This)257 1294 y(is)13 b(guaranteed)f(in)g(the)h
(subchain)f(pre\002x)g(of)g(stack)h(v)o(ariables)f(by)g(W)-6
b(AM)13 b(Binding)f(Rule)g(1.\))257 1371 y(Ho)o(we)o(v)o(er)n(,)f(we)g
(see)h(ne)o(xt)f(that)f(this)h(rule)g(is)g(violated)f(by)h(some)g
(instructions)f(\()p FS(put)p 1700 1371 15 2 v 17 w(value)p
FP(,)257 1431 y FS(set)p 350 1431 V 18 w(value)p FP(,)k(and)f
FS(unify)p 779 1431 V 17 w(value)p FP(\).)18 b(W)l(e)c(presently)f(e)o
(xamine)g(this)h(and)f(adapt)g(the)h(de-)257 1491 y(sign)f(so)g(that)f
(no)g(incorrect)g(binding)f(may)h(e)o(v)o(er)h(occur)m(.)257
1715 y FV(5.8.2)60 b(Unsafe)15 b(v)o(ariables)257 1837
y FP(A)j(stack)g(v)o(ariable)f(is)h(discarded)g(before)e(calling)i(the)
f(goal)h(in)f(which)h(it)f(last)h(occurs)g(al-)257 1897
y(though)10 b(it)g(may)g(still)g(be)h(unbound)e(or)h(bound)g(to)g
(another)g(unbound)f(permanent)h(v)o(ariable)g(in)257
1958 y(the)h(same)h(\(current\))d(en)n(vironment)h(\()p
FB(i.e)o(.)p FP(,)j(one)e(which)g(is)g(to)g(be)g(also)g(disposed)h
(of\).)i(Clearly)m(,)257 2018 y(the)g(danger)g(is)g(then)g(that)g(the)g
(call)g(may)f(refer)g(to)h(the)g(discarded)g(v)o(ariables.)20
b(F)o(or)14 b(this)g(rea-)257 2078 y(son,)i(a)f(permanent)f(v)o
(ariable)g(which)g(is)h(initialized)f(by)g(a)h FS(put)p
1382 2078 V 17 w(variable)f FP(\()p FB(i.e)o(.)p FP(,)j(which)257
2138 y(\002rst)12 b(occurs)h(as)g(the)f(ar)o(gument)g(of)g(a)g(body)g
(goal\))g(is)h(called)f(an)h FB(unsafe)f FP(v)o(ariable.)257
2215 y(Let)i(us)g(take)g(an)f(e)o(xample)h(with)f(the)h(rule)f(`)p
FD(p)p FC(\()p FD(X)t FC(\))j FS(:-)g FD(q)r FC(\()p
FD(Y)s(;)8 b(X)t FC(\))p FD(;)g(r)q FC(\()p FD(Y)s(;)g(X)t
FC(\))p FD(:)p FP(')13 b(in)g(which)h(both)257 2275 y
FD(X)k FP(and)13 b FD(Y)24 b FP(are)13 b(permanent)f(v)o(ariables,)i(b)
o(ut)f(only)f FD(Y)25 b FP(is)13 b(unsafe.)18 b(This)13
b(is)h(because)g FD(Y)24 b FP(is)13 b(ini-)257 2335 y(tialized)e(with)g
(a)g FS(put)p 641 2335 V 18 w(variable)f FP(\(since)i(its)f(\002rst)g
(occurrence)f(is)i(in)f(a)g(body)g(goal\))g(while)257
2395 y FD(X)t FP(,)k(\002rst)e(occurring)f(in)i(the)f(head,)h(is)g
(initialized)f(with)g(a)h FS(get)p 1361 2395 V 17 w(variable)p
FP(.)19 b(Figure)12 b(5.11)257 2456 y(sho)o(ws)k(the)e(\(incorrect\))f
(translation)i(as)g(it)f(is)i(done)e(in)h(our)f(current)g(setting.)23
b(Let)15 b(us)h(trace)257 2516 y(what)e(happens)h(when)f
FS(put)p 761 2516 V 17 w(value)g(Y)p FC(2)p FD(;)8 b
FS(A)p FC(1)14 b FP(is)h(used)f(on)g(Line)g(5.)21 b(Let)15
b(us)f(assume)h(that)f FD(p)258 2640 y FN(P)o FL(A)q(G)r(E)f
FN(6)r(4)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 65 80
65 79 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(is)e(called)h(with)f(an)g(unbound)g(v)o
(ariable;)f(that)i(is,)g(with)f(the)g(sequence)h(of)f(the)g(form:)638
513 y FS(put)p 731 513 15 2 v 18 w(variable)h(X)p FD(i;)8
b FS(A)p FC(1)638 574 y FS(execute)13 b FD(p=)p FC(1)71
797 y FP(Thus,)20 b(at)f(the)f(point)g(right)f(before)h(Line)h(0,)h
FS(A)p FC(1)e FP(points)h(to)f(the)g(heap)g(address)h(\(say)m(,)h(36\))
71 857 y(of)e(an)h(unbound)g FS(REF)g FP(cell)g(at)g(the)g(top)g(of)f
(the)h(heap.)36 b(Then,)22 b FS(allocate)c FP(creates)h(an)71
918 y(en)n(vironment)c(on)h(the)g(stack)g(\(where,)h(say)m(,)h
FS(Y)p FC(1)f FP(is)f(at)g(address)h(77)f(and)g FS(Y)p
FC(2)h FP(at)f(address)h(78)71 978 y(in)f(the)h(stack\).)30
b(Line)17 b(1)g(sets)h FS(STACK[)p FC(77)p FS(])f FP(to)g
FK(h)8 b FS(REF)j FD(;)g FP(36)d FK(i)p FP(,)19 b(and)e(Line)g(2)g
(sets)h FS(A)p FC(1)f FP(\(and)71 1038 y FS(STACK[)p
FC(78)p FS(])p FP(\))f(to)i FK(h)8 b FS(REF)j FD(;)g
FP(78)d FK(i)p FP(.)31 b(Line)17 b(3)g(sets)h FS(A)p
FC(2)g FP(to)f(the)g(v)o(alue)g(of)g FS(STACK[)p FC(77)p
FS(])p FP(;)j(that)71 1098 y(is,)d FK(h)9 b FS(REF)i
FD(;)f FP(36)e FK(i)q FP(.)26 b(Let)17 b(us)f(assume)h(that)f(the)g
(call)f(to)h FD(q)i FP(on)e(Line)g(4)g(does)g(not)g(af)o(fect)f(these)
71 1158 y(settings)d(at)g(all)g(\()p FB(e)o(.g)o(.)p
FP(,)i(the)e(fact)g FD(q)r FC(\()p 663 1158 V 17 w FD(;)p
702 1158 V 26 w FC(\))g FP(is)g(de\002ned\).)j(Then,)e(\(the)f(wrong\))
f(Line)i(5)f(would)f(set)71 1219 y FS(A)p FC(1)g FP(to)h
FK(h)c FS(REF)j FD(;)g FP(78)d FK(i)p FP(,)k(and)g(Line)g(6)f(sets)h
FS(A)p FC(2)g FP(to)f FK(h)e FS(REF)i FD(;)f FP(36)e
FK(i)q FP(.)15 b(Ne)o(xt,)e FS(deallocate)d FP(thro)o(ws)71
1279 y(a)o(way)i FS(STACK[)p FC(77)p FS(])h FP(and)g
FS(STACK[)p FC(78)p FS(])p FP(.)j(Suppose)d(no)o(w)f(that)h(the)f(code)
h(for)f FD(r)i FP(starts)f(with)71 1339 y(an)f FS(allocate)f
FP(re-using)h(stack)g(space)h(77)f(and)g(78)g(then,)h(lo!,)f(the)g
FS(get)g FP(instructions)f(of)h FD(r)71 1399 y FP(will)g(\002nd)f
(nonsensical)i(data)g(in)f FS(A)p FC(1)p FP(.)71 1476
y(Note)g(ho)o(we)o(v)o(er)g(that)h(an)g(unsafe)g(v)o(ariable')m(s)f
(binding)g(can)h(easily)h(be)e(checked)h(at)g(run-time)71
1536 y(so)i(that)g(trouble)f(may)h(be)g(a)o(v)o(erted)g(on)g(the)g
(\003y)g(by)g(taking)g(appropriate)f(measures)h(only)g(if)71
1596 y(needed.)21 b(Let)15 b(us)f(re\003ect)g(on)g(the)g(possible)h
(situations)f(of)f(a)i(gi)o(v)o(en)f(unsafe)g(v)o(ariable)f
FS(Y)p FD(n)i FP(in)71 1657 y(the)9 b(last)h(goal)f(where)h(it)f
(occurs.)15 b(There)10 b(are)g(two)e(cases)j(that)f(will)f(need)h
(attention:)j(\(1\))c(when)71 1717 y FS(Y)p FD(n)k FP(appears)g(only)g
(as)g(an)h(ar)o(gument)e(of)h(its)g(last)g(goal;)g(and,)h(\(2\))e(when)
h FS(Y)p FD(n)h FP(appears)f(in)g(that)71 1777 y(goal)k(nested)g(in)g
(a)h(structure,)g(whether)f(or)g(not)g(it)g(is)g(also)h(an)f(ar)o
(gument.)30 b(W)l(e)17 b(will)g(treat)71 1837 y(later)e(the)g(second)h
(case,)i(as)e(it)g(interacts)f(with)g(a)h(more)f(general)g(source)h(of)
f(unsafety)h(that)71 1897 y(we)c(shall)h(analyze)f(after)g(treating)g
(the)g(\002rst)g(case.)71 1974 y(So)k(let)i(us)f(consider)g(for)g(no)o
(w)f(the)i(case)g(where)e(all)i(occurrences)f(of)g(unsafe)g
FS(Y)p FD(n)g FP(are)g(ar)o(-)71 2034 y(guments)k(of)f(the)h(last)h
(goal)f(where)g FS(Y)p FD(n)g FP(appears.)42 b(That)22
b(is,)i(all)d(these)g(correspond)g(to)71 2094 y FS(put)p
164 2094 V 17 w(value)13 b(Y)p FD(n;)8 b FS(A)p FD(i)19
b FP(instructions.)35 b(As)20 b(e)o(xplained,)h(it)d(is)i(desirable)f
(to)f(ensure)i(that)e(a)71 2155 y(run-time)g(check)i(be)g(carried)f
(out)h(v)o(erifying)e(that)i(no)g(reference)f(chain)g(leading)h(to)f
FS(Y)p FD(n)71 2215 y FP(e)o(v)o(entually)13 b(points)h(to)f(an)h
(unbound)f(slot)h(in)f(the)h(en)n(vironment.)19 b(The)14
b(solution)g(is)g(to)f(use)h(a)71 2275 y(modi\002cation)g(of)i(the)g
(ef)o(fect)f(of)g FS(put)p 751 2275 V 18 w(value)e(Y)p
FD(n;)8 b FS(A)p FD(i)15 b FP(to)h(ascertain)g(this.)26
b(More)16 b(specif-)71 2335 y(ically)m(,)i(let)f(us)g(call)h(this)f
(modi\002ed)f(instruction)g FS(put)p 1033 2335 V 18 w(unsafe)p
1231 2335 V 17 w(value)e(Y)p FD(n;)8 b FS(A)p FD(i)o
FP(.)30 b(It)17 b(be-)71 2395 y(ha)o(v)o(es)h(e)o(xactly)g(like)f
FS(put)p 546 2395 V 18 w(value)c(Y)p FD(n;)8 b FS(A)p
FD(i)17 b FP(if)h(the)f(reference)g(chain)h(from)f FS(Y)p
FD(n)h FP(does)g(not)71 2456 y(lead)e(to)g(an)g(unbound)f(v)o(ariable)h
(in)g(the)g(current)f(en)n(vironment.)26 b(Otherwise,)17
b(this)f(altered)71 2516 y(instruction)11 b(binds)h(the)g(referenced)f
(stack)i(v)o(ariable)e(to)h(a)g(ne)o(w)g(unbound)g FS(REF)f
FP(cell)h(pushed)71 2640 y FN(Copyright)260 2639 y(c)249
2640 y FM(\015)e FN(Hassan)i(A)463 2636 y(\250)464 2640
y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(6)r(5)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 66 81
66 80 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(on)f(the)f(heap,)h(and)f(sets)h FS(A)p FD(i)f FP(to)h(point)f(to)g
(that)g(cell.)k(Explicitly)m(,)1353 271 y FL(5)404 548
y FS(put)p 497 548 15 2 v 17 w(unsafe)p 694 548 V 18
w(value)d(Y)p FD(n;)8 b FS(A)p FD(i)13 b FK(\021)34 b
FB(addr)14 b FK( )g FB(der)n(ef)8 b FC(\()p FS(E)j FC(+)g
FD(n)g FC(+)g(1\);)1086 608 y FF(if)j FB(addr)25 b FD(<)g
FS(E)1128 668 y FF(then)13 b FS(A)p FD(i)g FK( )h FS(STORE[)p
FB(addr)o FS(])1128 729 y FF(else)1170 789 y(begin)1211
849 y FS(HEAP[H)o(])g FK( )g(h)8 b Fx(REF)i FD(;)h FS(H)d
FK(i)q FC(;)1211 909 y FB(bind)q FC(\()p FB(addr)p FD(;)g
FS(H)p FC(\);)1211 969 y FS(A)p FD(i)13 b FK( )h FS(HEAP[H)o(])p
FC(;)1211 1030 y FS(H)g FK( )f FS(H)e FC(+)g(1)1170 1090
y FF(end)o FC(;)257 1365 y FP(Looking)18 b(back)g(at)g(the)g(e)o
(xample)g(of)f(Figure)g(5.11,)j(if)d(Line)i(5)f(is)g(not)f(as)i(sho)o
(wn)e(b)o(ut)h(re-)257 1425 y(placed)k(with)e FS(put)p
611 1425 V 18 w(unsafe)p 809 1425 V 17 w(value)13 b(Y)p
FC(2)q FD(;)8 b FS(A)p FC(1)p FP(,)23 b(then)e FS(HEAP[)p
FC(37)p FS(])h FP(is)f(created)g(and)g(set)257 1485 y(to)h
FK(h)9 b FS(REF)h FD(;)h FP(37)d FK(i)p FP(,)25 b FS(STACK[)p
FC(78)p FS(])d FP(and)f FS(A)p FC(1)h FP(are)g(set)g(to)g
FK(h)8 b FS(REF)j FD(;)g FP(37)d FK(i)p FP(,)25 b(then)c
FS(A)p FC(2)h FP(is)g(set)h(to)257 1545 y FK(h)9 b FS(REF)i
FD(;)f FP(36)e FK(i)i FP(\(the)f(v)o(alue)g(of)g FS(STACK[)p
FC(77)p FS(])p FP(\))g(on)h(the)f(follo)o(wing)f(line.)15
b(Discarding)9 b FS(STACK[)p FC(77)p FS(])257 1606 y
FP(and)k FS(STACK[)p FC(78)p FS(])g FP(is)g(no)o(w)g(quite)f(safe)h(as)
h(e)o(x)o(ecuting)f FD(r)h FP(will)e(get)h(correct)f(v)o(alues)h(from)f
FS(A)p FC(1)257 1666 y FP(and)h FS(A)p FC(2)p FP(.)257
1743 y(The)21 b(question)e(still)h(remaining)f(is)h(to)f(decide)h
(which)g(among)f(se)o(v)o(eral)h(occurrences)g(of)257
1803 y FS(put)p 350 1803 V 18 w(value)13 b(Y)p FD(n;)8
b FS(A)p FD(i)19 b FP(must)g(be)g(replaced)g(with)g(the)g(safety)g
(check)g(modi\002cation)f(for)g(a)257 1863 y(gi)o(v)o(en)13
b(unsafe)g FS(Y)p FD(n)p FP(.)18 b(In)13 b(fact,)g(it)f(is)i(suf)o
(\002cient)e(to)h(replace)g(only)f FB(one)h FP(of)g(them,)g(although)g
(not)257 1923 y(an)j(arbitrary)f(one)g(b)o(ut,)i(quite)e(importantly)m
(,)h(the)f FB(\002rst)h(occurr)n(ence)h(in)f(this)g(last)f(goal)p
FP(.)26 b(T)l(o)p 257 2171 648 2 v 315 2202 a Fz(5)332
2217 y FN(Note)13 b(incidentally)d(that)j(ha)o(ving)e(a)j(global)d
(address)j(space)g(with)d(the)i(relati)o(v)o(e)f(memory)i(layout)d(of)i
(the)257 2267 y(stack)e(being)f(allocated)g(at)h(higher)e(addresses)j
(than)e(the)g(heap)h(has)g(as)g(a)g(nice)f(consequence)i(to)e(make)h
(it)e(quite)257 2317 y(easy)15 b(to)f(test)g(whether)f
Fn(Y)p Fm(n)p FN(')n(s)h(v)o(alue)g(is)g(an)g(unbound)f(v)o(ariable)g
(in)h(the)g(current)f(en)n(vironment)h(with)f(a)h(mere)257
2366 y(comparison)g(of)f(memory)i(addresses.)24 b(Strictly)13
b(speaking,)h(this)f(test)h(is)f(not)g(quite)g(correct)h(because)i
FH(der)n(ef)257 2416 y FN(may)11 b(actually)f(yield)g(the)g(address)h
(of)g(an)f Fn(X)h FN(re)o(gister)f(containing)f(a)i(literal)f
(constant.)j(T)m(o)d(pre)o(v)o(ent)h(this)e(tri)o(vial)257
2466 y(point)e(from)h(complicating)f(matters)h(unnecessarily)m(,)i(we)e
(may)h(assume)h(that)d Fn(X)h FN(re)o(gisters)h(con)n(v)o(eniently)e
(reside)257 2516 y(at)k(the)f(highest)f(end)h(of)g(the)h(global)e
(store.)258 2640 y(P)o FL(A)q(G)r(E)k FN(6)r(6)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 67 82
67 81 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(see)f(this)f(on)g(an)h(e)o(xample,)g
(consider)f(the)g(clause:)938 271 y FL(6)669 382 y FD(p)i
FS(:-)g FD(q)r FC(\()p FD(X)t FC(\))p FD(;)8 b(r)q FC(\()p
FD(X)q(;)g(X)t FC(\))p FD(:)71 476 y FP(If)j(the)i(safety)f(check)h(is)
f(done)h(last,)g(as)g(in:)510 566 y FD(p=)p FC(0)i(:)41
b FS(allocate)652 626 y(put)p 745 626 15 2 v 17 w(variable)13
b(Y)p FC(1)q FD(;)8 b FS(A)p FC(1)652 686 y FS(call)13
b FD(q)r(=)p FC(1)p FD(;)8 b FC(1)652 746 y FS(put)p
745 746 V 17 w(value)14 b(Y)p FC(1)p FD(;)8 b FS(A)p
FC(1)652 807 y FS(put)p 745 807 V 17 w(unsafe)p 942 807
V 18 w(value)13 b(Y)p FC(1)p FD(;)8 b FS(A)p FC(2)652
867 y FS(deallocate)652 927 y(execute)13 b FD(r)q(=)p
FC(2)71 1016 y FP(then)g(ar)o(gument)g(re)o(gister)g(will)h(still)f
(contain)g(a)h(reference)f(to)h(the)f(discarded)h(en)n(vironment)71
1077 y(when)e FD(r)q(=)p FC(2)h FP(is)g(called.)j(Therefore,)c(the)h
(follo)o(wing)e(is)h(the)h(only)f(possible)g(correct)g(code:)510
1168 y FD(p=)p FC(0)j(:)41 b FS(allocate)652 1229 y(put)p
745 1229 V 17 w(variable)13 b(Y)p FC(1)q FD(;)8 b FS(A)p
FC(1)652 1289 y FS(call)13 b FD(q)r(=)p FC(1)p FD(;)8
b FC(1)652 1349 y FS(put)p 745 1349 V 17 w(unsafe)p 942
1349 V 18 w(value)13 b(Y)p FC(1)p FD(;)8 b FS(A)p FC(1)652
1409 y FS(put)p 745 1409 V 17 w(value)14 b(Y)p FC(1)p
FD(;)8 b FS(A)p FC(2)652 1469 y FS(deallocate)652 1530
y(execute)13 b FD(r)q(=)p FC(2)71 1619 y FP(It)f(has)i(the)f(ef)o(fect)
f(of)g(\223globalizing\224)h(the)g(v)o(alue)g(of)f FS(Y)p
FC(1)h FP(so)h(as)f(to)g(guarantee)g(that)g(it)g(may)f(be)71
1679 y(discarded)g(without)g(lea)o(ving)g(a)g(nonsensical)h(reference)f
(in)g FS(A)p FC(1)p FP(.)71 1841 y FV(5.8.3)59 b(Nested)14
b(stack)h(r)o(efer)o(ences)71 1951 y FP(When)g(an)g(unsafe)h(v)o
(ariable)e(occurs)h(in)g(its)h(last)f(goal)h(nested)f(in)g(a)h
(structure)e(\()p FB(i.e)o(.)p FP(,)j(with)e(a)71 2011
y(corresponding)10 b FS(set)p 460 2011 V 18 w(value)g
FP(or)h(a)h FS(unify)p 875 2011 V 17 w(value)p FP(\),)f(the)g
(situation)g(pertains)g(to)h(a)f(more)p 71 2051 648 2
v 129 2082 a Fz(6)145 2097 y FN(This)j(e)o(xample)i(is)d(due)i(to)e
(Michael)h(Hanus)h([Han90)o(])f(and,)i(independently)m(,)e(to)f(P)o
(ascal)j(v)o(an)e(Henten-)71 2147 y(ryck)d([vH90].)18
b(Both)11 b(pointed)f(out)i(to)f(this)g(author)g(the)h(incorrect)g
(replacement)h(rule)f(described)g(\(as)h(that)e(of)71
2197 y(the)i FH(last)g FN(occurrence)i(of)f(an)g(unsafe)h(v)o
(ariable\))e(in)g([AK90].)24 b(In)13 b(fact,)i(the)f(incorrect)g(rule)f
(in)g([AK90])h(had)71 2247 y(been)c(simply)f(inherited)f(v)o(erbatim)i
(from)f(W)m(arren')n(s)h(original)e(report)h([W)m(ar83)o(])h(\(P)o(age)
g(14,)g(Line)g(3\),)g(and)g(later)71 2296 y(e)o(xplained)g(by)g(him)g
(as)h(follo)o(ws)d([W)m(ar90]:)193 2366 y(\223I)14 b(agree)g(that)f
(this)g(is)h(ambiguous)f(or)g(misleading.)23 b(I)14 b(think)e(it)h(may)
h(be)g(partly)f(e)o(xplained)193 2416 y(by)f(the)g(fact)h(that)f(the)g
(memo)i(\(tacitly?\))k(assumes)d(that)d(goal)g(ar)o(guments)h(are)g
(compiled)f(in)193 2466 y(re)o(v)o(erse)f(order)f(and)g(therefore)h
(the)f(last)g(ar)o(guments)g(will)f(be)i(compiled)f(\002rst!\224)71
2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(6)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 68 83
68 82 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(general)k(pathology)e(which)i(may)f(af)o(fect)g(temporary)f(v)o
(ariables)i(as)g(well.)31 b(Consider)17 b(the)257 349
y(rule)12 b(`)p FD(a)p FC(\()p FD(X)t FC(\))i FS(:-)f
FD(b)p FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\)\))p FD(:)p
FP(')12 b(for)g(e)o(xample.)k(As)c(we)h(ha)o(v)o(e)g(it,)f(this)h(is)f
(translated)h(thus:)282 470 y FD(a=)p FC(1)28 b(:)50
b FS(get)p 541 470 15 2 v 17 w(variable)13 b(X)p FC(2)q
FD(;)8 b FS(A)p FC(1)448 531 y FS(put)p 541 531 V 17
w(structure)13 b FD(f)5 b(=)p FC(1)p FD(;)j FS(A)p FC(1)448
591 y FS(set)p 541 591 V 17 w(value)14 b(X)p FC(2)448
651 y FS(execute)f FD(b=)p FC(1)257 773 y FP(Let)g(us)g(consider)f(no)o
(w)g(the)g(query)g(`)p FS(?-)p FD(a)p FC(\()p FD(X)t
FC(\))p FD(;)c(c)p FC(\()p FD(X)t FC(\))p FD(:)p FP(')j(being)i
(translated)f(as:)460 895 y FS(allocate)460 955 y(put)p
553 955 V 18 w(variable)h(Y)p FC(1)p FD(;)8 b FS(A)p
FC(1)460 1015 y FS(call)14 b FD(a=)p FC(1)p FD(;)8 b
FC(1)699 1063 y FP(.)699 1080 y(.)699 1096 y(.)257 1219
y(and)i(let)g(us)h(e)o(xamine)f(in)g(detail)g(what)g(happens)g(during)f
(e)o(x)o(ecution.)16 b(Before)9 b(the)h(call)h(to)e FD(a=)p
FC(1)p FP(,)257 1279 y(a)17 b(stack)g(frame)e(containing)h(the)g(v)o
(ariable)g FS(Y)p FC(1)g FP(is)h(allocated)f(and)g(initialized)g(to)g
(unbound)257 1339 y(by)g FS(put)p 416 1339 V 18 w(variable)d(Y)p
FC(1)p FD(;)8 b FS(A)p FC(1)p FP(.)27 b(The)17 b(code)f(of)g
FD(a=)p FC(1)g FP(be)o(gins)h(by)f(setting)g FS(X)p FC(2)g
FP(to)g(reference)257 1399 y(that)f(stack)h(slot)f(\(the)g(v)o(alue)g
(of)g FS(A)p FC(1)p FP(\),)h(and)f(pushes)h(the)f(functor)f
FD(f)5 b(=)p FC(1)17 b FP(on)e(the)g(heap.)24 b(Then,)257
1459 y(behold!,)d FS(set)p 536 1459 V 17 w(value)14 b(X)p
FC(2)19 b FP(pushes)h(the)f(v)o(alue)g(of)f FS(X)p FC(2)i
FP(onto)f(the)g(heap,)i(establishing)e(a)257 1520 y(reference)e(from)f
(the)h(heap)g(to)f(the)h(stack.)31 b(This)17 b(violates)g(W)-6
b(AM)18 b(Binding)33 b(Rule)17 b(2)g(and)257 1580 y(creates)c(a)g
(source)f(of)g(disaster)h(when)f FS(Y)p FC(1)h FP(is)f(e)o(v)o
(entually)g(discarded.)257 1657 y(Of)e(course,)h(the)f(same)h
(ill-fated)d(beha)o(vior)i(plagues)g FS(unify)p 1323
1657 V 17 w(value)g FP(as)h(its)f FS(write)g FP(mode)257
1717 y(semantics)18 b(is)f(identical)f(to)h FS(set)p
858 1717 V 17 w(value)p FP(')m(s.)29 b(Then,)19 b(the)d(question)h(is:)
24 b(When)17 b(can)g(it)f(be)257 1777 y(statically)e(guaranteed)f(that)
h FS(set)p 865 1777 V 17 w(value)f FP(\(resp.,)i FS(unify)p
1334 1777 V 17 w(value)p FP(\))e(will)g(not)h(create)f(an)257
1837 y(unwanted)f(heap-to-stack)g(reference?)k(The)d(answer)g(is:)j(An)
o(y)d(time)f(its)h(ar)o(gument)f(has)h(not)257 1897 y(been)19
b(e)o(xplicitly)f(initialized)f(to)i(be)f(on)g(the)h(heap)f(in)g(the)h
(gi)o(v)o(en)f(clause.)34 b(Then)19 b(indeed,)257 1958
y(the)11 b(\002rst)g FS(set)p 511 1958 V 17 w(value)g
FP(\(resp.,)g FS(unify)p 974 1958 V 18 w(value)p FP(\))f(performed)f
(on)i(it)g(may)f(cause)i(potential)257 2018 y(ha)o(v)o(oc.)18
b(Speci\002cally)m(,)13 b FS(set)p 755 2018 V 18 w(value)g(V)p
FD(n)g FP(\(resp.,)h FS(unify)p 1296 2018 V 17 w(value)g(V)p
FD(n)p FP(\))e(is)i(unsafe)f(when-)257 2078 y(e)o(v)o(er)h(the)f(v)o
(ariable)g FS(V)p FD(n)g FP(has)h FB(not)f FP(been)h(initialized)f(in)g
(this)h(clause)g(with)f FS(set)p 1623 2078 V 17 w(variable)257
2138 y FP(or)f FS(unify)p 464 2138 V 18 w(variable)p
FP(,)g(nor)n(,)g(if)g FS(V)p FD(n)g FP(is)h(temporary)m(,)e(with)h
FS(put)p 1412 2138 V 18 w(variable)p FP(.)257 2215 y(Again,)20
b(the)e(cure)f(amounts)h(to)g(performing)e(appropriate)h(run-time)g
(checks)h(which)g(can)257 2275 y(trigger)12 b(dynamic)h(globalizing)g
(of)f(a)i(guilty)e(stack)i(v)o(ariable)e(whene)o(v)o(er)h(needed.)18
b(Namely)m(,)257 2335 y(the)d FB(\002rst)f FS(set)p 517
2335 V 18 w(value)g FP(\(resp.,)i FS(unify)p 989 2335
V 17 w(value)p FP(\))e(instruction)f(of)i(the)f(clause)h(to)f(be)h(per)
o(-)257 2395 y(formed)c(on)h(a)g(v)o(ariable)g(which)f(is)i(not)e
(guaranteed)h(to)g(lead)g(to)g(the)f(heap)i(\()p FB(i.e)o(.)p
FP(,)g(meeting)e(the)257 2456 y(e)o(xplicit)17 b(conditions)g
(described)g(in)g(the)g(pre)o(vious)f(paragraph\),)i(must)f(be)g
(replaced)g(with)257 2516 y(a)h(ne)o(w)g(one,)i FS(set)p
594 2516 V 17 w(local)p 761 2516 V 18 w(value)d FP(\(resp.,)j
FS(unify)p 1240 2516 V 17 w(local)p 1407 2516 V 17 w(value)p
FP(,)g(beha)o(ving)d(like)258 2640 y FN(P)o FL(A)q(G)r(E)c
FN(6)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 69 84
69 83 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FS(unify)p 224 289 15 2 v 17
w(value)h FP(in)g FS(read)f FP(mode\),)i(which)f(tests)h(whether)f(the)
g(dereferenced)f(v)o(alue)h(re-)71 349 y(sides)i(in)f(the)h(heap)g(or)f
(in)h(the)f(stack.)30 b(If)16 b(the)g(dereferenced)g(v)o(alue)h(is)g
(an)f(unbound)g(heap)71 409 y(address,)h(it)f(beha)o(v)o(es)g(as)g
FS(set)p 617 409 V 18 w(value)f FP(\(resp.,)j(as)e FS(unify)p
1149 409 V 17 w(value)g FP(in)f FS(write)g FP(mode\);)71
469 y FB(i.e)o(.)p FP(,)d(it)e(pushes)h(it)f(on)h(the)f(heap.)15
b(If)10 b(the)g(dereferenced)g(v)o(alue)g(is)h(an)f(unbound)g(stack)h
(address,)71 530 y(it)h(pushes)h(a)f(ne)o(w)h(unbound)e(heap)i(cell)f
(and)h(binds)f(the)g(stack)h(v)o(ariable)f(to)g(it.)k(Explicitly)m(,)
1643 511 y FL(7)223 637 y FS(set)p 316 637 V 17 w(local)p
483 637 V 18 w(value)d(V)p FD(n)h FK(\021)34 b FB(addr)14
b FK( )g FB(der)n(ef)7 b FC(\()p FS(V)p FD(n)p FC(\);)807
697 y FF(if)13 b FB(addr)25 b FD(<)g FS(H)849 757 y FF(then)13
b FS(HEAP[H)o(])h FK( )f FS(HEAP[)p FB(addr)p FS(])849
817 y FF(else)890 878 y(begin)932 938 y FS(HEAP[H)o(])h
FK( )f(h)c Fx(REF)h FD(;)h FS(H)d FK(i)p FC(;)932 998
y FB(bind)q FC(\()p FB(addr)p FD(;)g FS(H)o FC(\))890
1058 y FF(end)p FC(;)807 1118 y FS(H)14 b FK( )f FS(H)e
FC(+)g(1;)71 1233 y FP(An)19 b(e)o(xplicit)h(e)o(xpression)g(for)f
FS(unify)p 783 1233 V 17 w(local)p 950 1233 V 17 w(value)h
FP(is)g(readily)f(deri)o(v)o(ed)g(from)g(the)71 1293
y(de\002nition)c(of)g FS(unify)p 488 1293 V 17 w(value)h
FP(\(gi)o(v)o(en)f(in)h(Figure)f(2.6,)i(on)f(P)o(age)g(18\))g(by)f
(replacing)h(the)71 1354 y(body)c(of)g(the)g FS(write)g
FP(mode)g(case)h(with)f(the)g(abo)o(v)o(e)h(code.)71
1430 y(If)d FS(set)p 208 1430 V 18 w(local)p 376 1430
V 17 w(value)j(X)p FC(2)f FP(replaces)f FS(set)p 886
1430 V 18 w(value)i(X)p FC(2)f FP(in)f(the)g(e)o(xample)h(abo)o(v)o(e,)
g(it)f(will)71 1491 y(realize)j(that)g(the)h(v)o(alue)f(of)h
FS(X)p FC(2)g FP(is)g(a)f(stack)h(address)h(and)e(then)h(bind)f(it)g
(to)h(a)g(ne)o(w)f(unbound)71 1551 y(cell)j(on)g(the)g(heap.)31
b(This)18 b(maintains)f(a)h(stack-to-heap)f(reference,)h(and)f(W)-6
b(AM)18 b(Binding)71 1611 y(Rule)12 b(2)g(is)h(respected.)71
1688 y(As)k(a)f(\002nal)h(observ)o(ation,)g(let)f(us)h(consider)g(the)f
(particular)g(case)h(where)f(an)h(unsafe)g(v)o(ari-)71
1748 y(able)d FS(Y)p FD(n)g FP(occurs)g(both)f(as)i(an)f(ar)o(gument)f
(of)h(its)g(last)g(goal)g(and)g(also)g(nested)g(in)g(a)g(structure)71
1808 y(some)o(where)d(in)h(the)h(same)f(clause.)17 b(Then,)c(it)f(is)g
(only)g(necessary)h(to)f(make)g(the)g(appropriate)71
1868 y(change)d(to)g(whiche)o(v)o(er)g(instruction)g(comes)h(\002rst)f
(between)g(the)g(last)h(goal')m(s)f FS(put)p 1476 1868
V 18 w(value)k(Y)p FD(n;)8 b FS(A)p FD(i)p FP(')m(s)71
1928 y(and)13 b(the)g(clause')m(s)g FS(set)p 493 1928
V 18 w(value)g(Y)p FD(n)p FP(')m(s)h(\(resp.,)f FS(unify)p
1067 1928 V 18 w(value)g(Y)p FD(n)p FP(')m(s\).)18 b(This)13
b(is)h(because)71 1989 y(changing)c(the)h(\002rst)f(such)i(instruction)
e(will)g(ensure)h(that)g(the)g(v)o(ariable)f(is)h(safely)g(globalized)
71 2049 y(for)g(the)h(other)n(,)h(making)f(the)g(run-time)f(check)i
(unnecessary)f(at)h(that)f(later)g(point.)71 2236 y FA(5.9)71
b(V)-7 b(ariable)17 b(classi\002cation)g(r)o(e)o(visited)71
2365 y FP(At)d(this)h(point,)g(the)f(time)g(is)h(ripe)f(for)g(setting)g
(things)h(right)f(about)g(the)g(de\002nition)g(of)g(tem-)71
2425 y(porary)k(and)i(permanent)f(v)o(ariables.)38 b(In)19
b(our)g(opinion,)j(the)d(way)h(the)g(W)-6 b(AM)20 b(classi\002es)p
71 2470 648 2 v 129 2501 a Fz(7)145 2516 y FN(See)12
b(F)o(ootnote)d(5)h(at)g(the)h(bottom)e(of)h(P)o(age)h(66.)71
2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)f FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(6)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 70 85
70 84 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(v)o(ariables)g(is)h(perhaps)f(the)g(most)h(puzzling)f(item)g(to)g
(justify)f(for)h(the)g(learning)g(reader)m(.)21 b(In-)257
349 y(deed,)d(although)e(the)g(de\002nition)g(we)g(ha)o(v)o(e)h(used)g
(thus)f(far)f(is)i(correct)e(as)i(gi)o(v)o(en,)h(it)e(is)h(not)257
409 y(e)o(xactly)c(that)e(gi)o(v)o(en)h(and)g(used)h(in)e([W)l(ar83])g
(or)h([W)l(ar88)o(].)j(W)l(e)e(presently)e(analyze)i(this)f(dis-)257
469 y(crepanc)o(y)17 b(and)f(discuss)i(in)e(particular)f(the)i(moti)o
(v)o(ation,)f(as)h(well)f(as)h(some)g(rather)e(subtle)257
530 y(consequences,)f(of)e(the)g(original)g(W)-6 b(AM)13
b(designer')m(s)f(de\002nition.)257 606 y(In)d(fact,)h(our)f
(de\002nition)f(and)i(justi\002cation)e(of)h(v)o(ariable)g
(classi\002cation)h(take)f(Da)o(vid)g(H.)h(D.)g(W)l(ar)o(-)257
667 y(ren')m(s)j(actual)h(conception)f(back)g(to)g(front.)k(In)c(his)g
(vie)o(w)m(,)h(a)f(permanent)g(v)o(ariable)f(is)i(simply)257
727 y(a)g(con)n(v)o(entional)f(local)g(v)o(ariable.)18
b(Therefore,)c FB(all)f FP(v)o(ariables)g(appearing)g(in)g(a)g(clause)h
(are)f FB(a)257 787 y(priori)h FP(permanent)f(v)o(ariables;)h
FB(i.e)o(.)p FP(,)i(local)e(v)o(ariables)f(to)h(be)g(allocated)f(on)h
(the)f(stack.)21 b(This)257 847 y(is)12 b(because)f(a)g(local)g(v)o
(ariable')m(s)f(lifetime)g(ought)h(to)g(be)g(that)f(of)h(the)g(acti)o
(v)o(ation)f(of)g(the)h(clause)257 907 y(in)17 b(which)g(it)f(occurs.)
29 b(On)17 b(the)f(other)h(hand,)h(allocating)e(a)h(v)o(ariable)f(on)h
(the)f(heap)h(would)257 967 y(entail)d(making)g(it)g(a)h(global)f(v)o
(ariable)g(insofar)f(as)i(computation)e(does)i(not)f(backtrack)g(to)g
(a)257 1028 y(pre)o(vious)f(choice)g(point.)k(Ho)o(we)o(v)o(er)n(,)c
(some)g(v)o(ariables)f(in)h(a)g(clause)h(need)f(not)f(be)h(allocated)
257 1088 y(on)d(the)h(stack,)g(either)f(because)h(the)o(y)f(are)g
(initialized)g(with)g(pre)o(viously)f(e)o(xisting)i(data)f(or)g(be-)257
1148 y(cause)h(the)o(y)g(must)f(be)h(part)f(of)g(a)g(structure)g(on)g
(the)h(heap.)k(Ob)o(viously)m(,)c(these)g(considerations)257
1208 y(call)i(for)e(a)i(careful)f(reformulation)e(of)i(v)o(ariable)g
(classi\002cation.)257 1285 y(W)l(arren')m(s)g(original)g(de\002nition)
f(is)i(as)g(follo)o(ws:)379 1402 y FF(W)m(arr)o(en')n(s)g(variable)e
(classi\002cation)24 b FB(A)13 b FP(temporary)f(v)o(ariable)g
FB(is)g(one)h(whic)o(h)379 1462 y(does)f(not)f(occur)g(in)g(mor)n(e)h
(than)f(one)g(body)g(goal)g(\(counting)f(the)h(head)g(as)g(part)379
1523 y(of)g(the)g(\002rst)g(body)f(goal\))g FP(and)p
812 1530 72 2 v 11 w FB(\002rst)h(occurs)g(in)g(the)g(head,)g(or)g(in)g
(a)g(structur)n(e,)h(or)379 1583 y(in)h(the)f(last)g(goal.)k(A)d
FP(permanent)e(v)o(ariable)h FB(is)h(one)f(whic)o(h)h(is)f(not)h
(tempor)o(ary)m(.)257 1700 y FP(First)h(of)g(all,)h(let)f(us)h(observ)o
(e)f(that)h(both)e(our)h(and)h(W)l(arren')m(s)e(classi\002cation)i
(consider)f(per)o(-)257 1760 y(manent)c(an)o(y)h(v)o(ariable)f
(occurring)f(in)h(more)g(than)g(one)g(body)g(goal.)15
b(Ho)o(we)o(v)o(er)n(,)c(whereas)f(this)257 1821 y(criterion)k(is)h(a)g
(necessary)g(and)f(suf)o(\002cient)g(characterization)g(of)g(permanent)
g(v)o(ariables)g(by)257 1881 y(our)d(de\002nition,)g(it)f(is)i(only)e
(a)h(suf)o(\002cient)g(one)g(for)f(W)l(arren')m(s.)15
b(No)o(w)m(,)c(from)f(our)g(presentation,)257 1941 y(let)j(us)f(try)g
(to)g(reco)o(v)o(er)h(and)f(justify)g(W)l(arren')m(s)g(v)o(ariable)g
(classi\002cation.)257 2018 y(The)19 b(point)e(is)h(to)g(restrict)f
(our)g(de\002nition)g(of)g(temporary)g(v)o(ariables)h(\(and)f(thus)h
(broaden)257 2078 y(that)f(of)g(permanent)f(v)o(ariables\))g(to)h
(minimize)f(heap)h(allocation,)i(and)e(consequently)f(the)257
2138 y(size)k(of)e(global)h(data.)35 b(As)19 b(we)g(sa)o(w)m(,)i(local)
e(v)o(ariables)f(are)h(quite)g(thriftily)e(managed)h(by)257
2198 y(en)n(vironment)f(trimming)g(and)h(LCO,)h(and)f(therefore)f(of)o
(fer)g(a)h(preferable)f(alternati)o(v)o(e)h(to)257 2258
y FS(X)13 b FP(re)o(gisters)h(whene)o(v)o(er)e(possible.)19
b(Therefore,)13 b(in)g(order)f(to)h(abide)g(by)g(W)l(arren')m(s)g(vie)o
(w)m(,)g(we)257 2319 y(must)e(completely)f(change)g(our)g(perspecti)o
(v)o(e)h(and)f(consider)g(that)h FB(a)f(variable)h(is)f(permanent)257
2379 y(by)j(default)f(unless)h(it)f(is)g(r)n(equir)n(ed)i(to)e(be)g(e)o
(xplicitly)h(allocated)e(on)i(the)f(heap.)257 2456 y
FP(The)k(question)f(no)o(w)m(,)g(is:)21 b(When)15 b(does)g(a)g(non-v)o
(oid)f(v)o(ariable)g(originally)g(deemed)h(tempo-)257
2516 y(rary)c(in)g(our)f(de\002nition)g(\()p FB(i.e)o(.)p
FP(,)j(occurring)d(in)h(no)g(more)f(than)h(one)g(body)g(goal\))g
FB(r)n(eally)g FP(require)258 2640 y FN(P)o FL(A)q(G)r(E)i
FN(7)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 71 86
71 85 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(to)e(be)h(systematically)g(allocated)f(in)h
(the)f(heap?)17 b(Memory)12 b(allocation)g(for)g(a)h(v)o(ariable)f
(hap-)71 349 y(pens,)h(if)g(at)g(all,)g(at)g(its)g(\002rst)f
(occurrence)g(in)h(the)g(clause.)18 b(Let)13 b(us)g(no)o(w)f(analyze)i
(all)e(possible)71 409 y(situations)g(of)g(\002rst)g(occurrence.)71
486 y(If)i(the)h(\002rst)f(occurrence)h(is)g(in)g(the)g(head)g(of)f
(the)h(rule,)h(then)e(the)h(v)o(ariable)f(is)i(either)e(an)h(ar)o(-)71
546 y(gument,)e(and)h(therefore)e(bound)h(to)g(an)h(already)f(e)o
(xisting)g(cell)h(on)f(the)g(heap,)i(or)e(deeper)g(in)71
606 y(the)g(stack;)h(or)n(,)g(it)f(is)h(nested)f(in)h(a)f(structure)g
(and)g(hence)h(will)f(necessarily)h(be)f(allocated)h(on)71
667 y(the)d(heap)h(by)g(the)f(uni\002cation)g(instructions.)k(This)e
(is)f(the)f(case)i(because)f(the)g(con)n(v)o(ention)f(is)71
727 y(that)i(a)h(functor)e(cell)i(on)f(the)h(heap)f(must)h(be)g(follo)o
(wed)e(by)i(as)g(man)o(y)f(cells)h(as)g(its)g(arity)f(dic-)71
787 y(tates.)i(As)d(a)f(result,)g(a)g(head)g(v)o(ariable)f(ne)o(v)o(er)
h(requires)f(stack)h(space)h(allocation.)j(Therefore,)71
847 y(it)g(is)g(suf)o(\002cient)g(to)g(manipulate)g(it)g(through)g(an)g
FS(X)h FP(re)o(gister;)g FB(i.e)o(.)p FP(,)i(treat)d(it)g(as)h(a)g
(temporary)71 907 y(v)o(ariable.)71 984 y(F)o(or)9 b(the)h(same)h
(reasons,)g(if)f(the)g(\002rst)g(occurrence)g(is)g(nested)h(inside)f(a)
g(structure)g(in)g(the)g(body)m(,)71 1044 y(then)i(a)h(heap)g(cell)f
(will)g(necessarily)h(be)g(allocated)g(for)e(it)i(by)f(the)h
(uni\002cation)f(instructions.)71 1104 y(So)g(it)g(might)f(as)i(well)g
(be)f(treated)g(as)h(a)g(temporary)e(v)o(ariable,)h(sa)o(ving)g(a)h
(stack)g(slot.)71 1181 y(Another)d(clear)h(case)g(is)h(when)f(the)g
(\002rst)f(occurrence)h(of)f(the)h(v)o(ariable)g(is)g(as)g(an)g(ar)o
(gument)g(in)71 1241 y(the)e FB(last)h FP(body)f(goal.)15
b(Then)9 b(indeed,)i(since)f(performing)e(LCO)i(will)f(require)f
(systematically)71 1302 y(globalizing)j(it)h(an)o(yway)m(,)h(it)f
(makes)g(more)g(sense)h(to)f(treat)g(it)h(as)f(a)h(temporary)e(v)o
(ariable.)71 1378 y(The)20 b(fore)o(going)e(situations)i(co)o(v)o(er)f
(all)h(those)f(in)g(W)l(arren')m(s)h(de\002nition)e(of)h(a)h
FB(tempor)o(ary)71 1439 y FP(v)o(ariable.)d(Therefore,)d(the)f
(criteria)f(for)g(that)h(part)g(of)g(the)g(de\002nition)f(which)i
(characterizes)71 1499 y(a)f(temporary)e(v)o(ariable)h(are)h
(justi\002ably)f(sound.)18 b(But)13 b(is)g(this)g(true)f(for)g(W)l
(arren')m(s)h(de\002nition)71 1559 y(of)j(a)h FB(permanent)g
FP(v)o(ariable?)28 b(Indeed,)17 b(there)g(is)g(one)g(last)g(situation)f
(not)g(co)o(v)o(ered)h(by)g(our)71 1619 y(fore)o(going)10
b(analysis;)i(namely)m(,)g(the)f(case)i(of)e(a)g(v)o(ariable)g
(occurring)g(only)g(in)g(one)h(body)f(goal)71 1679 y(which)h(is)g
(neither)g(the)g(\002rst)g(nor)g(the)g(last)h(goal.)i(As)e(it)f(turns)g
(out,)h(unfortunately)m(,)e FB(W)-5 b(arr)n(en')n(s)71
1740 y(variable)15 b(classi\002cation)h(is)f(inconsistent)32
b(with)15 b(en)n(vir)n(onment)g(trimming,)h(e)o(ven)g(with)g(the)71
1800 y(setup)c(of)g(run-time)g(c)o(hec)o(ks)i(that)e(we)h(have)f(e)o
(xplained)g(in)g(the)h(pr)n(e)o(vious)g(sections.)71
1877 y FP(Let)19 b(us)h(ar)o(gue)f(with)g(a)h(speci\002c)f(e)o(xample.)
850 1858 y FL(8)906 1877 y FP(Consider)g(the)g(rule)g(`)p
FD(a)26 b FS(:-)g FD(b)p FC(\()p FD(X)q(;)8 b(X)t FC(\))p
FD(;)g(c:)p FP('.)71 1937 y(According)17 b(to)g(our)g(de\002nition,)i
FD(X)j FP(is)c(treated)f(as)i(a)f(temporary)e(v)o(ariable.)31
b(This)18 b(results)71 1997 y(in)f(the)g(compiled)f(code)i(sho)o(wn)f
(as)g(Figure)g(5.12,)i(where)d FD(X)22 b FP(is)c(correctly)e(handled)h
(as)g(a)71 2057 y(temporary)12 b(v)o(ariable,)h(admittedly)f(at)i(the)f
(e)o(xpense)h(of)f(systematically)g(allocating)g(a)g(heap)71
2117 y(slot)f(for)g(it.)71 2194 y(On)f(the)h(other)f(hand,)h(according)
g(to)f(W)l(arren')m(s)h(v)o(ariable)f(classi\002cation,)h(the)g(v)o
(ariable)f FD(X)16 b FP(is)71 2254 y(a)11 b FB(permanent)h(variable)p
FP(.)j(Therefore,)c(follo)o(wing)f(the)i(compilation)e(rules)h
(described)g(in)h(the)71 2315 y(pre)o(vious)f(sections,)i(the)f
(generated)g(code)g(would)f(be)h(that)g(sho)o(wn)g(in)g(Figure)f(5.13.)
47 b(No)o(w)m(,)71 2375 y(observ)o(e)10 b(what)f(happens)i(when)e
(calling)h FD(a)g FP(with)f(the)h(instruction)f(sequence)h(of)g(Figure)
f(5.13.)p 71 2420 648 2 v 129 2451 a Fz(8)145 2466 y
FN(The)h(lame)g(beha)o(vior)f(of)g(this)f(e)o(xample)i(was)g(pointed)e
(out)g(to)h(the)g(author)f(by)h(Damian)g(Chu)g([Chu90)n(])h(and)71
2516 y(Michael)g(Hanus)g([Han90].)71 2640 y(Copyright)260
2639 y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(7)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 72 87
72 86 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 527 528 1080
3 v 569 626 a Fu(a=)p Fw(0)41 b(:)g FQ(allocate)275 b(\045)41
b Fu(a)13 b FQ(:-)734 682 y(put)p 818 682 14 2 v 17 w(variable)i(A)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)145 b Fu(b)p
Fw(\()p Fu(X)q(;)8 b(X)734 739 y FQ(call)14 b Fu(b=)p
Fw(2)p Fu(;)8 b Fw(0)259 b FQ(\045)283 b Fw(\))p Fu(;)734
795 y FQ(deallocate)221 b(\045)145 b Fu(c)734 852 y FQ(execute)14
b Fu(c=)p Fw(0)222 b FQ(\045)165 b Fu(:)p 527 927 1080
3 v 462 1078 a FP(Figure)12 b(5.12:)j(Code)e(for)e FD(a)j
FS(:-)f FD(b)p FC(\()p FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)p
FP(,)13 b(by)g(our)e(classi\002cation)p 478 1659 1178
3 v 520 1757 a Fu(a=)p Fw(0)41 b(:)g FQ(allocate)373
b(\045)42 b Fu(a)12 b FQ(:-)685 1813 y(put)p 769 1813
14 2 v 17 w(variable)j(Y)p Fw(1)p Fu(;)8 b FQ(A)p Fw(1)139
b FQ(\045)145 b Fu(b)p Fw(\()p Fu(X)q(;)685 1870 y FQ(put)p
769 1870 V 17 w(unsafe)p 948 1870 V 18 w(value)14 b(Y)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(2)41 b FQ(\045)234 b Fu(X)685
1926 y FQ(call)14 b Fu(b=)p Fw(2)p Fu(;)8 b Fw(0)357
b FQ(\045)283 b Fw(\))p Fu(;)685 1982 y FQ(deallocate)319
b(\045)145 b Fu(c)685 2039 y FQ(execute)14 b Fu(c=)p
Fw(0)320 b FQ(\045)165 b Fu(:)p 478 2114 1178 3 v 406
2266 a FP(Figure)12 b(5.13:)j(Code)e(for)e FD(a)j FS(:-)f
FD(b)p FC(\()p FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)p FP(,)13
b(by)f(W)l(arren')m(s)g(classi\002cation)258 2640 y FN(P)o
FL(A)q(G)r(E)h FN(7)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 73 88
73 87 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 340 291 1080 3 v 382 388 a Fu(a=)p Fw(0)41
b(:)g FQ(allocate)275 b(\045)42 b Fu(a)12 b FQ(:-)547
445 y(put)p 631 445 14 2 v 17 w(variable)j(Y)p Fw(1)p
Fu(;)8 b FQ(A)p Fw(1)41 b FQ(\045)145 b Fu(b)p Fw(\()p
Fu(X)q(;)547 501 y FQ(put)p 631 501 V 17 w(value)14 b(Y)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(2)123 b FQ(\045)234 b Fu(X)547
558 y FQ(call)14 b Fu(b=)p Fw(2)p Fu(;)8 b Fw(1)259 b
FQ(\045)283 b Fw(\))p Fu(;)547 614 y FQ(deallocate)221
b(\045)145 b Fu(c)547 670 y FQ(execute)15 b Fu(c=)p Fw(0)221
b FQ(\045)165 b Fu(:)p 340 746 1080 3 v 359 897 a FP(Figure)12
b(5.14:)j(Delayed)d(trimming)f(for)h FD(a)h FS(:-)h FD(b)p
FC(\()p FD(X)q(;)8 b(X)t FC(\))p FD(;)g(c:)71 1041 y
FP(A)i(stack)h(slot)g(is)g(allocated)g(for)e FS(Y)p FC(1)q
FP(,)i(then)g(re)o(gister)f FS(A)p FC(1)h FP(is)g(made)g(to)f(point)g
(to)h(that)f(slot.)16 b(Then,)71 1101 y(a)10 b(run-time)f(check)i(is)f
(carried)g(out)g(because)h FS(Y)p FC(1)g FP(is)f(unsafe)h(and)f(it)g
(is)h(found)e(that)i FS(Y)p FC(1)f FP(must)g(be)71 1161
y(globalized.)18 b(This)c(is)f(done,)h(making)f(both)g
FS(Y)p FC(1)h FP(and)f FS(A)p FC(2)h FP(point)f(to)g(a)g(ne)o(w)h(heap)
f(cell.)19 b(Then,)71 1222 y FD(b=)p FC(2)13 b FP(is)g(called)f(after)g
(trimming)f FS(Y)p FC(1)i FP(out)g(of)f(the)g(en)n(vironment.)k(Ho)o
(we)o(v)o(er)n(,)c FB(r)n(e)n(gister)i FS(A)p FC(1)f
FB(still)71 1282 y(points)f(to)g(the)g(discar)n(ded)h(slot!)i
FP(It)d(is)g(therefore)g(clear)g(that)g(for)f(W)l(arren')m(s)h
(classi\002cation)h(to)71 1342 y(be)f(correct,)g(something)g(must)h(be)
f(done)g(to)h(pre)o(v)o(ent)e(this)i(particular)e(ailment.)71
1419 y(As)20 b(far)f(as)i(this)f(author)f(could)h(read,)i(it)e(has)h
(not)e(been)i(e)o(xplained)f(an)o(ywhere)g(\(includ-)71
1479 y(ing)c(in)h([W)l(ar83)o(,)g(W)l(ar88]\))f(ho)o(w)g(to)h(pre)o(v)o
(ent)f(incorrect)g(code)h(as)g(that)g(of)f(Figure)g(5.13)h(to)71
1539 y(be)h(generated)g(because)h(of)e(W)l(arren')m(s)h
(classi\002cation,)j(let)d(alone)g(what)g(correct)f(code)i(to)71
1599 y(produce)c(with)h(that)h(classi\002cation.)28 b(Upon)16
b(pri)o(v)o(ate)f(inquiry)m(,)h(this)h(is)f(what)h(W)l(arren)f(pro-)71
1660 y(poses)d([W)l(ar90)o(]:)193 1772 y FR(\223The)e(general)h
(principle)f(is)g(that)g(one)h(should)e(make)i(v)o(ariables)g
(permanent)f(if)h(at)g(all)193 1828 y(possible,)h(and)h(use)h
FQ(put)p 608 1828 14 2 v 17 w(variable)g(X)p Fu(n;)8
b FQ(A)p Fu(i)14 b FR(only)f(as)i(a)g(last)e(resort.)24
b(The)14 b(prob-)193 1885 y(lem)j(is)g(what)f(to)h(do)g(about)f(v)o
(ariables)g(which)h(occur)g(in)g(only)f(one)h(goal.)31
b(If)18 b(it)e(is)193 1941 y(the)h(last)g(call,)j(one)e(has)g(no)f
(\(real\))i(option)d(b)o(ut)h(to)h(globalise)e(the)i(v)o(ariable)f
(using)193 1997 y FQ(put)p 277 1997 V 17 w(variable)d(X)p
Fu(n)q(;)8 b FQ(A)p Fu(i)o FR(.)18 b(If)12 b(it)g(is)g(other)f(than)h
(the)g(last)f(call,)i(then)f(one)g(can)g(either)193 2054
y(globalise)d(the)h(v)o(ariable)h(in)f(the)h(same)g(way)m(,)g
FI(or)g FR(a)o(v)o(oid)f(trimming)g(the)h(v)o(ariable)f(at)h(the)193
2110 y(immediately)f(follo)o(wing)g(call,)h(b)o(ut)g(rather)h(trim)f
(it)g(at)g(the)g(ne)o(xt)g(call,)h(by)f(which)g(time)193
2167 y(it)e(is)g(certainly)g(safe)h(to)f(do)h(so)f(\(pro)o(vided)g(v)o
(ariable-v)o(ariable)f(bindings)g(always)g(point)193
2223 y(to)h(the)i(`last-to-die')e(v)o(ariable)h(and)g(the)g(v)o
(ariable)g(to)g(be)g(trimmed)h(is)f(allocated)g(as)g(the)193
2280 y(`\002rst)h(to)f(die')i(in)e(the)h(ne)o(xt)g(call\).)m(\224)71
2395 y FP(W)l(arren)19 b(goes)i(on)f(to)g(illustrate)g(ho)o(w)m(,)i
(for)e(our)f(speci\002c)i(e)o(xample,)i(delayed)d(trimming)71
2456 y(would)c(repair)h(the)g(code)h(of)f(Figure)g(5.13)g(to)h(that)f
(of)g(Figure)g(5.14)52 b(where)18 b FS(Y)p FC(1)f FP(is)h(kept)71
2516 y(in)11 b(the)g(en)n(vironment)g(until)g(the)g(time)h(when)f(e)o
(x)o(ecution)h(returns)f(from)f FD(b=)p FC(2)p FP(,)j(at)f(which)f
(point)71 2640 y FN(Copyright)260 2639 y(c)249 2640 y
FM(\015)f FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o
FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(7)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 74 89
74 88 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 478 291 1178
3 v 520 388 a Fu(a=)p Fw(0)41 b(:)g FQ(allocate)373 b(\045)42
b Fu(a)12 b FQ(:-)685 445 y(put)p 769 445 14 2 v 17 w(variable)j(Y)p
Fw(1)p Fu(;)8 b FQ(A)p Fw(1)139 b FQ(\045)145 b Fu(b)p
Fw(\()p Fu(X)q(;)685 501 y FQ(put)p 769 501 V 17 w(unsafe)p
948 501 V 18 w(value)14 b(Y)p Fw(1)p Fu(;)8 b FQ(A)p
Fw(2)41 b FQ(\045)234 b Fu(X)685 558 y FQ(call)14 b Fu(b=)p
Fw(2)p Fu(;)8 b Fw(1)357 b FQ(\045)283 b Fw(\))p Fu(;)685
614 y FQ(deallocate)319 b(\045)145 b Fu(c)685 670 y FQ(execute)14
b Fu(c=)p Fw(0)320 b FQ(\045)165 b Fu(:)p 478 746 1178
3 v 469 897 a FP(Figure)12 b(5.15:)j(Useless)f(delayed)e(trimming)f
(for)h FD(a)h FS(:-)h FD(b)p FC(\()p FD(X)q(;)8 b(X)t
FC(\))p FD(;)g(c:)257 1053 y FP(it)13 b(is)f(discarded.)546
1034 y FL(9)257 1129 y FP(Some)20 b(comments)h(are)f(in)g(order)g(re)o
(garding)f(this)h(\002x.)40 b(First,)22 b(W)l(arren')m(s)e(last)h
(\(cryptic\))257 1190 y(parenthetical)16 b(comment)f(simply)h(recalls)f
(the)h(pro)o(viso)g(that)g(is)g(already)f(ensured)h(by)g(our)257
1250 y(v)o(ariable-v)o(ariable)9 b(binding)h(con)n(v)o(ention)g(from)g
(higher)g(to)g(lo)o(wer)g(addresses)h(\(W)-6 b(AM)11
b(Bind-)257 1310 y(ing)g(Rule)g(1\))g(and)g(the)g(con)n(v)o(ention)f
(set)i(up)e(for)g(en)n(vironment)g(trimming)g(allocating)g(perma-)257
1370 y(nent)i(v)o(ariables)f(in)g(the)g(en)n(vironment)f(so)i(as)g(to)f
(put)g(the)h(\223last-to-die\224)e(\002rst)h(\()p FB(i.e)o(.)p
FP(,)i(at)f(smaller)257 1430 y(addresses\)\227as)i(e)o(xplained)e(in)g
(Section)g(5.7.)257 1507 y(Second,)g(one)e(must)h(con)n(vince)f(one')m
(s)h(self)g(that)f(delayed)h(trimming)e(is)i(indeed)f(safe)h(so)g(as)h
(to)257 1567 y(warrant)c(the)i(simpler)f FS(put)p 741
1567 15 2 v 17 w(value)14 b(Y)p FC(1)p FD(;)8 b FS(A)p
FC(2)h FP(instead)h(of)f(the)g(e)o(xpected)h FS(put)p
1609 1567 V 18 w(unsafe)p 1807 1567 V 17 w(value)j(Y)p
FC(1)p FD(;)8 b FS(A)p FC(2)q FP(,)257 1627 y(as)20 b(prescribed)e(for)
h(unsafe)g(v)o(ariables.)35 b(F)o(or)19 b(clearly)m(,)h(if)f(rather)f
(than)h(the)g(code)g(of)f(Fig-)257 1688 y(ure)c(5.14,)h(we)f(had)f(to)h
(generate)f(that)h(sho)o(wn)g(in)f(Figure)g(5.15,)43
b(then)14 b(the)g(whole)f(compli-)257 1748 y(cation)j(would)e(be)h
(useless.)26 b(Indeed,)17 b FS(Y)p FC(1)e FP(would)g(still)g(be)h
(globalized)e(on)i(the)f(heap,)i(with)257 1808 y(the)f(additional)e
(penalty)h(of)g(the)g(untrimmed)f(stack)i(slot\227not)f(to)g(mention)g
(the)g(run-time)257 1868 y(check.)h(The)11 b(simpler)g(code)g(of)f
(Figure)g(5.12)h(would)f(thus)h(be)g(clearly)g(superior)m(.)j
(Therefore,)257 1928 y(for)h(the)g(code)g(in)g(Figure)f(5.14)h(to)g(be)
g(of)g(an)o(y)g(v)o(alue,)h(it)f(must)g(be)g(guaranteed)g(that)g
(delay-)257 1989 y(ing)i(trimming)f FS(Y)p FC(1)h FP(makes)g(it)g(no)g
(longer)f(unsafe,)j(e)o(v)o(en)e(though)g(it)f(has)i(been)f
(initialized)257 2049 y(with)e FS(put)p 454 2049 V 17
w(variable)e(Y)p FC(1)p FD(;)8 b FS(A)p FC(1)q FP(.)22
b(Such)14 b(is)h(the)g(case,)h(of)e(course,)i(as)f(the)f(unsafety)h(of)
f FS(Y)p FC(1)257 2109 y FP(would)f(only)h(be)f(caused)i(precisely)e
(by)h(trimming)e(it)i(by)f(the)h(call)g(to)f(its)h(last)g(goal.)20
b(That)14 b(it)257 2169 y(is)f(safe)f(to)h(trim)e(it)h(at)g(the)g
(follo)o(wing)f(call)i(is)f(clear)g(under)g(the)g(pro)o(viso)g(of)g
(our)g(binding)f(and)257 2229 y(stack-allocation)h(con)n(v)o(entions.)
257 2306 y(In)20 b(vie)o(w)g(of)g(the)g(fore)o(going)g(considerations,)
i(the)f(reader)f(may)g(no)o(w)g(understand)g(why)p 257
2371 648 2 v 315 2401 a Fz(9)332 2416 y FN(This)h(solution)f(using)g
(delayed)h(trimming)f(was)i(also)f(pointed)f(out)h(to)f(this)h(author)f
(by)h(Michael)257 2466 y(Hanus)11 b([Han90])g(who)f(apparently)g
(\002gured)h(it)f(out)g(for)g(himself,)h(probably)f(like)f(man)o(y)j
(others)e(who)h(worked)257 2516 y(out)f(a)h(W)-5 b(AM)10
b(implementation.)258 2640 y(P)o FL(A)q(G)r(E)j FN(7)r(4)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 75 90
75 89 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(we)21 b(did)g(not)h(start)f(out)g(with)g(W)
l(arren')m(s)h(de\002nition)e(for)h(v)o(ariable)g(classi\002cation.)43
b(Our)71 349 y(reasons)19 b(are)g(quite)g(deliberate.)36
b(Firstly)m(,)20 b(in)f(the)h(gradual)e(construction)h(of)g(our)f
(partial)71 409 y(machines,)23 b(W)l(arren')m(s)d(de\002nition)g(is)g
(unjusti\002able)g(before)g(the)h(en)n(vironment)e(stack)i(or)71
469 y(LCO)15 b(are)g(considered.)22 b(Secondly)m(,)15
b(although)g(historically)m(,)f(Da)o(vid)h(H.)g(D.)g(W)l(arren)g(made)
71 530 y FS(put)p 164 530 15 2 v 17 w(variable)e(X)p
FD(n;)8 b FS(A)p FD(i)14 b FP(systematically)h(allocate)f(a)h(heap)g
(cell)f(as)h(a)g(patch)g(to)f(accom-)71 590 y(modate)20
b(LCO,)349 572 y FL(10)406 590 y FP(this)h(instruction)f(can)h(be)g
(justi\002ed)g(otherwise,)i(as)e(we)g(ha)o(v)o(e)h(indeed)71
650 y(sho)o(wn,)13 b(as)g(e)o(v)o(olv)o(ed)f(from)g(the)g(simple)h
(uni\002cation)f(machine)g FK(M)1242 657 y FE(0)1262
650 y FP(.)k(Lastly)m(,)e(we)f(fa)o(v)o(or)e(our)71 710
y FB(a)k(posteriori)i FP(approach)e(rather)g(than)h(W)l(arren')m(s)f
(since)i(starting)e(with)g(a)h(suboptimal,)h(b)o(ut)71
770 y(simpler)10 b(to)i(understand,)f(v)o(ariable)g(classi\002cation)h
(constitutes)f(a)h(greater)f(tutorial)f(v)o(alue)h(as)71
830 y(it)k(focuses)i(the)f(reader')m(s)g(attention)f(on)h(mechanisms)g
(that)g(are)g(not)g(af)o(fected)f(by)h(the)g(\002ne)71
891 y(points)c(of)g(this)g(issue.)71 967 y(In)j(conclusion,)j(although)
e(W)l(arren')m(s)g(v)o(ariable)f(classi\002cation)i(is)f(historically)g
(the)g(origi-)71 1028 y(nal)f(de\002nition)f(used)h(in)g(the)g(W)-6
b(AM)15 b(as)h(it)e(was)h(concei)o(v)o(ed,)i(and)e(can)g(be)g(e)o
(xplained)g(as)g(an)71 1088 y(optimization\227with)8
b(the)j(need)g(of)f(delayed)h(en)n(vironment)e(trimming)g(to)i(be)f
(correct\227this)71 1148 y(author)17 b(\002nds)g(his)h(o)o(wn)f(v)o
(ariable)g(classi\002cation)h(some)o(what)g(less)g(contri)o(v)o(ed)f
(and)h(surely)71 1208 y(much)12 b(easier)g(to)h(justify)m(.)71
1401 y FA(5.10)71 b(Indexing)71 1530 y FP(The)9 b(three)h(choice)f
(point)g(manipulation)f(instructions)h(impose)h(a)f(strictly)g
(sequential)g(search)71 1590 y(o)o(v)o(er)16 b(the)f(list)h(of)g
(clauses)h(making)e(up)h(a)g(de\002nition.)26 b(If)15
b(all)h(the)g(ar)o(guments)f(of)h(a)g(calling)71 1651
y(predicate)10 b(are)h(unbound)g(v)o(ariables,)g(then)g(there)g(is)h
(clearly)e(no)h(better)g(manner)f(to)h(proceed.)71 1711
y(On)h(the)h(other)f(hand,)h(when)g(some)g(of)g(the)f(ar)o(guments)h
(are)f(at)h(least)g(partially)f(instantiated,)71 1771
y(that)f(information)f(can)i(be)g(used)g(to)g(access)h(uni\002able)e
(clause)h(heads)g(more)g(directly)m(.)i(In)e(the)71 1831
y(cases)k(where)f(the)g(number)g(of)f(clauses)j(constituting)d(a)i
(de\002nition)e(is)h(lar)o(ge)g(\(as)h(is)f(not)g(so)p
71 1880 648 2 v 114 1911 a Fz(10)145 1926 y FN(He)c(states)g([W)m(ar89)
o(]:)193 2003 y(\223The)16 b Fn(put)p 368 2003 13 2 v
15 w(variable)11 b(X)p Fm(n)o(;)c Fn(A)p Fm(i)16 b FN(instruction)d(is)
i(a)h(kind)f(of)g(hack)h(which)f(e)o(xists)h(only)e(to)193
2053 y(take)d(care)i(of)f(the)g(problems)f(of)h(a)g(v)o(ariable)g(that)
f(is)h(bound)f(to)g(be)i(unsafe)f(at)g(LCO,)g(namely)193
2103 y(a)g(v)o(ariable)g(which)g(has)h(its)e(\002rst)h(occurrence)h(in)
f(the)g(last)g(call)g(and)g(isn')o(t)g(otherwise)f(bound.)193
2152 y(This)f(special)g(instruction)e(should)h(NO)n(T)i(be)g(used)f
(for)g(an)o(y)h(other)f(purpose.)193 2217 y(V)-5 b(ariables)11
b(occurring)f(only)f(as)j(ar)o(guments)e(to)h(the)f(last)g(goal)h
(cannot)f(be)h(treated)g(as)g([perma-)193 2267 y(nent)h(v)o(ariables])g
(since)h(the)o(y)g(are)g(bound)e(to)h(be)h(unsafe,)h(and)f(would)e
(necessarily)i(be)g(glob-)193 2317 y(alised)8 b(by)g(the)g
Fn(put)p 484 2317 V 15 w(unsafe)p 649 2317 V 14 w(value)j(Y)p
Fm(n;)c Fn(A)p Fm(i)h FN(instruction)e(if)i(the)o(y)g(were)h(treated)g
(this)e(way)m(.)193 2366 y(T)m(o)12 b(a)o(v)o(oid)h(this)e(round-about)
g(approach)i(of)g(creating)f(a)i(permanent)f(v)o(ariable)f(only)g(to)g
(then)193 2416 y(globalise)f(it,)i(the)g Fn(put)p 543
2416 V 15 w(variable)d(X)p Fm(n;)d Fn(A)p Fm(i)13 b FN(instruction)d
(is)j(introduced,)f(and)h(these)g(v)o(ari-)193 2466 y(ables)d(are)h
(instead)f(treated)h(as)g([temporary)e(v)o(ariables].)m(\224)71
2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(7)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 76 91
76 90 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(rarely)c(the)h(case)h(for)e(facts\),)h(this)g(is)g(clearly)f
(desirable.)16 b(Ideally)m(,)10 b(this)h(requires)g(a)g(technique)257
349 y(for)k(partially)h(interlea)o(ving)f(uni\002cation)g(with)g
(search.)27 b(Indeed,)17 b(if)e(it)h(can)g(be)g(decided)g(at)257
409 y(the)d(outset)f(that)h(a)f(clause)h(head)g(will)f(unify)f(e)o
(xclusi)o(v)o(ely)i(with)f(a)h(cate)o(gory)f(of)g(data,)h(all)f(the)257
469 y(more)17 b(selecti)o(v)o(e)h(the)f(search)h(code)g(will)f(be.)31
b(On)17 b(the)h(other)f(hand,)i(it)e(may)g(be)h(impossi-)257
530 y(ble)d(in)g(general,)g(or)g(v)o(ery)f(costly)h(at)g(best,)h(to)f
(generate)f(an)h(optimal)g(discrimination)e(\002lter)257
590 y(based)19 b(on)f(the)g(patterns)g(of)g(all)g(ar)o(guments.)33
b(F)o(ortunately)m(,)19 b(a)f(suboptimal)g(compromise)257
650 y(turns)g(out)f(to)g(be)h(quite)f(reasonable)h(in)f(practice.)31
b(Since)18 b(Prolog)e(programmers)g(ha)o(v)o(e)i(a)257
710 y(natural)12 b(tendenc)o(y)g(to)g(write)g(code)g(in)g(a)g(data)g
(structure-directed)f(manner)g(using)h(discrimi-)257
770 y(nating)h(patterns)g(as)g(\002rst)f(ar)o(gument,)h(it)g(is)g
(quite)g(acceptable)g(to)f(limit)h(inde)o(xing)f(to)h(ke)o(y)f(on)257
830 y(the)i(\002rst)f(ar)o(gument)g(only)m(.)18 b(The)c(W)-6
b(AM)14 b(uses)g(this)g(idea)f(as)h(a)g(basis)g(for)e(optimizing)h
(clause)257 891 y(selection.)24 b(Naturally)m(,)15 b(this)g(applies)g
(only)f(to)h(procedure)f(de\002nitions)h(that)f(contain)h(more)257
951 y(than)d(one)h(clauses.)j(In)c(what)g(follo)o(ws,)g(we)h(refer)e
(to)h(a)h(clause)f(head')m(s)h(\002rst)f(ar)o(gument)f(as)i(its)257
1011 y(\(inde)o(xing\))f(ke)o(y)m(.)257 1088 y(First,)g(note)f(that)g
(an)o(y)g(clause)h(head)f(whose)g(ke)o(y)g(is)h(a)f(v)o(ariable)g
(creates)g(a)g(search)h(bottleneck)257 1148 y(in)18 b(a)g(procedure)g
(de\002nition)f(in)g(which)h(it)g(appears.)33 b(Indeed,)19
b(that)f(ke)o(y)g(will)g(unify)f(with)257 1208 y(an)o(ything)i(and)h
(thus)f(its)h(clause)f(must)h(be)f(e)o(xplored)g(in)g(all)h(cases.)37
b(F)o(or)19 b(this)h(reason,)h(a)257 1268 y(procedure)e
FD(p)h FP(de\002ned)f(by)h(the)f(sequence)h(of)g(clauses)g
FD(C)1298 1275 y FE(1)1318 1268 y FD(;)8 b(:)g(:)g(:)f(;)h(C)1462
1275 y Fy(n)1505 1268 y FP(is)20 b(partitioned)e(as)i(a)257
1329 y(sequence)h(of)e(subsequences)i FD(S)842 1336 y
FE(1)862 1329 y FD(;)8 b(:)g(:)g(:)f(;)h(S)1001 1336
y Fy(m)1034 1329 y FP(,)22 b(where)e(each)g FD(S)1351
1336 y Fy(i)1385 1329 y FP(is)g(either)f(a)h FB(single)g
FP(clause)257 1389 y(with)13 b(a)h(v)o(ariable)e(ke)o(y)m(,)i(or)f(a)g
FB(maximal)g FP(subsequence)h(of)f(contiguous)g(clauses)i(whose)e(ke)o
(ys)257 1449 y(are)f(not)e(v)o(ariables.)16 b(F)o(or)10
b(e)o(xample,)i(the)g(follo)o(wing)d(de\002nition)i(is)g(partitioned)f
(into)h(the)g(four)257 1509 y(subsequences)j FD(S)571
1516 y FE(1)591 1509 y FP(,)f FD(S)646 1516 y FE(2)665
1509 y FP(,)g FD(S)720 1516 y FE(3)740 1509 y FP(,)g(and)f
FD(S)879 1516 y FE(4)899 1509 y FP(,)h(as)g(sho)o(wn:)1121
1491 y FL(11)690 1713 y FD(S)720 1720 y FE(1)781 1551
y Fh(8)781 1589 y(>)781 1601 y(>)781 1613 y(>)781 1626
y(>)781 1638 y(>)781 1651 y(>)781 1663 y(<)781 1738 y(>)781
1750 y(>)781 1763 y(>)781 1775 y(>)781 1788 y(>)781 1800
y(>)781 1813 y(:)839 1592 y FB(call)p FC(\()p FD(X)t
FB(or)p FD(Y)e FC(\))j FS(:-)g FB(call)p FC(\()p FD(X)t
FC(\))p FD(:)839 1653 y FB(call)p FC(\()p FB(tr)o(ace)p
FC(\))g FS(:-)g FB(tr)o(ace)p FD(:)839 1713 y FB(call)p
FC(\()p FD(X)t FB(or)p FD(Y)d FC(\))j FS(:-)g FB(call)p
FC(\()p FD(Y)d FC(\))p FD(:)839 1773 y FB(call)p FC(\()p
FB(notr)o(ace)p FC(\))j FS(:-)f FB(notr)o(ace)q FD(:)839
1833 y FB(call)p FC(\()p FB(nl)o FC(\))h FS(:-)g FB(nl)p
FD(:)690 1901 y(S)720 1908 y FE(2)781 1853 y Fh(n)830
1901 y FB(call)o FC(\()p FD(X)t FC(\))h FS(:-)e FB(b)o(uiltin)o
FC(\()p FD(X)t FC(\))p FD(:)690 1976 y(S)720 1983 y FE(3)781
1928 y Fh(n)830 1976 y FB(call)o FC(\()p FD(X)t FC(\))i
FS(:-)e FB(e)o(xtern)q FC(\()p FD(X)t FC(\))p FD(:)690
2133 y(S)720 2140 y FE(4)781 2009 y Fh(8)781 2046 y(>)781
2059 y(>)781 2071 y(>)781 2084 y(<)781 2158 y(>)781 2171
y(>)781 2183 y(>)781 2196 y(:)839 2043 y FB(call)p FC(\()p
FB(call)o FC(\()p FD(X)t FC(\)\))i FS(:-)e FB(call)p
FC(\()p FD(X)t FC(\))p FD(:)839 2103 y FB(call)p FC(\()p
FB(r)n(epeat)q FC(\))p FD(:)839 2163 y FB(call)p FC(\()p
FB(r)n(epeat)q FC(\))h FS(:-)f FB(call)p FC(\()p FB(r)n(epeat)q
FC(\))p FD(:)839 2223 y FB(call)p FC(\()p FB(true)p FC(\))p
FD(:)257 2322 y FP(As)k(e)o(xpected,)i(the)e(general)f(translating)g
(scheme)h(for)f(a)h(procedure)f FD(p)h FP(with)f(a)h(de\002nition)257
2382 y(thus)c(partitioned)e(into)h(subsequences)i FD(S)985
2389 y FE(1)1004 2382 y FD(;)8 b(:)g(:)g(:)g(;)g FS(S)1144
2389 y Fy(m)1177 2382 y FP(,)13 b(where)f FD(m)h(>)h
FC(1)p FP(,)f(is:)p 257 2420 648 2 v 301 2451 a Fz(11)332
2466 y FN(This)c(e)o(xample)i(is)e(a)h(slight)e(modi\002cation)h(of)g
(that)g(gi)o(v)o(en)g(in)g([W)m(ar83)o(].)k(The)d(\(admittedly)e
(silly\))g(splitting)257 2516 y(of)h(the)f(two)g Fg(or)t
Fm(=)p Fl(2)g FN(clauses)i(is)e(only)g(to)g(illustrate)f(that)h(this)g
(will)f(not)h(af)o(fect)h(performance)h(thanks)e(to)g(inde)o(xing.)258
2640 y(P)o FL(A)q(G)r(E)13 b FN(7)r(6)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 77 92
77 91 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 281 a FD(p)90 b FP(:)49 b FS(try)p
365 281 15 2 v 18 w(me)p 443 281 V 18 w(else)13 b FD(S)621
288 y FE(2)272 341 y FB(code)g(for)f(subsequence)i FD(S)744
348 y FE(1)95 401 y FD(S)125 408 y FE(2)209 401 y FP(:)49
b FS(retry)p 425 401 V 18 w(me)p 503 401 V 17 w(else)14
b FD(S)681 408 y FE(3)272 462 y FB(code)f(for)f(subsequence)i
FD(S)744 469 y FE(2)518 510 y FP(.)518 526 y(.)518 543
y(.)95 603 y FD(S)125 610 y Fy(m)209 603 y FP(:)49 b
FS(trust)p 425 603 V 18 w(me)272 663 y FB(code)13 b(for)f(subsequence)i
FD(S)744 670 y Fy(m)71 793 y FP(where)k FS(retry)p 364
793 V 17 w(me)p 441 793 V 18 w(else)g FP(is)h(necessary)g(only)f(if)g
FD(m)24 b(>)h FC(2)p FP(.)34 b(If)18 b FD(m)25 b FC(=)g(1)p
FP(,)20 b(none)f(of)f(the)71 853 y(abo)o(v)o(e)13 b(is)g(needed)h(and)f
(the)f(translation)h(boils)g(do)o(wn)f(only)h(to)g(the)g(code)g
(necessary)g(for)g(the)71 913 y(single)g(subsequence)g(chunk.)18
b(Furthermore,)12 b(the)h(simpler)f(case)i(where)f(the)g(subsequence)71
973 y(is)j(reduced)g(to)g(a)g(single)h(v)o(ariable-ke)o(y)d(clause)j
(de)o(generates)g(into)e(the)i(e)o(xpected)f(simpler)71
1034 y(translation)11 b(pattern)h(requiring)f(nothing)h(more)g(than)g
(we)h(had)f(before.)j(Thus,)f(the)e(code)g(for)71 1094
y Fo(c)n(al)r(l)6 b FD(=)p FC(1)13 b FP(abo)o(v)o(e)g(looks)g(like:)95
1226 y FB(call)p FD(=)p FC(1)51 b FP(:)e FS(try)p 425
1226 V 18 w(me)p 503 1226 V 18 w(else)13 b FD(S)681 1233
y FE(2)802 1226 y FS(\045)332 1286 y FB(inde)o(xed)g(code)f(for)h
FD(S)706 1293 y FE(1)802 1286 y FS(\045)95 1346 y FD(S)125
1353 y FE(2)269 1346 y FP(:)49 b FS(retry)p 485 1346
V 18 w(me)p 563 1346 V 18 w(else)13 b FD(S)741 1353 y
FE(3)802 1346 y FS(\045)42 b FB(call)o FC(\()p FD(X)t
FC(\))332 1407 y FS(execute)14 b FB(b)o(uiltin)o FD(=)p
FC(1)69 b FS(\045)213 b(:-)13 b FB(b)o(uiltin)o FC(\()p
FD(X)t FC(\))p FD(:)95 1467 y(S)125 1474 y FE(3)269 1467
y FP(:)49 b FS(retry)p 485 1467 V 18 w(me)p 563 1467
V 18 w(else)13 b FD(S)741 1474 y FE(4)802 1467 y FS(\045)42
b FB(call)o FC(\()p FD(X)t FC(\))332 1527 y FS(execute)14
b FB(e)o(xtern)p FD(=)p FC(1)75 b FS(\045)213 b(:-)13
b FB(e)o(xtern)q FC(\()p FD(X)t FC(\))p FD(:)95 1587
y(S)125 1594 y FE(4)269 1587 y FP(:)49 b FS(trust)p 485
1587 V 18 w(me)242 b(\045)332 1647 y FB(inde)o(xed)13
b(code)f(for)h FD(S)706 1654 y FE(4)802 1647 y FS(\045)71
1777 y FP(Let)f(us)h(then)f(focus)h(on)f(inde)o(xing)g(within)g(a)g
(non)h(v)o(ariable-ke)o(y)d(subsequence.)71 1854 y(The)i(technique)g
(of)g(clause)h(inde)o(xing)f(for)f(a)i(subsequence)g(uses)g(one)f(or)g
(two)f(le)o(v)o(els)i(of)f(dis-)71 1914 y(patching)h(according)h(to)g
(the)g(run-time)f(sort)h(of)g(the)g(calling)g(procedure')m(s)g(\002rst)
g(ar)o(gument,)71 1974 y(and)f(possibly)g(a)h(third)e(le)o(v)o(el)h
(consisting)g(of)g(sequential)g(threading)g(together)f(some)i(prese-)71
2034 y(lected)d(clauses.)17 b(A)12 b(\002rst)f(le)o(v)o(el)g(of)h
(dispatching)f(is)h(performed)e(depending)i(on)f(whether)h(the)71
2094 y(dereferenced)f(v)o(alue)i(of)f FS(A)p FC(1)h FP(is)g(a)f(v)o
(ariable,)h(a)f(constant,)i(a)e(\(non-empty\))f(list,)i(or)f(a)h
(general)71 2155 y(structure.)21 b(In)13 b(each)i(case,)h(control)e(is)
g(to)g(jump)g(to)g(a)h(\(possibly)f(v)o(oid\))g(b)o(ucket)f(of)h
(clauses.)71 2215 y(Respecti)o(v)o(ely)m(,)i(the)f(code)g(b)o(ucket)g
(of)f(a)i(v)o(ariable)e(corresponds)h(to)g(full)f(sequential)h(search)
71 2275 y(through)i(the)h(subsequence)h(\(thus,)h(it)e(is)g(ne)o(v)o
(er)g(v)o(oid\),)i(that)e(of)g(a)g(constant)g(\(resp.,)j(of)c(a)71
2335 y(structure\))12 b(corresponds)g(to)h(a)g(further)f(dispatching)h
(le)o(v)o(el)g(discriminating)f(among)h(dif)o(fer)o(-)71
2395 y(ent)i(constants)h(\(resp.,)i(dif)o(ferent)c(structures\),)i(and)
g(that)f(of)g(a)h(list)g(corresponds)g(either)f(to)71
2456 y(the)f(single)g(clause)h(with)f(a)h(list)f(ke)o(y)g(or)g(to)g(a)h
(linked)e(list)h(of)g(all)g(those)h(clauses)g(in)f(the)h(sub-)71
2516 y(sequence)d(whose)h(ke)o(ys)f(are)g(lists.)k(F)o(or)c(those)g
(constants)h(\(or)e(structures\))h(ha)o(ving)f(multiple)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(7)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 78 93
78 92 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(clauses,)f(a)e(possible)h(third)e(le)o(v)o(el)h(b)o(ucket)f
(corresponds)h(to)f(the)h(linked)f(list)h(of)g(these)g(clauses)257
349 y(\(just)h(like)g(the)g(possible)h(second)g(le)o(v)o(el)f(for)g
(lists\).)257 426 y(Hence,)h(the)g(general)f(inde)o(xing)g(code)g
(pattern)g(for)g(a)g(subsequence)i(is)e(of)g(the)g(form:)282
534 y FB(\002rst)h(le)o(vel)f(inde)o(xing;)282 594 y(second)h(le)o(vel)
g(inde)o(xing;)282 654 y(thir)n(d)g(le)o(vel)g(inde)o(xing;)282
714 y(code)g(of)f(clauses)h(in)f(subsequence)h(or)n(der;)257
821 y FP(where)g(second)h(and)f(third)f(le)o(v)o(els)h(are)g(only)g
(necessary)h(as)f(dictated)g(by)g(what)g(sort)g(of)f(ke)o(ys)257
882 y(are)h(present)f(in)h(the)f(subsequence)i(and)e(in)h(what)f
(number)m(.)k(In)c(particular)n(,)g(the)o(y)h(may)f(be)h(al-)257
942 y(together)e(eliminated)g(as)g(appropriate)g(in)g(the)g(de)o
(generate)g(cases.)17 b(The)12 b(last)f(part)g(follo)o(wing)257
1002 y(the)i(dispatching)g(code)h(is)f(simply)g(the)g(re)o(gular)g
(sequential)g(choice)g(control)g(construction.)257 1062
y(F)o(or)f(e)o(xample,)h(the)g(subsequence)g FD(S)899
1069 y FE(1)931 1062 y FP(of)f FB(call)p FD(=)p FC(1)h
FP(is)g(translated)f(thus:)463 1172 y FB(\002rst)h(le)o(vel)f(inde)o
(xing)g(for)h FD(S)942 1179 y FE(1)463 1232 y FB(second)g(le)o(vel)g
(inde)o(xing)f(for)g FD(S)1003 1239 y FE(1)463 1292 y
FB(thir)n(d)h(le)o(vel)f(inde)o(xing)g(for)h FD(S)960
1299 y FE(1)282 1352 y FD(S)312 1359 y FE(11)399 1352
y FP(:)50 b FS(try)p 556 1352 15 2 v 18 w(me)p 634 1352
V 17 w(else)14 b FD(S)812 1359 y FE(12)463 1413 y FB(code)f(for)f
FP(`)p FB(call)p FC(\()p FD(X)t FB(or)p FD(Y)f FC(\))j
FS(:-)g FB(call)p FC(\()p FD(X)t FC(\))p FD(:)p FP(')282
1473 y FD(S)312 1480 y FE(12)399 1473 y FP(:)50 b FS(retry)p
616 1473 V 17 w(me)p 693 1473 V 18 w(else)14 b FD(S)872
1480 y FE(13)463 1533 y FB(code)f(for)f FP(`)p FB(call)p
FC(\()p FB(tr)o(ace)p FC(\))i FS(:-)g FB(tr)o(ace)p FD(:)p
FP(')282 1593 y FD(S)312 1600 y FE(13)399 1593 y FP(:)50
b FS(retry)p 616 1593 V 17 w(me)p 693 1593 V 18 w(else)14
b FD(S)872 1600 y FE(14)463 1653 y FB(code)f(for)f FP(`)p
FB(call)p FC(\()p FD(X)t FB(or)p FD(Y)f FC(\))j FS(:-)g
FB(call)p FC(\()p FD(Y)d FC(\))p FD(:)p FP(')282 1713
y FD(S)312 1720 y FE(14)399 1713 y FP(:)50 b FS(retry)p
616 1713 V 17 w(me)p 693 1713 V 18 w(else)14 b FD(S)872
1720 y FE(15)463 1774 y FB(code)f(for)f FP(`)p FB(call)p
FC(\()p FB(notr)o(ace)p FC(\))i FS(:-)f FB(notr)o(ace)q
FD(:)p FP(')282 1834 y FD(S)312 1841 y FE(15)399 1834
y FP(:)50 b FS(trust)p 616 1834 V 17 w(me)463 1894 y
FB(code)13 b(for)f FP(`)p FB(call)p FC(\()p FB(nl)o FC(\))i
FS(:-)g FB(nl)p FD(:)p FP(')257 2001 y(Therefore,)f(we)f(need)h
(instructions)f(for)f(each)i(dispatching)f(le)o(v)o(el)g(in)g(the)h
(general)f(case.)257 2078 y(First)h(le)o(v)o(el)f(dispatching)h(is)g
(done)g(with)g(the)f FS(switch)p 1226 2078 V 18 w(on)p
1304 2078 V 17 w(term)i FD(V)s(;)8 b(C)q(;)g(L;)g(S)15
b FP(instruction)257 2138 y(whose)h(ef)o(fect)f(is)h(to)f(make)g
(control)f(jump)h(to)h(the)f(instruction)g(labeled,)h(respecti)o(v)o
(ely)m(,)h FD(V)11 b FP(,)257 2198 y FD(C)t FP(,)18 b
FD(L)p FP(,)f(or)f FD(S)s FP(,)i(depending)e(on)g(whether)f(the)i
(dereferenced)e(v)o(alue)h(of)g FS(A)p FC(1)g FP(is)h(a)f(v)o(ariable,)
h(a)257 2258 y(constant,)c(a)g(non-empty)e(list,)i(or)f(a)h(structure,)
f(respecti)o(v)o(ely)m(.)257 2335 y(Second)f(le)o(v)o(el)f(dispatching)
h(for)f FD(N)16 b FP(distinct)10 b(constants)i(\(ha)o(ving)e(realized)g
(that)h FS(A)p FC(1)g FP(derefer)o(-)257 2395 y(ences)g(to)e(one\))g
(is)h(done)f(with)g FS(switch)p 954 2395 V 18 w(on)p
1032 2395 V 17 w(constant)k FD(N)r(;)8 b(T)f FP(,)k(where)e
FD(T)16 b FP(is)10 b(a)g(hash-table)257 2456 y(of)i(size)h
FD(N)18 b FP(of)12 b(the)h(form)e FK(f)p FD(c)741 2463
y Fy(i)769 2456 y FC(:)i FD(L)829 2463 y Fy(c)844 2468
y Fr(i)860 2456 y FK(g)885 2438 y Fy(N)885 2468 y(i)p
FE(=1)957 2456 y FP(associating)g(to)f(each)h(distinct)f(constant)g
FD(c)1704 2463 y Fy(i)1731 2456 y FP(used)h(as)257 2516
y(a)i(ke)o(y)g(in)f(the)h(subsequence)g(a)g(label)g FD(L)957
2523 y Fy(c)972 2528 y Fr(i)1002 2516 y FP(where)f(control)g(must)h
(jump)f(when)h FD(c)1667 2523 y Fy(i)1696 2516 y FP(is)f(passed)258
2640 y FN(P)o FL(A)q(G)r(E)f FN(7)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 79 94
79 93 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(as)f(\002rst)f(ar)o(gument.)k(If)c(the)h
(constant)g(found)f(in)g FS(A)p FC(1)i FP(is)f(not)f(one)h(in)f(the)h
(table,)g(backtracking)71 349 y(occurs.)31 b(The)18 b(similar)f
(instruction)g FS(switch)p 909 349 15 2 v 17 w(on)p 986
349 V 18 w(structure)12 b FD(N)r(;)c(T)25 b FP(does)18
b(the)f(same)71 409 y(for)c(all)i(distinct)f(\(non-constant)f
(non-list\))h(functors)g(in)g(the)g(subsequence.)23 b(Second)15
b(le)o(v)o(el)71 469 y(list)c(inde)o(xing)h(is)g(really)f(third)g(le)o
(v)o(el)h(inde)o(xing)f(on)h(list)f(structures,)h(the)g(second)g(le)o
(v)o(el)g(being)71 530 y(skipped)g(by)g(special)h(handling)f(of)g
(lists)h(in)f(the)g(spirit)g(of)g(W)-6 b(AM)13 b(Principle)e(3.)71
606 y(Third)17 b(le)o(v)o(el)g(inde)o(xing)g(corresponds)f(to)i
(threading)e(together)g(multiple)h(\(b)o(ut)f(not)h(neces-)71
667 y(sarily)f(contiguous\))f(clauses)j(whose)e(ke)o(ys)h(are)f(lists,)
i(or)e(a)h(same)f(constant)h(or)f(structure.)71 727 y(Since)j(the)g
(code)h(of)f(all)h(clauses)g(in)f(the)h(subsequence)g(are)g(already)f
(so-threaded)g(by)g(a)71 787 y FS(try)p 164 787 V 17
w(me)p 241 787 V 18 w(else)p FP(,)e(\()p FS(retry)p 575
787 V 17 w(me)p 652 787 V 18 w(else)p FP(\))e FS(trust)p
972 787 V 18 w(me)h FP(choice)g(control)f(construction,)i(its)71
847 y(clause)g(code)f(subsequence)i(rele)o(v)o(ant)d(only)h(to)h(the)f
(recognized)g(ke)o(y)h(at)f(hand)h(\(be)f(it)g(list,)71
907 y(constant,)d(or)f(structure\))g(must)g(be)h(accessed)h(e)o
(xplicitly)e(with)g(an)h(alternati)o(v)o(e)f(choice)h(con-)71
967 y(trol)f(construction.)k(This)e(is)f(achie)o(v)o(ed)g(by)g(using)g
(three)f(instructions,)h FS(try)h FD(L)p FP(,)g FS(retry)f
FD(L)p FP(,)71 1028 y FS(trust)g FD(L)p FP(.)19 b(These)14
b(are)f(almost)g(identical)g(to)g FS(try)p 980 1028 V
18 w(me)p 1058 1028 V 18 w(else)g FD(L)p FP(,)h FS(retry)p
1418 1028 V 18 w(me)p 1496 1028 V 17 w(else)g FD(L)p
FP(,)71 1088 y(and)i FS(trust)p 312 1088 V 18 w(me)o
FP(,)i(respecti)o(v)o(ely)m(.)28 b(The)17 b(only)g(dif)o(ference)e(is)i
(that)f(the)o(y)h(use)g(the)f(speci\002ed)71 1148 y(label)c
FD(L)i FP(for)e(the)h(instruction)f(to)h(jump)f(to,)i(sa)o(ving)f(the)g
(ne)o(xt)g(one)g(in)f(sequence)i(as)g(the)e(ne)o(xt)71
1208 y(clause)h(alternati)o(v)o(e)e(in)h(the)h(choice)f(point)g(\(e)o
(xcept)g(for)g FS(trust)p FP(,)g(of)g(course\).)71 1285
y(The)k(complete)g(inde)o(xing)g(code)h(for)e(subsequence)i
FD(S)1036 1292 y FE(1)1072 1285 y FP(of)f(the)g FB(call)p
FD(=)p FC(1)h FP(e)o(xample)f(is)h(gi)o(v)o(en)71 1345
y(in)g(Figure)h(5.16,)59 b(and)18 b(that)g(for)f(subsequence)i
FD(S)993 1352 y FE(4)1031 1345 y FP(is)g(gi)o(v)o(en)e(in)h(Figure)g
(5.17.)98 b(The)71 1405 y(complete)16 b(inde)o(xing)g(code)g(for)g
FB(call)p FD(=)p FC(1)h FP(can)g(thus)f(be)h(patched)f(together)g(from)
g(these)h(and)71 1466 y(the)f(partitioned)f(scheme)h(for)g
FD(S)650 1473 y FE(1)669 1466 y FP(,)i FD(S)729 1473
y FE(2)749 1466 y FP(,)f FD(S)808 1473 y FE(3)828 1466
y FP(,)h(and)e FD(S)976 1473 y FE(4)1012 1466 y FP(gi)o(v)o(en)g
(earlier)m(.)26 b(An)17 b(illustration)e(of)g(a)71 1526
y(de)o(generate)h(case)i(where)f(all)f(three)h(le)o(v)o(els)g(of)f
(inde)o(xing)g(are)h(not)g(necessary)g(is)g(gi)o(v)o(en)g(in)71
1586 y(Figure)11 b(5.18)38 b(for)11 b(the)h(familiar)f
FB(conc)i FP(de\002nition)e(for)h(concatenating)g(two)f(lists:)464
1678 y FB(conc)p FC(\([])p FD(;)d(L;)g(L)p FC(\))p FD(:)464
1738 y FB(conc)p FC(\([)p FD(H)t FK(j)p FD(T)f FC(])p
FD(;)h(L;)g FC([)p FD(H)t FK(j)p FD(R)p FC(]\))k FS(:-)i
FB(conc)p FC(\()p FD(T)t(;)8 b(L;)g(R)p FC(\))p FD(:)71
1849 y FP(It)15 b(is)h(interesting)f(to)h(observ)o(e)g(that)g(when)g
(the)g FB(conc)p FD(=)p FC(3)g FP(procedure)g(is)g(called)g(with)f(an)h
(in-)71 1909 y(stantiated)d(\002rst)g(ar)o(gument,)g(no)g(choice)g
(point)g(frame)g(for)f(it)h(is)h(e)o(v)o(er)f(needed.)18
b(As)c(a)f(matter)71 1969 y(of)d(fact,)g(using)h(inde)o(xing)f(has)h(a)
g(major)f(incidental)g(bene\002t)g(as)h(it)f(substantially)h(reduces)g
(the)71 2029 y(creation)h(and)h(manipulation)f(of)g(choice)h(point)g
(frames)f(on)h(the)g(stack.)18 b(This)c(has)f(as)h(corol-)71
2089 y(lary)e(that)h(it)g(also)h(reduces)f(the)h(ef)o(fects)e(of)h(en)n
(vironment)f(protection,)h(and)g(thus)h(magni\002es)71
2149 y(the)d(gain)g(of)g(LCO)h(and)f(en)n(vironment)g(trimming.)j(F)o
(or)d(e)o(xample,)h(let)f(us)h(assume)g(that)f(a)h(list)71
2210 y(processing)g(procedure)g FB(lp)g FP(is)h(de\002ned)f(as:)548
2301 y FB(lp)p FC(\([)p FD(H)t FK(j)p FD(T)7 b FC(]\))12
b FS(:-)i FB(pr)n(ocess)q FC(\()p FD(H)t FC(\))p FD(;)8
b FB(lp)o FC(\()p FD(T)f FC(\))p FD(:)548 2362 y FB(lp)p
FC(\([]\))p FD(:)71 2456 y FP(Some)k(programmers)f(ha)o(v)o(e)i(indeed)
f(taken)g(the)g(habit)h(of)f(specifying)g(the)g FC([])p
FP(-clause)g(last)h(us-)71 2516 y(ing)f(Prolog)g(interpreters.)j(The)o
(y)f(reason)f(that)f(since)i(there)e(are)h(man)o(y)g(more)f
FC([)p 1439 2516 V 17 w FK(j)p 1470 2516 V 18 w FC(])p
FP(')m(s)h(in)g(a)g(list)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)e FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(7)r(9)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 80 95
80 94 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 458 1658
3 v 461 556 a FQ(switch)p 626 556 14 2 v 18 w(on)p 698
556 V 17 w(term)g Fu(S)862 563 y FE(11)899 556 y Fu(;)8
b(C)953 563 y FE(1)971 556 y Fu(;)g FI(fail)n Fu(;)g(F)1102
563 y FE(1)1367 556 y FQ(\045)42 b Fw(1)p FI(st)10 b(le)o(vel)i
(dispatc)o(h)d(for)i Fu(S)1854 563 y FE(1)299 633 y Fu(C)332
640 y FE(1)407 633 y Fw(:)41 b FQ(switch)p 626 633 V
18 w(on)p 698 633 V 17 w(constant)15 b Fw(3)p Fu(;)8
b Fp(f)19 b FI(tr)o(ace)58 b Fw(:)12 b Fu(S)1233 640
y FE(1)p Fy(b)1268 633 y Fu(;)1029 689 y FI(notr)o(ace)g
Fw(:)g Fu(S)1233 696 y FE(1)p Fy(d)1271 689 y Fu(;)1029
746 y FI(nl)115 b Fw(:)12 b Fu(S)1233 753 y FE(1)p Fy(e)1282
746 y Fp(g)1367 633 y FQ(\045)42 b Fw(2)p FI(nd)10 b(le)o(vel)i(for)e
(constants)299 802 y Fu(F)328 809 y FE(1)407 802 y Fw(:)41
b FQ(switch)p 626 802 V 18 w(on)p 698 802 V 17 w(structure)15
b Fw(1)p Fu(;)8 b Fp(f)20 b FI(or)o Fu(=)p Fw(2)12 b(:)g
Fu(F)1209 809 y FE(11)1259 802 y Fp(g)85 b FQ(\045)42
b Fw(2)p FI(nd)10 b(le)o(vel)i(for)e(structur)n(es)299
879 y Fu(F)328 886 y FE(11)407 879 y Fw(:)41 b FQ(try)14
b Fu(S)584 886 y FE(1)p Fy(a)1367 879 y FQ(\045)42 b
Fw(3)p FI(r)n(d)10 b(le)o(vel)i(for)e(or)p Fu(=)p Fw(2)461
935 y FQ(trust)k Fu(S)638 942 y FE(1)p Fy(c)1367 935
y FQ(\045)299 1012 y Fu(S)327 1019 y FE(11)407 1012 y
Fw(:)41 b FQ(try)p 545 1012 V 17 w(me)p 616 1012 V 17
w(else)14 b Fu(S)780 1019 y FE(12)1367 1012 y FQ(\045)42
b FI(call)299 1069 y Fu(S)327 1076 y FE(1)p Fy(a)407
1069 y Fw(:)f FQ(get)p 545 1069 V 17 w(structure)15 b
FI(or)p Fu(=)p Fw(2)p Fu(;)8 b FQ(A)p Fw(1)392 b FQ(\045)110
b Fw(\()p FI(or)461 1125 y FQ(unify)p 599 1125 V 18 w(variable)15
b(A)p Fw(1)472 b FQ(\045)168 b Fw(\()p Fu(X)q(;)461 1182
y FQ(unify)p 599 1182 V 18 w(void)14 b Fw(1)608 b FQ(\045)237
b Fu(Y)10 b Fw(\)\))461 1238 y FQ(execute)15 b FI(call)o
Fu(=)p Fw(1)588 b FQ(\045)123 b(:-)13 b FI(call)o Fw(\()p
Fu(X)t Fw(\))p Fu(:)299 1315 y(S)327 1322 y FE(12)407
1315 y Fw(:)41 b FQ(retry)p 599 1315 V 18 w(me)p 671
1315 V 17 w(else)13 b Fu(S)834 1322 y FE(13)1367 1315
y FQ(\045)42 b FI(call)299 1372 y Fu(S)327 1379 y FE(1)p
Fy(b)407 1372 y Fw(:)f FQ(get)p 545 1372 V 17 w(constant)15
b FI(tr)o(ace)p Fu(;)8 b FQ(A)p Fw(1)413 b FQ(\045)110
b Fw(\()p FI(tr)o(ace)o Fw(\))461 1428 y FQ(execute)15
b FI(tr)o(ace)o Fu(=)p Fw(0)564 b FQ(\045)123 b(:-)13
b FI(tr)o(ace)o Fu(:)299 1505 y(S)327 1512 y FE(13)407
1505 y Fw(:)41 b FQ(retry)p 599 1505 V 18 w(me)p 671
1505 V 17 w(else)13 b Fu(S)834 1512 y FE(14)1367 1505
y FQ(\045)42 b FI(call)299 1561 y Fu(S)327 1568 y FE(1)p
Fy(c)407 1561 y Fw(:)f FQ(get)p 545 1561 V 17 w(structure)15
b FI(or)p Fu(=)p Fw(2)p Fu(;)8 b FQ(A)p Fw(1)392 b FQ(\045)110
b Fw(\()p FI(or)461 1618 y FQ(unify)p 599 1618 V 18 w(void)14
b Fw(1)608 b FQ(\045)168 b Fw(\()p Fu(X)q(;)461 1674
y FQ(unify)p 599 1674 V 18 w(variable)15 b(A)p Fw(1)472
b FQ(\045)237 b Fu(Y)10 b Fw(\)\))461 1731 y FQ(execute)15
b FI(call)o Fu(=)p Fw(1)588 b FQ(\045)123 b(:-)13 b FI(call)o
Fw(\()p Fu(Y)d Fw(\))p Fu(:)299 1808 y(S)327 1815 y FE(14)407
1808 y Fw(:)41 b FQ(retry)p 599 1808 V 18 w(me)p 671
1808 V 17 w(else)13 b Fu(S)834 1815 y FE(15)1367 1808
y FQ(\045)42 b FI(call)299 1864 y Fu(S)327 1871 y FE(1)p
Fy(d)407 1864 y Fw(:)f FQ(get)p 545 1864 V 17 w(constant)15
b FI(notr)o(ace)o Fu(;)8 b FQ(A)p Fw(1)368 b FQ(\045)110
b Fw(\()p FI(notr)o(ace)o Fw(\))461 1921 y FQ(execute)15
b FI(notr)o(ace)o Fu(=)p Fw(0)518 b FQ(\045)123 b(:-)13
b FI(notr)o(ace)o Fu(:)299 1998 y(S)327 2005 y FE(15)407
1998 y Fw(:)41 b FQ(trust)p 599 1998 V 18 w(me)699 b(\045)42
b FI(call)299 2054 y Fu(S)327 2061 y FE(1)p Fy(e)407
2054 y Fw(:)f FQ(get)p 545 2054 V 17 w(constant)15 b
FI(nl)p Fu(;)8 b FQ(A)p Fw(1)470 b FQ(\045)110 b Fw(\()p
FI(nl)o Fw(\))461 2110 y FQ(execute)15 b FI(nl)o Fu(=)p
Fw(0)621 b FQ(\045)123 b(:-)13 b FI(nl)o Fu(:)p 257 2186
1658 3 v 597 2337 a FP(Figure)f(5.16:)j(Inde)o(xing)d(code)h(for)e
(subsequence)i FD(S)1516 2344 y FE(1)258 2640 y FN(P)o
FL(A)q(G)r(E)g FN(8)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 81 96
81 95 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 648 1665 3 v 112 746 a Fu(S)140 753
y FE(4)278 746 y FQ(switch)p 443 746 14 2 v 18 w(on)p
515 746 V 16 w(term)g Fu(S)678 753 y FE(41)715 746 y
Fu(;)8 b(C)769 753 y FE(4)788 746 y Fu(;)g FI(fail)n
Fu(;)g(F)919 753 y FE(4)1187 746 y FQ(\045)42 b Fw(1)p
FI(st)11 b(le)o(vel)g(dispatc)o(h)f(for)g Fu(S)1674 753
y FE(4)112 823 y Fu(C)145 830 y FE(4)223 823 y Fw(:)42
b FQ(switch)p 443 823 V 18 w(on)p 515 823 V 16 w(constant)15
b Fw(3)p Fu(;)8 b Fp(f)20 b FI(r)n(epeat)13 b Fw(:)f
Fu(C)1032 830 y FE(41)1069 823 y Fu(;)846 879 y FI(true)54
b Fw(:)12 b Fu(S)1027 886 y FE(4)p Fy(d)1077 879 y Fp(g)1187
823 y FQ(\045)42 b Fw(2)p FI(nd)11 b(le)o(vel)g(for)g(constants)112
935 y Fu(F)141 942 y FE(4)223 935 y Fw(:)42 b FQ(switch)p
443 935 V 18 w(on)p 515 935 V 16 w(structure)16 b Fw(1)p
Fu(;)8 b Fp(f)19 b FI(call)o Fu(=)p Fw(1)12 b(:)h Fu(S)1053
942 y FE(41)1102 935 y Fp(g)62 b FQ(\045)42 b Fw(2)p
FI(nd)11 b(le)o(vel)g(for)g(structur)n(es)112 1012 y
Fu(C)145 1019 y FE(41)223 1012 y Fw(:)42 b FQ(try)13
b Fu(S)400 1019 y FE(4)p Fy(b)1187 1012 y FQ(\045)42
b Fw(3)p FI(r)n(d)11 b(le)o(vel)g(for)g(`r)n(epeat')278
1069 y FQ(trust)j Fu(S)455 1076 y FE(4)p Fy(c)1187 1069
y FQ(\045)112 1146 y Fu(S)140 1153 y FE(41)223 1146 y
Fw(:)42 b FQ(try)p 362 1146 V 17 w(me)p 433 1146 V 17
w(else)13 b Fu(S)596 1153 y FE(42)1187 1146 y FQ(\045)42
b FI(call)112 1202 y Fu(S)140 1209 y FE(4)p Fy(a)223
1202 y Fw(:)g FQ(get)p 362 1202 V 17 w(structure)15 b
FI(call)o Fu(=)p Fw(1)p Fu(;)8 b FQ(A)p Fw(1)368 b FQ(\045)110
b Fw(\()p FI(call)278 1259 y FQ(unify)p 416 1259 V 17
w(variable)15 b(A)p Fw(1)476 b FQ(\045)196 b Fw(\()p
Fu(X)t Fw(\)\))278 1315 y FQ(execute)14 b FI(call)o Fu(=)p
Fw(1)592 b FQ(\045)123 b(:-)13 b FI(call)o Fw(\()p Fu(X)t
Fw(\))p Fu(:)112 1392 y(S)140 1399 y FE(42)223 1392 y
Fw(:)42 b FQ(retry)p 416 1392 V 17 w(me)p 487 1392 V
17 w(else)14 b Fu(S)651 1399 y FE(43)1187 1392 y FQ(\045)42
b FI(call)112 1449 y Fu(S)140 1456 y FE(4)p Fy(b)223
1449 y Fw(:)g FQ(get)p 362 1449 V 17 w(constant)15 b
FI(r)n(epeat)o Fu(;)8 b FQ(A)p Fw(1)395 b FQ(\045)110
b Fw(\()p FI(r)n(epeat)p Fw(\))278 1505 y FQ(proceed)720
b(\045)261 b Fu(:)112 1582 y(S)140 1589 y FE(43)223 1582
y Fw(:)42 b FQ(retry)p 416 1582 V 17 w(me)p 487 1582
V 17 w(else)14 b Fu(S)651 1589 y FE(44)1187 1582 y FQ(\045)42
b FI(call)112 1638 y Fu(S)140 1645 y FE(4)p Fy(c)223
1638 y Fw(:)g FQ(get)p 362 1638 V 17 w(constant)15 b
FI(r)n(epeat)o Fu(;)8 b FQ(A)p Fw(1)395 b FQ(\045)110
b Fw(\()p FI(r)n(epeat)p Fw(\))278 1695 y FQ(put)p 362
1695 V 17 w(constant)15 b FI(r)n(epeat)o Fu(;)8 b FQ(A)p
Fw(1)395 b FQ(\045)123 b(:-)13 b FI(call)o Fw(\()p FI(r)n(epeat)p
Fw(\))278 1751 y FQ(execute)h FI(call)o Fu(=)p Fw(1)592
b FQ(\045)408 b Fu(:)112 1808 y(S)140 1815 y FE(44)223
1808 y Fw(:)42 b FQ(trust)p 416 1808 V 17 w(me)703 b(\045)42
b FI(call)112 1864 y Fu(S)140 1871 y FE(4)p Fy(d)223
1864 y Fw(:)g FQ(get)p 362 1864 V 17 w(constant)15 b
FI(true)o Fu(;)8 b FQ(A)p Fw(1)436 b FQ(\045)110 b Fw(\()p
FI(true)o Fw(\))278 1921 y FQ(proceed)720 b(\045)219
b Fu(:)p 71 1996 1665 3 v 411 2148 a FP(Figure)11 b(5.17:)16
b(Inde)o(xing)11 b(code)i(for)e(subsequence)j FD(S)1330
2155 y FE(4)71 2640 y FN(Copyright)260 2639 y(c)249 2640
y FM(\015)c FN(Hassan)i(A)463 2636 y(\250)464 2640 y
FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12 b FN(8)r(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 82 97
82 96 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 304 291 1526
3 v 346 388 a FI(conc)o Fu(=)p Fw(3)41 b(:)h FQ(switch)p
738 388 14 2 v 18 w(on)p 810 388 V 16 w(term)14 b Fu(C)978
395 y FE(1)p Fy(a)1016 388 y Fu(;)8 b(C)1070 395 y FE(1)1089
388 y Fu(;)g(C)1143 395 y FE(2)1161 388 y Fu(;)g FI(fail)39
b FQ(\045)346 465 y Fu(C)379 472 y FE(1)p Fy(a)518 465
y Fw(:)j FQ(try)p 657 465 V 17 w(me)p 728 465 V 17 w(else)13
b Fu(C)896 472 y FE(2)p Fy(a)1283 465 y FQ(\045)42 b
FI(conc)346 522 y Fu(C)379 529 y FE(1)518 522 y Fw(:)g
FQ(get)p 657 522 V 17 w(constant)15 b Fw([])p Fu(;)8
b FQ(A)p Fw(1)284 b FQ(\045)128 b Fw(\([])p Fu(;)573
578 y FQ(get)p 657 578 V 17 w(value)14 b(A)p Fw(2)p Fu(;)8
b FQ(A)p Fw(3)342 b FQ(\045)183 b Fu(L;)8 b(L)p Fw(\))573
634 y FQ(proceed)521 b(\045)291 b Fu(:)346 711 y(C)379
718 y FE(2)p Fy(a)518 711 y Fw(:)42 b FQ(trust)p 711
711 V 17 w(me)504 b(\045)42 b FI(conc)346 768 y Fu(C)379
775 y FE(2)518 768 y Fw(:)g FQ(get)p 657 768 V 17 w(list)13
b(A)p Fw(1)441 b FQ(\045)128 b Fw(\([)573 824 y FQ(unify)p
711 824 V 17 w(variable)15 b(X)p Fw(4)277 b FQ(\045)158
b Fu(H)t Fp(j)573 881 y FQ(unify)p 711 881 V 17 w(variable)15
b(A)p Fw(1)277 b FQ(\045)212 b Fu(T)6 b Fw(])p Fu(;)i(L;)573
937 y FQ(get)p 657 937 V 17 w(list)13 b(A)p Fw(3)441
b FQ(\045)322 b Fw([)573 994 y FQ(unify)p 711 994 V 17
w(value)14 b(X)p Fw(4)359 b FQ(\045)342 b Fu(H)t Fp(j)573
1050 y FQ(unify)p 711 1050 V 17 w(variable)15 b(A)p Fw(3)277
b FQ(\045)396 b Fu(R)p Fw(]\))573 1107 y FQ(execute)14
b FI(conc)p Fu(=)p Fw(3)375 b FQ(\045)141 b(:-)13 b FI(conc)p
Fw(\()p Fu(T)t(;)8 b(L;)g(R)o Fw(\))p Fu(:)p 304 1182
1526 3 v 737 1334 a FP(Figure)k(5.18:)j(Encoding)e(of)f
FB(conc)p FD(=)p FC(3)257 1467 y FP(than)i(the)g(single)f(\002nal)h
FC([])p FP(,)f(this)h(procedure,)g(when)f(in)n(v)o(oked)g(with)g(an)h
(instantiated)g(\002rst)f(ar)o(-)257 1527 y(gument,)f(will)g(backtrack)
f(only)h(once)g(at)g(the)g(end)f(of)h(list)g(before)f(reaching)g
(initial)g(success.)257 1587 y(Ho)o(we)o(v)o(er)n(,)j(with)f(a)h
(compiler)f(using)h(LCO)g(b)o(ut)f(no)h(clause)g(inde)o(xing,)g(this)g
(will)f(annihilate)257 1648 y(all)j(ef)o(fects)f(of)g(LCO)h(because)g
(a)g(choice)f(point)g(will)g(systematically)h(co)o(v)o(er)f(e)o(v)o
(ery)g(recur)o(-)257 1708 y(si)o(v)o(e)g(call')m(s)f(en)n(vironment)f
(to)h FB(lp)g FP(with)g(a)g(non-empty)f(list)h(in)g(the)g(ke)o(y)g
(position.)21 b(Whereas,)257 1768 y(for)11 b(such)h(calls)f(clause)h
(inde)o(xing)f(will)g(eliminate)g(all)g(choice)g(points)h(and)f
(transform)f(either)257 1828 y(ordering)i(of)g(the)g(two)g(clauses)h
(into)f(fast)g(iterati)o(v)o(e)f(code.)257 1905 y(All)h(e)o(xplicit)h
(de\002nitions)e(for)h(the)g(inde)o(xing)g(instructions)g(are)h(gi)o(v)
o(en)f(in)g(Appendix)g(B.)379 2008 y Fq(Exer)o(cise)d(5.4)g
FR(The)f(ef)o(fect)h(of)f(the)h FQ(switch)p 1083 2008
14 2 v 18 w(on)p 1155 2008 V 17 w(constant)h FR(instruction)c
(described)i(abo)o(v)o(e)379 2065 y(is)15 b(that)f(gi)o(v)o(en)g
(originally)f(by)h(W)l(arren)i(in)e([W)l(ar83].)26 b(Ho)o(we)o(v)o(er)n
(,)16 b(it)e(does)h(useless)e(work)h(as)379 2121 y(it)d(e)o(v)o
(entually)e(leads)i(to)g(a)g FQ(get)p 881 2121 V 17 w(constant)j
FR(instruction)8 b(that)j(redundantly)e(tests)h(whether)379
2177 y(re)o(gister)f FQ(A)p Fw(1)f FR(contains)f(that)h(v)o(ery)h(same)
g(constant)e(that)h(was)g(seen)g(in)g FQ(A)p Fw(1)h FR(by)f
FQ(switch)p 1737 2177 V 18 w(on)p 1809 2177 V 17 w(constant)p
FR(.)379 2234 y(Can)14 b(you)f(propose)f(a)i(simple)f(optimization)e
(to)i(a)o(v)o(oid)g(this)f(redundanc)o(y?)20 b([)p FI(Hint:)e(Be)o(war)
n(e)379 2290 y(of)11 b(intermediate)e(le)o(vels)i(of)g(inde)o(xing)o(.)
p FR(])379 2394 y Fq(Exer)o(cise)g(5.5)21 b FR(If)10
b(you)g(could)f(\002gure)i(out)e(a)i(solution)d(for)i(Ex)o(ercise)g
(5.4,)h(can)g(it)e(also)h(work)f(or)379 2450 y(be)g(adapted)f(to)g(a)o
(v)o(oid)g(a)g(redundant)g FQ(A)p Fw(1)h FR(check)f(by)g
FQ(get)p 1263 2450 V 17 w(structure)k FR(after)c FQ(switch)p
1788 2450 V 18 w(on)p 1860 2450 V 17 w(structure)p FR(?)379
2506 y([)p FI(Hint:)13 b(Be)o(war)n(e)f(of)f(the)g(setting)f(of)g(the)h
FQ(S)h FI(r)n(e)n(gister)e(and)h(that)f(of)g FQ(read)r
FI(/)p FQ(write)i FI(mode)o(.)p FR(])258 2640 y FN(P)o
FL(A)q(G)r(E)h FN(8)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 83 98
83 97 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FA(5.11)71 b(Cut)71 419 y FP(In)12
b(this)g(last)h(section,)g(we)g(e)o(xplain)g(ho)o(w)f(the)g(design)h
(obtained)f(after)g(the)g(compounding)g(of)71 480 y(all)j(the)h(fore)o
(going)f(optimizations)g(can)h(be)f(augmented)h(to)f(accommodate)h
(implementa-)71 540 y(tion)g(of)h(the)g(Prolog)f(cut.)29
b(The)18 b(treatment)e(of)g(cut)h(was)g(not)g(part)g(of)f(the)h
(original)f(W)-6 b(AM)71 600 y(report)19 b([W)l(ar83)o(].)40
b(The)21 b(material)f(we)g(present)h(here)f(is)h(e)o(xtrapolated)f
(from)f(what)i(was)71 660 y(sketched)12 b(in)g([W)l(ar88)o(])g(and)h
(suggestions)g(from)e(Dean)h(Rosenzweig)h([Ros91].)71
737 y(As)k(is)f(well-kno)o(wn,)h(the)g(cut)f(predicate)g(\(noted)g(`)p
FC(!)p FP('\))f(is)i(an)g(e)o(xtra-logical)e(control)h(anno-)71
797 y(tation)f(that)h(helps)h(the)f(Prolog)f(programmer)g(trim)g(the)h
(search)h(space.)28 b(The)16 b(operational)71 857 y(semantics)e(of)g(`)
p FC(!)p FP(')f(is)h(simply)g(to)g(succeed)h(with)f(a)g(side)g(ef)o
(fect)g(on)g(backtracking)f(informa-)71 918 y(tion;)i(namely)m(,)g
(once)f(passed,)j(it)d(makes)g(control)g(for)o(get)g(an)o(y)g(other)g
(potential)g(alternati)o(v)o(e)71 978 y(for)j(the)h(procedure)f(in)i
(whose)f(clause)h(it)f(appears)g(as)h(well)f(as)h(an)o(y)f(other)g
(arising)g(from)71 1038 y(preceding)11 b(body)i(goals.)71
1115 y(In)f(terms)h(of)f(the)h(machine)g(architecture)f(at)h(hand,)g
(this)g(ef)o(fect)f(is)i(obtained)e(by)h(discarding)71
1175 y(all)k(choice)h(point)g(frames)f(that)h(were)g(created)f(after)h
(the)f(choice)h(point)g(frame)f(that)h(was)71 1235 y(current)d(right)g
(before)g(the)h(call)h(of)e(the)h(procedure)g(containing)f(the)h(cut.)
27 b(Let)16 b(us)h(assume)71 1295 y(that)c(the)i(appropriate)e(choice)h
(point)f(where)h(to)g(return)f(upon)h(backtracking)g(o)o(v)o(er)g(a)g
(cut)g(is)71 1355 y(maintained)g(in)g(a)h(global)f(re)o(gister)h
(called)g(the)f FB(cut)h(r)n(e)n(gister)h FP(and)e(noted)h
FS(B0)p FP(.)22 b(Clearly)m(,)16 b(the)71 1416 y(v)o(alue)10
b(of)g FS(B0)h FP(must)f(be)h(set)g(to)g(the)f(address)i(of)e(the)g
(choice)h(point)f(that)h(is)g(current)f(at)g(the)h(time)71
1476 y(a)k(procedure)g(call)h(is)f(made.)25 b(This)17
b(is)e(achie)o(v)o(ed)h(by)f(altering)g(the)h FS(call)f
FP(and)g FS(execute)71 1536 y FP(instructions)c(to)h(set)g
FS(B0)g FP(to)g(the)f(v)o(alue)h(of)f(the)h(current)f(v)o(alue)h(of)f
FS(B)p FP(.)16 b(In)c(this)g(way)m(,)f(e)o(x)o(ecuting)71
1596 y(a)h(cut)g(amounts)h(essentially)f(to)h(resetting)f
FS(B)g FP(to)g(the)h(v)o(alue)f(of)g FS(B0)o FP(.)71
1673 y(There)i(are)g(really)g(two)g(sorts)g(of)g(cuts)h(to)f(consider:)
19 b FB(shallow)c FP(and)f FB(deep)g FP(cuts.)22 b(A)15
b(shallo)o(w)71 1733 y(cut)c(is)h(one)g(located)f(between)h(the)f(head)
h(and)f(the)h(body)f(of)g(the)h(rule)f(immediately)g(after)g(the)71
1793 y(`)p FS(:-)p FP(')g(symbol)h(\(thus)g(also)h(called)f
FB(nec)o(k)h(cut)p FP(\227some)o(what)f(euphemistically\),)g(as)h(in:)
701 1910 y FD(h)h FS(:-)f FC(!)p FD(;)8 b(b)873 1917
y FE(1)892 1910 y FD(;)g(:)g(:)g(:)g(;)g(b)1023 1917
y Fy(n)1046 1910 y FD(:)71 2026 y FP(while)k(a)g(deep)h(cut)f(is)h(an)o
(y)f(other)n(,)h(of)f(the)g(form:)508 2142 y FD(h)i FS(:-)22
b FD(:)8 b(:)g(:)f(;)h(b)740 2149 y Fy(i)754 2142 y FD(;)g
FC(!)p FD(;)g(:)g(:)g(:)f(;)h(b)920 2149 y Fy(n)943 2142
y FD(:)41 b FC(\(1)14 b FK(\024)g FD(i)f FK(\024)h FD(n)p
FC(\))p FD(:)71 2275 y FP(Before)h(looking)g(at)h(each)g(case)g(in)f
(detail,)i(let)f(us)g(\002rst)f(make)g(an)h(important)e(observ)o(ation)
71 2335 y(re)o(garding)e(the)i(creation)g(of)f(choice)h(points.)21
b(While)14 b(it)f(is)i(easy)f(to)g(see)h(that)e(clause)i(inde)o(x-)71
2395 y(ing)e(may)h(bypass)g(creating)f(a)h(choice)g(point)f(for)g(a)h
(multiple-clause)f(procedure,)h(it)f(is)h(per)o(-)71
2456 y(haps)d(less)g(immediate)g(to)f(realize)h(that)g(inde)o(xing)f
(may)h(also)g(cause)h(creating)e FB(an)h(additional)71
2516 y(c)o(hoice)f(point)f FP(for)g(such)h(a)g(procedure.)k(F)o(or)9
b(instance,)i(refer)e(to)g(the)h Fo(c)n(al)r(l)c FD(=)p
FC(1)11 b FP(procedure)e(gi)o(v)o(en)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(8)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 84 99
84 98 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(on)f(P)o(age)f(76.)k(Its)c(instruction)g(sequence)h(\(P)o(age)f
(77\))g(starts)g(with:)785 403 y Fo(c)n(al)r(l)6 b FD(=)p
FC(1)29 b(:)e FS(try)p 1073 403 15 2 v 18 w(me)p 1151
403 V 17 w(else)14 b FD(S)1329 410 y FE(2)257 518 y FP(which)i(creates)
g(one)g(choice)g(point)f(for)g Fo(c)n(al)r(l)7 b FD(=)p
FC(1)p FP(.)27 b(Further)14 b(do)o(wn)h(in)h(that)g(procedure')m(s)f
(in-)257 578 y(struction)20 b(sequence,)j(what)d(constitutes)h
(subsequence)g FD(S)1322 585 y FE(1)1362 578 y FP(\(gi)o(v)o(en)e(as)i
(Figure)e(5.16)h(on)257 638 y(P)o(age)13 b(80\))f(contains)g(the)h
(instruction:)912 753 y FD(F)944 760 y FE(11)1009 753
y FC(:)27 b FS(try)13 b FD(S)1183 760 y FE(1)p Fy(a)257
867 y FP(that)g(will)f(create)g(a)g(second)h(choice)g(point)f(for)f
Fo(c)n(al)r(l)6 b FD(=)p FC(1)14 b FP(if)e(e)o(x)o(ecuted.)1448
849 y FL(12)257 944 y FP(Let)e(us)g(\002rst)f(consider)g(the)h(simpler)
f(case)h(where)f(the)g(clause)h(containing)f(the)g(cut,)i(be)e(it)g
(shal-)257 1004 y(lo)o(w)16 b(or)f(deep,)j(is)e(the)g(\002rst)f(\(not)g
(necessarily)i(in)e(sequence)i(thanks)f(to)g(inde)o(xing\))f(among)257
1065 y(those)h(of)f(the)h(called)f(procedure')m(s)g(to)h(be)f(e)o(x)o
(ecuted)h(upon)g(entering)e(the)i(procedure)f(with)257
1125 y FS(call)f FP(or)g FS(execute)p FP(.)20 b(W)l(e)14
b(shall)h(see)g(later)e(what)h(to)g(do)g(in)g(the)g(other)g(case)h
(where)f(back-)257 1185 y(tracking)e(occurred)g(since)h(the)f(original)
f(call.)257 1262 y(Upon)j(starting)f(e)o(x)o(ecuting)i(the)f
(instruction)f(sequence)h(of)g(the)g(clause)g(containing)f(a)h(shal-)
257 1322 y(lo)o(w)i(cut,)i FS(B0)e FP(is)g(either)g(equal)g(to)g
FS(B)g FP(\(since)g(inde)o(xing)g(could)g(ha)o(v)o(e)h(bypassed)f
(creating)g(a)257 1382 y(choice)i(point)g(for)f(the)h(procedure)f
(containing)g(the)h(rule\),)h(or)f(equal)g(to)g(one)g(of)f(the)h(two)
257 1442 y(pre)o(vious)d(choice)g(points)g(preceding)g
FS(B)p FP(.)24 b(If)15 b FS(B0)g FP(and)g FS(B)g FP(are)h(equal,)g
(there)f(is)g(no)g(action)h(to)257 1502 y(be)f(taken)g(by)g(the)g(cut)g
(since)g(this)g(call)g(does)h(not)e(ha)o(v)o(e)i(alternati)o(v)o(es)e
(an)o(yway)m(.)24 b(Otherwise)257 1563 y(\()p FS(B)16
b FD(>)f FS(B0)p FP(\),)f(the)f(shallo)o(w)g(cut)h(must)f(discard)g(an)
o(y)h(\(one)f(or)g(two\))f(choice)i(points)f(follo)o(wing)257
1623 y FS(B)p FP(.)27 b(This)17 b(action)f(is)g(the)g(same)h(in)f
(either)f(case)i(\()p FB(i.e)o(.)p FP(,)h FS(B)c FK( )g
FS(B0)o FD(;)8 b FS(HB)14 b FK( )f FS(B)p FD(:)p FS(H)p
FP(\).)26 b(This)17 b(is)f(the)257 1683 y(main)11 b(ef)o(fect)f(of)g
(the)g(ne)o(w)h(instruction)f FS(neck)p 1054 1683 V 17
w(cut)g FP(into)h(which)f(a)h(shallo)o(w)f(cut)h(occurrence)257
1743 y(is)i(translated.)j(F)o(or)c(instance,)h(the)f(body)g(of:)975
1858 y FD(a)i FS(:-)g FC(!)p FD(;)8 b(b:)257 1972 y FP(is)13
b(compiled)f(into:)921 2034 y FS(neck)p 1044 2034 V 17
w(cut)921 2094 y(execute)h FD(b=)p FC(0)257 2199 y FP(The)j(resetting)f
(of)g FS(B)h FP(and)f FS(HB)h FP(is)f(not)h(quite)f(all)g(that)g(may)h
(be)f(done)h(upon)f(a)g(cut.)25 b(Indeed,)257 2259 y(discarding)10
b(a)g(choice)h(point)e(may)h(change)h(the)f(status)h(of)e(some)i
(bindings)f(recorded)f(as)i(con-)257 2320 y(ditional)k(in)g(the)g
(trail)g(which)g(will)g(ha)o(v)o(e)h(become)f(unconditional)f(for)h
(those)g(heap)h(\(resp.,)p 257 2371 648 2 v 301 2401
a Fz(12)332 2416 y FN(This)f(fact)g(was)g(brought)e(to)h(our)h
(attention)e(by)h(Dean)i(Rosenzweig)f([Ros91)o(])g(who)f(noticed)g
(that)h(the)257 2466 y(scheme)e(gi)o(v)o(en)e(in)g([AK90)o(])g(was)g
(erroneous.)16 b(W)m(e)11 b(gratefully)f(ackno)o(wledge)h(his)g
(suggesting)f(the)h(corrected)257 2516 y(scheme)h(we)f(describe)g(ne)o
(xt.)258 2640 y(P)o FL(A)q(G)r(E)i FN(8)r(4)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 85 100
85 99 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(stack\))h(v)o(ariables)g(whose)h(addresses)
g(will)f(no)o(w)g(be)g(greater)g(than)g FS(HB)g FP(\(resp.,)i
FS(B)o FP(\).)25 b(There-)71 349 y(fore,)11 b(this)h(calls)g(for)f(a)h
(clean-up)f(of)h(the)f(trail)g(up)h(to)g(the)f(trail)g(address)h
(indicated)g(by)g(the)f(re-)71 409 y(instated)i(choice)g(point)g
(frame.)18 b(This)c(amounts)f(to)g(remo)o(ving)f(the)h(appropriate)g
(addresses)71 469 y(from)h(the)i(trail)g(and)g(tamping)f(it)h(do)o(wn)f
(to)h(eliminate)f(the)h(holes)h(this)f(may)f(ha)o(v)o(e)i(created)71
530 y(in)g(it.)31 b(\(This)17 b(operation)g(is)h(gi)o(v)o(en)f(as)h(an)
g(ancillary)e(operation)h(called)h FB(tidy)p 1439 530
15 2 v 17 w(tr)o(ail)g FP(in)f(Ap-)71 590 y(pendix)12
b(B.\))71 667 y(Re)o(garding)i(deep)g(cuts,)i(the)e(complication)g(is)h
(that)f(the)g(calls)h(to)g(interv)o(ening)e(body)h(goals)71
727 y(will)g(o)o(v)o(erwrite)g(the)g(cut)g(re)o(gister)h
FS(B0)f FP(between)g(the)h(time)f(the)g(clause)h(containing)f(the)h
(cut)71 787 y(is)d(entered)g(and)g(the)h(time)f(the)g(cut)g(is)h(e)o(x)
o(ecuted.)j(Ho)o(we)o(v)o(er)n(,)c(all)g(choice)h(points)f(created)g
(be-)71 847 y(tween)e(the)g(setting)g(of)g FS(B0)g FP(upon)g(calling)g
(this)h(clause')m(s)g(procedure)e(and)i(this)f(deep)g(cut)h(must)71
907 y(be)g(discarded.)k(Therefore,)d(in)f(e)o(xactly)h(the)f(same)h
(way)f(as)h(for)e FS(CP)p FP(,)i(it)f(will)g(be)h(necessary)g(to)71
967 y(sa)o(v)o(e)h FS(B0)g FP(further)f(as)h(part)g(of)f(the)h(cut)g
(clause')m(s)h(en)n(vironment.)i(F)o(ortunately)m(,)c(it)h(is)g(not)g
(nec-)71 1028 y(essary)g(to)f(do)h(so)g(systematically)g(for)f(all)g
(clauses)i(since)f(most)g(do)f(not)h(contain)f(deep)h(cuts.)71
1088 y(Thus,)f(rather)e(than)g(e)o(xtending)h(the)f(format)g(of)g(an)h
(en)n(vironment)e(frame)h(with)h(a)f(special)i(slot)71
1148 y(for)f FS(B0)h FP(as)g(we)g(did)g(for)f FS(CP)p
FP(,)h(it)g(is)g(preferable)f(to)h(sa)o(v)o(e)h(it)f(as)g(a)g(pseudo)h
(permanent)e(v)o(ariable.)71 1208 y(The)17 b(situation)g(then)g(is)g
(to)g(assimilate)g(a)g(deep)g(cut)g(occurrence)f(as)i
FC(!\()p FD(Y)11 b FC(\))p FP(,)18 b(where)f FD(Y)28
b FP(is)17 b(a)71 1268 y(permanent)12 b(v)o(ariable)g(distinct)g(from)g
(all)g(other)h(v)o(ariables)f(in)h(the)f(clause.)18 b(This)13
b(v)o(ariable)f(is)71 1329 y(allocated)g(in)g(the)h(current)e(en)n
(vironment)h(to)25 b(accommodate)12 b(en)n(vironment)f(trimming)h(just)
71 1389 y(like)k(the)h(other)f(real)h(permanent)g(v)o(ariables)f(\()p
FB(i.e)o(.)p FP(,)k(its)d(of)o(fset)f(is)i(greater)e(than)h(the)g
(subse-)71 1449 y(quent)12 b(goal')m(s)h(and)g(less)g(that)g(the)g
(preceding)f(goal')m(s\).)17 b(W)n(ith)12 b(this,)h(we)g(only)g(need)g
(two)f(ne)o(w)71 1509 y(instructions:)663 1557 y FC(\(1\))42
b FS(get)p 860 1557 V 18 w(level)13 b(Y)p FD(n)663 1617
y FC(\(2\))42 b FS(cut)14 b(Y)p FD(n)71 1702 y FP(such)d(that)h(\(1\))e
FS(get)p 422 1702 V 18 w(level)j(Y)p FD(n)f FP(always)f(appear)g
(immediately)g(after)g FS(allocate)f FP(in)i(the)71 1762
y(clause,)18 b(ha)o(ving)f(for)f(ef)o(fect)g(to)g(set)i
FS(Y)p FD(n)f FP(to)f(contain)h(the)f(current)g(v)o(alue)h(of)f
FS(B0)p FP(;)j(whereas,)71 1822 y(\(2\))f FS(cut)13 b
FD(Y)e(n)19 b FP(discards)g(all)g(\(if)f(an)o(y\))h(choice)g(points)f
(after)h(that)f(indicated)h(by)g FS(Y)p FD(n)p FP(,)i(and)71
1883 y(cleans)11 b(up)h(ne)o(w)f(unconditional)f(bindings)h(from)g(the)
g(trail)g(up)g(to)g(that)g(point.)k(F)o(or)c(e)o(xample,)767
1994 y FD(a)j FS(:-)f FD(b;)8 b FC(!)p FD(;)g(c:)71 2105
y FP(is)k(compiled)g(into:)95 2222 y FS(allocate)95 2282
y(get)p 188 2282 V 18 w(level)h(Y)p FC(1)95 2342 y FS(call)h
FD(b=)p FC(0)p FD(;)8 b FC(1)95 2402 y FS(cut)14 b(Y)p
FC(1)95 2462 y FS(deallocate)95 2523 y(execute)g FD(c=)p
FC(0)71 2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)c
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(8)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 86 101
86 100 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(Note)20 b(no)o(w)e(that)h(the)h(presence)f(of)g(a)h(deep)f(cut)g(in)
g(a)h(rule)e(that)h(would)g(otherwise)g(be)g(a)257 349
y(chain)13 b(rule)g(\()p FB(e)o(.g)o(.)p FP(,)h FD(a)h
FS(:-)f FD(b;)8 b FC(!)p FD(:)p FP(\))k(makes)h(it)f(a)h(deep)g(rule)g
(requiring)f(en)n(vironment)f(allocation.)257 409 y(Ho)o(we)o(v)o(er)n
(,)h(this)g(not)f(the)h(case)g(when)g(a)f(shallo)o(w)h(cut)f(occurs)h
(in)f(rule)h(that)f(would)g(otherwise)257 469 y(be)j(a)f(chain)g(rule.)
18 b(A)13 b(neck)h(cut)f(does)g(not)g(make)g(such)g(a)h(rule)f(a)g
(deep)g(rule,)h(e)o(v)o(en)f(though)g(it)257 530 y(might)f(be)h
(construed)f(as)h(ha)o(ving)f(two)f(body)h(goals.)257
606 y(The)j(scheme)g(just)g(described)f(deals)h(correctly)f(with)g
(cuts)g(in)h(the)f(case)h(where)f(the)h(clause)257 667
y(in)e(question)g(is)g(the)g(\002rst)f(e)o(x)o(ecuted)i(among)f(those)g
(of)f(the)h(called)g(procedure.)k(Ho)o(we)o(v)o(er)n(,)c(it)257
727 y(is)k(not)e(quite)h(complete)f(as)i(gi)o(v)o(en)e(to)h(be)g
(correct)f(if)h(the)f(clause)i(is)f(e)o(x)o(ecuted)g(after)g(back-)257
787 y(tracking)d(within)f(the)i(same)f(procedure.)18
b(Then,)c(there)f(is)g(yet)h(the)f(problem)f(of)h(restoring)f(a)257
847 y(correct)g(v)o(alue)g(for)g FS(B0)p FP(.)j(F)o(or)d(e)o(xample,)h
(consider)f(the)h(follo)o(wing)e(pattern:)972 946 y FD(a)i
FS(:-)h FD(b;)8 b(c:)972 1006 y(a)13 b FS(:-)h FC(!)p
FD(;)8 b(d:)972 1066 y(a)13 b FS(:-)22 b FD(:)8 b(:)g(:)257
1165 y FP(At)18 b(the)f(time)g FD(a)g FP(is)g(called,)i
FS(B0)e FP(is)h(set)f(to)g(the)h(current)e(choice)h(point.)30
b(When)18 b(the)f(clause)257 1225 y FD(a)24 b FS(:-)g
FD(b;)8 b(c:)17 b FP(is)i(e)o(x)o(ecuted,)h(the)e(call)g(to)g
FD(b)g FP(o)o(v)o(erwrites)g FS(B0)o FP(.)33 b(No)o(w)m(,)19
b(if)f(the)g(call)g(to)g FD(b)g FP(fails,)257 1285 y(backtracking)e(to)
f(the)h(follo)o(wing)e(clause)j(will)e(e)o(x)o(ecute)i(the)f(shallo)o
(w)f(cut)h(and)g(reset)g FS(B)g FP(to)257 1345 y(the)d(spurious)f(v)o
(alue)g(left)g(in)g FS(B0)g FP(by)h(the)f(failed)f(call)i(to)f
FD(b)p FP(.)257 1422 y(This)j(simple)f(e)o(xample)f(illustrates)h(the)g
(need)g(for)f(restoring)g FS(B0)g FP(to)h(a)g(correct)f(v)o(alue)h
(upon)257 1482 y(backtracking.)j(But)c(what)g(\(and)g(where\))f(is)h
(this)g(correct)g(v)o(alue?)k(It)12 b(would)g FB(not)h
FP(be)g(correct)257 1542 y(to)h(reset)f FS(B0)h FP(to)f(the)h(choice)f
(point)g(preceding)g(the)h(current)f FS(B)g FP(since,)i(as)f(observ)o
(ed)g(before,)257 1602 y(inde)o(xing)j(may)g(ha)o(v)o(e)h(created)f
(two)g(choice)g(points)g(for)f(the)h(procedure)g(and)g(there)g(is)g(no)
257 1663 y(simple)j(way)f(to)h(detect)f(this.)38 b(The)20
b(solution)f(that)h(we)g(adopt)f(here)g(is)h(simple.)38
b(\(More)257 1723 y(ef)o(\002cient)9 b(b)o(ut)g(more)g(complicated)g
(alternati)o(v)o(es)g(can)g(be)h(de)o(vised\227)p FB(e)o(.g)o(.)p
FP(,)i(see)e(Ex)o(ercise)g(5.6.\))257 1783 y(Namely)m(,)i(the)f(v)o
(alue)g(of)g(the)g(cut)g(re)o(gister)g FS(B0)g FP(is)h(systematically)f
(sa)o(v)o(ed)h(as)g(part)f(of)g(a)g(choice)257 1843 y(point)k(at)g(its)
g(creation)f(and)h(restored)g(upon)f(backtracking)h(from)f(that)g
(information)g(sa)o(v)o(ed)257 1903 y(in)e(the)g(current)f(choice)h
(point.)k(Accordingly)m(,)11 b(the)h(format)f(of)h(a)g(choice)g(point)f
(frame)h(gi)o(v)o(en)257 1964 y(on)k(P)o(age)f(38)g(is)h(e)o(xtended)f
(with)g(an)g(additional)g(slot)g(for)f(this)i(purpose)f(\(as)g(sho)o
(wn)g(in)g(the)257 2024 y(complete)i(layout)f(on)g(P)o(age)h(117\))e
(and)i(the)f FS(try)p 1143 2024 15 2 v 18 w(me)p 1221
2024 V 18 w(else)g FP(and)g FS(try)g FP(instructions)g(are)257
2084 y(modi\002ed)9 b(appropriately)m(.)14 b(\(So)9 b(is)h
FS(allocate)f FP(since)i(it)e(must)h(account)g(for)f(this)h(additional)
257 2144 y(slot)j(space)g(when)f FS(B)h FP(is)f(the)h(top)f(of)g(the)g
(stack.\))257 2221 y(W)l(e)h(no)o(w)g(ha)o(v)o(e)g(a)g(complete)g(and)g
(correct)f(scheme)h(for)f(handling)g(cut.)18 b(All)12
b(the)h(machinery)257 2281 y(we)h(just)g(presented)g(is)g(taken)g(into)
f(account)h(in)g(the)f(e)o(xplicit)h(de\002nitions)f(of)h(the)g
(complete)257 2341 y(W)-6 b(AM)13 b(instructions)f(gi)o(v)o(en)g(in)g
(Appendix)g(B.)379 2459 y Fq(Exer)o(cise)i(5.6)f FR(The)g(follo)o(wing)
d(is)j(suggested)e(by)i([Ros91)o(].)20 b(The)13 b(problem)g(of)g(kno)o
(wing)e(to)379 2516 y(which)g(v)o(alue)f FQ(B0)i FR(must)f(be)g
(restored)f(upon)g(backtracking)g(may)i(be)f(solv)o(ed)f(in)h(a)g
(better)g(way)258 2640 y FN(P)o FL(A)q(G)r(E)i FN(8)r(6)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 87 102
87 101 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 193 289 a FR(than)h(systematically)f(sa)o(ving)h(it)h
(as)g(part)f(of)h(a)h(choice)f(point.)27 b(It)16 b(is)f(possible)f(to)i
(use)g(two)193 345 y(slightly)9 b(dif)o(ferent)j(v)o(ersions)g(for)g
FQ(retry)p 876 345 14 2 v 18 w(me)p 948 345 V 17 w(else)i
FR(\(resp.,)f FQ(retry)p FR(\))h(depending)d(on)h(the)193
402 y(le)o(v)o(el)h(of)h(inde)o(xing)f(the)o(y)h(are)g(used)g(for)n(.)
22 b(An)14 b(\223outer\224)g(v)o(ersion,)g(say)g FQ(retry)p
1451 402 V 18 w(me)p 1523 402 V 17 w(else)p 1648 402
V 17 w(1)193 458 y FR(\(resp.,)c FQ(retry)p 454 458 V
18 w(1)p FR(\))g(would)f(reset)g FQ(B0)i FR(to)e(the)h(pre)o(vious)e
(choice)i(point,)f(and)g(an)h(inner)f(v)o(ersion)193
515 y(,)18 b(say)e FQ(retry)p 437 515 V 17 w(me)p 508
515 V 17 w(else)p 633 515 V 18 w(2)g FR(\(resp.,)j FQ(retry)p
961 515 V 17 w(2)p FR(\))e(would)e(reset)h FQ(B0)h FR(to)f(the)g
(choice)g(point)193 571 y(preceding)c(the)h(pre)o(vious)e(one.)19
b(Gi)o(v)o(e)13 b(a)g(correct)h(translation)d(scheme)i(and)g(all)f
(appropriate)193 627 y(modi\002cations)g(needed)j(in)f(the)g(e)o
(xplicit)f(de\002nitions)f(of)i(Appendix)f(B)i(to)f(implement)g(this)
193 684 y(solution.)193 811 y Fq(Exer)o(cise)e(5.7)24
b FR(Refer)13 b(to)f(the)f(remark)i(made)g(in)e(F)o(ootnote)g(3)h(on)g
(P)o(age)g(38.)17 b(Gi)o(v)o(e)11 b(all)h(appro-)193
867 y(priate)g(modi\002cations)g(needed)i(in)e(the)h(pseudo-code)g(gi)o
(v)o(en)f(in)h(Appendix)f(B)i(de\002ning)e(the)193 924
y(W)-5 b(AM)10 b(instructions)e(and)j(ancillary)f(operations)f(in)h
(order)h(to)g(eliminate)f(the)g(arity)h(slot)e(from)193
980 y(choice)i(point)e(frames.)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(8)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 88 103
88 102 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 258 2640
a FN(P)o FL(A)q(G)r(E)f FN(8)r(8)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 89 104
89 103 bop 71 637 a FG(Chapter)26 b(6)71 862 y(Conclusion)71
1104 y FP(In)18 b(this)h(tutorial,)g(we)g(ha)o(v)o(e)g(conducted)g(an)g
(e)o(xhausti)o(v)o(e)g(reconstruction)e(of)i(an)g(abstract)71
1165 y(machine)13 b(architecture)f(for)h(Prolog)f(as)i(completely)f(as)
h(it)f(has)h(been)f(concei)o(v)o(ed)h(by)f(Da)o(vid)71
1225 y(H.)f(D.)h(W)l(arren.)j(Starting)11 b(from)g(a)i(mere)f
(\002rst-order)f(term)g(uni\002cation)h(machine,)h(we)f(ha)o(v)o(e)71
1285 y(elaborated)j(its)h(design)h(gradually)m(,)f(introducing)f(each)h
(needed)g(concept)g(as)h(didactically)71 1345 y(as)e(we)g(thought)f
(possible.)24 b(Doing)14 b(so,)i(we)f(ha)o(v)o(e)h(stri)o(v)o(en)e(to)h
(justify)f(e)o(v)o(ery)h(single)f(design)71 1405 y(decision,)f(e)o
(xplicating)f(often)f(subtle)i(interplays)f(as)h(the)o(y)f(arose.)71
1482 y(Ob)o(viously)m(,)17 b(the)f(design)g(that)g(we)g(ha)o(v)o(e)h
(attained)f(necessarily)g(does)h(not)f(contain)g(all)g(the)71
1542 y(tools)21 b(needed)h(for)f(constructing)g(a)h(complete)f(Prolog)g
(compiler)g(and)h(run-time)e(en)n(vi-)71 1603 y(ronment.)29
b(Namely)m(,)18 b(man)o(y)f(details)g(re)o(garding)g(other)f
(interesting)h(Prolog)f(control)g(con-)71 1663 y(structs)e(\()p
FB(e)o(.g)o(.)p FP(,)j(conditional,)d(freeze,)h FB(etc.)p
FP(\),)h(e)o(xtra-logical)d(and)i(b)o(uilt-in)e(procedures)h(\()p
FB(e)o(.g)o(.)p FP(,)71 1723 y(assert/retract,)19 b(setof,)h
FB(etc.)p FP(\),)h(input/output)16 b(facilities,)k FB(etc.)p
FP(,)g(are)f(yet)f(to)g(be)g(spelled)g(out.)71 1783 y(Ho)o(we)o(v)o(er)
n(,)h(all)e(this)h(is)g(clearly)g(be)o(yond)g(the)g(scope)g(of)f(this)h
(tutorial.)31 b(These)19 b(additional)71 1843 y(features,)g(as)f(well)g
(as)g(an)o(y)g(other)g(operationally)e(well-de\002ned)h(interesting)g
(e)o(xtensions,)71 1904 y(can)12 b(be)g(inte)o(grated)f(into)h(the)g
(pure)f(W)-6 b(AM)13 b(design)f(we)g(ha)o(v)o(e)g(presented)g(without)f
(e)o(xcessi)o(v)o(e)71 1964 y(labor)m(.)71 2041 y(F)o(or)f(those)h
(interested)f(in)h(more)f(adv)o(anced)g(material)g(using)h(W)-6
b(AM)11 b(ideas,)h(some)f(works)f(are)71 2101 y(worth)e(mentioning)h
(for)g(further)g(reading.)14 b(In)c(particular)n(,)g(the)f(manner)h(in)
g(which)f(the)h(W)-6 b(AM)71 2161 y(re)o(gards)13 b(uni\002cation)h
(has)g(a)h(strong)f(relation)f(with)h(partial)f(e)o(v)o(aluation)h
(techniques)g(as)h(e)o(x-)71 2221 y(plained)h(in)h(particular)e(in)i
([K)o(ur87)o(].)29 b(Also,)18 b(since)f(compilation)f(as)h(done)g(by)g
(the)f(W)-6 b(AM)71 2281 y(treats)17 b(each)h(procedure)f
(independently)g(of)g(the)g(rest)h(of)f(the)h(program,)g(global)f
(analysis)71 2341 y(techniques)g(can)h(therefore)e(be)i(considered)f
(as)h(in)f([Mel85,)h(D)o(W86a)o(,)g(D)o(W86b)o(,)g(Deb89,)71
2402 y(D)o(W89)o(,)e(vR90,)g(vRD90].)26 b(Finally)m(,)16
b(one)g(will)f(\002nd)g(copious)h(material)f(about)h(impro)o(ving)71
2462 y(backtracking)11 b(in)i(Prolog)e(in)h([PP82)o(,)h(BP84)o(,)g
(Cox84,)g(CCF88,)g(ZTU90)q(,)g(Zho90].)855 2640 y(89)p
eop
%%Page: 90 105
90 104 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(At)20 b(an)o(y)g(rate,)i(we)d(hope)h(to)f(ha)o(v)o(e)h(contrib)o
(uted)f(to)h(gi)o(v)o(e)f(the)h(reader)f(a)h(rapid)f(and)h(clear)257
349 y(understanding)c(with)g(thorough,)g(if)g(not)g(formal,)g
(justi\002cation)g(of)f(all)h(the)g(details)h(of)e(the)257
409 y(essential)20 b(abstract)e(machine.)34 b(Our)19
b(aim)f(has)h(been)g(to)f(lea)o(v)o(e)h(as)g(little)f(une)o(xplained)h
(as)257 469 y(possible,)14 b(opening)e(up)g(W)l(arren')m(s)g(original)g
(design.)k(Seen)c(thus)h(decomposed)g(and)f(recon-)257
530 y(structed)h(from)f(its)g(logical)h(components,)g(the)g(W)-6
b(AM')m(s)13 b(or)o(ganization)f(and)g(workings)g(lose)257
590 y(all)h(mystery)m(.)j(Y)-5 b(et,)13 b(far)f(from)f(lessening)i(its)
g(designer')m(s)g(credit,)f(understanding)g(the)h(W)-6
b(AM)257 650 y(can)13 b(make)g(one)g(appreciate)f(all)h(the)g(more)f
(Da)o(vid)h(H.)g(D.)g(W)l(arren')m(s)g(feat,)g(as)g(he)g(concei)o(v)o
(ed)257 710 y(this)f(architecture)f(in)g(his)h(mind)f(as)h(one)g
(whole.)j(W)l(e)d(are)g(pleased)g(to)f(ha)o(v)o(e)h(shared)g(with)f
(the)257 770 y(reader)h(our)g(admiration)f(for)h(his)h(contrib)o
(ution')m(s)e(adequac)o(y)i(and)f(ele)o(gance.)258 2640
y FN(P)o FL(A)q(G)r(E)h FN(9)r(0)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 91 106
91 105 bop 71 637 a FG(A)m(ppendix)26 b(A)71 862 y(Pr)n(olog)e(in)i(a)g
(Nutshell)71 1104 y FP(W)l(e)17 b(\002rst)g(present)g(basic)h(notions)f
(for)g(\002rst-order)f(terms)h(and)g(substitutions.)31
b(Then,)19 b(we)71 1165 y(describe)13 b(a)h(non-deterministic)f
(uni\002cation)g(algorithm)f(as)j(a)f(set)g(of)f(solution-preserving)71
1225 y(transformations)d(on)i(a)g(set)g(of)f(equations)h(due)g(to)f
(Herbrand)g([Her71)o(])h(\()p FB(cf)o(.)p FP(,)g(P)o(age)g(148\))g(and)
71 1285 y(redisco)o(v)o(ered)k(by)g(Martelli-Montanari)f([MM82].)27
b(Then,)19 b(we)d(summarize)g(the)g(essence)71 1345 y(of)c(Prolog')m(s)
f(operational)h(semantics.)71 1539 y FA(T)-7 b(erms)17
b(and)h(substitutions)71 1669 y FP(Let)12 b FK(f)p FC(\006)209
1676 y Fy(n)233 1669 y FK(g)258 1676 y Fy(n)p Fk(\025)p
FE(0)338 1669 y FP(be)h(an)f(inde)o(x)o(ed)g(family)f(of)h(mutually)f
(disjoint)h(sets)g(of)g(\(function\))e(symbols)71 1729
y(of)18 b(arity)g FD(n)p FP(.)35 b(Let)19 b FC(\006)26
b(=)527 1696 y Fh(S)562 1740 y Fy(n)p Fk(\025)p FE(0)638
1729 y FC(\006)673 1736 y Fy(n)716 1729 y FP(be)19 b(the)g(set)g(of)f
(all)h(function)f(symbols.)35 b(Let)19 b FK(V)k FP(be)18
b(a)71 1789 y(countably)e(in\002nite)f(set)i(of)f FB(variables)p
FP(.)29 b(By)17 b(con)n(v)o(ention,)h(v)o(ariables)e(will)g(be)h
(capitalized)71 1850 y(not)12 b(to)g(confuse)g(them)g(with)g(constants)
h(in)f FC(\006)862 1857 y FE(0)882 1850 y FP(.)71 1926
y(Let)g FK(T)26 b FP(be)12 b(the)g(set)h(of)f(\(\002rst-order\))e
FB(terms)j FP(de\002ned)f(as)h(the)g(smallest)f(set)h(such)g(that:)71
2032 y FK(\017)o FP(if)f FD(X)32 b FK(2)c(V)16 b FP(then)d
FD(X)32 b FK(2)c(T)12 b FP(;)71 2092 y FK(\017)o FP(if)g
FD(a)28 b FK(2)g FC(\006)288 2099 y FE(0)320 2092 y FP(then)12
b FD(a)27 b FK(2)h(T)13 b FP(;)71 2153 y FK(\017)o FP(if)f
FD(f)33 b FK(2)28 b FC(\006)291 2160 y Fy(n)315 2153
y FP(,)13 b FC(\()p FD(n)h FK(\025)f FC(1\))p FP(,)h(and)e
FD(t)625 2160 y Fy(i)666 2153 y FK(2)28 b(T)13 b FD(;)8
b FC(\(1)14 b FK(\024)g FD(i)f FK(\024)h FD(n)p FC(\))p
FP(,)f(then)f FD(f)5 b FC(\()p FD(t)1219 2160 y FE(1)1239
2153 y FD(;)j(:)g(:)g(:)f(;)h(t)1366 2160 y Fy(n)1389
2153 y FC(\))28 b FK(2)g(T)12 b FP(.)71 2258 y(F)o(or)k(e)o(xample,)i
(gi)o(v)o(en)f(the)f(signature)h FC(\006)g FP(such)g(that)f
FD(p)44 b FK(2)g FC(\006)1188 2265 y FE(3)1208 2258 y
FP(,)18 b FD(h)44 b FK(2)g FC(\006)1422 2265 y FE(2)1442
2258 y FP(,)18 b FD(f)49 b FK(2)44 b FC(\006)1657 2265
y FE(1)1677 2258 y FP(,)71 2319 y(and)18 b FD(a)50 b
FK(2)g FC(\006)355 2326 y FE(0)375 2319 y FP(,)21 b(and)d(gi)o(v)o(en)g
(that)h FD(W)7 b FP(,)20 b FD(X)t FP(,)h FD(Y)11 b FP(,)21
b(and)d FD(Z)23 b FP(are)18 b(v)o(ariables)g(in)g FK(V)t
FP(,)i(the)f(terms)71 2379 y FD(p)p FC(\()p FD(Z)q(;)8
b(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d FC(\()p
FD(W)i FC(\)\))12 b FP(and)h FD(p)p FC(\()p FD(f)5 b
FC(\()p FD(X)t FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k FC(\))g FP(are)g(in)g
FK(T)h FP(.)71 2456 y(A)i FB(substitution)g FP(is)h(a)g(\002nitely)e
(non-identical)h(assignment)g(of)g(terms)h(to)f(v)o(ariables;)h
FB(i.e)o(.)p FP(,)i(a)71 2516 y(function)12 b FD(\033)i
FP(from)e FK(V)17 b FP(to)c FK(T)26 b FP(such)13 b(that)g(the)g(set)g
FK(f)p FD(X)35 b FK(2)30 b(V)18 b(j)d FD(X)35 b FK(6)p
FC(=)30 b FD(\033)r FC(\()p FD(X)t FC(\))p FK(g)12 b
FP(is)i(\002nite.)j(This)855 2640 y(91)p eop
%%Page: 92 107
92 106 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(set)g(is)g(called)g(the)f FB(domain)g FP(of)g FD(\033)i
FP(and)f(denoted)f(by)g FF(dom)p FC(\()p FD(\033)r FC(\))p
FP(.)19 b(Such)13 b(a)h(substitution)f(is)h(also)257
349 y(written)e(as)g(a)h(set)f(such)g(as)h FD(\033)i
FC(=)f FK(f)p FD(t)861 356 y Fy(i)875 349 y FD(=X)939
356 y Fy(i)954 349 y FK(g)979 331 y Fy(n)979 361 y(i)p
FE(=1)1050 349 y FP(where)e FF(dom)p FC(\()p FD(\033)r
FC(\))o(=)i FK(f)p FD(X)1462 356 y Fy(i)1477 349 y FK(g)1502
331 y Fy(n)1502 361 y(i)p FE(=1)1573 349 y FP(and)e FD(\033)r
FC(\()p FD(X)1746 356 y Fy(i)1760 349 y FC(\))i(=)g FD(t)1863
356 y Fy(i)257 409 y FP(for)e FD(i)h FC(=)h(1)f FP(to)f
FD(n)p FP(.)257 486 y(A)h(substitution)f FD(\033)i FP(is)e(uniquely)g
(e)o(xtended)h(to)f(a)h(function)p 1281 460 30 2 v 11
w FD(\033)h FP(from)d FK(T)25 b FP(to)13 b FK(T)25 b
FP(as)13 b(follo)o(ws:)257 592 y FK(\017)p 282 565 V
FD(\033)r FC(\()p FD(X)t FC(\))h(=)g FD(\033)r FC(\()p
FD(X)t FC(\))p FP(,)e(if)g FD(X)32 b FK(2)c(V)t FP(;)257
652 y FK(\017)p 282 626 V FD(\033)r FC(\()p FD(a)p FC(\))13
b(=)h FD(a)p FP(,)e(if)g FD(a)28 b FK(2)f FC(\006)683
659 y FE(0)703 652 y FP(;)257 712 y FK(\017)p 282 686
V FD(\033)r FC(\()p FD(f)5 b FC(\()p FD(t)397 719 y FE(1)416
712 y FD(;)j(:)g(:)g(:)g(;)g(t)544 719 y Fy(n)567 712
y FC(\)\))14 b(=)f FD(f)5 b FC(\()p 718 686 V FD(\033)r
FC(\()p FD(t)785 719 y FE(1)804 712 y FC(\))p FD(;)j(:)g(:)g(:)g(;)p
933 686 V 8 w(\033)q FC(\()p FD(t)999 719 y Fy(n)1022
712 y FC(\)\))p FP(,)13 b(if)f FD(f)33 b FK(2)28 b FC(\006)1281
719 y Fy(n)1305 712 y FP(,)13 b FD(t)1348 719 y Fy(i)1389
712 y FK(2)28 b(T)13 b FD(;)8 b FC(\(1)14 b FK(\024)f
FD(i)h FK(\024)f FD(n)p FC(\))p FP(.)257 818 y(Since)e(the)o(y)h
(coincide)f(on)g FK(V)t FP(,)g(and)g(for)g(notation)f(con)n(v)o
(enience,)i(we)g(deliberately)e(confuse)h(a)257 878 y(substitution)f
FD(\033)h FP(and)e(its)h(e)o(xtension)p 877 852 V 10
w FD(\033)r FP(.)15 b(Also,)10 b(rather)f(than)h(writing)e
FD(\033)r FC(\()p FD(t)p FC(\))p FP(,)i(we)g(shall)g(write)f
FD(t\033)r FP(.)257 938 y(Gi)o(v)o(en)15 b(two)f(substitutions)g
FD(\033)19 b FC(=)f FK(f)p FD(t)893 945 y Fy(i)907 938
y FD(=X)971 945 y Fy(i)986 938 y FK(g)1011 920 y Fy(n)1011
951 y(i)p FE(=1)1084 938 y FP(and)d FD(\022)k FC(=)e
FK(f)p FD(s)1316 945 y Fy(j)1335 938 y FD(=)s(Y)1390
945 y Fy(j)1408 938 y FK(g)1433 920 y Fy(m)1433 951 y(j)r
FE(=1)1496 938 y FP(,)f(their)e(composition)257 999 y
FD(\033)r(\022)g FP(is)f(the)f(substitution)g(which)h(yields)g(the)f
(same)h(result)g(on)f(all)h(terms)f(as)h(\002rst)g(applying)f
FD(\033)257 1059 y FP(then)h(applying)e FD(\022)j FP(on)e(the)h
(result.)i(One)e(computes)f(such)h(a)f(composition)g(as)h(the)f(set:)
466 1167 y FD(\033)r(\022)i FC(=)42 b(\()13 b FK(f)p
FD(t\022)q(=X)19 b FK(j)13 b FD(t=X)32 b FK(2)c FD(\033)r
FK(g)d(\000)f(f)p FD(X=X)19 b FK(j)14 b FD(X)32 b FK(2)c
FF(dom)p FC(\()p FD(\033)r FC(\))o FK(g)14 b FC(\))613
1228 y FK([)27 b FC(\()14 b FD(\022)26 b FK(\000)f(f)p
FD(s=)s(Y)g FK(j)14 b FD(Y)38 b FK(2)28 b FF(dom)p FC(\()p
FD(\033)r FC(\))p FK(g)14 b FC(\))p FD(:)257 1339 y FP(F)o(or)g(e)o
(xample,)h(if)e FD(\033)19 b FC(=)d FK(f)p FD(f)5 b FC(\()p
FD(Y)12 b FC(\))p FD(=X)q(;)c(U)r(=V)13 b FK(g)h FP(and)g
FD(\022)k FC(=)e FK(f)p FD(b=X)q(;)8 b(f)d FC(\()p FD(a)p
FC(\))p FD(=)s(Y)s(;)j(V)d(=U)g FK(g)p FP(,)17 b(then)d(com-)257
1399 y(posing)f FD(\033)h FP(and)f FD(\022)h FP(yields)f
FD(\033)r(\022)i FC(=)g FK(f)p FD(f)5 b FC(\()p FD(f)g
FC(\()p FD(a)p FC(\)\))p FD(=X)q(;)j(f)d FC(\()p FD(a)p
FC(\))p FD(=)s(Y)s(;)j(V)d(=U)g FK(g)p FP(,)15 b(while)e(composing)f
FD(\022)i FP(and)257 1459 y FD(\033)g FP(gi)o(v)o(es)f
FD(\022)q(\033)i FC(=)f FK(f)p FD(b=X)q(;)8 b(f)d FC(\()p
FD(a)p FC(\))p FD(=)s(Y)s(;)j(U)r(=V)13 b FK(g)p FP(.)257
1536 y(Composition)g(de\002nes)f(a)h(preorder)f(\()p
FB(i.e)o(.)p FP(,)i(a)e(re\003e)o(xi)o(v)o(e)h(and)f(transiti)o(v)o(e)g
(relation\))g(on)g(substi-)257 1596 y(tutions.)28 b(A)17
b(substitution)f FD(\033)i FP(is)f FB(mor)n(e)g(gener)o(al)f
FP(than)h(a)g(substitution)f FD(\022)h FP(if)o(f)f(there)g(e)o(xists)h
(a)257 1656 y(substitution)f FD(\032)g FP(such)g(that)f
FD(\022)21 b FC(=)f FD(\033)r(\032)p FP(.)26 b(F)o(or)15
b(e)o(xample,)i FK(f)p FD(f)5 b FC(\()p FD(Y)12 b FC(\))p
FD(=X)t FK(g)k FP(is)g(more)f(general)h(than)257 1717
y FK(f)p FD(f)5 b FC(\()p FD(f)g FC(\()p FD(a)p FC(\)\))p
FD(=X)q(;)j(f)d FC(\()p FD(a)p FC(\))p FD(=)s(Y)13 b
FK(g)p FP(.)257 1906 y FA(Uni\002cation)k(algorithm)257
2035 y FP(An)d FB(equation)f FP(is)h(a)g(pair)g(of)f(terms,)h(written)f
FD(s)j FC(=)h FD(t)p FP(.)i(A)14 b(substitution)g FD(\033)h
FP(is)f(a)g FB(solution)f FP(\(or)g(a)257 2095 y FB(uni\002er)p
FP(\))h(of)f(a)h(set)g(of)f(equations)h FK(f)p FD(s)886
2102 y Fy(i)916 2095 y FC(=)j FD(t)989 2102 y Fy(i)1002
2095 y FK(g)1027 2077 y Fy(n)1027 2108 y(i)p FE(=1)1100
2095 y FP(if)o(f)c FD(s)1183 2102 y Fy(i)1197 2095 y
FD(\033)18 b FC(=)e FD(t)1315 2102 y Fy(i)1329 2095 y
FD(\033)f FP(for)e(all)h FD(i)i FC(=)g(1)p FD(;)8 b(:)g(:)g(:)g(;)g(n)p
FP(.)19 b(T)l(wo)257 2156 y(sets)11 b(of)f(equations)h(are)f
FB(equivalent)g FP(if)o(f)f(the)o(y)h(both)g(admit)g
FB(all)g FP(and)g FB(only)g FP(the)g(same)h(solutions.)257
2216 y(F)o(ollo)o(wing)18 b([MM82],)i(we)e(de\002ne)g(two)g
(transformations)f(on)h(sets)h(of)f(equations\227)p FB(term)257
2276 y(decomposition)d FP(and)f FB(variable)h(elimination)p
FP(.)22 b(The)o(y)15 b(both)g(preserv)o(e)f(solutions)h(of)f(sets)i(of)
257 2336 y(equations.)257 2456 y FF(T)-5 b(erm)17 b(Decomposition)31
b FB(If)16 b(a)f(set)h FD(E)j FB(of)d(equations)f(contains)g(an)h
(equation)f(of)h(the)f(form)257 2516 y FD(f)5 b FC(\()p
FD(s)328 2523 y FE(1)348 2516 y FD(;)j(:)g(:)g(:)g(;)g(s)481
2523 y Fy(n)504 2516 y FC(\))26 b(=)g FD(f)5 b FC(\()p
FD(t)679 2523 y FE(1)699 2516 y FD(;)j(:)g(:)g(:)f(;)h(t)826
2523 y Fy(n)849 2516 y FC(\))p FB(,)21 b(wher)n(e)f FD(f)57
b FK(2)c FC(\006)1242 2523 y Fy(n)1265 2516 y FD(;)8
b FC(\()p FD(n)26 b FK(\025)g FC(0\))p FB(,)c(then)c(the)h(set)h
FD(E)1801 2498 y Fk(0)1838 2516 y FC(=)258 2640 y FN(P)o
FL(A)q(G)r(E)13 b FN(9)r(2)f FL(O)r(F)h FN(1)r(2)r(9)303
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 93 108
93 107 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FD(E)g FK(\000)c(f)p FD(f)5
b FC(\()p FD(s)266 296 y FE(1)286 289 y FD(;)j(:)g(:)g(:)g(;)g(s)419
296 y Fy(n)442 289 y FC(\))14 b(=)g FD(f)5 b FC(\()p
FD(t)593 296 y FE(1)612 289 y FD(;)j(:)g(:)g(:)g(;)g(t)740
296 y Fy(n)763 289 y FC(\))p FK(g)j([)g(f)p FD(s)910
296 y Fy(i)938 289 y FC(=)j FD(t)1008 296 y Fy(i)1021
289 y FK(g)1046 271 y Fy(n)1046 301 y(i)p FE(=1)1118
289 y FB(is)e(equivalent)g(to)h FD(E)s FB(.)1486 271
y FL(1)71 411 y FF(V)-5 b(ariable)15 b(Elimination)30
b FB(If)15 b(a)g(set)h FD(E)j FB(of)c(equations)g(contains)h(an)f
(equation)g(of)g(the)g(form)71 471 y FD(X)25 b FC(=)20
b FD(t)c FB(wher)n(e)h FD(t)41 b FK(6)p FC(=)g FD(X)t
FB(,)18 b(then)e(the)g(set)h FD(E)866 453 y Fk(0)898
471 y FC(=)k(\()p FD(E)14 b FK(\000)d(f)p FD(X)18 b FC(=)13
b FD(t)p FK(g)p FC(\))p FD(\033)i FK([)f(f)p FD(X)25
b FC(=)c FD(t)p FK(g)16 b FB(wher)n(e)71 532 y FD(\033)f
FC(=)f FK(f)p FD(t=X)t FK(g)p FB(,)f(is)f(equivalent)g(to)h
FD(E)s FB(.)71 654 y FP(A)c(set)h(of)f(equations)h FD(E)j
FP(is)d(partitioned)e(into)h(two)g(subsets:)15 b(its)10
b FB(solved)g FP(part)f(and)h(its)f FB(unsolved)71 714
y FP(part.)21 b(The)14 b(solv)o(ed)h(part)f(is)h(its)f(maximal)g
(subset)h(of)f(equations)g(of)g(the)g(form)f FD(X)22
b FC(=)17 b FD(t)d FP(such)71 774 y(that)f FD(X)19 b
FP(occurs)14 b(no)o(where)f(in)h(the)f(full)h(set)g(of)f(equations)h(e)
o(xcept)h(as)f(the)g(left-hand)f(side)h(of)71 835 y(this)d(equation)g
(alone.)k(The)d(unsolv)o(ed)g(part)f(is)h(the)f(complement)g(of)g(the)g
(solv)o(ed)h(part.)j(A)c(set)71 895 y(of)h(equations)g(is)h(said)f(to)g
(be)h FB(fully)f(solved)h FP(if)o(f)e(its)h(unsolv)o(ed)h(part)f(is)h
(empty)m(.)71 972 y(F)o(ollo)o(wing)f(is)i(a)g(uni\002cation)f
(algorithm.)19 b(It)14 b(is)g(a)g(non-deterministic)e(normalization)h
(pro-)71 1032 y(cedure)f(for)f(a)h(gi)o(v)o(en)g(set)h
FD(E)i FP(of)d(equations)g(which)g(repeatedly)g(chooses)h(and)f
(performs)g(one)71 1092 y(of)g(the)g(follo)o(wing)f(transformations)g
(until)h(none)g(applies)h(or)f(failure)e(is)j(encountered.)116
1214 y FC(\()p FD(u:)p FC(1\))25 b FP(Select)17 b(an)o(y)h(equation)g
(of)f(the)g(form)g FD(t)23 b FC(=)h FD(X)e FP(where)17
b FD(t)h FP(is)g(not)f(a)h(v)o(ariable,)h(and)245 1275
y(re)o(write)11 b(it)h(as)h FD(X)19 b FC(=)13 b FD(t)p
FP(.)116 1352 y FC(\()p FD(u:)p FC(2\))25 b FP(Select)12
b(an)o(y)h(equation)f(of)g(the)g(form)f FD(X)19 b FC(=)13
b FD(X)k FP(and)c(erase)f(it.)116 1429 y FC(\()p FD(u:)p
FC(3\))25 b FP(Select)20 b(an)o(y)g(equation)f(of)h(the)f(form)g
FD(f)5 b FC(\()p FD(s)999 1436 y FE(1)1019 1429 y FD(;)j(:)g(:)g(:)g(;)
g(s)1152 1436 y Fy(n)1175 1429 y FC(\))28 b(=)f FD(g)r
FC(\()p FD(t)1349 1436 y FE(1)1369 1429 y FD(;)8 b(:)g(:)g(:)f(;)h(t)
1496 1436 y Fy(m)1529 1429 y FC(\))20 b FP(where)245
1489 y FD(f)50 b FK(2)45 b FC(\006)432 1496 y Fy(n)473
1489 y FP(and)16 b FD(g)47 b FK(2)e FC(\006)744 1496
y Fy(m)778 1489 y FD(;)8 b FC(\()p FD(n;)g(m)21 b FK(\025)i
FC(0\))p FP(;)c(if)e FD(f)50 b FK(6)p FC(=)44 b FD(g)19
b FP(or)e FD(n)45 b FK(6)p FC(=)f FD(m)p FP(,)18 b(stop)245
1549 y(with)12 b(failure;)g(otherwise,)h(if)f FD(n)i
FC(=)h(0)e FP(erase)g(the)g(equation,)g(else)g FC(\()p
FD(n)h FK(\025)h FC(1\))e FP(replace)245 1609 y(it)f(with)g
FD(n)h FP(equations)f FD(s)654 1616 y Fy(i)682 1609 y
FC(=)i FD(t)752 1616 y Fy(i)765 1609 y FD(;)8 b FC(\()p
FD(i)14 b FC(=)f(1)p FD(;)8 b(:)g(:)g(:)g(;)g(n)p FC(\))p
FP(.)116 1686 y FC(\()p FD(u:)p FC(4\))25 b FP(Select)19
b(an)o(y)g(equation)f(of)h(the)f(form)g FD(X)30 b FC(=)c
FD(t)19 b FP(where)f FD(X)23 b FP(is)d(a)f(v)o(ariable)f(which)245
1746 y(occurs)f(some)o(where)f(else)i(in)e(the)h(set)g(of)g(equations)f
(and)h(such)g(that)g FD(t)44 b FK(6)p FC(=)g FD(X)t FP(.)245
1807 y(If)14 b FD(t)h FP(is)h(of)f(the)g(form)f FD(f)5
b FC(\()p FD(t)686 1814 y FE(1)706 1807 y FD(;)j(:)g(:)g(:)f(;)h(t)833
1814 y Fy(n)856 1807 y FC(\))p FP(,)17 b(where)e FD(f)43
b FK(2)c FC(\006)1215 1814 y Fy(n)1239 1807 y FP(,)16
b(and)f(if)g FD(X)20 b FP(occurs)15 b(in)g FD(t)p FP(,)245
1867 y(then)e(stop)f(with)h(failure;)e(otherwise,)i(let)g
FD(\033)j FC(=)e FK(f)p FD(t=X)t FK(g)f FP(and)g(replace)g(e)o(v)o(ery)
f(other)245 1927 y(equation)g FD(l)i FC(=)g FD(r)g FP(by)e
FD(l)q(\033)j FC(=)f FD(r)q(\033)r FP(.)71 2049 y(If)g(this)h
(procedure)f(terminates)g(with)h(success,)i(the)e(set)g(of)f(equations)
h(which)g(emer)o(ges)g(as)71 2110 y(the)f(outcome)f(is)i(fully)e(solv)o
(ed.)22 b(Its)14 b(solv)o(ed)g(part)g(de\002nes)g(a)g(substitution)g
(called)g(the)g FB(most)71 2170 y(gener)o(al)e(uni\002er)g
FP(\(MGU\))g(of)g(all)g(the)h(terms)f(participating)f(as)i(sides)g(of)f
(equations)g(in)g FD(E)s FP(.)k(If)71 2230 y(it)c(terminates)g(with)f
(failure,)h(the)g(set)h(of)f(equations)g FD(E)j FP(is)e
(unsatis\002able)f(and)h(no)f(uni\002er)f(for)71 2290
y(it)h(e)o(xists.)71 2367 y(The)j(set)g FD(E)38 b FC(=)e
FK(f)p FD(p)p FC(\()p FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f
FC(\))p FD(;)h(f)d FC(\()p FD(W)i FC(\)\))18 b(=)g FD(p)p
FC(\()p FD(f)5 b FC(\()p FD(X)t FC(\))p FD(;)j(h)p FC(\()p
FD(Y)s(;)g(f)d FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k FC(\))p
FK(g)p FP(,)j(for)f(e)o(xample,)71 2427 y(is)e(normalized)g(as)h(follo)
o(ws:)p 71 2470 648 2 v 129 2501 a Fz(1)145 2516 y FN(If)d
Fm(n)i Fl(=)g(0)p FN(,)e(the)g(equation)g(is)g(simply)f(deleted.)71
2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(9)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 94 109
94 108 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FK(f)p FD(Z)k FC(=)c FD(f)5 b FC(\()p FD(X)t FC(\))14
b FD(;)22 b(h)p FC(\()p FD(Z)q(;)8 b(W)f FC(\))14 b(=)g
FD(h)p FC(\()p FD(Y)s(;)8 b(f)d FC(\()p FD(a)p FC(\)\))13
b FD(;)22 b(f)5 b FC(\()p FD(W)i FC(\))14 b(=)g FD(Y)d
FK(g)379 b FP([by)12 b FC(\()p FD(u:)p FC(3\))p FP(])257
382 y FK(f)p FD(Z)18 b FC(=)c FD(f)5 b FC(\()p FD(X)t
FC(\))14 b FD(;)22 b(h)p FC(\()p FD(f)5 b FC(\()p FD(X)t
FC(\))p FD(;)j(W)f FC(\))14 b(=)g FD(h)p FC(\()p FD(Y)s(;)8
b(f)d FC(\()p FD(a)p FC(\)\))14 b FD(;)21 b(f)5 b FC(\()p
FD(W)i FC(\))14 b(=)g FD(Y)d FK(g)302 b FP([by)12 b FC(\()p
FD(u:)p FC(4\))p FP(])257 476 y FK(f)p FD(Z)18 b FC(=)c
FD(f)5 b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(f)5 b FC(\()p
FD(X)t FC(\))15 b(=)e FD(Y)25 b(;)d(W)f FC(=)13 b FD(f)5
b FC(\()p FD(a)p FC(\))14 b FD(;)22 b(f)5 b FC(\()p FD(W)i
FC(\))14 b(=)g FD(Y)d FK(g)354 b FP([by)12 b FC(\()p
FD(u:)p FC(3\))p FP(])257 570 y FK(f)p FD(Z)18 b FC(=)c
FD(f)5 b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(Y)j FC(=)14
b FD(f)5 b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(W)f FC(=)13
b FD(f)5 b FC(\()p FD(a)p FC(\))14 b FD(;)22 b(f)5 b
FC(\()p FD(W)i FC(\))14 b(=)g FD(Y)d FK(g)354 b FP([by)12
b FC(\()p FD(u:)p FC(1\))p FP(])257 663 y FK(f)p FD(Z)18
b FC(=)c FD(f)5 b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(Y)j
FC(=)14 b FD(f)5 b FC(\()p FD(X)t FC(\))14 b FD(;)22
b(W)f FC(=)13 b FD(f)5 b FC(\()p FD(a)p FC(\))14 b FD(;)22
b(f)5 b FC(\()p FD(W)i FC(\))14 b(=)g FD(f)5 b FC(\()p
FD(X)t FC(\))p FK(g)282 b FP([by)12 b FC(\()p FD(u:)p
FC(4\))p FP(])257 757 y FK(f)p FD(Z)18 b FC(=)c FD(f)5
b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(Y)j FC(=)14 b FD(f)5
b FC(\()p FD(X)t FC(\))14 b FD(;)22 b(W)f FC(=)13 b FD(f)5
b FC(\()p FD(a)p FC(\))14 b FD(;)22 b(f)5 b FC(\()p FD(f)g
FC(\()p FD(a)p FC(\)\))14 b(=)g FD(f)5 b FC(\()p FD(X)t
FC(\))p FK(g)242 b FP([by)12 b FC(\()p FD(u:)p FC(4\))p
FP(])257 850 y FK(f)p FD(Z)18 b FC(=)c FD(f)5 b FC(\()p
FD(X)t FC(\))14 b FD(;)22 b(Y)j FC(=)14 b FD(f)5 b FC(\()p
FD(X)t FC(\))14 b FD(;)22 b(W)f FC(=)13 b FD(f)5 b FC(\()p
FD(a)p FC(\))14 b FD(;)22 b(f)5 b FC(\()p FD(a)p FC(\))14
b(=)f FD(X)t FK(g)377 b FP([by)12 b FC(\()p FD(u:)p FC(3\))p
FP(])257 944 y FK(f)p FD(Z)18 b FC(=)c FD(f)5 b FC(\()p
FD(X)t FC(\))14 b FD(;)22 b(Y)j FC(=)14 b FD(f)5 b FC(\()p
FD(X)t FC(\))14 b FD(;)22 b(W)f FC(=)13 b FD(f)5 b FC(\()p
FD(a)p FC(\))14 b FD(;)22 b(X)c FC(=)c FD(f)5 b FC(\()p
FD(a)p FC(\))p FK(g)376 b FP([by)12 b FC(\()p FD(u:)p
FC(1\))p FP(])257 1038 y FK(f)p FD(Z)18 b FC(=)c FD(f)5
b FC(\()p FD(f)g FC(\()p FD(a)p FC(\)\))14 b FD(;)22
b(Y)j FC(=)13 b FD(f)5 b FC(\()p FD(f)g FC(\()p FD(a)p
FC(\)\))14 b FD(;)22 b(W)f FC(=)13 b FD(f)5 b FC(\()p
FD(a)p FC(\))14 b FD(;)22 b(X)c FC(=)c FD(f)5 b FC(\()p
FD(a)p FC(\))p FK(g)279 b FP([by)12 b FC(\()p FD(u:)p
FC(4\))p FP(])257 1131 y(producing)d(the)g(substitution)g
FD(\033)15 b FC(=)f FK(f)p FD(f)5 b FC(\()p FD(f)g FC(\()p
FD(a)p FC(\)\))p FD(=)m(Z)q(;)j(f)d FC(\()p FD(a)p FC(\))p
FD(=W)o(;)j(f)d FC(\()p FD(f)g FC(\()p FD(a)p FC(\)\))p
FD(=)s(Y)s(;)j(f)d FC(\()p FD(a)p FC(\))p FD(=X)t FK(g)11
b FP(which)257 1191 y(is)k(the)g(MGU)f(of)g FD(p)p FC(\()p
FD(Z)q(;)8 b(h)p FC(\()p FD(Z)q(;)g(W)f FC(\))p FD(;)h(f)d
FC(\()p FD(W)i FC(\)\))15 b FP(and)g FD(p)p FC(\()p FD(f)5
b FC(\()p FD(X)t FC(\))p FD(;)j(h)p FC(\()p FD(Y)s(;)g(f)d
FC(\()p FD(a)p FC(\)\))p FD(;)j(Y)k FC(\))i FP(and)h(both)f(yield)257
1252 y(the)i(same)g(term)f FD(p)p FC(\()p FD(f)5 b FC(\()p
FD(f)g FC(\()p FD(a)p FC(\)\))p FD(;)j(h)p FC(\()p FD(f)d
FC(\()p FD(f)g FC(\()p FD(a)p FC(\)\))p FD(;)j(f)d FC(\()p
FD(a)p FC(\)\))p FD(;)j(f)d FC(\()p FD(f)g FC(\()p FD(a)p
FC(\)\)\))16 b FP(when)g(applied)f(the)h(substitu-)257
1312 y(tion)c FD(\033)r FP(.)257 1496 y FA(Pr)o(olog)257
1624 y FP(Logic)18 b(programming,)e(of)h(which)g(Prolog)f(is)h
FB(the)g FP(canonical)g(language,)h(e)o(xpresses)g(pro-)257
1684 y(grams)13 b(as)g(relational)e(rules)h(of)g(the)h(form:)782
1779 y FD(r)804 1786 y FE(0)824 1779 y FC(\()840 1770
y FD(~)843 1779 y(t)861 1786 y FE(0)880 1779 y FC(\))h
FS(:-)g FD(r)1009 1786 y FE(1)1029 1779 y FC(\()1045
1770 y FD(~)1048 1779 y(t)1066 1786 y FE(1)1085 1779
y FC(\))p FD(;)8 b(:)g(:)g(:)f(;)h(r)1235 1786 y Fy(n)1259
1779 y FC(\()1275 1770 y FD(~)1278 1779 y(t)1296 1786
y Fy(n)1319 1779 y FC(\))p FD(:)257 1873 y FP(where)15
b(the)f FD(r)491 1880 y Fy(i)505 1873 y FP(')m(s)h(are)g(relationals)f
(symbols)h(and)g(the)1191 1864 y FD(~)1194 1873 y(t)1212
1880 y Fy(i)1226 1873 y FP(')m(s)g(are)f(tuples)h(of)f(\002rst-order)f
(terms.)257 1933 y(One)h(reads)g(such)g(a)g(rule)f(as:)19
b(\223)p FB(F)-5 b(or)14 b(all)g(bindings)f(of)h(their)g(variables,)h
(the)e(terms)1705 1924 y FD(~)1708 1933 y(t)1726 1940
y FE(0)1759 1933 y FB(ar)n(e)i(in)257 1993 y(r)n(elation)d
FD(r)447 2000 y FE(0)479 1993 y FB(if)g(the)g(terms)711
1984 y FD(~)714 1993 y(t)732 2000 y FE(1)764 1993 y FB(ar)n(e)g(in)g(r)
n(elation)g FD(r)1081 2000 y FE(1)1113 1993 y FB(and)g(...)k(the)c
(terms)1445 1984 y FD(~)1448 1993 y(t)1466 2000 y Fy(n)1501
1993 y FB(ar)n(e)h(in)e(r)n(elation)h FD(r)1818 2000
y Fy(n)1842 1993 y FB(.)p FP(\224)257 2054 y(In)j(the)g(case)h(where)e
FD(n)19 b FC(=)g(0)p FP(,)d(the)f(rule)g(reduces)g(to)g(the)g(simple)g
(unconditional)f(assertion,)257 2114 y(or)g FB(fact)p
FP(,)h FD(r)437 2121 y FE(0)457 2114 y FC(\()473 2105
y FD(~)476 2114 y(t)494 2121 y FE(0)513 2114 y FC(\))g
FP(that)f(the)g(terms)833 2105 y FD(~)837 2114 y(t)855
2121 y FE(0)888 2114 y FP(are)h(in)f(relation)g FD(r)1206
2121 y FE(0)1225 2114 y FP(.)22 b(A)15 b(fact)e(will)h(be)h(written)e
(omitting)257 2174 y(the)i FS(:-)g FP(symbol.)j(These)c(rules)f(are)g
(called)g FB(de\002nite)g(clauses)p FP(;)h(e)o(xpressions)g(such)f(as)h
FD(r)1793 2181 y Fy(i)1807 2174 y FC(\()1823 2165 y FD(~)1826
2174 y(t)1844 2181 y Fy(i)1857 2174 y FC(\))257 2234
y FP(are)g(called)h FB(atoms)p FP(;)g(the)f FB(head)g
FP(of)g(a)g(de\002nite)g(clause)h(is)f(the)g(atom)g(on)g(the)g(left)g
(of)g(the)31 b FS(:-)257 2294 y FP(symbol,)13 b(and)f(its)h
FB(body)f FP(is)h(the)f(conjunction)g(of)g(atoms)g(on)h(its)f(right.)
257 2371 y(F)o(or)g(e)o(xample,)h(the)g(follo)o(wing)d(are)j(two)e
(de\002nite)h(clauses,)i(the)e(\002rst)g(one)h(being)f(a)g(fact:)682
2462 y FB(conc)p FC(\([])p FD(;)c(L;)g(L)p FC(\))p FD(:)682
2523 y FB(conc)p FC(\()p FD(H)q(:T)t(;)g(L;)g(H)q(:R)p
FC(\))14 b FS(:-)g FB(conc)p FC(\()p FD(T)t(;)8 b(L;)g(R)p
FC(\))p FD(:)258 2640 y FN(P)o FL(A)q(G)r(E)13 b FN(9)r(4)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 95 110
95 109 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP(where)e(`)p FC([])p FP(')g
FK(2)28 b FC(\006)375 296 y FE(0)407 289 y FP(is)12 b(a)h(constant)f
(and)g(the)g(function)g(symbol)g(`)p FD(:)p FP(')g FK(2)28
b FC(\006)1316 296 y FE(2)1348 289 y FP(is)13 b(written)e(in)h(in\002x)
71 349 y(notation.)k(This)d(may)g(be)g(used)g(as)g(a)g(program)f(to)g
(concatenate)h(two)g(lists)g(where)f FC([])g FP(is)h(used)71
409 y(as)g(a)f(list)g(terminator)m(.)450 391 y FL(2)71
486 y FP(A)g FB(query)h FP(is)g(a)f(clause)h(of)f(the)g(form:)653
584 y FS(:-)i FD(q)749 591 y FE(1)768 584 y FC(\()n FD(~)-22
b(s)810 591 y FE(1)830 584 y FC(\))p FD(;)8 b(:)g(:)g(:)f(;)h(q)980
591 y Fy(m)1013 584 y FC(\()n FD(~)-22 b(s)1055 591 y
Fy(m)1088 584 y FC(\))p FD(:)71 683 y FP(A)10 b(query)h(as)g(sho)o(wn)g
(abo)o(v)o(e)g(may)f(be)h(read:)j(\223)p FB(Does)e(ther)n(e)f(e)o(xist)
g(some)g(binding)g(of)f(variables)71 743 y(suc)o(h)15
b(that)g(the)g(terms)g FD(~)-23 b(s)494 750 y FE(1)529
743 y FB(ar)n(e)16 b(in)f(r)n(elation)h FD(q)857 750
y FE(1)891 743 y FB(and)f(...)24 b FD(~)-22 b(s)1066
750 y Fy(m)1114 743 y FB(ar)n(e)16 b(in)f(r)n(elation)g
FD(q)1441 750 y Fy(m)1474 743 y FB(?)p FP(\224)24 b(T)l(o)16
b(em-)71 803 y(phasize)d(that)g(this)g(is)g(interpreted)f(as)i(a)f
(question,)g(the)g(symbol)i FS(:-)g FP(is)e(then)g(written)f
FS(?-)h FP(as)71 863 y(in:)646 923 y FS(?-)h FD(q)742
930 y FE(1)761 923 y FC(\()n FD(~)-22 b(s)803 930 y FE(1)823
923 y FC(\))p FD(;)8 b(:)g(:)g(:)f(;)h(q)973 930 y Fy(m)1006
923 y FC(\()n FD(~)-22 b(s)1048 930 y Fy(m)1081 923 y
FC(\))p FD(:)71 1022 y FP(SLD)14 b(resolution)f(is)h(a)h
(non-deterministic)d(deduction)i(rule)f(by)h(which)g(queries)g(are)g
(trans-)71 1082 y(formed.)34 b(It)18 b(o)o(wes)i(its)f(origins)f(to)h
(Automatic)f(Theorem)h(Pro)o(ving)f(based)h(on)g(the)g(Res-)71
1142 y(olution)f(Principle)h(disco)o(v)o(ered)h(by)f(J.)h(A.)g
(Robinson)g([Rob65)o(])f(and)h(was)g(proposed)f(by)71
1203 y(R.)12 b(A.)h(K)n(o)o(walski)f([K)n(o)o(w79)o(])g(as)g(a)h
(computation)e(rule.)k(T)m(echnically)m(,)d(it)g(is)g(characterized)g
(as)71 1263 y(linear)i(resolution)g(o)o(v)o(er)h(de\002nite)g(clauses,)
i(using)e(a)g(selection)g(function.)23 b(Linear)15 b(resolu-)71
1323 y(tion)f(is)i(a)g(particular)e(restriction)g(of)h(the)g
(non-deterministic)f(application)h(of)g(the)g(general)71
1383 y(deduction)k(rule)g(de\002ned)g(in)h([Rob65)o(])g(so)g(that)f
(one)h(single)f(\002x)o(ed)h(clause)g(keeps)g(being)71
1443 y(transformed)14 b(by)h(resolving)h(it)f(against)g(other)g
(clauses)i(in)e(a)h(gi)o(v)o(en)g(set.)25 b(SLD)16 b(resolution)71
1504 y(is)g(a)h(further)e(restriction)g(of)h(linear)g(resolution)g
(where)g(\(1\))f(the)h(\002x)o(ed)h(clause)g(is)f(a)h(query)m(,)71
1564 y(\(2\))11 b(clauses)j(in)f(the)f(set)h(are)g(de\002nite,)g(and)f
(\(3\))g(an)h(oracular)f(function)g(selects)h(which)g(atom)71
1624 y(in)h(the)g(query)g(to)g(resolv)o(e)h(on)f(and)g(which)g
(de\002nite)g(clause)h(in)f(the)h(set)f(to)h(resolv)o(e)f(against.)71
1684 y(Thus,)k(the)f(letters)f(\223SLD\224)h(stand)f(respecti)o(v)o
(ely)h(for)e(\223)p FB(Selection)p FP(,)m(\224)j(\223)p
FB(Linear)p FP(,)m(\224)f(and)g(\223)p FB(De\002-)71
1744 y(nite)p FP(.)m(\224)71 1821 y(More)i(speci\002cally)m(,)i(using)e
(the)g(abo)o(v)o(e)h(Prolog)e(notation)h(for)f(queries)h(and)g(rules,)i
(SLD)71 1881 y(resolution)14 b(consists)i(in)f(choosing)g(an)g(atom)g
FD(q)906 1888 y Fy(i)919 1881 y FC(\()n FD(~)-22 b(s)961
1888 y Fy(i)975 1881 y FC(\))15 b FP(in)g(the)g(query')m(s)g(body)g
(and)g(a)g(de\002nite)71 1942 y(clause)g(in)g(the)g(gi)o(v)o(en)g(set)h
(whose)f(head)h FD(r)809 1949 y FE(0)828 1942 y FC(\()844
1932 y FD(~)847 1942 y(t)865 1949 y FE(0)885 1942 y FC(\))f
FB(uni\002es)g FP(with)g FD(q)1190 1949 y Fy(i)1203 1942
y FC(\()n FD(~)-22 b(s)1245 1949 y Fy(i)1260 1942 y FC(\))15
b FP(thanks)g(to)g(a)g(v)o(ariable)71 2002 y(substitution)10
b FD(\033)j FP(\()p FB(i.e)o(.)p FP(,)g FD(q)478 2009
y Fy(i)492 2002 y FC(\()n FD(~)-22 b(s)534 2009 y Fy(i)548
2002 y FC(\))p FD(\033)15 b FC(=)f FD(r)684 2009 y FE(0)704
2002 y FC(\()720 1993 y FD(~)723 2002 y(t)741 2009 y
FE(0)760 2002 y FC(\))p FD(\033)r FP(\),)d(then)g(replacing)g(it)g(by)g
(the)g(body)g(of)g(that)g(clause)71 2062 y(in)h(the)g(query)m(,)g
(applying)g(substitution)g FD(\033)i FP(to)e(all)g(the)h(ne)o(w)f
(query)m(.)j(That)e(is,)113 2160 y FS(?-)h FD(q)209 2167
y FE(1)228 2160 y FC(\()n FD(~)-22 b(s)270 2167 y FE(1)290
2160 y FC(\))p FD(\033)o(;)8 b(:)g(:)g(:)f(;)h(q)467
2167 y Fy(i)p Fk(\000)p FE(1)526 2160 y FC(\()n FD(~)-22
b(s)568 2167 y Fy(i)p Fk(\000)p FE(1)627 2160 y FC(\))p
FD(\033)o(;)8 b(r)717 2167 y FE(1)736 2160 y FC(\()752
2151 y FD(~)755 2160 y(t)773 2167 y FE(1)792 2160 y FC(\))p
FD(\033)o(;)g(:)g(:)g(:)g(;)g(r)970 2167 y Fy(n)993 2160
y FC(\()1009 2151 y FD(~)1012 2160 y(t)1030 2167 y Fy(n)1053
2160 y FC(\))p FD(\033)o(;)g(q)1143 2167 y Fy(i)p FE(+1)1201
2160 y FC(\()n FD(~)-22 b(s)1243 2167 y Fy(i)p FE(+1)1302
2160 y FC(\))p FD(\033)o(;)8 b(:)g(:)g(:)g(;)g(q)1480
2167 y Fy(m)1512 2160 y FC(\()n FD(~)-22 b(s)1554 2167
y Fy(m)1588 2160 y FC(\))p FD(\033)o(:)71 2258 y FP(The)17
b(process)h(is)f(repeated)g(and)g(stops)h(when)f(and)g(if)g(the)g
(query')m(s)g(body)g(is)g(empty)g(\(suc-)71 2319 y(cess\))d(or)f(no)g
(rule)h(head)f(uni\002es)h(with)f(the)g(selected)i(atom)e(\(failure\).)
k(There)d(are)f(two)g(non-)71 2379 y(deterministic)f(choices)h(made)g
(in)g(the)g(process:)k(one)c(of)g(an)g(atom)f(to)h(re)o(write)f(in)h
(the)g(query)p 71 2420 648 2 v 129 2451 a Fz(2)145 2466
y FN(F)o(or)8 b(e)o(xample,)i Fl(1)p Fm(:)p Fl(2)p Fm(:)p
Fl(3)p Fm(:)p Fl([])5 b FN(is)j(a)h(list.)i(Edinb)o(ur)o(gh)c(Prolog)f
(syntax)i(uses)g Fl([)p Fm(X)s FM(j)p Fm(Y)h Fl(])f FN(instead)g(of)f
Fm(X)q(:Y)j FN(;)e(it)f(also)h(uses)71 2516 y(a)i(simpli\002ed)g(v)o
(ariant)f(to)h(e)o(xpress)h(a)g(list)e FH(in)h(e)o(xtenso)p
FN(,)h(allo)o(wing)e(writing)f([1,2,3])i(rather)h(than)e
Fl([1)p FM(j)p Fl([2)p FM(j)p Fl([3)p FM(j)p Fl([)o(]])o(]])p
FN(.)71 2640 y(Copyright)260 2639 y(c)249 2640 y FM(\015)h
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)305
b(P)o FL(A)q(G)r(E)12 b FN(9)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 96 111
96 110 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FP(and)f(one)f(among)h(the)f(potentially)g(man)o(y)g(rules)h(whose)f
(head)h(to)f(unify)g(with)g(this)h(atom.)j(In)257 349
y(an)o(y)g(case,)h(SLD)f(resolution)e(is)i FB(sound)f
FP(\()p FB(i.e)o(.)p FP(,)j(it)d(does)g(not)g(deri)o(v)o(e)g(wrong)g
(solutions\))g(and,)257 409 y(pro)o(vided)e(these)h(choices)f(are)h
(made)f(by)g(a)g(fair)f(non-deterministic)g(selection)i(function,)f(it)
257 469 y(is)g(also)g FB(complete)f FP(\()p FB(i.e)o(.)p
FP(,)i(it)e(deri)o(v)o(es)g(all)g(solutions\).)257 546
y(Prolog')m(s)f(computation)g(rule)h(is)g(a)g(particular)f
(deterministic)g(approximation)f(of)i(SLD)g(res-)257
606 y(olution.)26 b(Speci\002cally)m(,)17 b(it)f(is)g(a)g(\003attening)
g(of)f(SLD)i(resolution)e(emulating)g(a)i(depth-\002rst)257
667 y(search.)32 b(It)17 b(sees)i(a)f(program)f(as)h(an)g
FB(or)n(der)n(ed)g FP(set)g(of)g(de\002nite)f(clauses,)j(and)e(a)g
(query)f(or)257 727 y(de\002nite)e(clause)h(body)g(as)g(an)f
FB(or)n(der)n(ed)i FP(set)f(of)f(atoms.)25 b(These)16
b(orders)f(are)h(meant)f(to)g(pro-)257 787 y(vide)k(a)g(rigid)f(guide)h
(for)f(the)h(two)f(choices)i(made)f(by)g(the)g(selection)g(function)f
(of)g(SLD)257 847 y(resolution.)i(Thus,)c(Prolog')m(s)d(particular)g
(computation)g(strate)o(gy)i(transforms)e(a)h(query)f(by)257
907 y(re)o(writing)e(the)h(query)g(attempting)g(to)g(unify)f(its)i
(leftmost)e(atom)h(with)g(the)g(head)h(of)f(the)g(\002rst)257
967 y(rule)i(according)g(to)g(the)g(order)f(in)i(which)f(the)o(y)g(are)
g(speci\002ed.)22 b(If)13 b(failure)g(is)h(encountered,)257
1028 y(a)j(backtracking)f(step)g(to)h(the)f(latest)g(rule)g(choice)h
(point)f(is)g(made,)i(and)e(computation)g(re-)257 1088
y(sumed)g(there)f(with)g(the)h(ne)o(xt)f(alternati)o(v)o(e)g(gi)o(v)o
(en)g(by)h(the)f(follo)o(wing)f(rule.)25 b(F)o(or)15
b(e)o(xample,)257 1148 y(if)i(the)g(two)f(clauses)i(for)e(predicate)h
FB(conc)g FP(are)g(gi)o(v)o(en)g(as)h(abo)o(v)o(e,)h(then)e(the)g
(Prolog)f(query)257 1208 y(`)p FS(?-)g FB(conc)p FC(\(1)p
FD(:)p FC(2)p FD(:T)t(;)8 b FC(3)p FD(:)p FC(4)p FD(:)p
FC([])p FD(;)g(L)p FC(\))p FD(:)p FP(')j(succeeds)k(with)e(the)g
(substitution)g FD(T)23 b FC(=)16 b([])p FD(;)8 b(L)15
b FC(=)h(1)p FD(:)p FC(2)p FD(:)p FC(3)p FD(:)p FC(4)p
FD(:)p FC([])p FP(,)257 1268 y(while)d(the)f(query)g(`)p
FS(?-)h FB(conc)p FC(\(1)p FD(:)p FC(2)p FD(:)p FC([])p
FD(;)8 b(X)q(;)g FC(3)p FD(:Y)i FC(\))p FD(:)p FP(')i(fails.)257
1345 y(Strate)o(gies)f(for)e(choice)i(of)f(where)g(to)g(apply)g(linear)
g(resolution)g(are)g(all)g(logically)g(consistent)257
1405 y(in)19 b(the)f(sense)i(that)e(if)g(computation)g(terminates,)i
(the)e(v)o(ariable)g(binding)g(e)o(xhibited)g(is)h(a)257
1466 y(le)o(gitimate)12 b(solution)f(to)g(the)h(original)e(query)m(.)15
b(In)c(particular)n(,)g(like)g(non-deterministic)f(SLD)257
1526 y(resolution,)18 b(Prolog)e(resolution)h(is)g FB(sound)p
FP(.)30 b(Ho)o(we)o(v)o(er)n(,)18 b(unlike)e(non-deterministic)f(SLD)
257 1586 y(resolution,)j(it)f(is)g FB(incomplete)p FP(.)30
b(Indeed,)18 b(Prolog')m(s)e(particular)g(strate)o(gy)h(of)f(doing)h
(linear)257 1646 y(resolution)c(may)f(di)o(v)o(er)o(ge)h(although)f
(\002nitely)h(deri)o(v)o(able)e(solutions)i(to)g(a)g(query)g(may)f(e)o
(xist.)257 1706 y(F)o(or)17 b(e)o(xample,)h(if)f(the)f(de\002nite)h
(clauses)h(for)e FB(conc)h FP(are)f(gi)o(v)o(en)h(in)g(a)g(dif)o
(ferent)e(order)h(\()p FB(i.e)o(.)p FP(,)257 1767 y(\002rst)e(the)g
(rule,)g(then)g(the)g(fact\),)g(then)g(the)g(query)f(`)p
FS(?-)j FB(conc)q FC(\()p FD(X)q(;)8 b(Y)s(;)g(Z)t FC(\))p
FD(:)p FP(')13 b(ne)o(v)o(er)h(terminates)257 1827 y(although)e(it)g
(has)h(\(in\002nitely)e(man)o(y\))h(\002nitely)g(deri)o(v)o(able)f
(solutions!)258 2640 y FN(P)o FL(A)q(G)r(E)i FN(9)r(6)f
FL(O)r(F)h FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 97 112
97 111 bop 71 637 a FG(A)m(ppendix)26 b(B)71 862 y(The)g(W)-12
b(AM)25 b(at)h(a)g(glance)71 1136 y FA(B.1)71 b(W)-9
b(AM)18 b(instructions)71 2395 y FP(W)l(e)13 b(summarize)f(here)h(for)f
(quick)h(reference)f(all)h(the)g(instructions)g(of)f(the)h(W)-6
b(AM.)14 b(In)e(some)71 2456 y(instructions,)g(we)g(use)h(the)f
(notation)f FS(V)p FD(n)h FP(to)g(denote)g(a)g(v)o(ariable)g(that)g
(may)g(be)g(indif)o(ferently)71 2516 y(temporary)f(or)h(permanent.)855
2640 y(97)p eop
%%Page: 98 113
98 112 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r FN(')r
FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h FN(M)r
FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257 289 a
FA(The)k(complete)f(set:)307 856 y Ff(Put)c(instr)q(uctions)307
933 y FQ(put)p 391 933 14 2 v 17 w(variable)i(X)p Fu(n)q(;)8
b FQ(A)p Fu(i)307 990 y FQ(put)p 391 990 V 17 w(variable)15
b(Y)p Fu(n)q(;)8 b FQ(A)p Fu(i)307 1046 y FQ(put)p 391
1046 V 17 w(value)14 b(V)p Fu(n)q(;)8 b FQ(A)p Fu(i)307
1103 y FQ(put)p 391 1103 V 17 w(unsafe)p 570 1103 V 18
w(value)14 b(Y)p Fu(n)q(;)8 b FQ(A)p Fu(i)307 1159 y
FQ(put)p 391 1159 V 17 w(structure)15 b Fu(f)r(;)8 b
FQ(A)p Fu(i)307 1216 y FQ(put)p 391 1216 V 17 w(list)14
b(A)p Fu(i)307 1272 y FQ(put)p 391 1272 V 17 w(constant)h
Fu(c;)8 b FQ(A)p Fu(i)1008 856 y Ff(Get)13 b(instr)q(uctions)1008
933 y FQ(get)p 1092 933 V 17 w(variable)i(V)p Fu(n;)8
b FQ(A)p Fu(i)1008 990 y FQ(get)p 1092 990 V 17 w(value)14
b(V)p Fu(n)q(;)8 b FQ(A)p Fu(i)1008 1046 y FQ(get)p 1092
1046 V 17 w(structure)15 b Fu(f)r(;)8 b FQ(A)p Fu(i)1008
1103 y FQ(get)p 1092 1103 V 17 w(list)14 b(A)p Fu(i)1008
1159 y FQ(get)p 1092 1159 V 17 w(constant)h Fu(c;)8 b
FQ(A)p Fu(i)307 1405 y Ff(Set)13 b(instr)q(uctions)307
1482 y FQ(set)p 391 1482 V 17 w(variable)i(V)p Fu(n)307
1539 y FQ(set)p 391 1539 V 17 w(value)f(V)p Fu(n)307
1595 y FQ(set)p 391 1595 V 17 w(local)p 543 1595 V 18
w(value)g(V)p Fu(n)307 1652 y FQ(set)p 391 1652 V 17
w(constant)h Fu(c)307 1708 y FQ(set)p 391 1708 V 17 w(void)f
Fu(n)1008 1405 y Ff(Unify)e(instr)q(uctions)1008 1482
y FQ(unify)p 1146 1482 V 18 w(variable)i(V)p Fu(n)1008
1539 y FQ(unify)p 1146 1539 V 18 w(value)g(V)p Fu(n)1008
1595 y FQ(unify)p 1146 1595 V 18 w(local)p 1299 1595
V 17 w(value)g(V)p Fu(n)1008 1652 y FQ(unify)p 1146 1652
V 18 w(constant)g Fu(c)1008 1708 y FQ(unify)p 1146 1708
V 18 w(void)f Fu(n)307 1841 y Ff(Control)g(instr)q(uctions)307
1918 y FQ(allocate)307 1975 y(deallocate)307 2031 y(call)h
Fu(P)q(;)8 b(N)307 2088 y FQ(execute)15 b Fu(P)307 2144
y FQ(proceed)1008 1841 y Ff(Choice)e(instr)q(uctions)1008
1918 y FQ(try)p 1092 1918 V 17 w(me)p 1163 1918 V 17
w(else)h Fu(L)1008 1975 y FQ(retry)p 1146 1975 V 18 w(me)p
1218 1975 V 16 w(else)g Fu(L)1008 2031 y FQ(trust)p 1146
2031 V 18 w(me)1008 2088 y(try)f Fu(L)1008 2144 y FQ(retry)h
Fu(L)1008 2201 y FQ(trust)g Fu(L)307 2334 y Ff(Inde)o(xing)f(instr)q
(uctions)307 2411 y FQ(switch)p 472 2411 V 18 w(on)p
544 2411 V 17 w(term)h Fu(V)s(;)8 b(C)q(;)f(L;)h(S)307
2467 y FQ(switch)p 472 2467 V 18 w(on)p 544 2467 V 17
w(constant)15 b Fu(N)r(;)8 b(T)307 2524 y FQ(switch)p
472 2524 V 18 w(on)p 544 2524 V 17 w(structure)15 b Fu(N)r(;)8
b(T)1008 2334 y Ff(Cut)k(instr)q(uctions)1008 2411 y
FQ(neck)p 1119 2411 V 17 w(cut)1008 2467 y(get)p 1092
2467 V 17 w(level)i(Y)p Fu(n)1008 2524 y FQ(cut)f(Y)p
Fu(n)258 2640 y FN(P)o FL(A)q(G)r(E)g FN(9)r(8)f FL(O)r(F)h
FN(1)r(2)r(9)303 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 99 114
99 113 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FA(Put)j(instructions)p 95 364
475 2 v 95 428 2 64 v 110 407 a FQ(put)p 194 407 14 2
v 17 w(variable)e(X)p Fu(n;)8 b FQ(A)p Fu(i)p 569 428
2 64 v 95 430 475 2 v 95 526 a FR(Push)15 b(a)f(ne)o(w)h(unbound)d
FQ(REF)k FR(cell)e(onto)f(the)95 582 y(heap)18 b(and)f(copy)f(it)h
(into)f(both)g(re)o(gister)h FQ(X)p Fu(n)95 639 y FR(and)9
b(re)o(gister)g FQ(A)p Fu(i)p FR(.)14 b(Continue)8 b(e)o(x)o(ecution)g
(with)95 695 y(the)j(follo)o(wing)e(instruction.)895
526 y FQ(HEAP[H)q(])k Fp( )g(h)7 b Fv(REF)j Fu(;)g FQ(H)e
Fp(i)o Fw(;)895 582 y FQ(X)p Fu(n)13 b Fp( )g FQ(HEAP[H)q(])q
Fw(;)895 639 y FQ(A)p Fu(i)f Fp( )h FQ(HEAP[H)r(])p Fw(;)895
695 y FQ(H)f Fp( )i FQ(H)c Fw(+)g(1;)895 752 y FQ(P)i
Fp( )i FQ(P)c Fw(+)g FI(instruction)p 1278 752 14 2 v
14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 95 904 475 2 v 95
968 2 64 v 110 947 a FQ(put)p 194 947 14 2 v 17 w(variable)15
b(Y)p Fu(n;)8 b FQ(A)p Fu(i)p 569 968 2 64 v 95 970 475
2 v 95 1066 a FR(Initialize)16 b(the)h Fu(n)p FR(-th)g(stack)g(v)o
(ariable)g(in)f(the)95 1122 y(current)21 b(en)n(vironment)e(to)h
(`unbound')e(and)95 1179 y(let)h FQ(A)p Fu(i)g FR(point)f(to)g(it.)37
b(Continue)18 b(e)o(x)o(ecution)95 1235 y(with)11 b(the)g(follo)o(wing)
e(instruction.)895 1066 y Fe(addr)18 b Fp( )13 b FQ(E)d
Fw(+)h Fu(n)f Fw(+)h(1;)895 1122 y FQ(STACK[)p Fe(addr)c
FQ(])13 b Fp( )g(h)7 b Fv(REF)j Fu(;)g Fe(addr)j Fp(i)p
Fw(;)895 1179 y FQ(A)p Fu(i)f Fp( )h FQ(STACK[)p Fe(addr)8
b FQ(])p Fw(;)895 1235 y FQ(P)k Fp( )i FQ(P)c Fw(+)g
FI(instruction)p 1278 1235 14 2 v 14 w(size)o Fw(\()p
FQ(P)p Fw(\);)p 95 1388 394 2 v 95 1451 2 64 v 110 1430
a FQ(put)p 194 1430 14 2 v 17 w(value)k(V)p Fu(n;)8 b
FQ(A)p Fu(i)p 487 1451 2 64 v 95 1453 394 2 v 95 1549
a FR(Place)j(the)e(contents)g(of)h FQ(V)p Fu(n)g FR(into)f(re)o(gister)
h FQ(A)p Fu(i)p FR(.)95 1605 y(Continue)18 b(e)o(x)o(ecution)g(with)f
(the)h(follo)o(wing)95 1662 y(instruction.)895 1549 y
FQ(A)p Fu(i)12 b Fp( )h FQ(V)p Fu(n)q Fw(;)895 1605 y
FQ(P)f Fp( )i FQ(P)c Fw(+)g FI(instruction)p 1278 1605
14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 95 1798 574
2 v 95 1862 2 64 v 110 1840 a FQ(put)p 194 1840 14 2
v 17 w(unsafe)p 373 1840 V 18 w(value)k(Y)p Fu(n;)8 b
FQ(A)p Fu(i)p 667 1862 2 64 v 95 1864 574 2 v 95 1959
a FR(If)k(the)e(dereferenced)i(v)o(alue)e(of)h FQ(Y)p
Fu(n)g FR(is)f(not)g(an)95 2016 y(unbound)d(stack)i(v)o(ariable)f(in)g
(the)g(current)h(en-)95 2072 y(vironment,)17 b(set)e
FQ(A)p Fu(i)g FR(to)g(that)g(v)o(alue.)27 b(Other)o(-)95
2129 y(wise,)14 b(bind)e(the)h(referenced)h(stack)f(v)o(ariable)95
2185 y(to)j(a)h(ne)o(w)f(unbound)f(v)o(ariable)h(cell)g(pushed)95
2242 y(on)f(the)g(heap,)i(and)e(set)f FQ(A)p Fu(i)i FR(to)e(point)g(to)
h(that)95 2298 y(cell.)35 b(Continue)17 b(e)o(x)o(ecution)h(with)f(the)
g(fol-)95 2354 y(lo)o(wing)10 b(instruction.)895 1959
y Fe(addr)18 b Fp( )13 b Fe(der)n(ef)c Fw(\()p FQ(E)i
Fw(+)f Fu(n)g Fw(+)h(1\);)895 2016 y Fd(if)18 b Fe(addr)28
b Fu(<)23 b FQ(E)936 2072 y Fd(then)13 b FQ(A)p Fu(i)g
Fp( )g FQ(STORE[)p Fe(addr)7 b FQ(])936 2129 y Fd(else)978
2185 y(b)q(egin)1019 2242 y FQ(HEAP[H)r(])13 b Fp( )g(h)7
b Fv(REF)j Fu(;)f FQ(H)f Fp(i)p Fw(;)1019 2298 y Fe(bind)t
Fw(\()p Fe(addr)e Fu(;)i FQ(H)o Fw(\);)1019 2354 y FQ(A)p
Fu(i)13 b Fp( )g FQ(HEAP[H)q(])q Fw(;)1019 2411 y FQ(H)g
Fp( )g FQ(H)d Fw(+)h(1)978 2467 y Fd(end)p Fw(;)895 2524
y FQ(P)h Fp( )i FQ(P)c Fw(+)g FI(instruction)p 1278 2524
14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)305 b(P)o FL(A)q(G)r(E)12
b FN(9)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 100 115
100 114 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282
241 473 2 v 282 306 2 66 v 296 285 a FQ(put)p 380 285
14 2 v 18 w(structure)h Fu(f)r(;)8 b FQ(A)p Fu(i)p 753
306 2 66 v 282 308 473 2 v 282 404 a FR(Push)21 b(a)h(ne)o(w)f(functor)
g(cell)g(containing)f Fu(f)282 460 y FR(onto)c(the)g(heap)g(and)h(set)f
(re)o(gister)g FQ(A)p Fu(i)h FR(to)f(an)282 516 y FQ(STR)21
b FR(cell)e(pointing)e(to)i(that)g(functor)g(cell.)282
573 y(Continue)f(e)o(x)o(ecution)g(with)f(the)h(follo)o(wing)282
629 y(instruction.)1081 404 y FQ(HEAP[H)r(])13 b Fp( )g
Fu(f)5 b(=n)p Fw(;)1081 460 y FQ(A)p Fu(i)13 b Fp( )g(h)7
b Fv(STR)j Fu(;)g FQ(H)e Fp(i)o Fw(;)1081 516 y FQ(H)13
b Fp( )g FQ(H)e Fw(+)f(1;)1081 573 y FQ(P)j Fp( )g FQ(P)e
Fw(+)f FI(instruction)p 1465 573 14 2 v 14 w(size)o Fw(\()p
FQ(P)p Fw(\);)p 282 759 292 2 v 282 821 2 63 v 296 802
a FQ(put)p 380 802 14 2 v 18 w(list)j(A)p Fu(i)p 572
821 2 63 v 282 823 292 2 v 282 919 a FR(Set)23 b(re)o(gister)e
FQ(A)p Fu(i)h FR(to)g(contain)f(a)h FQ(LIS)h FR(cell)282
975 y(pointing)13 b(to)i(the)g(current)h(top)e(of)i(the)f(heap.)282
1032 y(Continue)j(e)o(x)o(ecution)g(with)f(the)h(follo)o(wing)282
1088 y(instruction.)1081 919 y FQ(A)p Fu(i)13 b Fp( )g(h)7
b Fv(LIS)j Fu(;)g FQ(H)e Fp(i)o Fw(;)1081 975 y FQ(P)13
b Fp( )g FQ(P)e Fw(+)f FI(instruction)p 1465 975 14 2
v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282 1218 441 2
v 282 1282 2 64 v 296 1261 a FQ(put)p 380 1261 14 2 v
18 w(constant)k Fu(c;)8 b FQ(A)p Fu(i)p 721 1282 2 64
v 282 1284 441 2 v 282 1380 a FR(Place)19 b(a)g(constant)e(cell)h
(containing)e Fu(c)i FR(into)282 1436 y(re)o(gister)11
b FQ(A)p Fu(i)p FR(.)k(Continue)10 b(e)o(x)o(ecution)h(with)f(the)282
1492 y(follo)o(wing)f(instruction.)1081 1380 y FQ(A)p
Fu(i)k Fp( )g(h)7 b Fv(CON)j Fu(;)g(c)e Fp(i)o Fw(;)1081
1436 y FQ(P)13 b Fp( )g FQ(P)e Fw(+)f FI(instruction)p
1465 1436 14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)257
1704 y FA(Get)18 b(instructions)p 282 1779 475 2 v 282
1843 2 64 v 296 1822 a FQ(get)p 380 1822 14 2 v 18 w(variable)c(V)p
Fu(n)q(;)8 b FQ(A)p Fu(i)p 756 1843 2 64 v 282 1845 475
2 v 282 1941 a FR(Place)23 b(the)g(contents)e(of)h(re)o(gister)g
FQ(A)p Fu(i)h FR(into)282 1997 y(v)o(ariable)c FQ(V)p
Fu(n)p FR(.)38 b(Continue)18 b(e)o(x)o(ecution)g(with)282
2054 y(the)11 b(follo)o(wing)e(instruction.)1081 1941
y FQ(V)p Fu(n)14 b Fp( )f FQ(A)p Fu(i)p Fw(;)1081 1997
y FQ(P)g Fp( )g FQ(P)e Fw(+)f FI(instruction)p 1465 1997
14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282 2193 394
2 v 282 2257 2 64 v 296 2236 a FQ(get)p 380 2236 14 2
v 18 w(value)k(V)p Fu(n;)8 b FQ(A)p Fu(i)p 674 2257 2
64 v 282 2259 394 2 v 282 2354 a FR(Unify)26 b(v)o(ariable)g
FQ(V)p Fu(n)i FR(and)e(re)o(gister)g FQ(A)p Fu(i)p FR(.)282
2411 y(Backtrack)20 b(on)e(failure,)j(otherwise)d(con-)282
2467 y(tinue)30 b(e)o(x)o(ecution)g(with)f(follo)o(wing)f(in-)282
2524 y(struction.)1048 2354 y Fe(unify)t Fw(\()p FQ(V)p
Fu(n;)8 b FQ(A)p Fu(i)p Fw(\);)1048 2411 y Fq(if)13 b
FI(fail)1090 2467 y Fq(then)g FI(bac)o(ktr)o(ac)o(k)1090
2524 y Fq(else)f FQ(P)h Fp( )g FQ(P)d Fw(+)h FI(instruction)p
1557 2524 14 2 v 13 w(size)o Fw(\()p FQ(P)p Fw(\);)258
2640 y FN(P)o FL(A)q(G)r(E)i FN(1)r(0)r(0)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 101 116
101 115 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 473 2 v 95 306 2 66 v 110 285
a FQ(get)p 194 285 14 2 v 17 w(structure)h Fu(f)r(;)8
b FQ(A)p Fu(i)p 566 306 2 66 v 95 308 473 2 v 95 404
a FR(If)19 b(the)g(dereferenced)g(v)o(alue)95 460 y(of)25
b(re)o(gister)f FQ(A)p Fu(i)h FR(is)f(an)h(un-)95 516
y(bound)14 b(v)o(ariable,)h(then)e(bind)95 573 y(that)c(v)o(ariable)g
(to)g(a)h(ne)o(w)f FQ(STR)95 629 y FR(cell)16 b(pointing)e(to)i
Fu(f)21 b FR(pushed)95 686 y(on)14 b(the)f(heap)h(and)g(set)f(mode)95
742 y(to)f FQ(write)q FR(;)g(otherwise,)f(if)h(it)95
799 y(is)18 b(a)g FQ(STR)g FR(cell)f(pointing)f(to)95
855 y(functor)10 b Fu(f)5 b FR(,)10 b(then)f(set)h(re)o(gister)95
912 y FQ(S)k FR(to)f(the)g(heap)h(address)f(fol-)95 968
y(lo)o(wing)j(that)h(functor)g(cell')n(s)95 1025 y(and)25
b(set)g(mode)g(to)g FQ(read)q FR(.)95 1081 y(If)18 b(it)g(is)f(not)f(a)
i FQ(STR)h FR(cell)e(or)95 1137 y(if)i(the)f(functor)f(is)h(dif)o
(ferent)95 1194 y(than)23 b Fu(f)5 b FR(,)28 b(fail.)50
b(Backtrack)95 1250 y(on)13 b(failure,)h(otherwise)e(con-)95
1307 y(tinue)20 b(e)o(x)o(ecution)f(with)h(fol-)95 1363
y(lo)o(wing)10 b(instruction.)640 404 y Fe(addr)18 b
Fp( )13 b Fe(der)n(ef)d Fw(\()p FQ(A)p Fu(i)o Fw(\);)640
460 y Fd(case)j FQ(STORE[)p Fe(addr)7 b FQ(])13 b Fd(of)702
516 y Fp(h)7 b Fv(REF)j Fu(;)p 834 516 14 2 v 34 w Fp(i)20
b Fw(:)33 b FQ(HEAP[H)q(])13 b Fp( )g(h)7 b Fv(STR)j
Fu(;)g FQ(H)g Fw(+)h(1)d Fp(i)o Fw(;)940 573 y FQ(HEAP[H)j
Fw(+)g(1)p FQ(])h Fp( )h Fu(f)5 b Fw(;)940 629 y Fe(bind)t
Fw(\()p Fe(addr)g Fu(;)j FQ(H)p Fw(\);)940 686 y FQ(H)k
Fp( )i FQ(H)c Fw(+)g(2;)940 742 y Fe(mo)n(de)16 b Fp( )d
FQ(write)q Fw(;)702 799 y Fp(h)7 b Fv(STR)j Fu(;)g(a)e
Fp(i)k Fw(:)33 b Fd(if)18 b FQ(HEAP[)p Fu(a)p FQ(])27
b Fw(=)e Fu(f)981 855 y Fd(then)1023 912 y(b)q(egin)1064
968 y FQ(S)13 b Fp( )g Fu(a)d Fw(+)h(1;)1064 1025 y Fe(mo)n(de)16
b Fp( )d FQ(read)1023 1081 y Fd(end)981 1137 y(else)g
Fe(fail)k Fp( )c Fd(true)p Fw(;)702 1194 y Fd(other)71
b Fw(:)33 b Fe(fail)17 b Fp( )c Fd(true)p Fw(;)640 1250
y Fd(endcase)p Fw(;)640 1307 y Fq(if)f FI(fail)681 1363
y Fq(then)i FI(bac)o(ktr)o(ac)o(k)681 1420 y Fq(else)f
FQ(P)f Fp( )i FQ(P)c Fw(+)g FI(instruction)p 1148 1420
V 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 95 1581 292 2 v
95 1643 2 63 v 110 1623 a FQ(get)p 194 1623 14 2 v 17
w(list)j(A)p Fu(i)p 385 1643 2 63 v 95 1645 292 2 v 95
1741 a FR(If)19 b(the)g(dereferenced)g(v)o(alue)95 1797
y(of)25 b(re)o(gister)f FQ(A)p Fu(i)h FR(is)f(an)h(un-)95
1853 y(bound)14 b(v)o(ariable,)h(then)e(bind)95 1910
y(that)c(v)o(ariable)g(to)g(a)h(ne)o(w)f FQ(LIS)95 1966
y FR(cell)23 b(pushed)f(on)h(the)f(heap)95 2023 y(and)c(set)g(mode)g
(to)f FQ(write)r FR(;)95 2079 y(otherwise,)k(if)f(it)f(is)g(a)g
FQ(LIS)95 2136 y FR(cell,)c(then)e(set)g(re)o(gister)h
FQ(S)g FR(to)95 2192 y(the)23 b(heap)f(address)g(it)f(con-)95
2249 y(tains)33 b(and)h(set)f(mode)h(to)95 2305 y FQ(read)r
FR(.)70 b(If)30 b(it)f(is)g(not)g(a)95 2362 y FQ(LIS)17
b FR(cell,)g(fail.)26 b(Backtrack)95 2418 y(on)13 b(failure,)h
(otherwise)e(con-)95 2474 y(tinue)20 b(e)o(x)o(ecution)f(with)h(fol-)95
2531 y(lo)o(wing)10 b(instruction.)640 1741 y Fe(addr)18
b Fp( )13 b Fe(der)n(ef)d Fw(\()p FQ(A)p Fu(i)o Fw(\);)640
1797 y Fd(case)j FQ(STORE[)p Fe(addr)7 b FQ(])13 b Fd(of)702
1853 y Fp(h)7 b Fv(REF)j Fu(;)p 834 1853 14 2 v 34 w
Fp(i)20 b Fw(:)33 b FQ(HEAP[H)q(])13 b Fp( )g(h)7 b Fv(LIS)j
Fu(;)g FQ(H)g Fw(+)h(1)d Fp(i)o Fw(;)940 1910 y Fe(bind)t
Fw(\()p Fe(addr)d Fu(;)j FQ(H)p Fw(\);)940 1966 y FQ(H)k
Fp( )i FQ(H)c Fw(+)g(1;)940 2023 y Fe(mo)n(de)16 b Fp( )d
FQ(write)q Fw(;)702 2079 y Fp(h)7 b Fv(LIS)j Fu(;)g(a)e
Fp(i)k Fw(:)33 b FQ(S)12 b Fp( )i Fu(a)p Fw(;)940 2136
y Fe(mo)n(de)i Fp( )d FQ(read)q Fw(;)702 2192 y Fd(other)71
b Fw(:)33 b Fe(fail)17 b Fp( )c Fd(true)p Fw(;)640 2249
y Fd(endcase)p Fw(;)640 2305 y Fq(if)f FI(fail)681 2362
y Fq(then)i FI(bac)o(ktr)o(ac)o(k)681 2418 y Fq(else)f
FQ(P)f Fp( )i FQ(P)c Fw(+)g FI(instruction)p 1148 2418
V 14 w(size)o Fw(\()p FQ(P)p Fw(\);)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(0)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 102 117
102 116 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282
241 441 2 v 282 304 2 64 v 296 283 a FQ(get)p 380 283
14 2 v 18 w(constant)g Fu(c;)8 b FQ(A)p Fu(i)p 721 304
2 64 v 282 306 441 2 v 282 402 a FR(If)18 b(the)g(dereferenced)g(v)o
(alue)282 458 y(of)24 b(re)o(gister)g FQ(A)p Fu(i)g FR(is)g(an)g(un-)
282 515 y(bound)16 b(v)o(ariable,)i(bind)d(that)282 571
y(v)o(ariable)36 b(to)f(constant)f Fu(c)p FR(.)282 628
y(Otherwise,)14 b(fail)g(if)f(it)h(is)f(not)282 684 y(the)h(constant)e
Fu(c)p FR(.)21 b(Backtrack)282 741 y(on)13 b(failure,)f(otherwise)g
(con-)282 797 y(tinue)19 b(e)o(x)o(ecution)g(with)f(fol-)282
854 y(lo)o(wing)10 b(instruction.)824 402 y Fe(addr)18
b Fp( )13 b Fe(der)n(ef)d Fw(\()p FQ(A)p Fu(i)p Fw(\);)824
458 y Fd(case)j FQ(STORE[)p Fe(addr)7 b FQ(])13 b Fd(of)886
515 y Fp(h)8 b Fv(REF)h Fu(;)p 1019 515 14 2 v 34 w Fp(i)27
b Fw(:)33 b FQ(STORE[)p Fe(addr)8 b FQ(])k Fp( )i(h)7
b Fv(CON)i Fu(;)h(c)e Fp(i)o Fw(;)1131 571 y Fe(tr)n(ail)d
Fw(\()p Fe(addr)g Fw(\);)886 628 y Fp(h)j Fv(CON)h Fu(;)h(c)1036
611 y Fk(0)1055 628 y Fp(i)i Fw(:)33 b Fe(fail)17 b Fp( )c
Fw(\()p Fu(c)25 b Fp(6)p Fw(=)h Fu(c)1413 611 y Fk(0)1424
628 y Fw(\);)886 684 y Fd(other)78 b Fw(:)33 b Fe(fail)17
b Fp( )c Fd(true)p Fw(;)824 741 y Fd(endcase)p Fw(;)824
797 y Fq(if)f FI(fail)866 854 y Fq(then)h FI(bac)o(ktr)o(ac)o(k)866
910 y Fq(else)f FQ(P)h Fp( )g FQ(P)d Fw(+)h FI(instruction)p
1332 910 V 13 w(size)o Fw(\()p FQ(P)p Fw(\);)257 1317
y FA(Set)18 b(instructions)p 282 1410 412 2 v 282 1465
2 56 v 296 1452 a FQ(set)p 380 1452 14 2 v 18 w(variable)c(V)p
Fu(n)p 692 1465 2 56 v 282 1467 412 2 v 282 1565 a FR(Push)g(a)h(ne)o
(w)f(unbound)f FQ(REF)j FR(cell)e(onto)f(the)282 1622
y(heap)f(and)g(copy)g(it)f(into)g(v)o(ariable)h FQ(V)p
Fu(n)p FR(.)18 b(Con-)282 1678 y(tinue)h(e)o(x)o(ecution)g(with)g(the)h
(follo)o(wing)d(in-)282 1735 y(struction.)1081 1565 y
FQ(HEAP[H)r(])c Fp( )g(h)7 b Fv(REF)j Fu(;)g FQ(H)d Fp(i)p
Fw(;)1081 1622 y FQ(V)p Fu(n)14 b Fp( )f FQ(HEAP[H)q(])q
Fw(;)1081 1678 y FQ(H)g Fp( )g FQ(H)e Fw(+)f(1;)1081
1735 y FQ(P)j Fp( )g FQ(P)e Fw(+)f FI(instruction)p 1465
1735 14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282 2079
330 2 v 282 2134 2 55 v 296 2120 a FQ(set)p 380 2120
14 2 v 18 w(value)k(V)p Fu(n)p 611 2134 2 55 v 282 2136
330 2 v 282 2233 a FR(Push)9 b FQ(V)p Fu(n)p FR(')n(s)f(v)o(alue)h
(onto)e(the)i(heap.)k(Continue)282 2290 y(e)o(x)o(ecution)8
b(with)g(the)h(follo)o(wing)d(instruction.)1081 2233
y FQ(HEAP[H)r(])13 b Fp( )g FQ(V)p Fu(n)q Fw(;)1081 2290
y FQ(H)g Fp( )g FQ(H)e Fw(+)f(1;)1081 2346 y FQ(P)j Fp( )g
FQ(P)e Fw(+)f FI(instruction)p 1465 2346 14 2 v 14 w(size)o
Fw(\()p FQ(P)p Fw(\);)258 2640 y FN(P)o FL(A)q(G)r(E)j
FN(1)r(0)r(2)e FL(O)r(F)i FN(1)r(2)r(9)281 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 103 118
103 117 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 483 2 v 95 295 2 55 v 110 282
a FQ(set)p 194 282 14 2 v 17 w(local)p 346 282 V 17 w(value)g(V)p
Fu(n)p 576 295 2 55 v 95 297 483 2 v 95 395 a FR(If)h(the)f
(dereferenced)h(v)o(alue)f(of)g FQ(V)p Fu(n)h FR(is)e(an)95
451 y(unbound)j(heap)h(v)o(ariable,)i(push)d(a)h(copy)95
508 y(of)j(it)f(onto)g(the)g(heap.)40 b(If)20 b(the)f(derefer)o(-)95
564 y(enced)e(v)o(alue)e(is)h(an)g(unbound)e(stack)h(ad-)95
621 y(dress,)h(push)e(a)i(ne)o(w)e(unbound)g FQ(REF)i
FR(cell)95 677 y(onto)11 b(the)g(heap)h(and)f(bind)f(the)i(stack)f(v)o
(ari-)95 733 y(able)e(to)f(it.)13 b(Continue)8 b(e)o(x)o(ecution)g
(with)g(the)95 790 y(follo)o(wing)h(instruction.)850
395 y Fe(addr)18 b Fp( )13 b Fe(der)n(ef)d Fw(\()p FQ(V)p
Fu(n)p Fw(\);)850 451 y Fd(if)18 b Fe(addr)28 b Fu(<)c
FQ(H)891 508 y Fd(then)13 b FQ(HEAP[H)r(])g Fp( )g FQ(HEAP[)p
Fe(addr)7 b FQ(])891 564 y Fd(else)933 621 y(b)q(egin)974
677 y FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(REF)j Fu(;)g
FQ(H)e Fp(i)o Fw(;)974 733 y Fe(bind)d Fw(\()p Fe(addr)g
Fu(;)j FQ(H)p Fw(\))933 790 y Fd(end)p Fw(;)850 846 y
FQ(H)13 b Fp( )g FQ(H)d Fw(+)h(1;)850 903 y FQ(P)i Fp( )g
FQ(P)d Fw(+)h FI(instruction)p 1233 903 14 2 v 13 w(size)o
Fw(\()p FQ(P)p Fw(\);)p 95 1001 377 2 v 95 1052 2 52
v 110 1039 a FQ(set)p 194 1039 14 2 v 17 w(constant)k
Fu(c)p 471 1052 2 52 v 95 1054 377 2 v 95 1152 a FR(Push)d(the)g
(constant)e Fu(c)i FR(onto)f(the)h(heap.)k(Con-)95 1209
y(tinue)j(e)o(x)o(ecution)h(with)e(the)i(follo)o(wing)d(in-)95
1265 y(struction.)895 1152 y FQ(HEAP[H)q(])c Fp( )g(h)7
b Fv(CON)j Fu(;)g(c)e Fp(i)o Fw(;)895 1209 y FQ(H)k Fp( )i
FQ(H)c Fw(+)g(1;)895 1265 y FQ(P)i Fp( )i FQ(P)c Fw(+)g
FI(instruction)p 1278 1265 14 2 v 14 w(size)o Fw(\()p
FQ(P)p Fw(\);)p 95 1364 276 2 v 95 1419 2 56 v 110 1406
a FQ(set)p 194 1406 14 2 v 17 w(void)j Fu(n)p 369 1419
2 56 v 95 1421 276 2 v 95 1519 a FR(Push)e Fu(n)g FR(ne)o(w)g(unbound)e
FQ(REF)j FR(cells)f(onto)e(the)95 1576 y(heap.)27 b(Continue)14
b(e)o(x)o(ecution)g(with)g(the)h(fol-)95 1632 y(lo)o(wing)10
b(instruction.)895 1519 y Fd(for)i Fu(i)g Fp( )h FQ(H)g
Fd(to)g FQ(H)e Fw(+)f Fu(n)g Fp(\000)h Fw(1)h Fd(do)936
1576 y FQ(HEAP[)p Fu(i)p FQ(])i Fp( )f(h)7 b Fv(REF)j
Fu(;)g(i)e Fp(i)o Fw(;)895 1632 y FQ(H)k Fp( )i FQ(H)c
Fw(+)g Fu(n)p Fw(;)895 1689 y FQ(P)i Fp( )i FQ(P)c Fw(+)g
FI(instruction)p 1278 1689 14 2 v 14 w(size)o Fw(\()p
FQ(P)p Fw(\);)71 1880 y FA(Unify)17 b(instructions)p
95 1969 467 2 v 95 2031 2 63 v 110 2012 a FQ(unify)p
248 2012 14 2 v 17 w(variable)e(V)p Fu(n)p 560 2031 2
63 v 95 2033 467 2 v 95 2129 a FR(In)10 b FQ(read)i FR(mode,)e(place)h
(the)e(contents)g(of)95 2185 y(heap)16 b(address)e FQ(S)i
FR(into)e(v)o(ariable)g FQ(V)p Fu(n)q FR(;)i(in)95 2242
y FQ(write)g FR(mode,)g(push)d(a)i(ne)o(w)f(unbound)95
2298 y FQ(REF)j FR(cell)f(onto)f(the)h(heap)g(and)f(copy)h(it)95
2354 y(into)11 b FQ(X)p Fu(i)p FR(.)k(In)d(either)f(mode,)h(increment)g
FQ(S)95 2411 y FR(by)f(one.)k(Continue)10 b(e)o(x)o(ecution)h(with)f
(the)95 2467 y(follo)o(wing)f(instruction.)827 2129 y
Fd(case)k Fe(mo)n(de)j Fd(of)890 2185 y FQ(read)41 b
Fw(:)33 b FQ(V)p Fu(n)13 b Fp( )g FQ(HEAP[S)r(])p Fw(;)890
2242 y FQ(write)h Fw(:)33 b FQ(HEAP[H)q(])13 b Fp( )g(h)7
b Fv(REF)j Fu(;)g FQ(H)e Fp(i)o Fw(;)1085 2298 y FQ(V)p
Fu(n)13 b Fp( )g FQ(HEAP[H)r(])p Fw(;)1085 2354 y FQ(H)g
Fp( )g FQ(H)d Fw(+)g(1;)827 2411 y Fd(endcase)q Fw(;)827
2467 y FQ(S)j Fp( )g FQ(S)e Fw(+)f(1;)827 2524 y FQ(P)j
Fp( )g FQ(P)e Fw(+)f FI(instruction)p 1211 2524 14 2
v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(0)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 104 119
104 118 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282
241 385 2 v 282 303 2 63 v 296 283 a FQ(unify)p 434 283
14 2 v 18 w(value)g(V)p Fu(n)p 665 303 2 63 v 282 305
385 2 v 282 400 a FR(In)f FQ(read)g FR(mode,)g(unify)e(v)o(ariable)h
FQ(V)p Fu(n)h FR(and)282 457 y(heap)e(address)e FQ(S)q
FR(;)h(in)g FQ(write)i FR(mode,)f(push)282 513 y(the)e(v)o(alue)f(of)h
FQ(V)p Fu(n)g FR(onto)f(the)g(heap.)14 b(In)8 b(either)282
570 y(mode,)13 b(increment)g FQ(S)f FR(by)g(one.)17 b(Backtrack)282
626 y(on)f(failure,)i(otherwise)d(continue)g(e)o(x)o(ecu-)282
683 y(tion)10 b(with)h(follo)o(wing)e(instruction.)1048
400 y Fd(case)k Fe(mo)n(de)j Fd(of)1111 457 y FQ(read)41
b Fw(:)33 b Fe(unify)s Fw(\()p FQ(V)p Fu(n)q(;)8 b FQ(S)o
Fw(\);)1111 513 y FQ(write)14 b Fw(:)33 b FQ(HEAP[H)q(])13
b Fp( )g FQ(V)p Fu(n)q Fw(;)1306 570 y FQ(H)f Fp( )i
FQ(H)c Fw(+)g(1;)1048 626 y Fd(endcase)q Fw(;)1048 683
y FQ(S)j Fp( )g FQ(S)e Fw(+)f(1;)1048 739 y Fq(if)j FI(fail)1090
795 y Fq(then)g FI(bac)o(ktr)o(ac)o(k)1090 852 y Fq(else)f
FQ(P)h Fp( )g FQ(P)d Fw(+)h FI(instruction)p 1557 852
14 2 v 13 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282 1184 538
2 v 282 1246 2 63 v 296 1226 a FQ(unify)p 434 1226 14
2 v 18 w(local)p 587 1226 V 18 w(value)j(V)p Fu(n)p 818
1246 2 63 v 282 1248 538 2 v 282 1344 a FR(In)23 b FQ(read)i
FR(mode,)h(unify)282 1400 y(v)o(ariable)f FQ(V)p Fu(n)h
FR(and)f(heap)282 1456 y(address)19 b FQ(S)q FR(.)39
b(In)20 b FQ(write)282 1513 y FR(mode,)33 b(if)28 b(the)g(derefer)o(-)
282 1569 y(enced)12 b(v)o(alue)f(of)h FQ(V)p Fu(n)g FR(is)f(an)282
1626 y(unbound)g(heap)i(v)o(ariable,)282 1682 y(push)k(a)h(copy)f(of)h
(it)f(onto)282 1739 y(the)g(heap.)30 b(If)17 b(the)g(deref-)282
1795 y(erenced)d(v)o(alue)g(is)f(an)g(un-)282 1852 y(bound)35
b(stack)h(address,)282 1908 y(push)28 b(a)i(ne)o(w)f(unbound)282
1965 y FQ(REF)16 b FR(cell)e(onto)f(the)h(heap)282 2021
y(and)e(bind)f(the)g(stack)g(v)o(ari-)282 2077 y(able)26
b(to)g(it.)59 b(In)27 b(either)282 2134 y(mode,)22 b(increment)e
FQ(S)g FR(by)282 2190 y(one.)g(Backtrack)13 b(on)g(fail-)282
2247 y(ure,)g(otherwise)e(continue)282 2303 y(e)o(x)o(ecution)19
b(with)f(follo)o(w-)282 2360 y(ing)11 b(instruction.)781
1344 y Fd(case)h Fe(mo)n(de)17 b Fd(of)843 1400 y FQ(read)41
b Fw(:)33 b Fe(unify)t Fw(\()p FQ(V)p Fu(n;)8 b FQ(S)o
Fw(\);)843 1456 y FQ(write)14 b Fw(:)33 b Fe(addr)18
b Fp( )13 b Fe(der)n(ef)d Fw(\()p FQ(V)p Fu(n)p Fw(\);)1038
1513 y Fd(if)18 b Fe(addr)28 b Fu(<)23 b FQ(H)1079 1569
y Fd(then)13 b FQ(HEAP[H)r(])g Fp( )g FQ(HEAP[)p Fe(addr)7
b FQ(])1079 1626 y Fd(else)1121 1682 y(b)q(egin)1162
1739 y FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(REF)j Fu(;)g
FQ(H)e Fp(i)o Fw(;)1162 1795 y Fe(bind)d Fw(\()p Fe(addr)g
Fu(;)j FQ(H)p Fw(\))1121 1852 y Fd(end)p Fw(;)1038 1908
y FQ(H)13 b Fp( )g FQ(H)d Fw(+)h(1;)781 1965 y Fd(endcase)p
Fw(;)781 2021 y FQ(S)h Fp( )i FQ(S)c Fw(+)g(1;)781 2077
y Fq(if)i FI(fail)822 2134 y Fq(then)i FI(bac)o(ktr)o(ac)o(k)822
2190 y Fq(else)e FQ(P)h Fp( )g FQ(P)e Fw(+)f FI(instruction)p
1289 2190 14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)258
2640 y FN(P)o FL(A)q(G)r(E)j FN(1)r(0)r(4)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 105 120
105 119 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 432 2 v 95 303 2 63 v 110 283
a FQ(unify)p 248 283 14 2 v 17 w(constant)h Fu(c)p 525
303 2 63 v 95 305 432 2 v 95 400 a FR(In)d FQ(read)h
FR(mode,)f(dereference)g(the)f(heap)h(address)f FQ(S)p
FR(.)k(If)d(the)f(result)g(is)g(an)g(unbound)f(v)o(ari-)95
457 y(able,)k(bind)e(that)g(v)o(ariable)g(to)g(the)h(constant)e
Fu(c)p FR(;)i(otherwise,)g(fail)f(if)g(the)h(result)f(is)g(dif)o
(ferent)95 513 y(than)h(constant)e Fu(c)p FR(.)19 b(In)12
b FQ(write)j FR(mode,)e(push)f(the)g(constant)g Fu(c)g
FR(onto)g(the)g(heap.)19 b(Backtrack)95 570 y(on)11 b(failure,)g
(otherwise)f(continue)g(e)o(x)o(ecution)h(with)f(follo)o(wing)f
(instruction.)367 675 y Fd(case)k Fe(mo)n(de)j Fd(of)429
732 y FQ(read)41 b Fw(:)33 b Fe(addr)18 b Fp( )13 b Fe(der)n(ef)d
Fw(\()p FQ(S)p Fw(\);)624 788 y Fd(case)j FQ(STORE[)p
Fe(addr)7 b FQ(])13 b Fd(of)686 845 y Fp(h)7 b Fv(REF)j
Fu(;)p 819 845 14 2 v 34 w Fp(i)27 b Fw(:)33 b FQ(STORE[)p
Fe(addr)8 b FQ(])k Fp( )h(h)8 b Fv(CON)h Fu(;)h(c)e Fp(i)o
Fw(;)931 901 y Fe(tr)n(ail)d Fw(\()p Fe(addr)g Fw(\);)686
958 y Fp(h)i Fv(CON)j Fu(;)g(c)836 941 y Fk(0)855 958
y Fp(i)i Fw(:)33 b Fe(fail)17 b Fp( )c Fw(\()p Fu(c)25
b Fp(6)p Fw(=)g Fu(c)1212 941 y Fk(0)1224 958 y Fw(\);)686
1014 y Fd(other)78 b Fw(:)33 b Fe(fail)17 b Fp( )c Fd(true)p
Fw(;)624 1071 y Fd(endcase)p Fw(;)429 1127 y FQ(write)h
Fw(:)33 b FQ(HEAP[H)r(])13 b Fp( )g(h)7 b Fv(CON)j Fu(;)f(c)f
Fp(i)o Fw(;)624 1184 y FQ(H)13 b Fp( )g FQ(H)d Fw(+)h(1;)367
1240 y Fd(endcase)p Fw(;)367 1296 y Fq(if)h FI(fail)408
1353 y Fq(then)i FI(bac)o(ktr)o(ac)o(k)408 1409 y Fq(else)f
FQ(P)f Fp( )i FQ(P)c Fw(+)g FI(instruction)p 875 1409
V 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 95 1817 330 2 v
95 1879 2 63 v 110 1859 a FQ(unify)p 248 1859 14 2 v
17 w(void)k Fu(n)p 424 1879 2 63 v 95 1881 330 2 v 95
1976 a FR(In)20 b FQ(write)h FR(mode,)h(push)d Fu(n)h
FR(ne)o(w)95 2033 y(unbound)27 b FQ(REF)j FR(cells)e(onto)f(the)95
2089 y(heap.)f(In)15 b FQ(read)i FR(mode,)f(skip)e(the)95
2146 y(ne)o(xt)g Fu(n)f FR(heap)h(cells)f(starting)f(at)h(lo-)95
2202 y(cation)20 b FQ(S)p FR(.)43 b(Continue)19 b(e)o(x)o(ecution)95
2259 y(with)11 b(the)g(follo)o(wing)e(instruction.)741
1976 y Fd(case)k Fe(mo)n(de)j Fd(of)803 2033 y FQ(read)41
b Fw(:)33 b FQ(S)13 b Fp( )g FQ(S)e Fw(+)f Fu(n)p Fw(;)803
2089 y FQ(write)k Fw(:)33 b Fd(for)13 b Fu(i)f Fp( )h
FQ(H)g Fd(to)g FQ(H)d Fw(+)h Fu(n)f Fp(\000)h Fw(1)h
Fd(do)1040 2146 y FQ(HEAP[)p Fu(i)p FQ(])i Fp( )f(h)7
b Fv(REF)j Fu(;)g(i)e Fp(i)n Fw(;)998 2202 y FQ(H)13
b Fp( )g FQ(H)e Fw(+)f Fu(n)p Fw(;)741 2259 y Fd(endcase)p
Fw(;)741 2315 y FQ(P)j Fp( )g FQ(P)d Fw(+)h FI(instruction)p
1125 2315 14 2 v 13 w(size)o Fw(\()p FQ(P)p Fw(\);)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)f
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)282
b(P)o FL(A)q(G)r(E)12 b FN(1)r(0)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 106 121
106 120 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257
289 a FA(Contr)o(ol)j(instructions)p 282 365 247 2 v
282 419 2 55 v 296 406 a FQ(allocate)p 527 419 V 282
421 247 2 v 282 519 a FR(Allocate)e(a)g(ne)o(w)g(en)n(vironment)g(on)g
(the)f(stack,)j(setting)c(its)i(continuation)d(en)n(vironment)282
576 y(and)g(continuation)d(point)i(\002elds)g(to)h(current)f
FQ(E)i FR(and)e FQ(CP)q FR(,)h(respecti)o(v)o(ely)m(.)k(Continue)11
b(e)o(x)o(ecu-)282 632 y(tion)f(with)h(the)f(follo)o(wing)f
(instruction.)604 738 y Fd(if)18 b FQ(E)13 b Fu(>)g FQ(B)645
794 y Fd(then)g FI(ne)o(wE)g Fp( )g FQ(E)d Fw(+)h FQ(CODE[STACK[E)i
Fw(+)e(1)p FQ(])f Fp(\000)g Fw(1)p FQ(])g Fw(+)h(2)645
851 y Fd(else)i FI(ne)o(wE)g Fp( )g FQ(B)d Fw(+)h FQ(STACK[B)r(])f
Fw(+)g(8;)604 907 y FQ(STACK[)p FI(ne)o(wE)r FQ(])i Fp( )h
FQ(E)q Fw(;)604 964 y FQ(STACK[)p FI(ne)o(wE)f Fw(+)e(1)p
FQ(])j Fp( )g FQ(CP)p Fw(;)604 1020 y FQ(E)f Fp( )i FI(ne)o(wE)p
Fw(;)604 1077 y FQ(P)e Fp( )i FQ(P)c Fw(+)g FI(instruction)p
987 1077 14 2 v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282
1236 301 2 v 282 1290 2 55 v 296 1277 a FQ(deallocate)p
582 1290 V 282 1292 301 2 v 282 1390 a FR(Remo)o(v)o(e)k(the)e(en)n
(vironment)g(frame)h(at)f(stack)282 1447 y(location)f
FQ(E)i FR(from)g(the)f(stack)g(by)g(resetting)g FQ(E)282
1503 y FR(to)h(the)g(v)o(alue)g(of)h(its)e FQ(CE)i FR(\002eld)g(and)f
(the)g(con-)282 1559 y(tinuation)h(pointer)h FQ(CP)i
FR(to)f(the)g(v)o(alue)g(of)g(its)282 1616 y FQ(CP)i
FR(\002eld.)34 b(Continue)16 b(e)o(x)o(ecution)h(with)f(the)282
1672 y(follo)o(wing)9 b(instruction.)1081 1390 y FQ(CP)14
b Fp( )f FQ(STACK[E)f Fw(+)e(1)p FQ(])p Fw(;)1081 1447
y FQ(E)j Fp( )g FQ(STACK[E)r(])q Fw(;)1081 1503 y FQ(P)g
Fp( )g FQ(P)e Fw(+)f FI(instruction)p 1465 1503 14 2
v 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 282 1825 243 2
v 282 1890 2 65 v 296 1868 a FQ(call)k Fu(P)q(;)8 b(N)p
523 1890 V 282 1892 243 2 v 282 1987 a FR(If)18 b Fu(P)24
b FR(is)16 b(de\002ned,)j(then)e(sa)o(v)o(e)g(the)g(cur)o(-)282
2044 y(rent)22 b(choice)f(point')n(s)f(address)h(in)h
FQ(B0)282 2100 y FR(and)c(the)g(v)o(alue)g(of)g(current)g(continua-)282
2157 y(tion)d(in)g FQ(CP)p FR(,)i(and)f(continue)e(e)o(x)o(ecution)282
2213 y(with)g(instruction)d(labeled)j Fu(P)6 b FR(,)16
b(with)e Fu(N)282 2269 y FR(stack)9 b(v)o(ariables)f(remaining)g(in)g
(the)h(cur)o(-)282 2326 y(rent)15 b(en)n(vironment;)h(otherwise,)f
(back-)282 2382 y(track.)1002 1987 y Fd(if)j Fe(de\014ne)n(d)s
Fw(\()p Fu(P)6 b Fw(\))1043 2044 y Fd(then)1085 2100
y(b)q(egin)1126 2157 y FQ(CP)13 b Fp( )g FQ(P)e Fw(+)f
Fe(instruction)p 1556 2157 14 2 v 20 w(size)r Fw(\()p
FQ(P)p Fw(\);)1126 2213 y Fe(num)p 1219 2213 V 20 w(of)p
1283 2213 V 26 w(ar)n(gs)16 b Fp( )d Fe(arity)5 b Fw(\()p
Fu(P)h Fw(\);)1126 2269 y FQ(B0)13 b Fp( )g FQ(B)q Fw(;)1126
2326 y FQ(P)g Fp( )g Fw(@\()p Fu(P)6 b Fw(\))1085 2382
y Fd(end)1043 2439 y(else)13 b FI(bac)o(ktr)o(ac)o(k)p
Fw(;)258 2640 y FN(P)o FL(A)q(G)r(E)g FN(1)r(0)r(6)e
FL(O)r(F)i FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 107 122
107 121 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 268 2 v 95 297 2 57 v 110 284
a FQ(execute)g Fu(P)p 361 297 V 95 299 268 2 v 95 397
a FR(If)23 b Fu(P)29 b FR(s)22 b(de\002ned,)j(then)c(sa)o(v)o(e)i(the)e
(current)95 453 y(choice)e(point')n(s)e(address)h(in)g
FQ(B0)i FR(and)e(con-)95 510 y(tinue)13 b(e)o(x)o(ecution)h(with)e
(instruction)g(labeled)95 566 y Fu(P)6 b FR(;)12 b(otherwise,)e
(backtrack.)895 397 y Fd(if)18 b Fe(de\014ne)n(d)s Fw(\()p
Fu(P)6 b Fw(\))936 453 y Fd(then)978 510 y(b)q(egin)1019
566 y Fe(num)p 1112 566 14 2 v 20 w(of)p 1176 566 V 26
w(ar)n(gs)16 b Fp( )d Fe(arity)5 b Fw(\()p Fu(P)h Fw(\);)1019
623 y FQ(B0)13 b Fp( )g FQ(B)q Fw(;)1019 679 y FQ(P)g
Fp( )g Fw(@\()p Fu(P)6 b Fw(\))978 736 y Fd(end)936 792
y(else)13 b FI(bac)o(ktr)o(ac)o(k)p Fw(;)p 95 1767 220
2 v 95 1828 2 61 v 110 1808 a FQ(proceed)p 313 1828 V
95 1830 220 2 v 95 1925 a FR(Continue)d(e)o(x)o(ecution)g(at)h
(instruction)d(whose)95 1982 y(address)13 b(is)g(indicated)f(by)h(the)g
(continuation)95 2038 y(re)o(gister)e FQ(CP)q FR(.)895
1925 y FQ(P)h Fp( )i FQ(CP)p Fw(;)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)c FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(0)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 108 123
108 122 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257
289 a FA(Choice)j(instructions)p 282 366 350 2 v 282
429 2 63 v 296 410 a FQ(try)p 380 410 14 2 v 18 w(me)p
452 410 V 16 w(else)d Fu(L)p 631 429 2 63 v 282 431 350
2 v 282 527 a FR(Allocate)e(a)h(ne)o(w)g(choice)f(point)g(frame)h(on)g
(the)f(stack)h(setting)e(its)g(ne)o(xt)i(clause)f(\002eld)h(to)f
Fu(L)282 583 y FR(and)17 b(the)f(other)h(\002elds)f(according)h(to)f
(the)g(current)h(conte)o(xt,)h(and)f(set)f FQ(B)h FR(to)g(point)e(to)i
(it.)282 640 y(Continue)10 b(e)o(x)o(ecution)h(with)f(follo)o(wing)f
(instruction.)604 745 y Fd(if)18 b FQ(E)13 b Fu(>)g FQ(B)645
802 y Fd(then)g FI(ne)o(wB)g Fp( )g FQ(E)d Fw(+)h FQ(CODE[STACK[E)i
Fw(+)e(1)p FQ(])f Fp(\000)g Fw(1)p FQ(])g Fw(+)h(2)645
858 y Fd(else)i FI(ne)o(wB)g Fp( )g FQ(B)d Fw(+)h FQ(STACK[B)r(])f
Fw(+)g(8;)604 915 y FQ(STACK[)p FI(ne)o(wB)r FQ(])i Fp( )h
Fe(num)p 1058 915 14 2 v 20 w(of)p 1122 915 V 27 w(ar)n(gs)s
Fw(;)604 971 y Fu(n)f Fp( )i FQ(STACK[)p FI(ne)o(wB)r
FQ(])p Fw(;)604 1028 y Fd(for)e Fu(i)g Fp( )h Fw(1)g
Fd(to)g Fu(n)g Fd(do)f FQ(STACK[)p FI(ne)o(wB)g Fw(+)f
Fu(i)p FQ(])h Fp( )h FQ(A)p Fu(i)p Fw(;)604 1084 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)g Fw(+)h(1)p FQ(])i Fp( )g FQ(E)p
Fw(;)604 1141 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)g
Fw(+)h(2)p FQ(])i Fp( )g FQ(CP)p Fw(;)604 1197 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)g Fw(+)h(3)p FQ(])i Fp( )g FQ(B)p
Fw(;)604 1253 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)g
Fw(+)h(4)p FQ(])i Fp( )g Fu(L)p Fw(;)604 1310 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)g Fw(+)h(5)p FQ(])i Fp( )g FQ(TR)p
Fw(;)604 1366 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)g
Fw(+)h(6)p FQ(])i Fp( )g FQ(H)p Fw(;)604 1423 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)g Fw(+)h(7)p FQ(])i Fp( )g FQ(B0)p
Fw(;)604 1479 y FQ(B)f Fp( )i FI(ne)o(wB)p Fw(;)604 1536
y FQ(HB)f Fp( )g FQ(H)p Fw(;)604 1592 y FQ(P)f Fp( )i
FQ(P)c Fw(+)g FI(instruction)p 987 1592 V 14 w(size)o
Fw(\()p FQ(P)p Fw(\);)p 282 1764 405 2 v 282 1827 2 63
v 296 1808 a FQ(retry)p 434 1808 14 2 v 18 w(me)p 506
1808 V 17 w(else)k Fu(L)p 685 1827 2 63 v 282 1829 405
2 v 282 1925 a FR(Ha)o(ving)e(backtracked)h(to)g(the)f(cur)o(-)282
1981 y(rent)17 b(choice)g(point,)g(reset)g(all)g(the)282
2037 y(necessary)k(information)f(from)h(it)282 2094 y(and)13
b(update)g(its)f(ne)o(xt)h(clause)g(\002eld)282 2150
y(to)h Fu(L)p FR(.)24 b(Continue)14 b(e)o(x)o(ecution)g(with)282
2207 y(follo)o(wing)9 b(instruction.)921 1925 y Fu(n)k
Fp( )g FQ(STACK[B)r(])p Fw(;)921 1981 y Fd(for)f Fu(i)h
Fp( )g Fw(1)f Fd(to)h Fu(n)g Fd(do)g FQ(A)p Fu(i)g Fp( )g
FQ(STACK[B)f Fw(+)e Fu(i)p FQ(])p Fw(;)921 2037 y FQ(E)j
Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)g(1)p FQ(])p Fw(;)921
2094 y FQ(CP)j Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(2)p
FQ(])p Fw(;)921 2150 y FQ(STACK[B)h Fw(+)f Fu(n)f Fw(+)g(4)p
FQ(])j Fp( )g Fu(L)p Fw(;)921 2207 y Fe(unwind)p 1071
2207 14 2 v 21 w(tr)n(ail)5 b Fw(\()p FQ(STACK[B)11 b
Fw(+)g Fu(n)f Fw(+)h(5)p FQ(])p Fu(;)d FQ(TR)o Fw(\);)921
2263 y FQ(TR)13 b Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(5)p
FQ(])p Fw(;)921 2320 y FQ(H)i Fp( )g FQ(STACK[B)f Fw(+)f
Fu(n)f Fw(+)g(6)p FQ(])p Fw(;)921 2376 y FQ(HB)j Fp( )g
FQ(H)q Fw(;)921 2433 y FQ(P)g Fp( )g FQ(P)e Fw(+)f FI(instruction)p
1305 2433 V 13 w(size)p Fw(\()p FQ(P)o Fw(\);)258 2640
y FN(P)o FL(A)q(G)r(E)j FN(1)r(0)r(8)e FL(O)r(F)i FN(1)r(2)r(9)281
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 109 124
109 123 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 236 2 v 95 292 2 52 v 110 279
a FQ(trust)p 248 279 14 2 v 17 w(me)p 329 292 2 52 v
95 294 236 2 v 95 392 a FR(Ha)o(ving)f(backtracked)f(to)h(the)g(cur)o
(-)95 448 y(rent)k(choice)g(point,)h(reset)f(all)f(the)95
505 y(necessary)h(information)f(from)i(it,)95 561 y(then)11
b(discard)g(it)g(by)g(resetting)f FQ(B)h FR(to)95 618
y(its)k(predecessor)n(.)27 b(Continue)14 b(e)o(x)o(e-)95
674 y(cution)19 b(with)g(follo)o(wing)e(instruc-)95 730
y(tion.)734 392 y Fu(n)c Fp( )g FQ(STACK[B)r(])q Fw(;)734
448 y Fd(for)g Fu(i)f Fp( )h Fw(1)f Fd(to)h Fu(n)g Fd(do)g
FQ(A)p Fu(i)g Fp( )g FQ(STACK[B)f Fw(+)e Fu(i)p FQ(])p
Fw(;)734 505 y FQ(E)j Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f
Fw(+)h(1)p FQ(])p Fw(;)734 561 y FQ(CP)j Fp( )f FQ(STACK[B)f
Fw(+)e Fu(n)g Fw(+)h(2)p FQ(])p Fw(;)734 618 y Fe(unwind)p
884 618 14 2 v 21 w(tr)n(ail)5 b Fw(\()p FQ(STACK[B)11
b Fw(+)g Fu(n)f Fw(+)h(5)p FQ(])p Fu(;)d FQ(TR)o Fw(\);)734
674 y FQ(TR)14 b Fp( )f FQ(STACK[B)f Fw(+)e Fu(n)g Fw(+)h(5)p
FQ(])p Fw(;)734 730 y FQ(H)i Fp( )g FQ(STACK[B)f Fw(+)f
Fu(n)f Fw(+)h(6)p FQ(])p Fw(;)734 787 y FQ(B)i Fp( )g
FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(3)p FQ(])p Fw(;)734
843 y FQ(HB)j Fp( )f FQ(STACK[B)f Fw(+)e Fu(n)g Fw(+)h(6)p
FQ(])p Fw(;)734 900 y FQ(P)i Fp( )g FQ(P)e Fw(+)f FI(instruction)p
1118 900 V 14 w(size)o Fw(\()p FQ(P)p Fw(\);)p 95 1162
154 2 v 95 1225 2 63 v 110 1205 a FQ(try)j Fu(L)p 247
1225 V 95 1227 154 2 v 95 1322 a FR(Allocate)e(a)g(ne)o(w)g(choice)g
(point)f(frame)i(on)f(the)f(stack)h(setting)e(its)i(ne)o(xt)f(clause)h
(\002eld)g(to)g(the)95 1379 y(follo)o(wing)i(instruction)f(and)j(the)f
(other)h(\002elds)f(according)g(to)g(the)h(current)g(conte)o(xt,)g(and)
95 1435 y(set)c FQ(B)h FR(to)f(point)f(to)g(it.)k(Continue)c(e)o(x)o
(ecution)h(with)f(instruction)f(labeled)h Fu(L)p FR(.)417
1541 y Fd(if)18 b FQ(E)13 b Fu(>)g FQ(B)458 1597 y Fd(then)g
FI(ne)o(wB)g Fp( )g FQ(E)e Fw(+)f FQ(CODE[STACK[E)j Fw(+)e(1)p
FQ(])f Fp(\000)g Fw(1)p FQ(])h Fw(+)f(2)458 1654 y Fd(else)j
FI(ne)o(wB)g Fp( )g FQ(B)d Fw(+)h FQ(STACK[B)r(])f Fw(+)h(8;)417
1710 y FQ(STACK[)p FI(ne)o(wB)r FQ(])i Fp( )g Fe(num)p
872 1710 14 2 v 20 w(of)p 935 1710 V 26 w(ar)n(gs)s Fw(;)417
1767 y Fu(n)g Fp( )g FQ(STACK[)p FI(ne)o(wB)r FQ(])p
Fw(;)417 1823 y Fd(for)f Fu(i)g Fp( )h Fw(1)g Fd(to)g
Fu(n)g Fd(do)g FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(i)p
FQ(])j Fp( )g FQ(A)p Fu(i)p Fw(;)417 1880 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(1)p FQ(])j Fp( )g FQ(E)p
Fw(;)417 1936 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h
Fw(+)f(2)p FQ(])j Fp( )g FQ(CP)p Fw(;)417 1993 y FQ(STACK[)p
FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(3)p FQ(])j Fp( )g FQ(B)p
Fw(;)417 2049 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h
Fw(+)f(4)p FQ(])j Fp( )g FQ(P)d Fw(+)h Fe(instruction)p
1245 2049 V 19 w(size)r Fw(\()p FQ(P)p Fw(\);)417 2105
y FQ(STACK[)p FI(ne)o(wB)h Fw(+)e Fu(n)h Fw(+)f(5)p FQ(])j
Fp( )g FQ(TR)p Fw(;)417 2162 y FQ(STACK[)p FI(ne)o(wB)f
Fw(+)e Fu(n)h Fw(+)f(6)p FQ(])j Fp( )g FQ(H)p Fw(;)417
2218 y FQ(STACK[)p FI(ne)o(wB)f Fw(+)e Fu(n)h Fw(+)f(7)p
FQ(])j Fp( )g FQ(B0)p Fw(;)417 2275 y FQ(B)g Fp( )g FI(ne)o(wB)p
Fw(;)417 2331 y FQ(HB)g Fp( )g FQ(H)p Fw(;)417 2388 y
FQ(P)g Fp( )g Fu(L)p Fw(;)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(0)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 110 125
110 124 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282
241 209 2 v 282 304 2 63 v 296 284 a FQ(retry)g Fu(L)p
489 304 V 282 306 209 2 v 282 401 a FR(Ha)o(ving)67 b(backtracked)282
458 y(to)27 b(the)g(current)g(choice)282 514 y(point,)47
b(reset)40 b(all)g(the)282 571 y(necessary)29 b(information)282
627 y(from)20 b(it)e(and)h(update)g(its)282 683 y(ne)o(xt)38
b(clause)f(\002eld)g(to)282 740 y(follo)o(wing)g(instruction.)282
796 y(Continue)133 b(e)o(x)o(ecu-)282 853 y(tion)36 b(with)g
(instruction)282 909 y(labeled)11 b Fu(L)p FR(.)773 401
y Fu(n)i Fp( )g FQ(STACK[B)r(])p Fw(;)773 458 y Fd(for)f
Fu(i)h Fp( )g Fw(0)f Fd(to)h Fu(n)e Fp(\000)f Fw(1)i
Fd(do)h FQ(A)p Fu(i)g Fp( )g FQ(STACK[B)f Fw(+)e Fu(i)p
FQ(])p Fw(;)773 514 y FQ(E)j Fp( )g FQ(STACK[B)f Fw(+)f
Fu(n)f Fw(+)g(1)p FQ(])p Fw(;)773 571 y FQ(CP)j Fp( )g
FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(2)p FQ(])p Fw(;)773
627 y FQ(STACK[B)h Fw(+)f Fu(n)f Fw(+)g(4)p FQ(])j Fp( )g
FQ(P)e Fw(+)f Fe(instruction)p 1528 627 14 2 v 19 w(size)s
Fw(\()p FQ(P)p Fw(\);)773 683 y Fe(unwind)p 923 683 V
21 w(tr)n(ail)5 b Fw(\()p FQ(STACK[B)11 b Fw(+)g Fu(n)f
Fw(+)h(5)p FQ(])p Fu(;)d FQ(TR)o Fw(\);)773 740 y FQ(TR)13
b Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(5)p FQ(])p
Fw(;)773 796 y FQ(H)i Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f
Fw(+)g(6)p FQ(])p Fw(;)773 853 y FQ(HB)j Fp( )g FQ(H)q
Fw(;)773 909 y FQ(P)g Fp( )g Fu(L)p Fw(;)p 282 1043 209
2 v 282 1099 2 57 v 296 1086 a FQ(trust)h Fu(L)p 489
1099 V 282 1101 209 2 v 282 1199 a FR(Ha)o(ving)e(backtracked)h(to)g
(the)f(cur)o(-)282 1255 y(rent)h(choice)f(point,)g(reset)h(all)f(nec-)
282 1312 y(essary)d(information)f(from)h(it,)g(then)282
1368 y(discard)17 b(it)g(by)f(resetting)g FQ(B)i FR(to)f(its)282
1425 y(predecessor)n(.)39 b(Continue)18 b(e)o(x)o(ecu-)282
1481 y(tion)10 b(with)h(instruction)d(labeled)j Fu(L)p
FR(.)921 1199 y Fu(n)i Fp( )g FQ(STACK[B)r(])p Fw(;)921
1255 y Fd(for)f Fu(i)h Fp( )g Fw(1)f Fd(to)h Fu(n)g Fd(do)g
FQ(A)p Fu(i)g Fp( )g FQ(STACK[B)f Fw(+)e Fu(i)p FQ(])p
Fw(;)921 1312 y FQ(E)j Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f
Fw(+)g(1)p FQ(])p Fw(;)921 1368 y FQ(CP)j Fp( )g FQ(STACK[B)f
Fw(+)f Fu(n)f Fw(+)h(2)p FQ(])p Fw(;)921 1425 y Fe(unwind)p
1071 1425 14 2 v 21 w(tr)n(ail)5 b Fw(\()p FQ(STACK[B)11
b Fw(+)g Fu(n)f Fw(+)h(5)p FQ(])p Fu(;)d FQ(TR)o Fw(\);)921
1481 y FQ(TR)13 b Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(5)p
FQ(])p Fw(;)921 1538 y FQ(H)i Fp( )g FQ(STACK[B)f Fw(+)f
Fu(n)f Fw(+)g(6)p FQ(])p Fw(;)921 1594 y FQ(B)j Fp( )g
FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)g(3)p FQ(])p Fw(;)921
1651 y FQ(HB)j Fp( )g FQ(STACK[B)f Fw(+)f Fu(n)f Fw(+)h(6)p
FQ(])p Fw(;)921 1707 y FQ(P)i Fp( )g Fu(L)p Fw(;)257
1919 y FA(Indexing)k(instructions)p 282 2007 586 2 v
282 2072 2 65 v 296 2051 a FQ(switch)p 461 2051 14 2
v 18 w(on)p 533 2051 V 17 w(term)d Fu(V)s(;)8 b(C)q(;)g(L;)f(S)p
866 2072 2 65 v 282 2074 586 2 v 282 2170 a FR(Jump)14
b(to)f(the)h(instruction)d(labeled,)k(respec-)282 2226
y(ti)o(v)o(ely)m(,)24 b Fu(V)10 b FR(,)24 b Fu(C)s FR(,)h
Fu(L)p FR(,)g(or)d Fu(S)s FR(,)i(depending)c(on)282 2283
y(whether)12 b(the)g(dereferenced)h(v)o(alue)f(of)g(ar)o(gu-)282
2339 y(ment)d(re)o(gister)f FQ(A)p Fw(1)h FR(is)f(a)h(v)o(ariable,)g(a)
g(constant,)282 2395 y(a)14 b(non-empty)f(list,)h(or)g(a)g(structure,)g
(respec-)282 2452 y(ti)o(v)o(ely)m(.)1081 2170 y Fd(case)f
FQ(STORE[)p Fe(der)n(ef)e Fw(\()p FQ(A)p Fw(1\))p FQ(])i
Fd(of)1123 2226 y Fp(h)7 b Fv(REF)j Fu(;)p 1255 2226
14 2 v 33 w Fp(i)25 b Fw(:)g FQ(P)13 b Fp( )g Fu(V)d
Fw(;)1123 2283 y Fp(h)d Fv(CON)j Fu(;)p 1255 2283 V 33
w Fp(i)25 b Fw(:)g FQ(P)13 b Fp( )g Fu(C)s Fw(;)1123
2339 y Fp(h)7 b Fv(LIS)j Fu(;)p 1255 2339 V 33 w Fp(i)25
b Fw(:)g FQ(P)13 b Fp( )g Fu(L)p Fw(;)1123 2395 y Fp(h)7
b Fv(STR)j Fu(;)p 1255 2395 V 33 w Fp(i)25 b Fw(:)g FQ(P)13
b Fp( )g Fu(S)s Fw(;)1081 2452 y Fd(endcase)q Fw(;)258
2640 y FN(P)o FL(A)q(G)r(E)g FN(1)r(1)r(0)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 111 126
111 125 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 95 241 602 2 v 95 305 2 65 v 110 284
a FQ(switch)p 275 284 14 2 v 18 w(on)p 347 284 V 16 w(constant)h
Fu(N)r(;)8 b(T)p 696 305 2 65 v 95 307 602 2 v 95 403
a FR(The)j(dereferenced)h(v)o(alue)f(of)g(re)o(gister)95
460 y FQ(A)p Fw(1)17 b FR(being)f(a)h(constant,)h(jump)e(to)g(the)95
516 y(instruction)7 b(associated)h(to)g(it)h(in)f(hash-)95
572 y(table)13 b Fu(T)20 b FR(of)13 b(size)g Fu(N)5 b
FR(.)20 b(If)14 b(the)f(constant)95 629 y(found)d(in)g
FQ(A)p Fw(1)h FR(is)f(not)f(one)i(in)f(the)g(table,)95
685 y(backtrack.)787 403 y Fp(h)e Fe(tag)14 b Fu(;)c
Fe(val)i Fp(i)g( )h FQ(STORE[)p Fe(der)n(ef)e Fw(\()p
FQ(A)p Fw(1\))p FQ(])p Fw(;)787 460 y Fp(h)d Fe(found)15
b Fu(;)9 b Fe(inst)i Fp(i)i( )g Fe(get)p 1198 460 14
2 v 20 w(hash)t Fw(\()p Fe(val)t Fu(;)8 b(T)t(;)g(N)d
Fw(\);)787 516 y Fd(if)18 b Fe(found)829 572 y Fd(then)13
b FQ(P)g Fp( )g Fe(inst)829 629 y Fd(else)f FI(bac)o(ktr)o(ac)o(k)q
Fw(;)p 95 818 630 2 v 95 882 2 65 v 110 861 a FQ(switch)p
275 861 14 2 v 18 w(on)p 347 861 V 16 w(structure)k Fu(N)r(;)8
b(T)p 723 882 2 65 v 95 884 630 2 v 95 980 a FR(The)j(dereferenced)h(v)
o(alue)f(of)g(re)o(gister)95 1037 y FQ(A)p Fw(1)16 b
FR(being)f(a)h(structure,)g(jump)f(to)g(the)95 1093 y(instruction)7
b(associated)h(to)g(it)h(in)f(hash-)95 1149 y(table)i
Fu(T)16 b FR(of)10 b(size)f Fu(N)c FR(.)14 b(If)c(the)g(functor)f(of)95
1206 y(the)g(structure)f(found)f(in)h FQ(A)p Fw(1)h FR(is)f(not)g(one)
95 1262 y(in)j(the)g(table,)g(backtrack.)787 980 y Fp(h)d
Fe(tag)14 b Fu(;)c Fe(val)i Fp(i)g( )h FQ(STORE[)p Fe(der)n(ef)e
Fw(\()p FQ(A)p Fw(1\))p FQ(])p Fw(;)787 1037 y Fp(h)d
Fe(found)15 b Fu(;)9 b Fe(inst)i Fp(i)i( )g Fe(get)p
1198 1037 14 2 v 20 w(hash)t Fw(\()p Fe(val)t Fu(;)8
b(T)t(;)g(N)d Fw(\);)787 1093 y Fd(if)18 b Fe(found)829
1149 y Fd(then)13 b FQ(P)g Fp( )g Fe(inst)829 1206 y
Fd(else)f FI(bac)o(ktr)o(ac)o(k)q Fw(;)71 1473 y FA(Cut)17
b(instructions)p 95 1548 236 2 v 95 1602 2 55 v 110 1589
a FQ(neck)p 221 1589 14 2 v 17 w(cut)p 329 1602 2 55
v 95 1604 236 2 v 95 1702 a FR(If)i(there)e(is)g(a)i(choice)e(point)f
(after)i(that)f(in-)95 1758 y(dicated)i(by)g FQ(B0)p
FR(,)j(discard)d(it)f(and)h(tidy)f(the)95 1815 y(trail)f(up)f(to)g
(that)g(point.)30 b(Continue)15 b(e)o(x)o(ecu-)95 1871
y(tion)c(with)f(follo)o(wing)f(instruction.)895 1702
y Fd(if)18 b FQ(B)13 b Fu(>)g FQ(B0)936 1758 y Fd(then)978
1815 y(b)q(egin)1019 1871 y FQ(B)g Fp( )g FQ(B0)q Fw(;)1019
1928 y Fe(tidy)p 1100 1928 14 2 v 21 w(tr)n(ail)978 1984
y Fd(end)p Fw(;)895 2041 y FQ(P)f Fp( )i FQ(P)c Fw(+)g
FI(instruction)p 1278 2041 V 14 w(size)o Fw(\()p FQ(P)p
Fw(\);)p 95 2189 330 2 v 95 2250 2 61 v 110 2231 a FQ(get)p
194 2231 14 2 v 17 w(level)k(Y)p Fu(n)p 424 2250 2 61
v 95 2252 330 2 v 95 2348 a FR(Set)f FQ(Y)p Fu(n)g FR(to)f(the)g
(current)g(v)o(alue)g(of)g FQ(B0)p FR(.)18 b(Con-)95
2404 y(tinue)e(e)o(x)o(ecution)g(with)g(follo)o(wing)e(instruc-)95
2461 y(tion.)895 2348 y FQ(STACK[E)e Fw(+)e(2)g(+)g Fu(n)p
FQ(])j Fp( )h FQ(B0)p Fw(;)895 2404 y FQ(P)e Fp( )i FQ(P)c
Fw(+)g FI(instruction)p 1278 2404 14 2 v 14 w(size)o
Fw(\()p FQ(P)p Fw(\);)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12 b FN(1)r(1)r(1)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 112 127
112 126 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 282
241 178 2 v 282 292 2 52 v 296 279 a FQ(cut)g(Y)p Fu(n)p
458 292 V 282 294 178 2 v 282 392 a FR(Discard)j(all)g(\(if)h(an)o(y\))
g(choice)f(points)f(after)282 448 y(that)8 b(indicated)g(by)g
FQ(Y)p Fu(n)q FR(,)i(and)e(tidy)g(the)g(trail)g(up)282
505 y(to)16 b(that)g(point.)29 b(Continue)16 b(e)o(x)o(ecution)g(with)
282 561 y(follo)o(wing)9 b(instruction.)1081 392 y Fd(if)18
b FQ(B)13 b Fu(>)g FQ(STACK[E)f Fw(+)f(2)f(+)g Fu(n)p
FQ(])1123 448 y Fd(then)1164 505 y(b)q(egin)1206 561
y FQ(B)j Fp( )g FQ(STACK[E)f Fw(+)e(2)g(+)h Fu(n)p FQ(])p
Fw(;)1206 618 y Fe(tidy)p 1287 618 14 2 v 21 w(tr)n(ail)1164
674 y Fd(end)p Fw(;)1081 730 y FQ(P)i Fp( )g FQ(P)e Fw(+)f
FI(instruction)p 1465 730 V 14 w(size)o Fw(\()p FQ(P)p
Fw(\);)257 950 y FA(B.2)72 b(W)-9 b(AM)17 b(ancillary)g(operations)p
507 1398 958 3 v 528 1496 a Fd(pro)q(cedure)c Fe(b)n(acktr)n(ack)t
Fw(;)570 1552 y Fd(b)q(egin)611 1609 y(if)18 b FQ(B)13
b Fw(=)g Fe(b)n(ottom)p 885 1609 14 2 v 20 w(of)p 949
1609 V 26 w(stack)653 1665 y Fd(then)g Fe(fail)p 838
1665 V 20 w(and)p 930 1665 V 21 w(exit)p 1022 1665 V
21 w(pr)n(o)n(gr)n(am)653 1721 y Fd(else)694 1778 y(b)q(egin)736
1834 y FQ(B0)g Fp( )g FQ(STACK[B)f Fw(+)e FQ(STACK[B)r(])h
Fw(+)f(7)p FQ(])p Fw(;)736 1891 y FQ(P)j Fp( )g FQ(STACK[B)f
Fw(+)e FQ(STACK[B)r(])g Fw(+)h(4)p FQ(])694 1947 y Fd(end)570
2004 y(end)p Fe(b)n(acktr)n(ack)t Fw(;)p 507 2084 958
3 v 780 2163 a Fc(The)g FH(bac)o(ktr)o(ac)o(k)h Fc(operation)258
2640 y FN(P)o FL(A)q(G)r(E)h FN(1)r(1)r(2)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 113 128
113 127 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 403 291 792 3 v 424 388 a Fd(function)g
Fe(der)n(ef)c Fw(\()p Fu(a)i Fw(:)g Fe(addr)n(ess)s Fw(\))h(:)f
Fe(addr)n(ess)s Fw(;)466 445 y Fd(b)q(egin)507 501 y
Fp(h)7 b Fe(tag)15 b Fu(;)10 b Fe(value)h Fp(i)h( )h
FQ(STORE[)p Fu(a)p FQ(])r Fw(;)507 558 y Fd(if)18 b Fw(\()p
Fe(tag)f Fw(=)c Fv(REF)o Fw(\))d Fp(^)h Fw(\()p Fe(value)28
b Fp(6)p Fw(=)e Fu(a)p Fw(\))549 614 y Fd(thenreturn)12
b Fe(der)n(ef)e Fw(\()p Fe(value)s Fw(\))549 670 y Fd(elsereturn)i
Fu(a)466 727 y Fd(end)p Fe(der)n(ef)d Fw(;)p 403 807
V 630 886 a Fc(The)h FH(der)n(ef)17 b Fc(operation)p
294 1377 1011 3 v 314 1474 a Fd(pro)q(cedure)c Fe(bind)t
Fw(\()p Fu(a)686 1481 y FE(1)706 1474 y Fu(;)8 b(a)751
1481 y FE(2)782 1474 y Fw(:)13 b Fe(addr)n(ess)s Fw(\);)356
1530 y Fp(h)7 b Fu(t)397 1537 y FE(1)427 1530 y Fu(;)p
453 1530 14 2 v 34 w Fp(i)12 b( )h FQ(STORE[)p Fu(a)748
1537 y FE(1)770 1530 y FQ(])p Fw(;)20 b Fp(h)7 b Fu(t)871
1537 y FE(2)901 1530 y Fu(;)p 927 1530 V 34 w Fp(i)12
b( )h FQ(STORE[)p Fu(a)1222 1537 y FE(2)1244 1530 y FQ(])p
Fw(;)356 1587 y Fd(if)18 b Fw(\()p Fu(t)438 1594 y FE(1)470
1587 y Fw(=)13 b Fv(REF)p Fw(\))22 b Fp(^)h Fw(\(\()p
Fu(t)735 1594 y FE(2)780 1587 y Fp(6)p Fw(=)j Fv(REF)o
Fw(\))10 b Fp(_)h Fw(\()p Fu(a)1023 1594 y FE(2)1055
1587 y Fu(<)i(a)1127 1594 y FE(1)1146 1587 y Fw(\)\))397
1643 y Fd(then)439 1700 y(b)q(egin)480 1756 y FQ(STORE[)p
Fu(a)666 1763 y FE(1)688 1756 y FQ(])g Fp( )g FQ(STORE[)p
Fu(a)972 1763 y FE(2)993 1756 y FQ(])p Fw(;)20 b Fe(tr)n(ail)5
b Fw(\()p Fu(a)1181 1763 y FE(1)1200 1756 y Fw(\))439
1813 y Fd(end)397 1869 y(else)439 1926 y(b)q(egin)480
1982 y FQ(STORE[)p Fu(a)666 1989 y FE(2)688 1982 y FQ(])13
b Fp( )g FQ(STORE[)p Fu(a)972 1989 y FE(1)993 1982 y
FQ(])p Fw(;)20 b Fe(tr)n(ail)5 b Fw(\()p Fu(a)1181 1989
y FE(2)1200 1982 y Fw(\))439 2039 y Fd(end)314 2095 y(end)p
Fe(bind)g Fw(;)p 294 2175 1011 3 v 637 2254 a Fc(The)11
b FH(bind)f Fc(operation)71 2640 y FN(Copyright)260 2639
y(c)249 2640 y FM(\015)g FN(Hassan)i(A)463 2636 y(\250)464
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12 b FN(1)r(1)r(3)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 114 129
114 128 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 605
291 762 3 v 626 388 a Fd(pro)q(cedure)e Fe(tr)n(ail)5
b Fw(\()p Fu(a)12 b Fw(:)g Fe(addr)n(ess)t Fw(\);)667
445 y Fd(if)18 b Fw(\()p Fu(a)13 b(<)g FQ(HB)p Fw(\))23
b Fp(_)g Fw(\(\()p FQ(H)12 b Fu(<)h(a)p Fw(\))d Fp(^)g
Fw(\()p Fu(a)i(<)h FQ(B)q Fw(\)\))709 501 y Fd(then)750
558 y(b)q(egin)792 614 y FQ(TRAIL[TR)r(])g Fp( )g Fu(a)p
Fw(;)792 670 y FQ(TR)g Fp( )g FQ(TR)e Fw(+)f(1)750 727
y Fd(end)626 783 y(end)p Fe(tr)n(ail)t Fw(;)p 605 864
V 826 942 a Fc(The)g FH(tr)o(ail)g Fc(operation)p 502
1696 967 3 v 523 1794 a Fd(pro)q(cedure)j Fe(unwind)p
915 1794 14 2 v 21 w(tr)n(ail)t Fw(\()p Fu(a)1056 1801
y FE(1)1076 1794 y Fu(;)8 b(a)1121 1801 y FE(2)1152 1794
y Fw(:)k Fe(addr)n(ess)t Fw(\);)565 1850 y Fd(for)g Fu(i)g
Fp( )h Fu(a)751 1857 y FE(1)784 1850 y Fd(to)g Fu(a)867
1857 y FE(2)897 1850 y Fp(\000)d Fw(1)i Fd(do)606 1907
y FQ(STORE[TRAIL[)q Fu(i)p FQ(])r(])h Fp( )g(h)8 b Fv(REF)h
Fu(;)h FQ(TRAIL[)p Fu(i)p FQ(])f Fp(i)p Fw(;)523 1963
y Fd(end)p Fe(unwind)p 755 1963 V 21 w(tr)n(ail)c Fw(;)p
502 2044 967 3 v 757 2122 a Fc(The)11 b FH(unwind)p 963
2122 13 2 v 13 w(tr)o(ail)e Fc(operation)258 2640 y FN(P)o
FL(A)q(G)r(E)k FN(1)r(1)r(4)e FL(O)r(F)i FN(1)r(2)r(9)281
b(Reprinted)9 b(from)h(MIT)h(Press)56 b(Copyright)1532
2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 115 130
115 129 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 124 291 1351 3 v 144 388 a Fd(pro)q(cedure)f
Fe(tidy)p 467 388 14 2 v 21 w(tr)n(ail)t Fw(;)186 445
y Fu(i)f Fp( )h FQ(STACK[B)f Fw(+)f FQ(STACK[B)r(])f
Fw(+)g(5)p FQ(])p Fw(;)186 501 y Fd(while)j Fu(i)g(<)g
FQ(TR)g Fd(do)227 558 y(if)18 b Fw(\()p FQ(TRAIL[)p Fu(i)p
FQ(])c Fu(<)f FQ(HB)q Fw(\))22 b Fp(_)h Fw(\(\()p FQ(H)13
b Fu(<)g FQ(TRAIL[)p Fu(i)p FQ(])q Fw(\))d Fp(^)g Fw(\()p
FQ(TRAIL[)p Fu(i)p FQ(])k Fu(<)f FQ(B)p Fw(\)\))269 614
y Fd(then)g Fu(i)f Fp( )h Fu(i)d Fw(+)g(1)269 670 y Fd(else)310
727 y(b)q(egin)352 783 y FQ(TRAIL[)p Fu(i)p FQ(])k Fp( )f
FQ(TRAIL[TR)f Fp(\000)f Fw(1)p FQ(])p Fw(;)352 840 y
FQ(TR)i Fp( )g FQ(TR)e Fp(\000)f Fw(1)310 896 y Fd(end)144
953 y(end)p Fe(tidy)p 307 953 V 21 w(tr)n(ail)5 b Fw(;)p
124 1033 1351 3 v 600 1112 a Fc(The)11 b FH(tidy)p 745
1112 13 2 v 14 w(tr)o(ail)e Fc(operation)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)h FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(1)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 116 131
116 130 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257
291 1544 3 v 278 388 a Fd(pro)q(cedure)f Fe(unify)t Fw(\()p
Fu(a)666 395 y FE(1)685 388 y Fu(;)8 b(a)730 395 y FE(2)762
388 y Fw(:)k Fe(addr)n(ess)s Fw(\);)320 445 y Fe(push)t
Fw(\()p Fu(a)455 452 y FE(1)474 445 y Fu(;)c Fv(PDL)o
Fw(\);)19 b Fe(push)t Fw(\()p Fu(a)751 452 y FE(2)771
445 y Fu(;)8 b Fv(PDL)n Fw(\);)320 501 y Fe(fail)17 b
Fp( )c Fd(false)p Fw(;)320 558 y Fd(while)g Fp(:)p Fw(\()p
Fe(empty)5 b Fw(\()p Fv(PDL)o Fw(\))10 b Fp(_)g Fe(fail)t
Fw(\))j Fd(do)361 614 y(b)q(egin)403 670 y Fu(d)427 677
y FE(1)459 670 y Fp( )g Fe(der)n(ef)c Fw(\()p Fe(p)n(op)s
Fw(\()p Fv(PDL)o Fw(\)\);)20 b Fu(d)892 677 y FE(2)924
670 y Fp( )13 b Fe(der)n(ef)c Fw(\()p Fe(p)n(op)s Fw(\()p
Fv(PDL)o Fw(\)\);)403 727 y Fd(if)18 b Fu(d)475 734 y
FE(1)519 727 y Fp(6)p Fw(=)26 b Fu(d)604 734 y FE(2)636
727 y Fd(then)444 783 y(b)q(egin)486 840 y Fp(h)7 b Fu(t)527
847 y FE(1)557 840 y Fu(;)j(v)602 847 y FE(1)629 840
y Fp(i)j( )g FQ(STORE[)p Fu(d)904 847 y FE(1)925 840
y FQ(])p Fw(;)20 b Fp(h)7 b Fu(t)1026 847 y FE(2)1056
840 y Fu(;)j(v)1101 847 y FE(2)1128 840 y Fp(i)j( )g
FQ(STORE[)p Fu(d)1403 847 y FE(2)1424 840 y FQ(])p Fw(;)486
896 y Fd(if)18 b Fu(t)550 903 y FE(1)583 896 y Fw(=)12
b Fv(REF)h Fd(then)g Fe(bind)t Fw(\()p Fu(d)960 903 y
FE(1)979 896 y Fu(;)8 b(d)1024 903 y FE(2)1043 896 y
Fw(\))527 953 y Fd(else)569 1009 y(case)13 b Fu(t)691
1016 y FE(2)723 1009 y Fd(of)610 1066 y Fv(REF)25 b Fw(:)g
Fe(bind)t Fw(\()p Fu(d)875 1073 y FE(1)894 1066 y Fu(;)8
b(d)939 1073 y FE(2)958 1066 y Fw(\);)610 1122 y Fv(CON)25
b Fw(:)g Fe(fail)17 b Fp( )c Fw(\()p Fu(t)917 1129 y
FE(1)962 1122 y Fp(6)p Fw(=)26 b Fv(CON)o Fw(\))10 b
Fp(_)g Fw(\()p Fu(v)1202 1129 y FE(1)1247 1122 y Fp(6)p
Fw(=)26 b Fu(v)1330 1129 y FE(2)1350 1122 y Fw(\);)610
1179 y Fv(LIS)f Fw(:)g Fd(if)18 b Fu(t)809 1186 y FE(1)854
1179 y Fp(6)p Fw(=)26 b Fv(LIS)12 b Fd(then)h Fe(fail)k
Fp( )c Fd(true)818 1235 y(else)859 1291 y(b)q(egin)901
1348 y Fe(push)t Fw(\()p Fu(v)1034 1355 y FE(1)1053 1348
y Fu(;)8 b Fv(PDL)o Fw(\);)19 b Fe(push)t Fw(\()p Fu(v)1328
1355 y FE(2)1348 1348 y Fu(;)8 b Fv(PDL)o Fw(\);)901
1404 y Fe(push)t Fw(\()p Fu(v)1034 1411 y FE(1)1063 1404
y Fw(+)j(1)p Fu(;)d Fv(PDL)n Fw(\);)20 b Fe(push)t Fw(\()p
Fu(v)1407 1411 y FE(2)1436 1404 y Fw(+)11 b(1)p Fu(;)d
Fv(PDL)n Fw(\))859 1461 y Fd(end)p Fw(;)610 1517 y Fv(STR)25
b Fw(:)g Fd(if)18 b Fu(t)809 1524 y FE(1)854 1517 y Fp(6)p
Fw(=)26 b Fv(STR)12 b Fd(then)h Fe(fail)k Fp( )c Fd(true)818
1574 y(else)859 1630 y(b)q(egin)901 1687 y Fu(f)923 1694
y FE(1)943 1687 y Fu(=n)993 1694 y FE(1)1025 1687 y Fp( )g
FQ(STORE[)p Fu(v)1267 1694 y FE(1)1289 1687 y FQ(])p
Fw(;)8 b Fu(f)1359 1694 y FE(2)1378 1687 y Fu(=n)1428
1694 y FE(2)1460 1687 y Fp( )13 b FQ(STORE[)p Fu(v)1702
1694 y FE(2)1724 1687 y FQ(])p Fw(;)901 1743 y Fd(if)18
b Fw(\()p Fu(f)989 1750 y FE(1)1034 1743 y Fp(6)p Fw(=)25
b Fu(f)1116 1750 y FE(2)1136 1743 y Fw(\))10 b Fp(_)h
Fw(\()p Fu(n)1250 1750 y FE(1)1294 1743 y Fp(6)p Fw(=)26
b Fu(n)1382 1750 y FE(2)1402 1743 y Fw(\))12 b Fd(then)h
Fe(fail)k Fp( )c Fd(true)942 1800 y(else)984 1856 y(for)f
Fu(i)g Fp( )h Fw(1)g Fd(to)g Fu(n)1268 1863 y FE(1)1300
1856 y Fd(do)1025 1912 y(b)q(egin)1067 1969 y Fe(push)t
Fw(\()p Fu(v)1200 1976 y FE(1)1229 1969 y Fw(+)e Fu(i;)d
Fv(PDL)n Fw(\);)g Fe(push)s Fw(\()p Fu(v)1553 1976 y
FE(2)1583 1969 y Fw(+)i Fu(i;)e Fv(PDL)n Fw(\))1025 2025
y Fd(end)859 2082 y(end)569 2138 y(endcase)444 2195 y(end)361
2251 y(end)278 2308 y(end)p Fe(unify)t Fw(;)p 257 2388
V 735 2466 a Fc(The)j(complete)f FH(unify)f Fc(operation)258
2640 y FN(P)o FL(A)q(G)r(E)k FN(1)r(1)r(6)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 117 132
117 131 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 475 a FA(B.3)71 b(W)-9 b(AM)18 b(memory)e(lay)n(out)
i(and)f(r)o(egisters)940 692 y Ff(Argument)d(Registers:)940
785 y FQ(A)p Fw(1)p Fu(;)8 b FQ(A)p Fw(2)o Fu(;)g(:)g(:)g(:)d(;)j
FQ(A)p Fu(n;)g(:)g(:)g(:)89 692 y Ff(Registers:)137 764
y FQ(P)137 811 y(CP)137 1047 y(S)137 1142 y(HB)137 1236
y(H)137 1521 y(B0)137 1614 y(B)137 1756 y(E)137 2087
y(TR)419 621 y FR(\(lo)o(w\))331 724 y FV(Code)15 b(Ar)o(ea)399
1001 y(Heap)396 1480 y(Stack)356 1636 y FR(choice)c(point)353
1782 y(en)n(vironment)405 1952 y FV(T)l(rail)408 2330
y(PDL)412 2415 y FR(\(high\))959 2063 y FQ(Y)p Fu(n)h
Fy(n)p FL(th)c(local)g(v)o(ariable)1123 1963 y FR(.)1123
1980 y(.)1123 1996 y(.)959 1923 y FQ(Y)p Fw(1)16 b FE(1)p
FL(st)8 b(local)g(v)o(ariable)959 1874 y FQ(CP)k FL(cont.)c(code)959
1827 y FQ(CE)k FL(cont.)c(en)o(vironment)940 1736 y Ff(En)o(vironment)
14 b(frame:)959 1588 y FQ(B0)e FL(cut)c(pointer)959 1540
y FQ(H)39 b FL(heap)7 b(pointer)959 1493 y FQ(TR)12 b
FL(trail)d(pointer)959 1449 y FQ(BP)j FL(next)7 b(clause)959
1398 y FQ(B)39 b FL(pre)o(vious)7 b(choice)g(pt.)959
1355 y FQ(CP)12 b FL(cont.)c(code)959 1307 y FQ(CE)k
FL(cont.)c(en)o(vironment)959 1256 y FQ(A)p Fu(n)k Fy(n)p
FL(th)c(ar)o(gument)1123 1160 y FR(.)1123 1177 y(.)1123
1193 y(.)959 1116 y FQ(A)p Fw(1)16 b FE(1)p FL(st)8 b(ar)o(gument)959
1066 y Fu(n)39 b FL(arity)940 976 y Ff(Choice)13 b(point)g(frame:)p
278 2357 2 1701 v 656 2357 V 278 1744 378 2 v 278 1650
V 278 1602 V 939 2074 2 284 v 1317 2074 V 940 2075 378
2 v 940 2027 V 940 1933 V 940 1886 V 940 1838 V 940 1791
V 939 1601 2 567 v 1317 1601 V 940 1602 378 2 v 940 1555
V 940 1508 V 940 1461 V 940 1413 V 940 1366 V 940 1319
V 940 1272 V 940 1224 V 940 1130 V 940 1083 V 940 1035
V 656 1832 a Fb(@)698 1873 y(@)739 1915 y(@)781 1956
y(@)822 1998 y(@)864 2039 y(@)898 2074 y(@)656 1750 y(h)698
1757 y(h)739 1764 y(h)781 1771 y(h)822 1778 y(h)864 1785
y(h)898 1790 y(h)656 1649 y(\()698 1642 y(\()739 1635
y(\()781 1628 y(\()822 1621 y(\()864 1614 y(\()898 1608
y(\()656 1601 y(\001)677 1560 y(\001)698 1518 y(\001)719
1477 y(\001)739 1435 y(\001)760 1394 y(\001)781 1352
y(\001)802 1311 y(\001)822 1269 y(\001)843 1228 y(\001)864
1186 y(\001)885 1145 y(\001)905 1103 y(\001)919 1076
y(\001)p 184 2075 95 2 v 237 2074 a(-)p 184 1744 V 237
1743 a(-)p 184 1602 V 237 1601 a(-)p 184 1508 V 237 1507
a(-)p 184 1224 V 237 1223 a(-)p 184 1130 V 237 1129 a(-)p
184 1035 V 237 1034 a(-)p 184 799 V 237 798 a(-)p 184
752 V 237 751 a(-)p 274 2357 9 142 v 652 2357 V 278 2361
378 9 v 278 2220 V 274 2074 9 189 v 652 2074 V 278 2078
378 9 v 278 1889 V 274 1790 9 378 v 652 1790 V 278 1795
378 9 v 278 1417 V 274 1223 9 284 v 652 1223 V 278 1228
378 9 v 278 944 V 274 846 9 189 v 652 846 V 278 850 378
9 v 278 661 V 436 2181 a Fa(*)436 2146 y(+)436 1862 y(+)436
1295 y(+)436 917 y(+)p 1318 1620 19 567 v 959 1620 378
19 v 1318 2093 19 284 v 959 2093 378 19 v 71 2640 a FN(Copyright)260
2639 y(c)249 2640 y FM(\015)d FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(1)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 118 133
118 132 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 258
2640 a FN(P)o FL(A)q(G)r(E)f FN(1)r(1)r(8)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 119 134
119 133 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 637 a FG(Bibliograph)n(y)71 880 y
FP([AHU74])48 b(Alfred)16 b(Aho,)k(John)d(Hopcroft,)i(and)e(Jef)o(fre)o
(y)g(Ullmann.)35 b FB(The)17 b(Design)h(and)311 940 y(Analysis)g(of)g
(Computer)g(Algorithms)p FP(.)37 b(Addison-W)l(esle)o(y)m(,)19
b(Reading,)h(MA,)311 1001 y(1974.)71 1105 y([AK90])84
b(Hassan)14 b(A)o(\250)-16 b(\021t-Kaci.)22 b(The)14
b(W)-6 b(AM:)14 b(a)g(\(real\))e(tutorial.)22 b(PRL)14
b(Research)g(Report)311 1166 y(Number)j(5,)j(Digital)d(Equipment)h
(Corporation,)g(P)o(aris)g(Research)h(Labora-)311 1226
y(tory)m(,)12 b(Rueil-Malmaison,)g(France,)h(1990.)71
1330 y([Boi88])84 b(P)o(atrice)13 b(Boizumault.)21 b
FB(Pr)n(olog:)c(l'implantation)p FP(.)j(Etudes)14 b(et)g(recherches)f
(en)311 1391 y(informatique.)e(Masson,)j(P)o(aris,)f(France,)f(1988.)71
1495 y([BP84])95 b(Maurice)19 b(Bruynooghe)g(and)h(Luis)g(M.)h
(Pereira.)40 b(Deduction)20 b(re)o(vision)f(by)311 1555
y(intelligent)d(backtracking.)33 b(In)16 b(John)i(A.)f(Campbell,)i
(editor)n(,)f FB(Implementa-)311 1616 y(tions)11 b(of)g(Pr)n(olog)p
FP(,)g(pages)h(194\226215.)f(Ellis)g(Horwood,)g(Ltd.,)h(Chichester)n(,)
g(UK,)311 1676 y(1984.)71 1780 y([CCF88])62 b(Christian)17
b(Codognet,)i(Philippe)d(Codognet,)j(and)f(Gilberto)e(Fil)s(\036)-20
b(e.)34 b(Y)-5 b(et)18 b(an-)311 1841 y(other)13 b(intelligent)g
(backtracking)g(method.)23 b(In)13 b(Robert)h(K)n(o)o(walski)f(and)h(K)
o(en-)311 1901 y(neth)j(Bo)o(wen,)h(editors,)g FB(Logic)e(Pr)n(ogr)o
(amming:)24 b(Pr)n(oceedings)18 b(of)f(the)g(F)n(ifth)311
1961 y(International)25 b(Confer)n(ence)i(and)e(Symposium)p
FP(,)30 b(pages)d(447\226465,)i(Cam-)311 2021 y(bridge,)12
b(MA,)h(1988.)g(MIT)f(Press.)71 2126 y([Chu90])73 b(Damian)10
b(Chu.)15 b(Pri)o(v)o(ate)10 b(communicatiion.)j(Electronic)e(Mail,)h
(August)e(1990.)71 2231 y([CM84])79 b(W)n(illiam)19 b(F)l(.)g(Clocksin)
h(and)f(Christopher)g(S.)h(Mellish.)41 b FB(Pr)n(ogr)o(amming)20
b(in)311 2291 y(Pr)n(olog)p FP(.)e(Springer)o(-V)-6 b(erlag,)11
b(Berlin,)h(German)o(y)m(,)h(2nd)f(edition,)g(1984.)71
2395 y([Cox84])73 b(Peter)10 b(T)l(.)h(Cox.)j(Finding)c(backtrack)g
(points)g(for)f(intelligent)h(backtracking.)j(In)311
2456 y(John)d(A.)h(Campbell,)g(editor)n(,)f FB(Implementations)g(of)g
(Pr)n(olog)p FP(,)h(pages)g(216\226133.)311 2516 y(Ellis)i(Horwood,)e
(Ltd.,)j(Chichester)n(,)f(UK,)f(1984.)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)e FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(1)r(9)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 120 135
120 134 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 257
289 a FP([Deb86])74 b(Saumya)12 b(K.)i(Debray)m(.)20
b(Re)o(gister)14 b(allocation)e(in)h(a)h(Prolog)e(machine.)20
b(In)13 b FB(Pr)n(o-)498 349 y(ceedings)j(of)f(the)h(Symposium)f(on)h
(Logic)e(Pr)n(ogr)o(amming)p FP(,)j(pages)f(267\226275.)498
409 y(IEEE)d(Computer)f(Society)m(,)g(September)f(1986.)257
509 y([Deb89])74 b(Saumya)12 b(K.)h(Debray)m(.)18 b(Static)13
b(inference)f(of)g(modes)h(and)f(data)h(dependencies)498
570 y(in)j(logic)h(programs.)33 b FB(A)o(CM)18 b(T)m(r)o(ansactions)g
(on)e(Pr)n(ogr)o(amming)i(Languages)498 630 y(and)12
b(Systems)p FP(,)h(11\(3\):418\226450,)e(July)i(1989.)257
730 y([D)o(W86a])53 b(Saumya)12 b(K.)i(Debray)f(and)g(Da)o(vid)g(S.)g
(W)l(arren.)21 b(Automatic)12 b(mode)h(inference)498
790 y(for)d(Prolog)h(programs.)k(In)c FB(Pr)n(oceedings)i(of)e(the)h
(Symposium)f(on)h(Logic)e(Pr)n(o-)498 851 y(gr)o(amming)p
FP(,)i(pages)h(78\22688.)g(IEEE)g(Computer)f(Society)m(,)g(September)f
(1986.)257 951 y([D)o(W86b])50 b(Saumya)17 b(K.)h(Debray)f(and)h(Da)o
(vid)f(S.)h(W)l(arren.)34 b(Detection)18 b(and)f(optimiza-)498
1011 y(tion)j(of)g(functional)g(computations)g(in)h(Prolog.)44
b(In)20 b(Ehud)h(Shapiro,)i(edi-)498 1071 y(tor)n(,)12
b FB(Pr)n(oceedings)i(of)e(the)h(Thir)n(d)g(International)e(Confer)n
(ence)j(on)e(Logic)g(Pr)n(o-)498 1131 y(gr)o(amming)p
FP(,)f(Berlin,)h(German)o(y)m(,)f(1986.)g(Springer)o(-V)-6
b(erlag.)14 b(Lecture)d(Notes)h(in)498 1192 y(Computer)f(Science)i
(225.)257 1292 y([D)o(W89])75 b(Saumya)11 b(K.)h(Debray)g(and)g(Da)o
(vid)f(S.)i(W)l(arren.)j(Functional)11 b(computations)h(in)498
1352 y(logic)g(programs.)21 b FB(A)o(CM)13 b(T)m(r)o(ansactions)h(on)f
(Pr)n(ogr)o(amming)h(Languages)e(and)498 1412 y(Systems)p
FP(,)h(11\(3\):451\226481,)e(July)i(1989.)257 1513 y([GLLO85])25
b(John)17 b(Gabriel,)i(T)n(im)f(Lindholm,)h(Ewing)f(Lusk,)i(and)e(Ross)
g(Ov)o(erbeek.)35 b(A)498 1573 y(tutorial)17 b(on)g(the)h(W)l(arren)g
(abstract)g(machine.)36 b(Pri)o(v)o(ately)16 b(circulated)i(draft,)498
1633 y(Ar)o(gonne)h(National)g(Laboratory)m(,)i(Mathematics)f(and)f
(Computer)g(Science)498 1693 y(Di)o(vision,)12 b(Ar)o(gonne,)g(IL)h
(60439.,)f(1985.)257 1794 y([Han90])74 b(Michael)15 b(Hanus.)26
b(Pri)o(v)o(ate)14 b(communication.)25 b(T)m(echnical)15
b(correspondence,)498 1854 y(December)d(1990.)257 1954
y([Her71])82 b(Jacques)12 b(Herbrand.)j FB(Logical)10
b(Writings)p FP(.)17 b(Harv)o(ard)11 b(Uni)o(v)o(ersity)f(Press,)j
(Cam-)498 2014 y(bridge,)f(MA,)h(1971.)18 b(Edited)12
b(by)h(W)l(arren)e(D.)i(Goldfarb)n(.)257 2115 y([JDM88])58
b(Gerda)10 b(Janssens,)k(Bart)c(Demoen,)i(and)f(Andre)f(Mari)s(\250)-20
b(en.)15 b(Impro)o(ving)10 b(the)h(re)o(g-)498 2175 y(ister)i
(allocation)g(in)g(W)-6 b(AM)14 b(by)g(reordering)e(uni\002cation.)21
b(In)13 b(Robert)g(K)n(o)o(wal-)498 2235 y(ski)d(and)h(K)o(enneth)f(Bo)
o(wen,)h(editors,)g FB(Logic)f(Pr)n(ogr)o(amming:)k(Pr)n(oceedings)e
(of)498 2295 y(the)d(F)n(ifth)g(International)g(Confer)n(ence)i(and)e
(Symposium)p FP(,)i(pages)f(1388\2261402,)498 2355 y(Cambridge,)i(MA,)h
(1988.)g(MIT)f(Press.)257 2456 y([K)n(o)o(w79])63 b(Robert)9
b(A.)h(K)n(o)o(walski.)i FB(Logic)d(for)h(Pr)n(oblem)g(Solving)p
FP(,)g(v)o(olume)f(7)h(of)f FB(Arti\002cial)498 2516
y(Intelligence)i(Series)p FP(.)19 b(North)11 b(Holland,)i(Ne)o(w)f(Y)-5
b(ork,)12 b(NY)-6 b(,)12 b(1979.)258 2640 y FN(P)o FL(A)q(G)r(E)h
FN(1)r(2)r(0)e FL(O)r(F)i FN(1)r(2)r(9)281 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 121 136
121 135 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FP([K)o(ur87])79 b(Peter)16
b(K)o(ursa)o(we.)33 b(Ho)o(w)16 b(to)h(in)n(v)o(ent)g(a)g(Prolog)e
(machine.)33 b FB(Ne)o(w)17 b(Gener)o(ation)311 349 y(Computing)p
FP(,)12 b(5:97\226114,)g(1987.)71 453 y([Mel85])76 b(Christopher)11
b(S.)h(Mellish.)18 b(Some)12 b(global)f(optimizations)h(for)f(a)h
(Prolog)f(com-)311 513 y(piler)m(.)18 b FB(J)o(ournal)12
b(of)g(Logic)g(Pr)n(ogr)o(amming)p FP(,)g(1:143\226166,)g(1985.)71
617 y([MM82])68 b(Alberto)16 b(Martelli)g(and)h(Ugo)g(Montanari.)32
b(An)16 b(ef)o(\002cient)g(uni\002cation)g(algo-)311
677 y(rithm.)23 b FB(A)o(CM)15 b(T)m(r)o(ansactions)g(on)f(Pr)n(ogr)o
(amming)g(Languages)f(and)h(Systems)p FP(,)311 737 y
(4\(2\):258\226282,)d(April)g(1982.)71 841 y([MW88])65
b(Da)o(vid)18 b(Maier)h(and)g(Da)o(vid)g(S.)g(W)l(arren.)38
b FB(Computing)18 b(with)h(Logic:)27 b(Logic)311 902
y(Pr)n(ogr)o(amming)16 b(with)h(Pr)n(olog)p FP(.)31 b
(Benjamin/Cummings,)17 b(Menlo)f(P)o(ark,)i(CA,)311 962
y(1988.)71 1066 y([Per90])89 b(Fernando)16 b(Pereira.)31
b(Personal)17 b(communication.)31 b(Electronic)16 b(mail,)i(April)311
1126 y(1990.)71 1230 y([PP82])100 b(Luis)24 b(M.)g(Pereira)e(and)h
(Antonio)g(Porto.)52 b(Selecti)o(v)o(e)23 b(backtracking.)52
b(In)311 1290 y(K)o(eith)13 b(L.)i(Clark)e(and)h(Sten-)816
1282 y(\011)807 1290 y(Ake)f(T)s(\250)-20 b(arnlund,)14
b(editors,)g FB(Logic)f(Pr)n(ogr)o(amming)p FP(,)311
1350 y(pages)g(107\226114.)f(Academic)g(Press,)h(Ne)o(w)g(Y)-5
b(ork,)11 b(NY)-6 b(,)13 b(1982.)71 1454 y([Rob65])73
b(John)13 b(A.)h(Robinson.)20 b(A)13 b(machine-oriented)f(logic)h
(based)g(on)g(the)g(resolution)311 1514 y(principle.)k
FB(J)o(ournal)12 b(of)h(the)f(A)o(CM)p FP(,)h(12:23\22641,)g(January)f
(1965.)71 1618 y([Ros91])79 b(Dean)13 b(Rosenzweig.)19
b(Personal)12 b(communication.)18 b(Electronic)13 b(mail,)f(March)311
1679 y(1991.)71 1783 y([Rus89])79 b(Da)o(vid)15 b(M.)i(Russinof)o(f.)29
b(A)15 b(v)o(eri\002ed)h(Prolog)e(compiler)h(for)g(the)h(W)l(arren)f
(ab-)311 1843 y(stract)10 b(machine.)15 b(MCC)c(T)m(echnical)g(Report)f
(Number)g(A)n(CT)-5 b(-ST)g(-292-89,)12 b(Mi-)311 1903
y(croelectronics)18 b(and)h(Computer)f(T)m(echnology)g(Corporation,)i
(Austin,)h(TX,)311 1963 y(July)12 b(1989.)71 2067 y([vH90])95
b(P)o(ascal)21 b(v)o(an)f(Hentenryck.)44 b(Pri)o(v)o(ate)19
b(communication.)43 b(Electronic)20 b(mail,)311 2127
y(September)11 b(1990.)71 2231 y([vR90])98 b(Peter)11
b(L.)h(v)o(an)g(Roy)m(.)k FB(Can)c(Logic)e(Pr)n(ogr)o(amming)i(Execute)
g(as)g(F)l(ast)h(as)f(Imper)o(-)311 2291 y(ative)e(Pr)n(ogr)o(amming?)
18 b FP(PhD)10 b(thesis,)h(Uni)o(v)o(ersity)f(of)g(California)f(at)i
(Berkele)o(y)m(,)311 2352 y(Berkele)o(y)m(,)h(CA,)h(December)f(1990.)71
2456 y([vRD90])62 b(Peter)12 b(L.)i(v)o(an)f(Roy)f(and)h(Alvin)g
(Despain.)21 b(The)13 b(bene\002ts)g(of)g(global)f(data\003o)o(w)311
2516 y(analysis)k(for)f(an)h(optimizing)f(Prolog)g(compiler)m(.)29
b(In)16 b(Saumya)f(Debray)h(and)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)10 b FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(2)r(1)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 122 137
122 136 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 498
289 a FP(Manuel)g(Hermene)o(gildo,)g(editors,)h FB(Logic)e(Pr)n(ogr)o
(amming:)19 b(Pr)n(oceedings)c(of)498 349 y(the)j(1990)g(North)h
(American)h(Confer)n(ence)p FP(,)h(pages)e(491\226515,)h(Cambridge,)498
409 y(MA,)13 b(1990.)f(MIT)h(Press.)257 511 y([W)l(ar83])75
b(Da)o(vid)16 b(H.)h(D.)g(W)l(arren.)32 b(An)17 b(abstract)f(Prolog)g
(instruction)g(set.)32 b(T)m(echnical)498 571 y(Note)12
b(309,)g(SRI)g(International,)g(Menlo)g(P)o(ark,)h(CA,)g(October)f
(1983.)257 673 y([W)l(ar88])75 b(Da)o(vid)15 b(H.)g(D.)h(W)l(arren.)27
b(Implementation)14 b(of)g(Prolog.)27 b(Lecture)15 b(notes,)i(T)n(u-)
498 733 y(torial)d(No.)i(3,)g(5th)f(International)f(Conference)h(and)g
(Symposium)g(on)g(Logic)498 793 y(Programming,)10 b(Seattle,)j(W)-6
b(A,)13 b(August)f(1988.)257 895 y([W)l(ar89])75 b(Da)o(vid)13
b(H.)h(D.)f(W)l(arren.)21 b(Pri)o(v)o(ate)12 b(communication.)21
b(Electronic)13 b(mail,)h(Octo-)498 955 y(ber)e(1989.)257
1057 y([W)l(ar90])75 b(Da)o(vid)24 b(H.)h(D.)g(W)l(arren.)57
b(Pri)o(v)o(ate)23 b(communication.)56 b(Electronic)24
b(mail,)498 1117 y(September)11 b(1990.)257 1219 y([Zho90])77
b(Neng-F)o(a)9 b(Zhou.)14 b FB(Bac)o(ktr)o(ac)o(king)d(Optimizations)e
(in)h(Compiled)g(Pr)n(olog)p FP(.)j(PhD)498 1279 y(thesis,)g(K)o(yushu)
f(Uni)o(v)o(ersity)m(,)g(Fukuoka,)g(Japan,)i(No)o(v)o(ember)e(1990.)257
1381 y([ZTU90])61 b(Neng-F)o(a)18 b(Zhou,)k(T)l(.)f(T)l(akagi,)h(and)d
(K.)h(Ushijima.)40 b(A)20 b(matching)e(tree)h(ori-)498
1441 y(ented)14 b(abstract)g(machine)g(for)g(prolog.)23
b(In)14 b(Da)o(vid)g(H.)h(D.)g(W)l(arren)f(and)g(Peter)498
1501 y(Szeredi,)e(editors,)h FB(Logic)f(Pr)n(ogr)o(amming:)j(Pr)n
(oceedings)e(of)g(the)f(Se)o(venth)h(In-)498 1561 y(ternational)e
(Confer)n(ence)p FP(,)j(pages)f(159\226173,)f(Cambridge,)g(MA,)h(1990.)
g(MIT)498 1621 y(Press.)258 2640 y FN(P)o FL(A)q(G)r(E)g
FN(1)r(2)r(2)e FL(O)r(F)i FN(1)r(2)r(9)281 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 123 138
123 137 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 516 a FG(Index)71 733 y FS(A)e FP(re)o(gister)n(,)g
(22)71 795 y FS(allocate)p FP(,)g(28)154 856 y(e)o(xample,)17
b(31,)g(43,)f(55,)h(57,)g(61,)g(64,)237 916 y(72\22674)154
978 y(e)o(xplicit)12 b(de\002nition)195 1039 y(for)g
FK(M)326 1046 y FE(2)345 1039 y FP(,)h(30)195 1101 y(for)f
FK(M)326 1108 y FE(3)345 1101 y FP(,)h(38)195 1162 y(for)g
FO(W)m(A)r(M)q FP(,)h(60,)f(106)71 1224 y(AND-stack,)f(33)71
1285 y(ar)o(gument)f(re)o(gisters,)i(19,)g(22)71 1347
y(arity)m(,)f(9)71 1470 y FS(B)g FP(re)o(gister)n(,)g(34)71
1532 y FB(bac)o(ktr)o(ac)o(k)i FP(operation,)e(39)71
1593 y FB(bac)o(ktr)o(ac)o(k)i FP(operation,)e(112)71
1655 y(backtracking,)g(6,)h(19,)f(25,)h(36)154 1716 y(chronological,)e
(33)71 1778 y FB(bind)i FP(operation,)f(113)71 1839 y(binding,)g(10,)g
(16,)h(17)154 1900 y(conditional,)f(37,)g(63)154 1962
y(con)n(v)o(ention,)g(62)154 2023 y(rule,)g(63,)h(64,)f(68,)h(69)154
2085 y(side-ef)o(fect,)e(25,)i(36)154 2146 y(trailing,)e(37)154
2208 y(unconditional,)g(63)71 2269 y FS(B0)h FP(re)o(gister)n(,)g(83)71
2331 y(Boizumault,)g(P)o(atrice,)g(4)71 2454 y FS(call)p
FP(,)g(21,)h(59)154 2516 y(e)o(xample)1077 733 y(with)c(en)n(vironment)
g(trimming,)f(61,)1119 794 y(64,)k(68,)h(72\22674,)g(85)1077
855 y(without)c(en)n(vironment)f(trimming,)1119 915 y(24,)k(31,)h(43,)g
(51,)g(55,)f(57)1036 977 y(e)o(xplicit)g(de\002nition)1077
1038 y(for)g FK(M)1208 1045 y FE(1)1227 1038 y FP(,)h(21)1077
1100 y(for)f FK(M)1208 1107 y FE(2)1227 1100 y FP(,)h(26)1077
1161 y(for)f FK(M)1208 1168 y FE(3)1227 1161 y FP(,)h(40)1077
1223 y(for)g FO(W)m(A)r(M)q FP(,)h(106)953 1284 y(chain)1036
1346 y(reference,)e(16,)h(63,)f(65)1036 1407 y(rule,)g(25,)h(57,)g(86)
953 1469 y(choice)f(point,)g(33)1036 1530 y(contents,)h(36)1036
1592 y(discarding,)f(34,)g(36,)g(37,)h(39,)f(83\22685)953
1653 y(Chu,)h(Damian,)f(71)953 1715 y(code)g(area,)h(21,)g(26,)f(28,)h
(36,)g(39)953 1776 y(constant,)g(9)1036 1838 y(cell,)g(48)953
1899 y FS(CP)f FP(re)o(gister)n(,)g(26)953 1961 y(cut,)g(83)1036
2022 y(deep,)h(83,)f(85)1036 2084 y(neck,)h(84)1036 2145
y(semantics,)g(83)1036 2207 y(shallo)o(w)m(,)f(83,)h(84)953
2268 y FS(cut)p FP(,)f(85)1036 2330 y(e)o(xplicit)g(de\002nition,)g
(112)953 2391 y(cut)g(re)o(gister)n(,)h(83)953 2516 y
FS(deallocate)p FP(,)e(29)71 2640 y FN(Copyright)260
2639 y(c)249 2640 y FM(\015)f FN(Hassan)i(A)463 2636
y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(2)r(3)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 124 139
124 138 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 340
289 a FP(e)o(xample,)j(31,)g(43,)g(55,)g(57,)g(61,)g(64,)423
349 y(72\22674)340 409 y(e)o(xplicit)c(de\002nition)382
469 y(for)e FK(M)512 476 y FE(2)532 469 y FP(,)i(30)382
530 y(for)f FO(W)m(A)r(M)q FP(,)j(56,)d(106)257 590 y(deep)340
650 y(cut,)h(83,)g(85)340 710 y(rule,)g(25,)f(86)257
770 y(delayed)h(trimming,)e(73)257 830 y FB(der)n(ef)21
b FP(operation,)12 b(113)257 891 y(dereferencing,)g(16)257
991 y FS(E)h FP(re)o(gister)n(,)f(28)257 1051 y(en)n(vironment,)g(27)
340 1111 y(allocation,)h(29)340 1172 y(discarding,)g(56)340
1232 y(frame,)f(28)340 1292 y(protection,)g(34,)h(35,)g(57,)f(79)340
1352 y(trimming,)i(58\22662,)g(64,)h(68,)f(70\22674,)423
1412 y(85)382 1473 y(magni\002cation)d(of,)i(79)257 1533
y FS(execute)p FP(,)f(56)340 1593 y(e)o(xample,)k(57,)f(61,)g(64,)h
(72\22674,)e(80\226)423 1653 y(82)340 1713 y(e)o(xplicit)f
(de\002nition,)e(56)382 1773 y(for)h FO(W)m(A)r(M)q FP(,)j(107)257
1874 y(fact,)d(21)340 1934 y(compilation,)g(22,)h(26)257
1994 y(failure,)f(16,)h(19,)f(25,)h(33\22635)257 2054
y(\003attened)f(form,)g(12)340 2115 y(of)g(program,)g(15)340
2175 y(of)g(query)m(,)g(12)340 2235 y(tokenized,)g(12,)h(15)257
2295 y(functor)n(,)f(9)257 2395 y FS(get)p 350 2395 15
2 v 18 w(constant)p FP(,)g(48)340 2456 y(e)o(xample,)h(80\22682)340
2516 y(e)o(xplicit)g(de\002nition,)e(49)1264 289 y(for)i
FO(W)m(A)r(M)q FP(,)h(102)1139 349 y FS(get)p 1232 349
V 18 w(level)p FP(,)e(85)1222 409 y(e)o(xplicit)h(de\002nition)1264
470 y(for)g FO(W)m(A)r(M)q FP(,)h(111)1139 530 y FS(get)p
1232 530 V 18 w(list)p FP(,)f(50)1222 590 y(e)o(xample,)g(51,)g(82)1222
651 y(e)o(xplicit)g(de\002nition,)f(50)1264 711 y(for)h
FO(W)m(A)r(M)q FP(,)h(102)1139 771 y FS(get)p 1232 771
V 18 w(nil)p FP(,)f(50)1139 832 y FS(get)p 1232 832 V
18 w(structure)p FP(,)f(15)1222 892 y(e)o(xample,)18
b(16,)e(24,)h(43,)g(51,)g(53,)g(80,)1306 952 y(81)1222
1013 y(e)o(xplicit)c(de\002nition,)f(18)1264 1073 y(for)h
FO(W)m(A)r(M)q FP(,)h(101)1139 1133 y FS(get)p 1232 1133
V 18 w(value)p FP(,)e(23)1222 1194 y(e)o(xample,)h(24,)g(51)1222
1254 y(e)o(xplicit)g(de\002nition,)f(23)1264 1314 y(for)h
FO(W)m(A)r(M)q FP(,)h(101)1139 1375 y FS(get)p 1232 1375
V 18 w(variable)p FP(,)e(23)1222 1435 y(e)o(xample,)18
b(31,)e(43,)h(53,)g(55,)g(57,)g(61,)1306 1495 y(64)1222
1556 y(e)o(xplicit)c(de\002nition,)f(23)1264 1616 y(for)h
FO(W)m(A)r(M)q FP(,)h(100)1139 1720 y FS(H)f FP(re)o(gister)n(,)f(13)
1139 1781 y(Hanus,)i(Michael,)f(67)1139 1841 y FS(HB)g
FP(re)o(gister)n(,)f(37)1139 1901 y(heap,)h(10)1222 1962
y(pointer)n(,)g(38)1139 2066 y FK(I)1166 2073 y FE(0)1186
2066 y FP(,)g(9,)g(48,)g(50)1139 2126 y FK(I)1166 2133
y FE(1)1186 2126 y FP(,)g(28)1139 2187 y FK(I)1166 2194
y FE(2)1186 2187 y FP(,)g(28,)g(38)1139 2247 y FK(I)1166
2254 y FE(3)1186 2247 y FP(,)g(38)1139 2351 y(K)n(o)o(walski,)g(Robert)
f(A.,)h(95)1139 2455 y FK(L)1173 2462 y FE(0)1194 2455
y FP(,)f(9,)h(21)1222 2516 y(abstract)g(machine,)g(9)258
2640 y FN(P)o FL(A)q(G)r(E)g FN(1)r(2)r(4)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 125 140
125 139 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 154 289 a FP(interpreter)n(,)d(9)154
349 y(program,)g(9)195 410 y(compiling,)h(13,)h(16)154
470 y(query)m(,)f(9)195 531 y(compiling,)g(11,)h(14)154
591 y(semantics,)g(9,)g(11)154 652 y(syntax,)g(9)154
713 y(term)e(representation,)h(10)71 773 y FK(L)105 780
y FE(1)125 773 y FP(,)h(21,)f(24,)h(25)71 834 y FK(L)105
841 y FE(2)125 834 y FP(,)g(25)154 894 y(program,)e(25)154
955 y(query)m(,)h(25)154 1015 y(semantics,)h(25)71 1076
y FK(L)105 1083 y FE(3)125 1076 y FP(,)g(33)154 1136
y(program,)e(33)154 1197 y(query)m(,)h(33)154 1257 y(semantics,)h(33)71
1318 y(last)f(call)h(optimization,)e(56)71 1379 y(LCO,)i(56,)g(57,)g
(62,)f(70,)h(71)154 1439 y(correctness,)g(58)154 1500
y(ef)o(fect,)f(56,)g(57,)h(82)154 1560 y(generalization,)f(58)154
1621 y(interference,)f(62)154 1681 y(magni\002cation,)g(79)154
1742 y(patch,)h(75)71 1802 y(list,)g(50)71 1910 y FK(M)131
1917 y FE(0)150 1910 y FP(,)h(9,)g(11,)g(19,)f(75)154
1971 y(instructions,)g(13,)h(16)195 2031 y(for)f(programs,)g(18)195
2092 y(for)g(queries,)g(14)71 2153 y FK(M)131 2160 y
FE(1)150 2153 y FP(,)h(21)154 2213 y(augmentation,)f(28)154
2274 y(instructions)195 2334 y(for)g(v)o(ariable)f(ar)o(guments,)i(23)
71 2395 y FK(M)131 2402 y FE(2)150 2395 y FP(,)g(28,)g(40,)f(42)154
2455 y(e)o(xtension,)h(33)71 2516 y FK(M)131 2523 y FE(3)150
2516 y FP(,)g(33,)g(42)1036 289 y(impro)o(v)o(ement,)f(45)1036
349 y(instructions)1077 409 y(for)g(choice)g(point,)h(41,)f(42)953
469 y(Maier)n(,)h(Da)o(vid,)f(4)953 530 y(mode,)g(15,)h(16)1036
590 y(x)f FS(read)p FP(,)h(15)1036 650 y(x)f FS(write)o
FP(,)h(15)1036 710 y(setting,)f(17)953 810 y FS(neck)p
1076 810 15 2 v 17 w(cut)p FP(,)h(84)1036 871 y(e)o(xplicit)f
(de\002nition)1077 931 y(for)h FO(W)m(A)r(M)q FP(,)h(111)953
1031 y(OR-stack,)f(33)953 1131 y FS(P)f FP(re)o(gister)n(,)h(21)953
1192 y(partial)e(e)o(v)o(aluation,)h(89)953 1252 y FS(PDL)p
FP(,)g(19,)h(36)953 1312 y(Pereira,)f(Fernando,)g(46)953
1372 y(permanent)f(v)o(ariable,)h(27,)h(28)953 1432 y
FS(proceed)p FP(,)f(21)1036 1493 y(e)o(xample,)h(24,)f(43,)h(51,)g(53,)
g(81,)f(82)1036 1553 y(e)o(xplicit)g(de\002nition,)g(26)1077
1613 y(for)h FO(W)m(A)r(M)q FP(,)h(107)953 1673 y(push-do)o(wn)d(list,)
i(19)953 1733 y FS(put)p 1046 1733 V 17 w(constant)p
FP(,)f(48)1036 1794 y(e)o(xample,)h(81)1036 1854 y(e)o(xplicit)f
(de\002nition,)g(49)1077 1914 y(for)h FO(W)m(A)r(M)q
FP(,)h(100)953 1974 y FS(put)p 1046 1974 V 17 w(list)p
FP(,)f(50)1036 2034 y(e)o(xample,)g(51)1036 2094 y(e)o(xplicit)f
(de\002nition,)g(50)1077 2155 y(for)h FO(W)m(A)r(M)q
FP(,)h(100)953 2215 y FS(put)p 1046 2215 V 17 w(nil)p
FP(,)f(50)953 2275 y FS(put)p 1046 2275 V 17 w(structure)p
FP(,)f(13)1036 2335 y(e)o(xample,)h(14,)f(24,)h(43,)g(51)1036
2395 y(e)o(xplicit)f(de\002nition,)g(14,)g(46)1077 2456
y(for)h FO(W)m(A)r(M)q FP(,)h(100)953 2516 y FS(put)p
1046 2516 V 17 w(unsafe)p 1243 2516 V 18 w(value)p FP(,)e(65)71
2640 y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)e
FN(Hassan)i(A)463 2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r
FL(A)q(C)r(I)56 b FN(Reprinted)9 b(from)i(MIT)f(Press)282
b(P)o FL(A)q(G)r(E)12 b FN(1)r(2)r(5)g FL(O)r(F)h FN(1)r(2)r(9)p
eop
%%Page: 126 141
126 140 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 340
289 a FP(e)o(xample,)f(72\22674)340 350 y(e)o(xplicit)g(de\002nition,)e
(66)382 410 y(for)h FO(W)m(A)r(M)q FP(,)j(100)257 471
y FS(put)p 350 471 15 2 v 18 w(value)p FP(,)d(23)340
532 y(e)o(xample,)17 b(31,)g(43,)g(55,)g(57,)g(61,)g(64,)423
592 y(72)340 653 y(e)o(xplicit)c(de\002nition,)e(23)382
713 y(for)h FO(W)m(A)r(M)q FP(,)j(99)257 774 y FS(put)p
350 774 V 18 w(variable)p FP(,)d(23)340 835 y(e)o(xample,)17
b(24,)g(31,)g(51,)g(55,)g(57,)g(61,)423 895 y(64,)c(72\22674)340
956 y(e)o(xplicit)g(de\002nition,)e(62)382 1017 y(for)h
FO(W)m(A)r(M)q FP(,)j(99)382 1077 y(for)c(a)i(temporary)e(v)o(ariable,)
h(23)257 1189 y(query)m(,)g(9)340 1250 y(compilation,)g(11,)h(22,)g(27)
340 1311 y(empty)m(,)g(25)257 1422 y(reference)340 1483
y(chain,)g(16,)g(63,)g(65)340 1544 y(chronological,)f(63)340
1605 y(dangling,)h(62,)f(63)340 1665 y(stack,)i(62,)e(63,)h(65,)g(67,)g
(68)257 1726 y(re)o(gister)f(allocation,)h(12,)g(54)257
1787 y(resolution)340 1848 y(\003at,)g(6,)g(25)340 1908
y(leftmost,)g(25,)f(33)340 1969 y(SLD,)h(5,)g(33)340
2030 y(top-do)o(wn,)f(33)257 2091 y FS(retry)p FP(,)h(79)340
2151 y(e)o(xplicit)g(de\002nition)382 2212 y(for)f FO(W)m(A)r(M)q
FP(,)j(110)257 2273 y FS(retry)p 410 2273 V 18 w(me)p
488 2273 V 17 w(else)p FP(,)e(39)340 2334 y(e)o(xample,)g(43,)g
(80\22682)340 2394 y(e)o(xplicit)g(de\002nition,)e(41)382
2455 y(for)h FO(W)m(A)r(M)q FP(,)j(108)257 2516 y(Robinson,)e(John)g
(Alan,)g(95)1139 289 y(Rosenzweig,)h(Dean,)f(83,)g(84,)f(86)1139
349 y(rule,)h(25)1222 410 y(binding,)g(64,)f(68,)h(69)1222
470 y(chain,)g(25,)g(57,)g(86)1222 531 y(compilation,)f(27)1222
591 y(deep,)h(25,)g(86)1139 652 y(Russinof)o(f,)g(Da)o(vid,)g(5)1139
760 y FS(S)g FP(re)o(gister)n(,)f(16)1139 821 y FS(set)p
1232 821 V 18 w(constant)p FP(,)g(48)1222 881 y(e)o(xample,)h(51)1222
942 y(e)o(xplicit)g(de\002nition,)f(49)1264 1002 y(for)h
FO(W)m(A)r(M)q FP(,)h(103)1139 1063 y FS(set)p 1232 1063
V 18 w(local)p 1400 1063 V 17 w(value)p FP(,)f(68)1222
1123 y(e)o(xplicit)g(de\002nition,)f(69)1264 1184 y(for)h
FO(W)m(A)r(M)q FP(,)h(103)1139 1244 y FS(set)p 1232 1244
V 18 w(value)p FP(,)e(13)1222 1305 y(e)o(xample,)h(14,)g(24,)g(51)1222
1365 y(e)o(xplicit)g(de\002nition,)f(14)1264 1426 y(for)h
FO(W)m(A)r(M)q FP(,)h(102)1139 1487 y FS(set)p 1232 1487
V 18 w(variable)p FP(,)e(13)1222 1547 y(e)o(xample,)h(14,)g(24,)g(51)
1222 1608 y(e)o(xplicit)g(de\002nition,)f(14)1264 1668
y(for)h FO(W)m(A)r(M)q FP(,)h(102)1139 1729 y FS(set)p
1232 1729 V 18 w(void)p FP(,)f(52)1222 1789 y(e)o(xplicit)g
(de\002nition,)f(53)1264 1850 y(for)h FO(W)m(A)r(M)q
FP(,)h(103)1139 1910 y(shallo)o(w)f(cut,)f(83,)h(84)1139
1971 y(signature,)g(91)1139 2031 y(stack,)h(28)1222 2092
y(frame,)f(28)1222 2153 y(global,)g(13)1222 2213 y(local,)g(28)1139
2274 y(structure,)g(9)1222 2334 y(cell,)g(10)1139 2395
y(substitution,)g(19,)g(91)1222 2455 y(application,)g(19,)f(94)1222
2516 y(composition,)h(19,)f(92)258 2640 y FN(P)o FL(A)q(G)r(E)h
FN(1)r(2)r(6)e FL(O)r(F)i FN(1)r(2)r(9)281 b(Reprinted)9
b(from)h(MIT)h(Press)56 b(Copyright)1532 2639 y(c)1520
2640 y FM(\015)10 b FN(Hassan)i(A)1734 2636 y(\250)1735
2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p eop
%%Page: 127 142
127 141 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 289 a FS(switch)p 254 289 15 2 v 17
w(on)p 331 289 V 18 w(constant)p FP(,)e(78)154 349 y(e)o(xample,)h(80,)
f(81)154 410 y(e)o(xplicit)g(de\002nition)195 470 y(for)h
FO(W)m(A)r(M)q FP(,)h(111)71 531 y FS(switch)p 254 531
V 17 w(on)p 331 531 V 18 w(structure)p FP(,)d(79)154
592 y(e)o(xample,)i(80,)f(81)154 652 y(e)o(xplicit)g(de\002nition)195
713 y(for)h FO(W)m(A)r(M)q FP(,)h(111)71 773 y FS(switch)p
254 773 V 17 w(on)p 331 773 V 18 w(term)p FP(,)e(78)154
834 y(e)o(xample,)h(80\22682)154 894 y(e)o(xplicit)f(de\002nition)195
955 y(for)h FO(W)m(A)r(M)q FP(,)h(110)71 1063 y(term)154
1123 y FK(L)188 1130 y FE(0)220 1123 y FP(program,)e(9)154
1184 y FK(L)188 1191 y FE(0)220 1184 y FP(query)m(,)g(9)154
1245 y(\002rst-order)n(,)f(9,)i(91)154 1305 y(representation,)f(10)71
1366 y FB(tidy)p 149 1366 V 17 w(tr)o(ail)h FP(operation,)f(85)71
1426 y FB(tidy)p 149 1426 V 17 w(tr)o(ail)h FP(operation,)f(115)71
1487 y FS(TR)g FP(re)o(gister)n(,)g(37)71 1547 y(trail,)g(36)154
1608 y(cleanup,)g(85)154 1668 y(pointer)n(,)g(37)154
1729 y(tamping,)g(85)154 1790 y(unwinding,)g(40)71 1850
y FB(tr)o(ail)g FP(operation,)g(114)71 1911 y(trailing)154
1971 y(unnecessary)m(,)h(62)154 2032 y(v)o(ariable,)f(37,)g(62)71
2092 y(trimming)154 2153 y(delayed,)g(73)154 2213 y(en)n(vironment,)j
(58,)h(59,)h(61,)f(64,)g(68,)237 2274 y(71\22674,)c(85)71
2334 y FS(trust)p FP(,)g(79)154 2395 y(e)o(xample,)h(80,)f(81)154
2455 y(e)o(xplicit)g(de\002nition)195 2516 y(for)h FO(W)m(A)r(M)q
FP(,)h(110)953 289 y FS(trust)p 1106 289 V 17 w(me)p
FP(,)f(39)1036 349 y(e)o(xample,)g(43,)f(80\22682)1036
410 y(e)o(xplicit)g(de\002nition,)g(42)1077 470 y(for)h
FO(W)m(A)r(M)q FP(,)h(109)953 531 y FS(try)p FP(,)e(79)1036
591 y(e)o(xample,)h(80,)f(81)1036 652 y(e)o(xplicit)g(de\002nition)1077
713 y(for)h FO(W)m(A)r(M)q FP(,)h(109)953 773 y FS(try)p
1046 773 V 17 w(me)p 1123 773 V 18 w(else)p FP(,)e(39)1036
834 y(e)o(xample,)h(43,)f(80\22682)1036 894 y(e)o(xplicit)g
(de\002nition)1077 955 y(for)g FK(M)1208 962 y FE(3)1227
955 y FP(,)h(41)1077 1015 y(for)g FO(W)m(A)r(M)q FP(,)h(108)953
1123 y(unbound)d(v)o(ariable,)i(10)953 1184 y(uni\002cation,)f(9,)g(92)
1036 1244 y(algorithm,)f(19,)i(93)953 1305 y FB(unify)f
FP(operation)1036 1365 y(for)f FK(M)1166 1372 y FE(0)1186
1365 y FP(,)i(20)1036 1426 y(for)f FO(W)m(A)r(M)q FP(,)j(116)953
1487 y FS(unify)p 1106 1487 V 17 w(constant)p FP(,)d(47)1036
1547 y(e)o(xample,)h(51)1036 1608 y(e)o(xplicit)f(de\002nition,)g(49)
1077 1668 y(for)h FO(W)m(A)r(M)q FP(,)h(105)953 1729
y FS(unify)p 1106 1729 V 17 w(local)p 1273 1729 V 17
w(value)p FP(,)f(68)1036 1789 y(e)o(xplicit)f(de\002nition,)g(69)1077
1850 y(for)h FO(W)m(A)r(M)q FP(,)h(104)953 1910 y FS(unify)p
1106 1910 V 17 w(value)p FP(,)e(16)1036 1971 y(e)o(xample,)h(16,)f(82)
1036 2031 y(e)o(xplicit)g(de\002nition,)g(18)1077 2092
y(for)h FO(W)m(A)r(M)q FP(,)h(104)953 2153 y FS(unify)p
1106 2153 V 17 w(variable)p FP(,)e(15)1036 2213 y(e)o(xample,)h(16,)f
(24,)h(51,)g(80\22682)1036 2274 y(e)o(xplicit)f(de\002nition,)g(18)1077
2334 y(for)h FO(W)m(A)r(M)q FP(,)h(104)953 2395 y FS(unify)p
1106 2395 V 17 w(void)p FP(,)f(52)1036 2455 y(e)o(xample,)g(53,)f(80)
1036 2516 y(e)o(xplicit)g(de\002nition,)g(53)71 2640
y FN(Copyright)260 2639 y(c)249 2640 y FM(\015)e FN(Hassan)i(A)463
2636 y(\250)464 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56
b FN(Reprinted)9 b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12
b FN(1)r(2)r(7)g FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Page: 128 143
128 142 bop 1291 131 a FN(W)n FL(A)r(R)r(R)r(E)r(N)r
FN(')r FL(S)13 b FN(A)r FL(B)r(S)r(T)r(R)r(A)q(C)r(T)h
FN(M)r FL(A)q(C)r(H)r(I)r(N)r(E)p 257 156 1619 2 v 382
289 a FP(for)e FO(W)m(A)r(M)q FP(,)j(105)257 350 y FB(unwind)p
407 350 15 2 v 18 w(tr)o(ail)e FP(operation,)f(114)257
461 y(v)o(an)h(Hentenryck,)f(P)o(ascal,)h(67)257 522
y(v)o(ariable,)f(9)340 582 y(anon)o(ymous,)h(47)382 643
y(instructions,)f(53)340 704 y(binding,)h(10,)f(16,)h(62)340
765 y(cell,)g(10)340 825 y(classi\002cation,)g(69)382
886 y(W)l(arren')m(s,)f(70)340 947 y(cut,)h(85)340 1008
y(global,)g(70)340 1068 y(globalizing,)f(67\22669,)h(71)340
1129 y(local,)g(28,)g(60,)g(70)340 1190 y(permanent,)g(27,)f(28,)h(69)
382 1250 y(discarding,)f(62,)h(64,)g(66\22668)382 1311
y(ordering,)f(63)340 1372 y(re)o(gister)n(,)h(11)340
1433 y(temporary)m(,)f(27,)h(69)340 1493 y(unsafe,)g(64)257
1605 y(W)-6 b(AM,)14 b(3)340 1666 y(clause)f(treatment,)f(89)340
1726 y(complete,)h(3,)g(6)340 1787 y(correctness,)g(5)340
1848 y(designer)n(,)g(4)340 1908 y(features,)g(4)340
1969 y(publication,)f(3)340 2030 y(simpli\002cation,)g(5)340
2091 y(techniques,)h(4)340 2151 y(uni\002cation,)f(89)340
2212 y(v)o(ariant,)g(4)257 2273 y(W)-6 b(AM)13 b(Binding)f(Rule,)h(63,)
g(64,)g(68,)f(69)257 2334 y(W)-6 b(AM)13 b(Principle,)f(45,)h(47,)f
(60,)h(79)257 2394 y(W)l(arren)340 2455 y(Abstract)g(Machine,)g(3)340
2516 y(Da)o(vid)g(H.)f(D.,)i(3,)f(45,)f(89,)h(90)1222
289 y(Da)o(vid)g(S.,)g(4)1139 390 y FS(X)g FP(re)o(gister)n(,)f(11)258
2640 y FN(P)o FL(A)q(G)r(E)h FN(1)r(2)r(8)e FL(O)r(F)i
FN(1)r(2)r(9)281 b(Reprinted)9 b(from)h(MIT)h(Press)56
b(Copyright)1532 2639 y(c)1520 2640 y FM(\015)10 b FN(Hassan)i(A)1734
2636 y(\250)1735 2640 y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)p
eop
%%Page: 129 144
129 143 bop 72 131 a FN(A)12 b(T)r FL(U)r(T)q(O)r(R)r(I)r(A)r(L)i
FN(R)r FL(E)r(C)r(O)r(N)r(S)r(T)r(R)q(U)r(C)r(T)r(I)r(O)r(N)p
71 156 1619 2 v 71 2640 a FN(Copyright)260 2639 y(c)249
2640 y FM(\015)c FN(Hassan)i(A)463 2636 y(\250)464 2640
y FL(I)r(T)o FN(-)r(K)r FL(A)q(C)r(I)56 b FN(Reprinted)9
b(from)i(MIT)f(Press)282 b(P)o FL(A)q(G)r(E)12 b FN(1)r(2)r(9)g
FL(O)r(F)h FN(1)r(2)r(9)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
